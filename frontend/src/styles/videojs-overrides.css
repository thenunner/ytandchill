/* iOS-specific fixes for video.js controls */
@supports (-webkit-touch-callout: none) {
  /* Force controls to be visible and clickable on iOS */
  .video-js .vjs-control-bar {
    display: flex !important;
    pointer-events: auto !important;
    z-index: 100 !important;
  }

  /* Keep controls visible when user is active (mouse/touch interaction) */
  .video-js.vjs-user-active .vjs-control-bar {
    opacity: 1 !important;
  }

  /* Hide loading spinner after video loads - but ONLY the spinner, not controls */
  .video-js.vjs-has-started:not(.vjs-waiting) .vjs-loading-spinner {
    display: none !important;
  }

  /* Ensure video element doesn't block controls */
  .video-js .vjs-tech {
    pointer-events: none !important;
  }
}

/* ===== VIDEO.JS CUSTOM THEMING ===== */
/* Override video.js default blue with our accent color */
.video-js {
  font-family: inherit;
}

/* Hide big play button - use control bar instead */
.video-js .vjs-big-play-button {
  display: none !important;
}

/* Control bar background */
.video-js .vjs-control-bar {
  background-color: hsla(var(--bg-secondary) / 0.9);
  backdrop-filter: blur(8px);
}

/* Keep controls visible on load (before video starts) */
.video-js:not(.vjs-has-started) .vjs-control-bar {
  opacity: 1 !important;
  display: flex !important;
}

/* Hide controls when user is inactive (after video has started) */
.video-js.vjs-has-started.vjs-user-inactive .vjs-control-bar {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

/* Show controls when user is active */
.video-js.vjs-has-started.vjs-user-active .vjs-control-bar {
  opacity: 1;
  pointer-events: auto;
  transition: opacity 0.3s ease;
}

/* Progress bar */
.video-js .vjs-play-progress,
.video-js .vjs-volume-level {
  background-color: hsl(var(--accent));
}

.video-js .vjs-load-progress {
  background-color: hsla(var(--accent) / 0.3);
}

.video-js .vjs-progress-holder {
  background-color: hsla(var(--border) / 0.5);
}

/* Buttons */
.video-js .vjs-button > .vjs-icon-placeholder:before {
  line-height: 1.9em;
}

.video-js .vjs-button:hover {
  color: hsl(var(--accent-text));
}

/* Fix focus outline being cut off at bottom of control bar */
.video-js .vjs-button:focus {
  outline: 2px solid hsl(var(--accent));
  outline-offset: -2px; /* Pull outline inside the button */
}

/* Volume slider */
.video-js .vjs-volume-panel-horizontal:hover {
  width: 8em;
}

/* Time display */
.video-js .vjs-current-time,
.video-js .vjs-time-divider,
.video-js .vjs-duration {
  color: hsl(var(--text-primary));
  font-size: 1em;
  line-height: 3em;
}

/* Menu */
.video-js .vjs-menu-button .vjs-menu .vjs-menu-content {
  background-color: hsl(var(--bg-secondary));
  max-height: 20em;
}

.video-js .vjs-menu li {
  color: hsl(var(--text-primary));
  padding: 0.5em 1em;
}

.video-js .vjs-menu li:hover,
.video-js .vjs-menu li.vjs-selected {
  background-color: hsl(var(--bg-hover));
  color: hsl(var(--accent-text));
}

/* Loading spinner */
.video-js .vjs-loading-spinner {
  border-color: hsla(var(--accent) / 0.8);
}

/* Error display */
.video-js .vjs-error-display {
  background-color: hsla(var(--bg-secondary) / 0.9);
}

.video-js .vjs-error-display:before {
  color: hsl(var(--accent));
}

/* ===== VIDEO SIZING - CONTAINER CONTROLS LAYOUT ===== */
/*
 * The wrapper div (.player-wrapper) has aspect-ratio: 16/9 and max-height constraint.
 * Video.js is absolutely positioned to fill the wrapper exactly.
 * The actual video uses object-fit: contain for letterboxing non-16:9 content.
 */

/* Player wrapper - the container that controls layout */
.player-wrapper {
  position: relative;
  width: 100%;
  max-width: 1920px;                        /* Hard upper limit */
  aspect-ratio: 16 / 9;
  max-height: calc(100vh - 120px);
  margin: 0 auto;                           /* Center when constrained */
  background: black;
  overflow: hidden;
  border-radius: 0.75rem;
}

/* Video.js player - absolutely positioned to fill wrapper */
.video-js {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
}

/* The actual video element fits within, letterboxing if needed */
.video-js .vjs-tech {
  object-fit: contain !important;
  width: 100% !important;
  height: 100% !important;
}

/* Fullscreen mode - remove constraints */
.video-js.vjs-fullscreen {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  max-width: none !important;
  max-height: none !important;
}

.video-js.vjs-fullscreen .vjs-tech {
  object-fit: contain !important;
}

/* Theater mode button styling */
.video-js .vjs-theater-button {
  display: flex !important;
  align-items: center;
  justify-content: center;
}

/* Ensure the theater button icon container is centered */
.video-js .vjs-theater-button .vjs-icon-placeholder {
  display: flex !important;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

/* Hide the default :before pseudo-element for theater button (we use SVG) */
.video-js .vjs-theater-button .vjs-icon-placeholder:before {
  display: none;
}

/* Theater button SVG sizing */
.video-js .vjs-theater-button svg {
  width: 20px;
  height: 20px;
}

/* Show expand icon by default, hide contract icon */
.video-js .vjs-theater-button .theater-icon-expand {
  display: block;
}

.video-js .vjs-theater-button .theater-icon-contract {
  display: none;
}

/* When active: hide expand icon, show contract icon */
.video-js .vjs-theater-button.vjs-theater-mode-active .theater-icon-expand {
  display: none;
}

.video-js .vjs-theater-button.vjs-theater-mode-active .theater-icon-contract {
  display: block;
}

/* ===== UNIFIED CONTROL BAR SIZING ===== */
/*
 * This section creates a consistent, uniform control bar where all elements
 * share the same height and are perfectly vertically centered.
 *
 * Key values:
 * - Desktop: 44px height, 20px icons
 * - Mobile:  40px height, 18px icons
 */

/* ---------------------------------------------
 * CONTROL BAR CONTAINER
 * Sets the foundation - fixed height and flexbox centering
 * --------------------------------------------- */
.video-js .vjs-control-bar {
  height: 44px;              /* Fixed height for the entire control bar */
  display: flex;             /* Enable flexbox layout */
  align-items: center;       /* Vertically center all children */
  padding: 0 8px;            /* Side padding for breathing room */
  font-size: 14px;           /* Base font size for proportional elements */
}

/* ---------------------------------------------
 * ALL CONTROLS (base class)
 * Every control inherits this uniform height and centering
 * --------------------------------------------- */
.video-js .vjs-control {
  height: 44px;              /* Match control bar height exactly */
  display: flex;             /* Flexbox for internal centering */
  align-items: center;       /* Vertically center content */
  justify-content: center;   /* Horizontally center content */
}

/* ---------------------------------------------
 * BUTTONS
 * Play, pause, fullscreen, volume, +10/-10, theater, etc.
 * --------------------------------------------- */
.video-js .vjs-button {
  width: 44px;               /* Square buttons match height */
  height: 44px;              /* Uniform height */
  margin: 0 2px;             /* Small gap between buttons */
  line-height: 1;            /* Remove extra line-height spacing */
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ---------------------------------------------
 * FONT ICONS (Video.js built-in icons)
 * Play, pause, fullscreen, volume icons use font icons
 * --------------------------------------------- */
.video-js .vjs-icon-placeholder:before {
  font-size: 20px;           /* Uniform icon size */
  line-height: 44px;         /* Center within button height */
}

/* Remove default line-height that causes misalignment */
.video-js .vjs-button > .vjs-icon-placeholder:before {
  line-height: 44px;
}

/* ---------------------------------------------
 * SVG ICONS (custom buttons: theater, seek +10/-10)
 * These use inline SVGs instead of font icons
 * --------------------------------------------- */
.video-js .vjs-theater-button .vjs-icon-placeholder,
.video-js .vjs-seek-backward-10 .vjs-icon-placeholder,
.video-js .vjs-seek-forward-10 .vjs-icon-placeholder {
  display: flex !important;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

/* Hide the :before pseudo-element for SVG buttons */
.video-js .vjs-theater-button .vjs-icon-placeholder:before,
.video-js .vjs-seek-backward-10 .vjs-icon-placeholder:before,
.video-js .vjs-seek-forward-10 .vjs-icon-placeholder:before {
  display: none;
}

/* SVG sizing - match font icon size */
.video-js .vjs-theater-button svg,
.video-js .vjs-seek-backward-10 svg,
.video-js .vjs-seek-forward-10 svg {
  width: 20px;               /* Same as font icons */
  height: 20px;
  display: block;
}

/* ---------------------------------------------
 * PROGRESS BAR
 * The seekable timeline - needs to be vertically centered
 * --------------------------------------------- */
.video-js .vjs-progress-control {
  height: 44px;              /* Match control bar height */
  display: flex;
  align-items: center;       /* Center the progress bar vertically */
}

.video-js .vjs-slider {
  margin: 0;                 /* Remove default margins */
}

.video-js .vjs-progress-holder {
  height: 6px;               /* Thin progress bar track */
  border-radius: 3px;        /* Rounded ends */
}

/* Scrubber handle positioning */
.video-js .vjs-play-progress:before {
  top: -4px;                 /* Position handle above track center */
}

.video-js .vjs-slider-handle {
  top: 50%;
  transform: translateY(-50%);
}

/* ---------------------------------------------
 * VOLUME CONTROL
 * Volume button + slider
 * --------------------------------------------- */
.video-js .vjs-volume-bar {
  height: 6px;               /* Match progress bar thickness */
  border-radius: 3px;
}

.video-js .vjs-volume-panel {
  display: flex;
  align-items: center;
}

/* ---------------------------------------------
 * TIME DISPLAYS
 * Current time, duration, and divider
 * --------------------------------------------- */
.video-js .vjs-current-time,
.video-js .vjs-time-divider,
.video-js .vjs-duration {
  height: 44px;              /* Match control bar height */
  display: flex;
  align-items: center;       /* Vertically center text */
  font-size: 13px;           /* Readable but not too large */
  padding: 0 4px;            /* Small horizontal padding */
  color: hsl(var(--text-primary));
}

/* ---------------------------------------------
 * MOBILE / TABLET ADJUSTMENTS
 * Slightly smaller on smaller screens
 * --------------------------------------------- */
@media (max-width: 1024px) {
  /* Control bar - smaller height */
  .video-js .vjs-control-bar {
    height: 40px;
    padding: 0 4px;
    font-size: 13px;
    display: flex !important;  /* Ensure flex on mobile */
    z-index: 100 !important;   /* Above other elements */
  }

  /* All controls - match smaller height */
  .video-js .vjs-control {
    height: 40px;
  }

  /* Buttons - smaller on mobile */
  .video-js .vjs-button {
    width: 36px;
    height: 40px;
    margin: 0 1px;
  }

  /* Font icons - smaller */
  .video-js .vjs-icon-placeholder:before {
    font-size: 18px;
    line-height: 40px;
  }

  .video-js .vjs-button > .vjs-icon-placeholder:before {
    line-height: 40px;
  }

  /* SVG icons - match mobile font icon size */
  .video-js .vjs-theater-button svg,
  .video-js .vjs-seek-backward-10 svg,
  .video-js .vjs-seek-forward-10 svg {
    width: 18px;
    height: 18px;
  }

  /* Progress control - smaller */
  .video-js .vjs-progress-control {
    height: 40px;
  }

  .video-js .vjs-progress-holder {
    height: 5px;
  }

  .video-js .vjs-play-progress:before {
    top: -4px;
  }

  /* Time displays - smaller */
  .video-js .vjs-current-time,
  .video-js .vjs-time-divider,
  .video-js .vjs-duration {
    height: 40px;
    font-size: 12px;
    padding: 0 3px;
  }

}

/* ---------------------------------------------
 * PLAYBACK RATE MENU STYLING
 * Touch-friendly menu for speed control
 * --------------------------------------------- */

/* Playback rate button */
.video-js .vjs-playback-rate .vjs-playback-rate-value {
  font-size: 13px;
  line-height: 44px;
  font-weight: 600;
}

/* Playback rate menu */
.video-js .vjs-playback-rate .vjs-menu {
  width: auto;
  min-width: 60px;
}

.video-js .vjs-playback-rate .vjs-menu .vjs-menu-content {
  bottom: 44px;  /* Position above control bar */
  max-height: none;
}

/* Menu items - ensure 44px touch targets */
.video-js .vjs-playback-rate .vjs-menu li {
  min-height: 44px;
  line-height: 44px;
  padding: 0 16px;
  font-size: 14px;
  text-align: center;
}

/* Selected item highlight */
.video-js .vjs-playback-rate .vjs-menu li.vjs-selected {
  background-color: hsl(var(--accent));
  color: white;
}

/* Mobile playback rate adjustments */
@media (max-width: 1024px) {
  .video-js .vjs-playback-rate .vjs-playback-rate-value {
    font-size: 12px;
    line-height: 40px;
  }

  .video-js .vjs-playback-rate .vjs-menu .vjs-menu-content {
    bottom: 40px;
  }

  /* Ensure 44px touch targets on mobile */
  .video-js .vjs-playback-rate .vjs-menu li {
    min-height: 44px;
    line-height: 44px;
    padding: 0 20px;
  }
}
