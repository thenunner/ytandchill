/* iOS - use video.js defaults, minimal overrides */

/* ===== VIDEO.JS CUSTOM THEMING ===== */
/* Override video.js default blue with our accent color */
.video-js {
  font-family: inherit;
}

/* Ensure control text (accessibility labels) are hidden visually */
.video-js .vjs-control-text {
  border: 0 !important;
  clip: rect(0 0 0 0) !important;
  height: 1px !important;
  overflow: hidden !important;
  padding: 0 !important;
  position: absolute !important;
  width: 1px !important;
}

/* Hide text track display and settings buttons (can cause "Show Text?" display issues) */
.video-js .vjs-text-track-display,
.video-js .vjs-text-track-settings {
  /* Keep functional but ensure no stray text shows */
}

.video-js .vjs-subs-caps-button .vjs-control-text,
.video-js .vjs-captions-button .vjs-control-text,
.video-js .vjs-subtitles-button .vjs-control-text {
  display: none !important;
}

/* Hide big play button - use control bar instead */
.video-js .vjs-big-play-button {
  display: none !important;
}

/* Control bar background */
.video-js .vjs-control-bar {
  background-color: hsla(var(--bg-secondary) / 0.9);
  backdrop-filter: blur(8px);
}

/* Keep controls visible on load (before video starts) */
.video-js:not(.vjs-has-started) .vjs-control-bar {
  opacity: 1 !important;
  display: flex !important;
}

/* Control visibility is handled by video.js and videojs-mobile-ui plugin */

/* Progress bar */
.video-js .vjs-play-progress,
.video-js .vjs-volume-level {
  background-color: hsl(var(--accent));
}

.video-js .vjs-load-progress {
  background-color: hsla(var(--accent) / 0.3);
}

.video-js .vjs-progress-holder {
  background-color: hsla(var(--border) / 0.5);
}

/* Buttons */
.video-js .vjs-button > .vjs-icon-placeholder:before {
  line-height: 1.9em;
}

.video-js .vjs-button:hover {
  color: hsl(var(--accent-text));
}

/* Fix focus outline being cut off at bottom of control bar */
.video-js .vjs-button:focus {
  outline: 2px solid hsl(var(--accent));
  outline-offset: -2px; /* Pull outline inside the button */
}

/* Volume slider */
.video-js .vjs-volume-panel-horizontal:hover {
  width: 8em;
}

/* Time display (remaining time only) */
.video-js .vjs-remaining-time {
  color: hsl(var(--text-primary));
  font-size: 1em;
  line-height: 3em;
}

/* Menu */
.video-js .vjs-menu-button .vjs-menu .vjs-menu-content {
  background-color: hsl(var(--bg-secondary));
  max-height: 20em;
}

.video-js .vjs-menu li {
  color: hsl(var(--text-primary));
  padding: 0.5em 1em;
}

.video-js .vjs-menu li:hover,
.video-js .vjs-menu li.vjs-selected {
  background-color: hsl(var(--bg-hover));
  color: hsl(var(--accent-text));
}

/* Loading spinner */
.video-js .vjs-loading-spinner {
  border-color: hsla(var(--accent) / 0.8);
}

/* Error display */
.video-js .vjs-error-display {
  background-color: hsla(var(--bg-secondary) / 0.9);
}

.video-js .vjs-error-display:before {
  color: hsl(var(--accent));
}

/* ===== VIDEO SIZING - CONTAINER CONTROLS LAYOUT ===== */
/*
 * The wrapper div (.player-wrapper) has aspect-ratio: 16/9 and max-height constraint.
 * Video.js is absolutely positioned to fill the wrapper exactly.
 * The actual video uses object-fit: contain for letterboxing non-16:9 content.
 */

/* Player wrapper - the container that controls layout */
.player-wrapper {
  position: relative;
  width: 100%;
  /* max-width must account for max-height at 16:9 ratio */
  max-width: min(1920px, calc((100vh - 120px) * 16 / 9));
  aspect-ratio: 16 / 9;
  max-height: calc(100vh - 120px);
  background: black;
  overflow: hidden;
  border-radius: 0.75rem;
}

/* ===== MOBILE PLAYER WRAPPER ===== */
/*
 * Mobile uses native HTML5 video element (not Video.js)
 * This provides reliable fullscreen and native performance
 * - aspect-ratio prevents layout shift before metadata loads
 * - Native browser controls handle fullscreen properly
 */
.player-wrapper-mobile {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;  /* Reserves space before video metadata loads */
  background: #000;
  overflow: hidden;
}

/* Native video element styling */
.player-wrapper-mobile video {
  width: 100%;
  height: 100%;
  object-fit: contain;
  aspect-ratio: 16 / 9;  /* Belt AND suspenders for layout stability */
  background: #000;
}

/* ===== NATIVE HTML5 VIDEO CONTROLS STYLING (WebKit) ===== */
/* These pseudo-elements only work on WebKit browsers (iOS Safari, Chrome) */

/* Make the entire control panel larger */
.player-wrapper-mobile video::-webkit-media-controls-panel {
  padding: 8px 4px;
  min-height: 48px;
}

/* Larger play button */
.player-wrapper-mobile video::-webkit-media-controls-play-button {
  width: 44px;
  height: 44px;
  min-width: 44px;
}

/* Larger timeline/scrubber */
.player-wrapper-mobile video::-webkit-media-controls-timeline {
  height: 8px;
  padding: 16px 0;
}

/* Larger fullscreen button */
.player-wrapper-mobile video::-webkit-media-controls-fullscreen-button {
  width: 44px;
  height: 44px;
  min-width: 44px;
}

/* Larger mute button */
.player-wrapper-mobile video::-webkit-media-controls-mute-button {
  width: 44px;
  height: 44px;
  min-width: 44px;
}

/* Time display - larger font */
.player-wrapper-mobile video::-webkit-media-controls-time-remaining-display,
.player-wrapper-mobile video::-webkit-media-controls-current-time-display {
  font-size: 14px;
  min-width: 50px;
}

/* Portrait: micro buffer prevents iOS repaint issues */
@media (orientation: portrait) {
  .player-wrapper-mobile {
    width: calc(100% - 2px);
    margin-left: 1px;
    margin-right: 1px;
  }
}

/* Landscape + mobile only: Responsive Window - full viewport video */
/* Native video handles fullscreen natively, this is for non-fullscreen landscape */
@media (orientation: landscape) and (max-width: 767px) {
  /* Hide video info section */
  .player-video-info {
    display: none !important;
  }

  /* Hide mobile bottom navigation */
  .MobileBottomNav {
    display: none !important;
  }

  /* Fullscreen-like wrapper for landscape orientation */
  .player-wrapper-mobile {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100dvh;
    max-height: none;
    aspect-ratio: auto;
    margin: 0;
    z-index: 50;
    border-radius: 0;
  }
}

/* Video.js player - absolutely positioned to fill wrapper */
.video-js {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
}

/* Both container and video element fill 100% */
.video-js,
.video-js video {
  width: 100% !important;
  height: 100% !important;
}

/* Video element letterboxes non-16:9 content */
.video-js video {
  object-fit: contain;
  /* Prevent video from exceeding container bounds */
  max-width: 100%;
  max-height: 100%;
}

/* Fullscreen mode - remove constraints */
.video-js.vjs-fullscreen {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  max-width: none !important;
  max-height: none !important;
}

.video-js.vjs-fullscreen .vjs-tech {
  object-fit: contain !important;
}

/* Theater mode button styling */
.video-js .vjs-theater-button {
  display: flex !important;
  align-items: center;
  justify-content: center;
}

/* Ensure the theater button icon container is centered */
.video-js .vjs-theater-button .vjs-icon-placeholder {
  display: flex !important;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

/* Hide the default :before pseudo-element for theater button (we use SVG) */
.video-js .vjs-theater-button .vjs-icon-placeholder:before {
  display: none;
}

/* Theater button SVG sizing */
.video-js .vjs-theater-button svg {
  width: 20px;
  height: 20px;
}

/* Show expand icon by default, hide contract icon */
.video-js .vjs-theater-button .theater-icon-expand {
  display: block;
}

.video-js .vjs-theater-button .theater-icon-contract {
  display: none;
}

/* When active: hide expand icon, show contract icon */
.video-js .vjs-theater-button.vjs-theater-mode-active .theater-icon-expand {
  display: none;
}

.video-js .vjs-theater-button.vjs-theater-mode-active .theater-icon-contract {
  display: block;
}


/* ===== UNIFIED CONTROL BAR SIZING ===== */
/*
 * This section creates a consistent, uniform control bar where all elements
 * share the same height and are perfectly vertically centered.
 *
 * Key values:
 * - Desktop: 44px height, 20px icons
 * - Mobile:  40px height, 18px icons
 */

/* ---------------------------------------------
 * CONTROL BAR CONTAINER
 * Sets the foundation - fixed height and flexbox centering
 * --------------------------------------------- */
.video-js .vjs-control-bar {
  height: 44px;              /* Fixed height for the entire control bar */
  display: flex;             /* Enable flexbox layout */
  align-items: center;       /* Vertically center all children */
  padding: 0 8px;            /* Side padding for breathing room */
  font-size: 14px;           /* Base font size for proportional elements */
}

/* ---------------------------------------------
 * ALL CONTROLS (base class)
 * Every control inherits this uniform height and centering
 * --------------------------------------------- */
.video-js .vjs-control {
  height: 44px;              /* Match control bar height exactly */
  display: flex;             /* Flexbox for internal centering */
  align-items: center;       /* Vertically center content */
  justify-content: center;   /* Horizontally center content */
}

/* ---------------------------------------------
 * BUTTONS
 * Play, pause, fullscreen, volume, +10/-10, theater, etc.
 * --------------------------------------------- */
.video-js .vjs-button {
  width: 44px;               /* Square buttons match height */
  height: 44px;              /* Uniform height */
  margin: 0 2px;             /* Small gap between buttons */
  line-height: 1;            /* Remove extra line-height spacing */
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ---------------------------------------------
 * FONT ICONS (Video.js built-in icons)
 * Play, pause, fullscreen, volume icons use font icons
 * --------------------------------------------- */
.video-js .vjs-icon-placeholder:before {
  font-size: 20px;           /* Uniform icon size */
  line-height: 44px;         /* Center within button height */
}

/* Remove default line-height that causes misalignment */
.video-js .vjs-button > .vjs-icon-placeholder:before {
  line-height: 44px;
}

/* ---------------------------------------------
 * SVG ICONS (custom buttons: theater, seek +10/-10)
 * These use inline SVGs instead of font icons
 * --------------------------------------------- */
.video-js .vjs-theater-button .vjs-icon-placeholder,
.video-js .vjs-seek-backward-10 .vjs-icon-placeholder,
.video-js .vjs-seek-forward-10 .vjs-icon-placeholder {
  display: flex !important;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

/* Hide the :before pseudo-element for SVG buttons */
.video-js .vjs-theater-button .vjs-icon-placeholder:before,
.video-js .vjs-seek-backward-10 .vjs-icon-placeholder:before,
.video-js .vjs-seek-forward-10 .vjs-icon-placeholder:before {
  display: none;
}

/* SVG sizing - match font icon size */
.video-js .vjs-theater-button svg,
.video-js .vjs-seek-backward-10 svg,
.video-js .vjs-seek-forward-10 svg {
  width: 20px;               /* Same as font icons */
  height: 20px;
  display: block;
}

/* ---------------------------------------------
 * PROGRESS BAR
 * The seekable timeline - needs to be vertically centered
 * --------------------------------------------- */
.video-js .vjs-progress-control {
  height: 44px;              /* Match control bar height */
  display: flex;
  align-items: center;       /* Center the progress bar vertically */
}

.video-js .vjs-slider {
  margin: 0;                 /* Remove default margins */
}

.video-js .vjs-progress-holder {
  height: 6px;               /* Thin progress bar track */
  border-radius: 3px;        /* Rounded ends */
}

/* Scrubber handle positioning */
.video-js .vjs-play-progress:before {
  top: -4px;                 /* Position handle above track center */
}

.video-js .vjs-slider-handle {
  top: 50%;
  transform: translateY(-50%);
}

/* ---------------------------------------------
 * VOLUME CONTROL
 * Volume button + slider
 * --------------------------------------------- */
.video-js .vjs-volume-bar {
  height: 6px;               /* Match progress bar thickness */
  border-radius: 3px;
}

.video-js .vjs-volume-panel {
  display: flex;
  align-items: center;
}

/* ---------------------------------------------
 * TIME DISPLAY (Remaining time only)
 * Shows -x:xx:xx format
 * --------------------------------------------- */
.video-js .vjs-remaining-time {
  height: 44px;              /* Match control bar height */
  display: flex;
  align-items: center;       /* Vertically center text */
  font-size: 13px;           /* Readable but not too large */
  padding: 0 4px;            /* Small horizontal padding */
  color: hsl(var(--text-primary));
}

/* ---------------------------------------------
 * MOBILE / TABLET ADJUSTMENTS
 * Slightly smaller on smaller screens
 * --------------------------------------------- */
@media (max-width: 1024px) {
  /* Control bar - smaller height */
  .video-js .vjs-control-bar {
    height: 40px;
    padding: 0 4px;
    font-size: 13px;
    display: flex !important;  /* Ensure flex on mobile */
    z-index: 100 !important;   /* Above other elements */
  }

  /* All controls - match smaller height */
  .video-js .vjs-control {
    height: 40px;
  }

  /* Buttons - smaller on mobile */
  .video-js .vjs-button {
    width: 36px;
    height: 40px;
    margin: 0 1px;
  }

  /* Font icons - smaller */
  .video-js .vjs-icon-placeholder:before {
    font-size: 18px;
    line-height: 40px;
  }

  .video-js .vjs-button > .vjs-icon-placeholder:before {
    line-height: 40px;
  }

  /* SVG icons - match mobile font icon size */
  .video-js .vjs-theater-button svg,
  .video-js .vjs-seek-backward-10 svg,
  .video-js .vjs-seek-forward-10 svg {
    width: 18px;
    height: 18px;
  }

  /* Progress control - smaller */
  .video-js .vjs-progress-control {
    height: 40px;
    margin: 0 4px;
  }

  /* Seekbar track - lighter color for visibility */
  .video-js .vjs-progress-holder {
    height: 5px;
    background-color: hsla(var(--text-primary) / 0.3);
  }

  .video-js .vjs-play-progress:before {
    top: -4px;
  }

  /* Time display - smaller on mobile */
  .video-js .vjs-remaining-time {
    height: 40px;
    font-size: 12px;
    padding: 0 3px;
  }

  /* Time display group - compact spacing (0:00/0:00:00 style) */
  .video-js .vjs-current-time,
  .video-js .vjs-duration {
    padding: 0 2px;
    font-size: 12px;
  }

  .video-js .vjs-time-divider {
    padding: 0 1px;
    min-width: auto;
    font-size: 12px;
    display: flex;
    align-items: center;
    color: hsl(var(--text-primary));
  }

  /* Tighter spacing for left-side controls to give seekbar more room */
  .video-js .vjs-play-toggle,
  .video-js .vjs-seek-forward-10 {
    margin: 0;
  }

  .video-js .vjs-volume-panel {
    margin: 0 2px 0 0;
  }

}

/* ---------------------------------------------
 * PLAYBACK RATE MENU STYLING
 * Touch-friendly menu for speed control
 * --------------------------------------------- */

/* Playback rate button - ensure only speed value is shown */
.video-js .vjs-playback-rate {
  width: auto !important;
  min-width: 44px;
}

.video-js .vjs-playback-rate .vjs-playback-rate-value {
  font-size: 13px;
  line-height: 44px;
  font-weight: 600;
  display: block !important;
}

/* Hide any control text that might be showing */
.video-js .vjs-playback-rate .vjs-control-text {
  display: none !important;
}

/* Playback rate menu */
.video-js .vjs-playback-rate .vjs-menu {
  width: auto;
  min-width: 60px;
}

.video-js .vjs-playback-rate .vjs-menu .vjs-menu-content {
  bottom: 44px;  /* Position above control bar */
  max-height: none;
}

/* Menu items - ensure 44px touch targets */
.video-js .vjs-playback-rate .vjs-menu li {
  min-height: 44px;
  line-height: 44px;
  padding: 0 16px;
  font-size: 14px;
  text-align: center;
}

/* Selected item highlight */
.video-js .vjs-playback-rate .vjs-menu li.vjs-selected {
  background-color: hsl(var(--accent));
  color: white;
}

/* Mobile playback rate adjustments */
@media (max-width: 1024px) {
  .video-js .vjs-playback-rate .vjs-playback-rate-value {
    font-size: 12px;
    line-height: 40px;
  }

  .video-js .vjs-playback-rate .vjs-menu .vjs-menu-content {
    bottom: 40px;
  }

  /* Ensure 44px touch targets on mobile */
  .video-js .vjs-playback-rate .vjs-menu li {
    min-height: 44px;
    line-height: 44px;
    padding: 0 20px;
  }
}

/* Mobile touch handling is provided by videojs-mobile-ui plugin */
