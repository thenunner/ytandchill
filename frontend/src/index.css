@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== THEME SYSTEM ===== */
/* Default theme (Dark Mode) */
:root,
.theme-kernel {
  /* Backgrounds */
  --bg-primary: 0 0% 0%;           /* #000000 - Pure black */
  --bg-secondary: 220 10% 8%;      /* #14161a - Card backgrounds */
  --bg-tertiary: 220 6% 25%;       /* #3a3d44 - Button backgrounds */
  --bg-hover: 220 6% 37%;          /* #5a5f6a - Hover states (more visible) */

  /* Borders */
  --border: 220 7% 17%;            /* #2a2d32 */
  --border-light: 220 8% 33%;      /* #4d5260 - Distinct from bg-tertiary */

  /* Text */
  --text-primary: 230 10% 91%;     /* #e6e8f0 */
  --text-secondary: 228 14% 66%;   /* #9ca3ba */
  --text-muted: 220 12% 60%;       /* #8b92a6 - Improved contrast */

  /* Accent */
  --accent: 210 60% 52%;           /* Blue - for buttons/backgrounds */
  --accent-hover: 210 65% 62%;     /* Lighter blue on hover */
  --accent-text: 210 65% 65%;      /* Brighter blue for text readability */

  /* Scrollbar */
  --scrollbar-track: 220 10% 8%;   /* Same as bg-secondary */
  --scrollbar-thumb: 220 6% 25%;   /* Same as bg-tertiary */
  --scrollbar-thumb-hover: 220 6% 37%; /* Same as bg-hover */

  /* Plyr player */
  --plyr-main: 210 60% 52%;        /* Same as accent */
}

/* Fatal Red Theme */
.theme-fatal {
  /* Backgrounds */
  --bg-primary: 0 8% 7%;           /* Slightly red-tinted black */
  --bg-secondary: 0 12% 10%;       /* Red-tinted dark gray */
  --bg-tertiary: 0 15% 13%;        /* Red-tinted elevated */
  --bg-hover: 0 18% 25%;           /* Red-tinted hover */

  /* Borders */
  --border: 0 20% 24%;             /* Red-tinted borders - improved visibility */
  --border-light: 0 22% 32%;       /* Red-tinted light borders - distinct from tertiary */

  /* Text */
  --text-primary: 230 10% 91%;     /* Light gray */
  --text-secondary: 228 14% 66%;   /* Medium gray */
  --text-muted: 220 8% 62%;        /* Improved contrast for muted text */

  /* Accent - YouTube Red */
  --accent: 0 100% 45%;            /* Darker red for buttons/backgrounds */
  --accent-hover: 0 100% 55%;      /* Lighter red on hover */
  --accent-text: 0 100% 60%;       /* Brighter red for text readability */

  /* Scrollbar */
  --scrollbar-track: 0 8% 10%;
  --scrollbar-thumb: 0 20% 40%;    /* Red-tinted thumb */
  --scrollbar-thumb-hover: 0 25% 50%;

  /* Plyr player */
  --plyr-main: 0 100% 45%;         /* Same as accent */
}

/* Subnet Deep Blue Theme */
.theme-subnet {
  /* Backgrounds */
  --bg-primary: 220 50% 5%;        /* Very deep blue-gray */
  --bg-secondary: 220 45% 8%;      /* Slightly lighter overcast */
  --bg-tertiary: 220 40% 11%;      /* Elevated overcast */
  --bg-hover: 220 30% 20%;         /* Overcast-tinted hover */

  /* Borders */
  --border: 220 35% 16%;           /* Overcast-tinted borders - improved visibility */
  --border-light: 220 30% 24%;     /* Overcast-tinted light borders - distinct */

  /* Text */
  --text-primary: 230 10% 91%;     /* Light gray */
  --text-secondary: 228 14% 70%;   /* Improved contrast */
  --text-muted: 220 10% 58%;       /* Improved muted text contrast */

  /* Accent - Muted Blue */
  --accent: 220 55% 50%;           /* Blue - for buttons/backgrounds */
  --accent-hover: 220 55% 60%;     /* Lighter on hover */
  --accent-text: 220 60% 65%;      /* Brighter blue for text readability */

  /* Scrollbar */
  --scrollbar-track: 220 45% 8%;
  --scrollbar-thumb: 220 50% 35%;  /* Overcast thumb */
  --scrollbar-thumb-hover: 220 50% 45%;

  /* Plyr player */
  --plyr-main: 220 55% 50%;        /* Same as accent */
}

/* Archive Brown Theme */
.theme-archive {
  /* Backgrounds */
  --bg-primary: 25 30% 6%;         /* Very deep bark brown */
  --bg-secondary: 25 28% 9%;       /* Natural dark brown for cards */
  --bg-tertiary: 25 26% 12%;       /* Slightly lifted brown */
  --bg-hover: 25 22% 22%;          /* Muted brown hover - more visible */

  /* Borders */
  --border: 25 24% 18%;            /* Brown borders - improved visibility */
  --border-light: 25 20% 24%;      /* Brown light borders - distinct */

  /* Text */
  --text-primary: 230 10% 91%;     /* Light gray */
  --text-secondary: 228 14% 70%;   /* Improved contrast */
  --text-muted: 220 10% 58%;       /* Improved muted text contrast */

  /* Accent - Sage Green */
  --accent: 95 35% 50%;            /* Sage - for buttons/backgrounds */
  --accent-hover: 95 38% 60%;      /* Brighter sage hover */
  --accent-text: 95 45% 58%;       /* Brighter sage for text readability */

  /* Scrollbar */
  --scrollbar-track: 25 28% 9%;
  --scrollbar-thumb: 95 22% 35%;   /* Sage thumb */
  --scrollbar-thumb-hover: 95 25% 45%;

  /* Plyr player */
  --plyr-main: 95 35% 50%;         /* Same as accent */
}

/* Buffer Gray/Beige Theme */
.theme-buffer {
  /* Backgrounds */
  --bg-primary: 215 15% 14%;       /* #222831 */
  --bg-secondary: 215 12% 22%;     /* #393E46 */
  --bg-tertiary: 215 10% 28%;      /* darker gray */
  --bg-hover: 35 20% 38%;          /* warm brown hover - better distinction */

  /* Borders */
  --border: 215 10% 30%;           /* Improved visibility */
  --border-light: 215 10% 38%;     /* Distinct from tertiary */

  /* Text */
  --text-primary: 35 25% 88%;      /* soft warm beige */
  --text-secondary: 35 20% 75%;    /* Improved contrast */
  --text-muted: 30 18% 48%;        /* Darker for better readability */

  /* Accent */
  --accent: 35 55% 45%;            /* Orange - for buttons/backgrounds */
  --accent-hover: 35 60% 55%;      /* Brighter hover */
  --accent-text: 35 60% 58%;       /* Brighter orange for text readability */

  /* Scrollbar */
  --scrollbar-track: 215 12% 22%;
  --scrollbar-thumb: 30 15% 35%;
  --scrollbar-thumb-hover: 30 18% 45%;

  /* Plyr player */
  --plyr-main: 35 55% 45%;         /* Same as accent */
}

/* Catppuccin Mocha Theme */
.theme-catppuccin {
  /* Backgrounds */
  --bg-primary: 240 21% 6%;        /* Crust #11111b */
  --bg-secondary: 240 21% 15%;     /* Base #1e1e2e */
  --bg-tertiary: 237 16% 23%;      /* Surface0 #313244 */
  --bg-hover: 235 16% 30%;         /* Surface1 #45475a */

  /* Borders */
  --border: 237 16% 23%;           /* Surface0 #313244 */
  --border-light: 235 16% 30%;     /* Surface1 #45475a */

  /* Text */
  --text-primary: 226 64% 88%;     /* Text #cdd6f4 */
  --text-secondary: 228 24% 79%;   /* Subtext0 #a6adc8 */
  --text-muted: 233 12% 56%;       /* Overlay1 #7f849c */

  /* Accent (Blue) */
  --accent: 217 92% 76%;           /* Blue #89b4fa */
  --accent-hover: 187 67% 73%;     /* Sky #89dceb - lighter blue for hover */
  --accent-text: 217 92% 76%;      /* Blue #89b4fa - same as accent for links */

  /* Scrollbar */
  --scrollbar-track: 240 21% 15%;  /* Base #1e1e2e */
  --scrollbar-thumb: 237 16% 23%;  /* Surface0 #313244 */
  --scrollbar-thumb-hover: 235 16% 30%; /* Surface1 #45475a */

  /* Plyr player */
  --plyr-main: 217 92% 76%;        /* Blue #89b4fa */
}

/* Online Light Green Theme */
.theme-online {
  /* Backgrounds */
  --bg-primary: 105 35% 90%;       /* Light sage green background */
  --bg-secondary: 105 30% 85%;     /* Soft green (cards) */
  --bg-tertiary: 105 25% 78%;      /* Deeper sage (inputs/elevated) */
  --bg-hover: 105 30% 72%;         /* Sage hover */

  /* Borders */
  --border: 105 28% 55%;           /* Darker for visibility on light bg */
  --border-light: 105 30% 65%;     /* Distinct from bg-tertiary */

  /* Text - Dark for light theme */
  --text-primary: 130 15% 20%;     /* Dark desaturated green */
  --text-secondary: 130 12% 32%;   /* Darker for better contrast */
  --text-muted: 130 12% 38%;       /* Much darker for readability on light bg */

  /* Accent */
  --accent: 115 45% 32%;           /* Dark green for buttons/backgrounds */
  --accent-hover: 115 50% 40%;     /* Slightly brighter on hover */
  --accent-text: 115 50% 25%;      /* Darker green for text on light bg */

  /* Scrollbar */
  --scrollbar-track: 105 30% 85%;
  --scrollbar-thumb: 105 30% 55%;
  --scrollbar-thumb-hover: 105 32% 45%;

  /* Plyr player */
  --plyr-main: 115 45% 32%;        /* Same as accent */
}

/* Pixel Light Pink/Cream Theme */
.theme-pixel {
  /* Backgrounds */
  --bg-primary: 330 50% 92%;       /* Light pink background */
  --bg-secondary: 330 45% 88%;     /* Soft pink (cards) */
  --bg-tertiary: 330 40% 82%;      /* Deeper pink (elevated) */
  --bg-hover: 330 45% 76%;         /* Pink-tinted hover */

  /* Borders */
  --border: 330 40% 65%;           /* Darker for visibility */
  --border-light: 330 45% 72%;     /* Distinct from tertiary */

  /* Text - Dark for light theme */
  --text-primary: 330 25% 22%;     /* Deep desaturated pink-gray */
  --text-secondary: 330 25% 28%;   /* Darker for better contrast */
  --text-muted: 330 20% 38%;       /* Much darker for readability */

  /* Accent */
  --accent: 315 60% 38%;           /* Dark pink for buttons/backgrounds */
  --accent-hover: 315 65% 48%;     /* Slightly brighter on hover */
  --accent-text: 315 65% 30%;      /* Darker pink for text on light bg */

  /* Scrollbar */
  --scrollbar-track: 330 45% 88%;
  --scrollbar-thumb: 330 45% 58%;
  --scrollbar-thumb-hover: 330 50% 50%;

  /* Plyr player */
  --plyr-main: 315 60% 38%;        /* Same as accent */
}

/* Debug Light Cream/Blue Theme */
.theme-debug {
  /* Backgrounds */
  --bg-primary: 200 35% 88%;       /* Light desaturated blue background */
  --bg-secondary: 200 30% 82%;     /* Soft blue-gray (cards) */
  --bg-tertiary: 200 28% 75%;      /* Deeper blue-gray (elevated) */
  --bg-hover: 200 32% 68%;         /* Blue-gray hover */

  /* Borders */
  --border: 200 30% 55%;           /* Darker for visibility */
  --border-light: 200 28% 62%;     /* Distinct from tertiary */

  /* Text - Dark for light theme */
  --text-primary: 210 25% 25%;     /* deep slate-blue */
  --text-secondary: 210 20% 32%;   /* Darker for better contrast */
  --text-muted: 210 18% 38%;       /* Much darker for readability */

  /* Accent */
  --accent: 210 45% 35%;           /* Dark blue for buttons/backgrounds */
  --accent-hover: 210 50% 45%;     /* Slightly brighter on hover */
  --accent-text: 210 50% 28%;      /* Darker blue for text on light bg */

  /* Scrollbar */
  --scrollbar-track: 200 30% 82%;
  --scrollbar-thumb: 200 32% 52%;
  --scrollbar-thumb-hover: 200 35% 45%;

  /* Plyr player */
  --plyr-main: 210 45% 35%;        /* Same as accent */
}
/* ===== END THEME SYSTEM ===== */

@layer base {
  body {
    @apply bg-dark-primary text-text-primary;
  }

  * {
    @apply touch-manipulation;
  }

  html {
    @apply scroll-smooth;
  }
}

@layer components {
  /* Modern Card Component */
  .card {
    @apply bg-dark-secondary rounded-xl border border-dark-border shadow-card;
  }

  /* Card active/focus states - make selection visible like tabs */
  .card:active,
  .card:focus {
    @apply bg-dark-tertiary border-dark-border-light shadow-card-hover;
    @apply ring-2 ring-accent/40;
  }

  /* Card focus-visible for keyboard navigation */
  .card:focus-visible {
    @apply outline-2 outline-offset-2 outline-accent ring-2 ring-accent/60;
  }

  /* Modern Button Styles */
  .btn {
    @apply inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium;
    @apply transition-all duration-200 ease-out;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-dark-primary;
  }

  .btn-primary {
    @apply bg-dark-primary/95 text-text-primary border border-dark-border;
    @apply hover:bg-dark-tertiary/50 hover:border-dark-border-light;
    @apply focus:ring-accent;
  }

  .btn-secondary {
    @apply bg-dark-primary/95 text-text-primary border border-dark-border;
    @apply hover:bg-dark-tertiary/50 hover:border-dark-border-light;
    @apply focus:ring-text-secondary;
  }

  .btn-danger {
    @apply bg-red-600 text-white border border-red-700;
    @apply hover:bg-red-700 hover:border-red-800;
    @apply focus:ring-red-500;
  }

  .btn-sm {
    @apply px-2 sm:px-3 py-1.5 text-xs sm:text-sm;
  }

  /* Modern Input Styles */
  .input {
    @apply w-full px-4 py-2 bg-dark-primary border border-dark-border-light rounded-lg;
    @apply text-text-primary placeholder-text-secondary;
    @apply focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent;
    @apply transition-all duration-200;
  }

  .label {
    @apply block text-sm font-medium text-text-primary mb-2;
  }

  /* Icon Button */
  .icon-btn {
    @apply w-11 h-11 flex items-center justify-center;
    @apply bg-dark-secondary border border-dark-border rounded-lg;
    @apply text-text-primary hover:bg-dark-tertiary hover:border-dark-border-light hover:text-text-primary;
    @apply transition-all duration-200 cursor-pointer;
  }

  /* Nav Tab */
  .nav-tab {
    @apply inline-flex items-center gap-2 px-3 md:px-5 py-2 md:py-2.5 rounded-t-lg;
    @apply bg-dark-secondary border border-dark-border-light border-b-2 border-b-transparent;
    @apply text-text-primary font-medium text-sm relative;
    @apply transition-all duration-300 ease-out cursor-pointer;
  }

  .nav-tab::before {
    @apply content-[''] absolute bottom-0 left-0 right-0 h-0.5;
    @apply bg-gradient-to-r from-text-muted to-accent;
    @apply transform scale-x-0 transition-transform duration-300 ease-out;
  }

  .nav-tab:hover {
    @apply bg-dark-tertiary border-dark-border-light -translate-y-0.5;
  }

  .nav-tab:hover::before {
    @apply scale-x-50;
  }

  .nav-tab.active {
    @apply bg-dark-tertiary border-dark-border-light;
  }

  .nav-tab.active::before {
    @apply scale-x-100;
  }

  /* Stats Pill */
  .stat-pill {
    @apply inline-flex items-center gap-2 px-3 py-1.5 rounded-full;
    @apply text-sm font-medium border;
    @apply shadow-sm hover:-translate-y-0.5 hover:shadow-md;
    @apply transition-all duration-200;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold;
    @apply backdrop-blur-sm;
  }

  /* Search Input Compact */
  .search-input {
    @apply px-3 py-2 bg-dark-primary border border-dark-border-light rounded-full;
    @apply text-text-primary placeholder-text-secondary text-sm;
    @apply focus:outline-none focus:border-accent focus:ring-1 focus:ring-accent/50;
    @apply transition-all duration-200;
  }

  /* Filter Button */
  .filter-btn {
    @apply flex items-center gap-1 sm:gap-2 px-2 sm:px-3.5 py-2 rounded-lg;
    @apply bg-dark-primary/95 border border-dark-border text-text-primary;
    @apply text-xs sm:text-sm cursor-pointer transition-all duration-200;
    @apply hover:bg-dark-tertiary/50;
  }

  .filter-btn.active {
    @apply bg-dark-tertiary border-dark-border-light text-text-primary font-medium;
  }
}

/* Custom scrollbar - Modern & Subtle */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--scrollbar-track));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--scrollbar-thumb));
  border-radius: 4px;
  transition: background 0.2s;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--scrollbar-thumb-hover));
}

/* Pulse border animation for scan buttons */
@keyframes pulse-border {
  0%, 100% {
    border-color: hsl(var(--accent));
    box-shadow: 0 0 0 0 hsla(var(--accent) / 0.4);
  }
  50% {
    border-color: hsl(var(--accent-hover));
    box-shadow: 0 0 0 4px hsla(var(--accent) / 0);
  }
}

.animate-pulse-border {
  animation: pulse-border 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Plyr customizations */
.plyr {
  @apply rounded-xl overflow-hidden;
  --plyr-color-main: hsl(var(--plyr-main));
  --plyr-range-fill-background: hsl(var(--plyr-main));
  --plyr-video-control-background-hover: hsl(var(--plyr-main));
  --plyr-badge-background: hsl(var(--plyr-main));
  --plyr-menu-background: hsl(var(--bg-secondary));
  --plyr-menu-color: hsl(var(--text-primary));
  --plyr-control-color: hsl(var(--text-primary));
  --plyr-tooltip-background: hsl(var(--bg-secondary));
  --plyr-tooltip-color: hsl(var(--text-primary));
  position: relative;
}

/* Ensure controls are always above video and clickable */
.plyr__controls {
  position: relative;
  z-index: 3 !important;
  pointer-events: auto !important;
}

.plyr__control {
  pointer-events: auto !important;
  cursor: pointer !important;
}

.plyr__progress {
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Ensure plyr video wrapper doesn't block controls */
.plyr__video-wrapper {
  pointer-events: none;
}

.plyr__video-wrapper video {
  pointer-events: auto;
}

.plyr--video {
  @apply bg-black;
}

.plyr__control--overlaid {
  background: hsla(var(--plyr-main), 0.9);
}

.plyr__control--overlaid:hover {
  background: hsla(var(--plyr-main), 0.95);
}

/* Theater mode button */
.plyr__control[data-plyr="theater"] .icon--pressed {
  display: none;
}

.plyr__control[data-plyr="theater"] .icon--not-pressed {
  display: block;
}

.plyr__control[data-plyr="theater"][aria-pressed="true"] .icon--pressed {
  display: block;
}

.plyr__control[data-plyr="theater"][aria-pressed="true"] .icon--not-pressed {
  display: none;
}

/* Focus Visible for Accessibility */
:focus-visible {
  @apply outline-2 outline-offset-2 outline-accent;
}

/* Smooth Transitions for All Interactive Elements */
button,
a,
input,
textarea,
select {
  @apply transition-colors duration-200;
}

/* Hide scrollbar utility */
@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Chrome, Safari and Opera */
  }
}

/* ===== MOBILE TOUCH CONTROLS ===== */
/* Visible touch controls for mobile devices only */
.plyr-mobile-controls {
  /* Container styling handled inline in JS */
}

.plyr-mobile-btn {
  transition: all 0.2s ease;
  -webkit-tap-highlight-color: transparent;
}

.plyr-mobile-btn:active {
  transform: scale(0.9) !important;
  background: rgba(0, 0, 0, 0.9) !important;
}

.plyr-mobile-btn svg {
  width: 30px;
  height: 30px;
  margin-bottom: 4px;
}

.plyr-mobile-btn--play svg {
  /* Play/pause button already has inline sizing */
}

.plyr-mobile-btn--exit:active {
  transform: translateX(-50%) scale(0.9) !important;
}

/* YouTube-style touch overlay - ensure it works in fullscreen */
.plyr-touch-overlay {
  pointer-events: auto !important;
  z-index: 150 !important;
}

.plyr-touch-overlay > div {
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Old touch overlay CSS removed - using new mobile controls instead */

/* Note: Removed the rule that hid big play button in fullscreen to debug control bar issue */
/* .plyr--fullscreen .plyr__control--overlaid {
  display: none !important;
} */

/* Force Plyr controls to be visible and clickable on desktop (both fullscreen and normal mode) */
/* This targets devices with fine pointer (mouse) - desktop/laptop devices */
@media (pointer: fine) {
  /* Ensure controls are clickable when visible */
  .plyr__controls {
    pointer-events: auto !important;
    z-index: 999 !important;
  }

  /* Ensure individual control buttons are always clickable */
  .plyr__control {
    pointer-events: auto !important;
  }
}

/* Additional rules for fullscreen mode to ensure controls work when visible */
.plyr--fullscreen .plyr__controls {
  pointer-events: auto !important;
  z-index: 9999 !important; /* Even higher z-index in fullscreen */
  position: relative !important;
}

.plyr--fullscreen .plyr__control {
  pointer-events: auto !important;
  cursor: pointer !important;
}

.plyr--fullscreen .plyr__progress {
  pointer-events: auto !important;
  cursor: pointer !important;
}

.plyr--fullscreen .plyr__progress input[type="range"] {
  pointer-events: auto !important;
  cursor: pointer !important;
}

.plyr--fullscreen .plyr__volume input[type="range"] {
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Ensure video doesn't capture clicks over controls in fullscreen */
.plyr--fullscreen .plyr__video-wrapper {
  pointer-events: none !important;
}

/* But keep the actual video element interactive for native controls fallback */
.plyr--fullscreen .plyr__video-wrapper video {
  pointer-events: auto !important;
}

/* Disable pointer events on poster in fullscreen so it doesn't block controls */
.plyr--fullscreen .plyr__poster {
  pointer-events: none !important;
}

/* Disable pointer events on captions wrapper in fullscreen */
.plyr--fullscreen .plyr__captions {
  pointer-events: none !important;
}

/* CRITICAL FIX: Disable pointer events on everything in fullscreen except controls */
/* This is the nuclear option to ensure ONLY controls receive clicks */
.plyr--fullscreen * {
  pointer-events: none !important;
}

/* Re-enable ONLY on controls and their children */
.plyr--fullscreen .plyr__controls,
.plyr--fullscreen .plyr__controls *,
.plyr--fullscreen .plyr__menu,
.plyr--fullscreen .plyr__menu *,
.plyr--fullscreen .plyr-touch-overlay,
.plyr--fullscreen .plyr-touch-overlay * {
  pointer-events: auto !important;
}

/* Allow controls to auto-hide in fullscreen when inactive */
.plyr--fullscreen.plyr--hide-controls .plyr__controls {
  opacity: 0 !important;
  transform: translateY(10px) !important;
  pointer-events: none !important;
  transition: opacity 0.3s ease, transform 0.3s ease !important;
}

/* Show controls in fullscreen when active (mouse movement) */
.plyr--fullscreen:not(.plyr--hide-controls) .plyr__controls {
  opacity: 1 !important;
  transform: translateY(0) !important;
  transition: opacity 0.3s ease, transform 0.3s ease !important;
}

/* iOS-specific fixes for video.js controls */
@supports (-webkit-touch-callout: none) {
  /* Force controls to be visible and clickable on iOS */
  .video-js .vjs-control-bar {
    display: flex !important;
    pointer-events: auto !important;
    z-index: 2147483647 !important;
  }

  /* Keep controls visible when paused */
  .video-js.vjs-paused .vjs-control-bar {
    opacity: 1 !important;
  }

  /* Keep controls visible when user is active */
  .video-js.vjs-user-active .vjs-control-bar,
  .video-js.vjs-user-inactive.vjs-paused .vjs-control-bar {
    opacity: 1 !important;
  }

  /* Hide loading spinner after video loads - but ONLY the spinner, not controls */
  .video-js.vjs-has-started:not(.vjs-waiting) .vjs-loading-spinner {
    display: none !important;
  }

  /* Ensure video element doesn't block controls */
  .video-js .vjs-tech {
    pointer-events: none !important;
  }
}

/* ===== VIDEO.JS CUSTOM THEMING ===== */
/* Override video.js default blue with our accent color */
.video-js {
  font-family: inherit;
}

/* Hide big play button - controls are always visible */
.video-js .vjs-big-play-button {
  display: none !important;
}

/* Control bar background */
.video-js .vjs-control-bar {
  background-color: hsla(var(--bg-secondary) / 0.9);
  backdrop-filter: blur(8px);
}

/* Progress bar */
.video-js .vjs-play-progress,
.video-js .vjs-volume-level {
  background-color: hsl(var(--accent));
}

.video-js .vjs-load-progress {
  background-color: hsla(var(--accent) / 0.3);
}

.video-js .vjs-progress-holder {
  background-color: hsla(var(--border) / 0.5);
}

/* Buttons */
.video-js .vjs-button > .vjs-icon-placeholder:before {
  line-height: 1.9em;
}

.video-js .vjs-button:hover {
  color: hsl(var(--accent-text));
}

/* Volume slider */
.video-js .vjs-volume-panel-horizontal:hover {
  width: 8em;
}

/* Time display */
.video-js .vjs-current-time,
.video-js .vjs-time-divider,
.video-js .vjs-duration {
  color: hsl(var(--text-primary));
  font-size: 1em;
  line-height: 3em;
}

/* Menu */
.video-js .vjs-menu-button .vjs-menu .vjs-menu-content {
  background-color: hsl(var(--bg-secondary));
  max-height: 20em;
}

.video-js .vjs-menu li {
  color: hsl(var(--text-primary));
  padding: 0.5em 1em;
}

.video-js .vjs-menu li:hover,
.video-js .vjs-menu li.vjs-selected {
  background-color: hsl(var(--bg-hover));
  color: hsl(var(--accent-text));
}

/* Loading spinner */
.video-js .vjs-loading-spinner {
  border-color: hsla(var(--accent) / 0.8);
}

/* Error display */
.video-js .vjs-error-display {
  background-color: hsla(var(--bg-secondary) / 0.9);
}

.video-js .vjs-error-display:before {
  color: hsl(var(--accent));
}

/* Responsive sizing */
.video-js.vjs-fluid {
  padding-top: 56.25%; /* 16:9 */
}

/* iOS fixes */
.video-js .vjs-tech {
  object-fit: contain;
}

/* Fullscreen mode - remove size constraints from player container only */
.video-js.vjs-fullscreen {
  max-width: none !important;
  max-height: none !important;
  width: 100% !important;
  height: 100% !important;
}

/* Non-fullscreen: constrain video size to fit on screen */
.video-js:not(.vjs-fullscreen) {
  max-height: 60vh;
}

/* Theater mode button styling */
.video-js .vjs-theater-button .vjs-icon-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

.video-js .vjs-theater-button svg {
  width: 1.5em;
  height: 1.5em;
  display: block;
}

.video-js .vjs-theater-button .vjs-icon-placeholder:before {
  display: none;
}

/* ===== LARGER CONTROLS FOR BETTER USABILITY ===== */
/* Increase control bar height on all devices */
.video-js .vjs-control-bar {
  height: 4em;
  font-size: 14px;
}

/* Mobile/Tablet: Moderately larger controls (not too big) */
@media (max-width: 1024px) {
  .video-js .vjs-control-bar {
    height: 3.5em;
    font-size: 13px;
    display: flex !important;
    z-index: 1000 !important;
  }

  /* Ensure controls are visible on mobile */
  .video-js.vjs-paused .vjs-control-bar,
  .video-js.vjs-playing .vjs-control-bar {
    display: flex !important;
  }
}

/* Larger buttons */
.video-js .vjs-button {
  width: 3.5em;
  height: 100%;
}

/* Larger icons inside buttons */
.video-js .vjs-icon-placeholder:before {
  font-size: 2em;
  line-height: 2em;
}

/* Larger time displays */
.video-js .vjs-current-time,
.video-js .vjs-time-divider,
.video-js .vjs-duration {
  font-size: 1.3em;
  line-height: 3em;
  padding: 0 0.5em;
}

/* Larger progress bar for easier scrubbing */
.video-js .vjs-progress-control {
  min-height: 0.8em;
}

.video-js .vjs-progress-holder {
  height: 0.8em;
}

/* Fix progress bar scrubber/handle alignment */
.video-js .vjs-play-progress:before {
  top: -0.3em;
}

.video-js .vjs-slider-handle {
  top: 50%;
  transform: translateY(-50%);
}

/* Larger volume slider */
.video-js .vjs-volume-bar {
  height: 0.8em;
}

/* Adjust mobile touch targets (not too big) */
@media (max-width: 1024px) {
  .video-js .vjs-button {
    width: 3em;
  }

  .video-js .vjs-icon-placeholder:before {
    font-size: 1.8em;
  }

  .video-js .vjs-current-time,
  .video-js .vjs-time-divider,
  .video-js .vjs-duration {
    font-size: 1.2em;
  }

  .video-js .vjs-progress-control {
    min-height: 0.7em;
  }

  .video-js .vjs-progress-holder {
    height: 0.7em;
  }

  /* Adjust scrubber alignment for mobile progress bar */
  .video-js .vjs-play-progress:before {
    top: -0.35em;
  }
}
