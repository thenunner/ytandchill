version: '3.8'

services:
  ytandchill:
    build: .
    image: ytandchill:latest
    container_name: ytandchill
    networks:
      - bridge
    ports:
      - "${PORT:-4099}:4099"
    environment:
      - PORT=4099
      - PUID=99   # Change to your UID (run 'id -u')
      - PGID=100  # Change to your GID (run 'id -g')
    volumes:
      # Database and config
      - /mnt/user/appdata/ytandchill/data:/app/data
      # Downloads (videos and thumbnails)
      - /mnt/user/data/media/youtube/ytandchill:/app/downloads
      # Logs
      - /mnt/user/appdata/ytandchill/logs:/app/logs
      # Cookies file for age-restricted content (manual export)
      - /mnt/user/appdata/ytandchill/cookies.txt:/app/cookies.txt
      # Firefox profile for automatic cookie extraction (optional)
      # Linux: ~/.mozilla/firefox | macOS: ~/Library/Application Support/Firefox/Profiles
      # - /home/YOUR_USERNAME/.mozilla/firefox:/firefox_profile:ro
    restart: unless-stopped
    labels:
      # Unraid WebUI integration
      - "net.unraid.docker.managed=dockerman"
      - "net.unraid.docker.webui=http://[IP]:[PORT:4099]/"
      - "net.unraid.docker.icon=https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/youtube.png"

networks:
  bridge:
    driver: bridge
