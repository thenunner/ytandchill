import{r as e,a as t,u as r,b as n,c as s,d as a,e as i,Q as o,f as l}from"./query-vendor-Yhx-W-YM.js";import{g as d,v as c}from"./video-vendor-BqdENAHL.js";import{r as u,u as m,L as p,a as b,b as N,c as f,d as h,N as x,R as v,e as j,B as y}from"./router-vendor-BelzQ7WC.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var g,D,E={exports:{}},V={};function w(){return g||(g=1,function(){var t=e(),r=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),N=Symbol.iterator;var f=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function h(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];!function(e,t,r){var n=f.ReactDebugCurrentFrame.getStackAddendum();""!==n&&(t+="%s",r=r.concat([n]));var s=r.map(function(e){return String(e)});s.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,s)}("error",e,r)}var x;function v(e){return e.displayName||"Context"}function j(e){if(null==e)return null;if("number"==typeof e.tag&&h("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case s:return"Fragment";case n:return"Portal";case i:return"Profiler";case a:return"StrictMode";case c:return"Suspense";case u:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case l:return v(e)+".Consumer";case o:return v(e._context)+".Provider";case d:return function(e,t,r){var n=e.displayName;if(n)return n;var s=t.displayName||t.name||"";return""!==s?r+"("+s+")":r}(e,e.render,"ForwardRef");case m:var t=e.displayName||null;return null!==t?t:j(e.type)||"Memo";case p:var r=e,b=r._payload,N=r._init;try{return j(N(b))}catch(f){return null}}return null}x=Symbol.for("react.module.reference");var y,g,D,E,w,k,C,S=Object.assign,P=0;function _(){}_.__reactDisabledLog=!0;var L,M=f.ReactCurrentDispatcher;function I(e,t,r){if(void 0===L)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);L=n&&n[1]||""}return"\n"+L+e}var T,A=!1,R="function"==typeof WeakMap?WeakMap:Map;function B(e,t){if(!e||A)return"";var r,n=T.get(e);if(void 0!==n)return n;A=!0;var s,a=Error.prepareStackTrace;Error.prepareStackTrace=void 0,s=M.current,M.current=null,function(){if(0===P){y=console.log,g=console.info,D=console.warn,E=console.error,w=console.group,k=console.groupCollapsed,C=console.groupEnd;var e={configurable:!0,enumerable:!0,value:_,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}P++}();try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(b){r=b}Reflect.construct(e,[],i)}else{try{i.call()}catch(b){r=b}e.call(i.prototype)}}else{try{throw Error()}catch(b){r=b}e()}}catch(N){if(N&&r&&"string"==typeof N.stack){for(var o=N.stack.split("\n"),l=r.stack.split("\n"),d=o.length-1,c=l.length-1;d>=1&&c>=0&&o[d]!==l[c];)c--;for(;d>=1&&c>=0;d--,c--)if(o[d]!==l[c]){if(1!==d||1!==c)do{if(d--,--c<0||o[d]!==l[c]){var u="\n"+o[d].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),"function"==typeof e&&T.set(e,u),u}}while(d>=1&&c>=0);break}}}finally{A=!1,M.current=s,function(){if(0===--P){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:S({},e,{value:y}),info:S({},e,{value:g}),warn:S({},e,{value:D}),error:S({},e,{value:E}),group:S({},e,{value:w}),groupCollapsed:S({},e,{value:k}),groupEnd:S({},e,{value:C})})}P<0&&h("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=a}var m=e?e.displayName||e.name:"",p=m?I(m):"";return"function"==typeof e&&T.set(e,p),p}function $(e,t,r){if(null==e)return"";if("function"==typeof e)return B(e,!(!(n=e.prototype)||!n.isReactComponent));var n;if("string"==typeof e)return I(e);switch(e){case c:return I("Suspense");case u:return I("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case d:return B(e.render,!1);case m:return $(e.type,t,r);case p:var s=e,a=s._payload,i=s._init;try{return $(i(a),t,r)}catch(o){}}return""}T=new R;var F=Object.prototype.hasOwnProperty,O={},q=f.ReactDebugCurrentFrame;function z(e){if(e){var t=e._owner,r=$(e.type,e._source,t?t.type:null);q.setExtraStackFrame(r)}else q.setExtraStackFrame(null)}var W=Array.isArray;function Q(e){return W(e)}function K(e){return""+e}function U(e){if(function(e){try{return K(e),!1}catch(t){return!0}}(e))return h("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),K(e)}var H,J,Y,G=f.ReactCurrentOwner,X={key:!0,ref:!0,__self:!0,__source:!0};Y={};function Z(e,t,n,s,a){var i,o={},l=null,d=null;for(i in void 0!==n&&(U(n),l=""+n),function(e){if(F.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}(t)&&(U(t.key),l=""+t.key),function(e){if(F.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}(t)&&(d=t.ref,function(e,t){if("string"==typeof e.ref&&G.current&&t&&G.current.stateNode!==t){var r=j(G.current.type);Y[r]||(h('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',j(G.current.type),e.ref),Y[r]=!0)}}(t,a)),t)F.call(t,i)&&!X.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps){var c=e.defaultProps;for(i in c)void 0===o[i]&&(o[i]=c[i])}if(l||d){var u="function"==typeof e?e.displayName||e.name||"Unknown":e;l&&function(e,t){var r=function(){H||(H=!0,h("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};r.isReactWarning=!0,Object.defineProperty(e,"key",{get:r,configurable:!0})}(o,u),d&&function(e,t){var r=function(){J||(J=!0,h("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};r.isReactWarning=!0,Object.defineProperty(e,"ref",{get:r,configurable:!0})}(o,u)}return function(e,t,n,s,a,i,o){var l={$$typeof:r,type:e,key:t,ref:n,props:o,_owner:i,_store:{}};return Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.freeze&&(Object.freeze(l.props),Object.freeze(l)),l}(e,l,d,a,s,G.current,o)}var ee,te=f.ReactCurrentOwner,re=f.ReactDebugCurrentFrame;function ne(e){if(e){var t=e._owner,r=$(e.type,e._source,t?t.type:null);re.setExtraStackFrame(r)}else re.setExtraStackFrame(null)}function se(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}function ae(){if(te.current){var e=j(te.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}ee=!1;var ie={};function oe(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var r=function(e){var t=ae();if(!t){var r="string"==typeof e?e:e.displayName||e.name;r&&(t="\n\nCheck the top-level render call using <"+r+">.")}return t}(t);if(!ie[r]){ie[r]=!0;var n="";e&&e._owner&&e._owner!==te.current&&(n=" It was passed a child from "+j(e._owner.type)+"."),ne(e),h('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',r,n),ne(null)}}}function le(e,t){if("object"==typeof e)if(Q(e))for(var r=0;r<e.length;r++){var n=e[r];se(n)&&oe(n,t)}else if(se(e))e._store&&(e._store.validated=!0);else if(e){var s=function(e){if(null===e||"object"!=typeof e)return null;var t=N&&e[N]||e["@@iterator"];return"function"==typeof t?t:null}(e);if("function"==typeof s&&s!==e.entries)for(var a,i=s.call(e);!(a=i.next()).done;)se(a.value)&&oe(a.value,t)}}function de(e){var t,r=e.type;if(null!=r&&"string"!=typeof r){if("function"==typeof r)t=r.propTypes;else{if("object"!=typeof r||r.$$typeof!==d&&r.$$typeof!==m)return;t=r.propTypes}if(t){var n=j(r);!function(e,t,r,n,s){var a=Function.call.bind(F);for(var i in e)if(a(e,i)){var o=void 0;try{if("function"!=typeof e[i]){var l=Error((n||"React class")+": "+r+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}o=e[i](t,i,n,r,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(d){o=d}!o||o instanceof Error||(z(s),h("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",n||"React class",r,i,typeof o),z(null)),o instanceof Error&&!(o.message in O)&&(O[o.message]=!0,z(s),h("Failed %s type: %s",r,o.message),z(null))}}(t,e.props,"prop",n,e)}else if(void 0!==r.PropTypes&&!ee){ee=!0,h("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",j(r)||"Unknown")}"function"!=typeof r.getDefaultProps||r.getDefaultProps.isReactClassApproved||h("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var ce={};var ue=function(e,t,n,N,f,v){var y=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===i||e===a||e===c||e===u||e===b||"object"==typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===m||e.$$typeof===o||e.$$typeof===l||e.$$typeof===d||e.$$typeof===x||void 0!==e.getModuleId)}(e);if(!y){var g="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(g+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var D,E=function(e){return void 0!==e?"\n\nCheck your code at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+".":""}(f);g+=E||ae(),null===e?D="null":Q(e)?D="array":void 0!==e&&e.$$typeof===r?(D="<"+(j(e.type)||"Unknown")+" />",g=" Did you accidentally export a JSX literal instead of a component?"):D=typeof e,h("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",D,g)}var V=Z(e,t,n,f,v);if(null==V)return V;if(y){var w=t.children;if(void 0!==w)if(N)if(Q(w)){for(var k=0;k<w.length;k++)le(w[k],e);Object.freeze&&Object.freeze(w)}else h("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else le(w,e)}if(F.call(t,"key")){var C=j(e),S=Object.keys(t).filter(function(e){return"key"!==e}),P=S.length>0?"{key: someKey, "+S.join(": ..., ")+": ...}":"{key: someKey}";if(!ce[C+P])h('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',P,C,S.length>0?"{"+S.join(": ..., ")+": ...}":"{}",C),ce[C+P]=!0}return e===s?function(e){for(var t=Object.keys(e.props),r=0;r<t.length;r++){var n=t[r];if("children"!==n&&"key"!==n){ne(e),h("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",n),ne(null);break}}null!==e.ref&&(ne(e),h("Invalid attribute `ref` supplied to `React.Fragment`."),ne(null))}(V):de(V),V};V.Fragment=s,V.jsxDEV=ue}()),V}var k,C=(D||(D=1,E.exports=w()),E.exports),S={};const P=d(function(){if(k)return S;k=1;var e=u(),t=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return S.createRoot=function(r,n){t.usingClientEntryPoint=!0;try{return e.createRoot(r,n)}finally{t.usingClientEntryPoint=!1}},S.hydrateRoot=function(r,n,s){t.usingClientEntryPoint=!0;try{return e.hydrateRoot(r,n,s)}finally{t.usingClientEntryPoint=!1}},S}()),_=t.createContext();let L=0;function M({children:e}){const[r,n]=t.useState([]),s=t.useRef({}),a=t.useCallback((e,t="success",r={})=>{const{persistent:a=!1,duration:o=null,id:l=null,progress:d=null}=r,c=a?null:o??{success:5e3,error:1e4,warning:8e3,info:5e3,scanning:null,progress:null,paused:null,delay:null}[t]??5e3,u=l||++L;return n(r=>{const n=r.findIndex(e=>e.id===u);if(-1!==n){const s=[...r];return s[n]={...s[n],message:e,type:t,progress:d},s}const s={id:u,message:e,type:t,progress:d};return[...r.slice(-4),s]}),s.current[u]&&(clearTimeout(s.current[u]),delete s.current[u]),c&&(s.current[u]=setTimeout(()=>{i(u)},c)),u},[]),i=t.useCallback(e=>{s.current[e]&&(clearTimeout(s.current[e]),delete s.current[e]),n(t=>t.filter(t=>t.id!==e))},[]),o=t.useCallback(()=>{Object.values(s.current).forEach(clearTimeout),s.current={},n([])},[]),l=r.length>0?r[r.length-1]:null;return t.useEffect(()=>()=>{Object.values(s.current).forEach(clearTimeout)},[]),C.jsxDEV(_.Provider,{value:{notification:l,toasts:r,showNotification:a,removeToast:i,clearNotification:o},children:e},void 0,!1,{fileName:"/appdata/frontend/src/contexts/NotificationContext.jsx",lineNumber:93,columnNumber:5},this)}function I(){const e=t.useContext(_);if(!e)throw new Error("useNotification must be used within NotificationProvider");return e}const T=new class{async request(e,t={}){const r=`/api${e}`,n={...t,credentials:"include",headers:{"Content-Type":"application/json",...t.headers}},s=await fetch(r,n),a="/auth/check"===e||"/auth/check-first-run"===e;if(401===s.status)throw a||window.location.pathname.includes("/login")||window.location.pathname.includes("/setup")||(console.warn("Session expired, redirecting to login"),window.location.href="/login"),new Error("Session expired");if(204===s.status)return null;const i=await s.json();if(!s.ok)throw new Error(i.error||"API request failed");return i}getChannels(){return this.request("/channels")}createChannel(e){return this.request("/channels",{method:"POST",body:JSON.stringify(e)})}updateChannel(e,t){return this.request(`/channels/${e}`,{method:"PATCH",body:JSON.stringify(t)})}deleteChannel(e){return this.request(`/channels/${e}`,{method:"DELETE"})}markChannelVisited(e){return this.request(`/channels/${e}/visited`,{method:"POST"})}scanChannel(e,t=!1,r=!1,n=!1,s=""){return this.request(`/channels/${e}/scan`,{method:"POST",body:JSON.stringify({force_full:t,is_batch_start:r,is_auto_scan:n,batch_label:s})})}getVideos(e={}){const t=Object.entries(e).reduce((e,[t,r])=>(null!=r&&""!==r&&(e[t]=r),e),{}),r=new URLSearchParams(t).toString();return this.request("/videos"+(r?`?${r}`:""))}getVideo(e){return this.request(`/videos/${e}`)}updateVideo(e,t){return this.request(`/videos/${e}`,{method:"PATCH",body:JSON.stringify(t)})}deleteVideo(e){return this.request(`/videos/${e}`,{method:"DELETE"})}bulkUpdateVideos(e,t){return this.request("/videos/bulk",{method:"PATCH",body:JSON.stringify({video_ids:e,updates:t})})}bulkDeleteVideos(e){return this.request("/videos/bulk-delete",{method:"DELETE",body:JSON.stringify({video_ids:e})})}getCategories(){return this.request("/categories")}getCategory(e){return this.request(`/categories/${e}`)}createCategory(e){return this.request("/categories",{method:"POST",body:JSON.stringify(e)})}updateCategory(e,t){return this.request(`/categories/${e}`,{method:"PATCH",body:JSON.stringify(t)})}deleteCategory(e){return this.request(`/categories/${e}`,{method:"DELETE"})}bulkAssignCategory(e,t){return this.request("/playlists/bulk-category",{method:"PATCH",body:JSON.stringify({playlist_ids:e,category_id:t})})}getChannelCategories(){return this.request("/channel-categories")}createChannelCategory(e){return this.request("/channel-categories",{method:"POST",body:JSON.stringify(e)})}updateChannelCategory(e,t){return this.request(`/channel-categories/${e}`,{method:"PATCH",body:JSON.stringify(t)})}deleteChannelCategory(e){return this.request(`/channel-categories/${e}`,{method:"DELETE"})}getPlaylists(e){const t=e?`?channel_id=${e}`:"";return this.request(`/playlists${t}`)}getPlaylist(e){return this.request(`/playlists/${e}`)}createPlaylist(e){return this.request("/playlists",{method:"POST",body:JSON.stringify(e)})}updatePlaylist(e,t){return this.request(`/playlists/${e}`,{method:"PATCH",body:JSON.stringify(t)})}deletePlaylist(e){return this.request(`/playlists/${e}`,{method:"DELETE"})}addVideoToPlaylist(e,t){return this.request(`/playlists/${e}/videos`,{method:"POST",body:JSON.stringify({video_id:t})})}addVideosToPlaylistBulk(e,t){return this.request(`/playlists/${e}/videos/bulk`,{method:"POST",body:JSON.stringify({video_ids:t})})}removeVideoFromPlaylist(e,t){return this.request(`/playlists/${e}/videos/${t}`,{method:"DELETE"})}getQueue(){return this.request("/queue")}addToQueue(e){return this.request("/queue",{method:"POST",body:JSON.stringify({video_id:e})})}addToQueueBulk(e){return this.request("/queue/bulk",{method:"POST",body:JSON.stringify({video_ids:e})})}pauseQueue(){return this.request("/queue/pause",{method:"POST"})}resumeQueue(){return this.request("/queue/resume",{method:"POST"})}cancelCurrent(){return this.request("/queue/cancel-current",{method:"POST"})}removeFromQueue(e){return this.request(`/queue/${e}`,{method:"DELETE"})}setOperation(e,t){return this.request("/operation/set",{method:"POST",body:JSON.stringify({type:e,message:t})})}clearOperation(){return this.request("/operation/clear",{method:"POST"})}reorderQueue(e,t){return this.request("/queue/reorder",{method:"POST",body:JSON.stringify({item_id:e,new_position:t})})}moveToTop(e){return this.request("/queue/move-to-top",{method:"POST",body:JSON.stringify({item_id:e})})}moveToBottom(e){return this.request("/queue/move-to-bottom",{method:"POST",body:JSON.stringify({item_id:e})})}clearQueue(){return this.request("/queue/clear",{method:"POST"})}getSettings(){return this.request("/settings")}updateSettings(e){return this.request("/settings",{method:"PATCH",body:JSON.stringify(e)})}testYoutubeApiKey(){return this.request("/settings/test-youtube-api",{method:"POST"})}checkOrphanedQueue(){return this.request("/queue/check-orphaned")}cleanupOrphanedQueue(){return this.request("/queue/cleanup-orphaned",{method:"POST"})}checkAuth(){return this.request("/auth/check")}checkFirstRun(){return this.request("/auth/check-first-run")}getHealth(){return this.request("/health")}getLogs(e=500){return this.request(`/logs?lines=${e}`)}clearLogs(e="all"){return this.request(`/logs?scope=${e}`,{method:"DELETE"})}scanYouTubePlaylist(e,t="new"){return this.request("/youtube-playlists/scan",{method:"POST",body:JSON.stringify({url:e,filter:t})})}queuePlaylistVideos(e){return this.request("/youtube-playlists/queue",{method:"POST",body:JSON.stringify({videos:e})})}removePlaylistVideos(e){return this.request("/youtube-playlists/remove",{method:"POST",body:JSON.stringify({videos:e})})}scanImportFolder(e=!1){const t=e?"?include_mkv=true":"";return this.request(`/import/scan${t}`)}getImportState(){return this.request("/import/state")}addImportChannel(e){return this.request("/import/add-channel",{method:"POST",body:JSON.stringify({url:e})})}setImportChannels(e){return this.request("/import/set-channels",{method:"POST",body:JSON.stringify({urls:e})})}fetchImportChannel(e){return this.request("/import/fetch-channel",{method:"POST",body:JSON.stringify({channel_idx:e})})}matchImportFiles(e){return this.request("/import/match",{method:"POST",body:JSON.stringify({channel_idx:e})})}executeImport(e){return this.request("/import/execute",{method:"POST",body:JSON.stringify({matches:e})})}resolveImportPending(e,t,r=!1){return this.request("/import/resolve",{method:"POST",body:JSON.stringify({file:e,video_id:t,skip:r})})}skipRemainingImport(){return this.request("/import/skip-remaining",{method:"POST"})}resetImport(e=!1){return this.request("/import/reset",{method:"POST",body:JSON.stringify({force:e})})}smartIdentify(e="auto"){return this.request("/import/smart-identify",{method:"POST",body:JSON.stringify({mode:e})})}executeSmartImport(e){return this.request("/import/execute-smart",{method:"POST",body:JSON.stringify({matches:e})})}getEncodeStatus(){return this.request("/import/encode-status")}skipPendingItem(e){return this.request("/import/skip-pending",{method:"POST",body:JSON.stringify({file:e})})}};function A(){return r({queryKey:["channels"],queryFn:()=>T.getChannels(),staleTime:6e4})}function R(){const e=n();return s({mutationFn:({id:e,data:t})=>T.updateChannel(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["channels"]})}})}function B(){const e=n();return s({mutationFn:e=>T.deleteChannel(e),onSuccess:()=>{e.invalidateQueries({queryKey:["channels"]}),e.invalidateQueries({queryKey:["videos"]})}})}function $(){const e=n();return s({mutationFn:({id:e,forceFull:t=!1,is_batch_start:r=!1,is_auto_scan:n=!1,batch_label:s=""})=>T.scanChannel(e,t,r,n,s),onSuccess:()=>{e.invalidateQueries({queryKey:["videos"]}),e.invalidateQueries({queryKey:["channels"]})}})}function F(e){return r({queryKey:["videos",e],queryFn:()=>T.getVideos(e),refetchInterval:3e4,staleTime:1e4})}function O(){const e=n();return s({mutationFn:({id:e,data:t})=>T.updateVideo(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["videos"]}),e.invalidateQueries({queryKey:["video"]})}})}function q(){const e=n();return s({mutationFn:e=>T.deleteVideo(e),onSuccess:()=>{e.invalidateQueries({queryKey:["videos"]}),e.invalidateQueries({queryKey:["playlists"]}),e.invalidateQueries({queryKey:["channels"]})}})}function z(){const e=n();return s({mutationFn:({videoIds:e,updates:t})=>T.bulkUpdateVideos(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["videos"]}),e.invalidateQueries({queryKey:["channels"]})}})}function W(e){return r({queryKey:["playlists",e],queryFn:()=>T.getPlaylists(e),staleTime:6e4})}function Q(e){return r({queryKey:["playlist",e],queryFn:()=>T.getPlaylist(e),enabled:!!e})}function K(){const e=n();return s({mutationFn:({id:e,data:t})=>T.updatePlaylist(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["playlists"]}),e.invalidateQueries({queryKey:["playlist"]})}})}function U(){const e=n();return s({mutationFn:e=>T.deletePlaylist(e),onSuccess:()=>{e.invalidateQueries({queryKey:["playlists"]})}})}function H(){const e=n();return s({mutationFn:({playlistId:e,videoId:t})=>T.removeVideoFromPlaylist(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["playlists"]}),e.invalidateQueries({queryKey:["playlist"]})}})}function J(e={}){const{sseConnected:t,enablePolling:n}=e;return r({queryKey:["queue"],queryFn:()=>T.getQueue(),refetchInterval:n?2e3:!!(void 0!==t)&&(!t&&3e3),staleTime:n?1e3:3e4})}function Y(){return r({queryKey:["settings"],queryFn:()=>T.getSettings(),staleTime:3e4,refetchOnWindowFocus:!1})}function G(){const e=n();return s({mutationFn:e=>T.updateSettings(e),onMutate:async t=>{await e.cancelQueries({queryKey:["settings"]});const r=e.getQueryData(["settings"]);return e.setQueryData(["settings"],e=>({...e,...t})),{previousSettings:r}},onError:(t,r,n)=>{n?.previousSettings&&e.setQueryData(["settings"],n.previousSettings)},onSettled:()=>{e.invalidateQueries({queryKey:["settings"]})}})}function X(){return r({queryKey:["health"],queryFn:()=>T.getHealth(),staleTime:3e4,refetchOnMount:!0,refetchInterval:6e4})}const Z=t.createContext(),ee={kernel:"Kernel",fatal:"Fatal",subnet:"Subnet",archive:"Archive",buffer:"Buffer",gateway:"Gateway",catppuccin:"Catppuccin",pixel:"Pixel",debug:"Debug"};function te({children:e}){const{data:r}=Y(),n=G(),s=r?.theme&&ee[r.theme]?r.theme:(()=>{const e=localStorage.getItem("ytandchill-theme");return e&&ee[e]?e:"kernel"})();t.useEffect(()=>{const e=document.documentElement;Object.keys(ee).forEach(t=>e.classList.remove(`theme-${t}`)),e.classList.add(`theme-${s}`),localStorage.setItem("ytandchill-theme",s)},[s]);const a={theme:s,setTheme:e=>{n.mutate({theme:e})},themes:ee};return C.jsxDEV(Z.Provider,{value:a,children:e},void 0,!1,{fileName:"/appdata/frontend/src/contexts/ThemeContext.jsx",lineNumber:56,columnNumber:10},this)}function re(){const e=t.useContext(Z);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}const ne=t.createContext();function se({children:e}){const{data:r}=Y(),n=G();t.useEffect(()=>{localStorage.removeItem("global_card_size"),localStorage.removeItem("channels_card_size"),localStorage.removeItem("library_card_size"),localStorage.removeItem("cardSizes"),localStorage.removeItem("globalCardSize")},[]);const s=r?.channels_card_size||"md",a=r?.library_card_size||"md";return C.jsxDEV(ne.Provider,{value:{channelsCardSize:s,setChannelsCardSize:e=>{n.mutate({channels_card_size:e})},libraryCardSize:a,setLibraryCardSize:e=>{n.mutate({library_card_size:e})}},children:e},void 0,!1,{fileName:"/appdata/frontend/src/contexts/CardSizeContext.jsx",lineNumber:35,columnNumber:5},this)}function ae(e){const r=t.useContext(ne);if(!r)throw new Error("useCardSize must be used within CardSizeProvider");const n="library"===e;return{cardSize:n?r.libraryCardSize:r.channelsCardSize,setCardSize:n?r.setLibraryCardSize:r.setChannelsCardSize,channelsCardSize:r.channelsCardSize,setChannelsCardSize:r.setChannelsCardSize,libraryCardSize:r.libraryCardSize,setLibraryCardSize:r.setLibraryCardSize}}class ie extends t.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t)}render(){return this.state.hasError?C.jsxDEV("div",{className:"flex items-center justify-center h-screen bg-dark-primary",children:C.jsxDEV("div",{className:"text-center p-8",children:[C.jsxDEV("h1",{className:"text-2xl mb-4 text-text-primary",children:"Something went wrong"},void 0,!1,{fileName:"/appdata/frontend/src/components/ErrorBoundary.jsx",lineNumber:22,columnNumber:13},this),C.jsxDEV("p",{className:"text-text-secondary mb-6",children:this.state.error?.message},void 0,!1,{fileName:"/appdata/frontend/src/components/ErrorBoundary.jsx",lineNumber:23,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-accent text-white rounded hover:bg-accent-hover transition-colors",children:"Reload Page"},void 0,!1,{fileName:"/appdata/frontend/src/components/ErrorBoundary.jsx",lineNumber:24,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ErrorBoundary.jsx",lineNumber:21,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ErrorBoundary.jsx",lineNumber:20,columnNumber:9},this):this.props.children}}const oe=t.createContext({isSelectionBarVisible:!1,setSelectionBarVisible:()=>{}});function le({children:e}){const[r,n]=t.useState(!1),s=t.useCallback(e=>{n(e)},[]);return C.jsxDEV(oe.Provider,{value:{isSelectionBarVisible:r,setSelectionBarVisible:s},children:e},void 0,!1,{fileName:"/appdata/frontend/src/contexts/SelectionBarContext.jsx",lineNumber:16,columnNumber:5},this)}function de(){return t.useContext(oe)}function ce(e,t=null){if(!e)return t?`Failed to ${t}. Please try again.`:"An unknown error occurred";const r=e.toLowerCase();return r.includes("rate limit")?"YT rate limit detected. Wait a few minutes and try again, or refresh your cookies.":r.includes("cookie")||r.includes("sign in")||r.includes("login required")?"Cookie authentication failed. Re-export cookies.txt from your browser. See Settings â†’ Cookies for instructions.":r.includes("geoblocked")||r.includes("not available in your country")||r.includes("geo restricted")?"This video is geoblocked in your region and cannot be downloaded.":r.includes("private video")||r.includes("video unavailable")||r.includes("video not found")||r.includes("removed")?"This video is private, deleted, or unavailable.":r.includes("members only")||r.includes("join this channel")?"This video is members-only content and cannot be downloaded.":r.includes("age")&&r.includes("verif")?"This video requires age verification and cannot be downloaded without signing in.":r.includes("copyright")?"This video has been taken down due to copyright.":r.includes("network")||r.includes("connection")||r.includes("timeout")?"Network connection issue. Check your internet connection and try again.":r.includes("403")||r.includes("forbidden")?"Access forbidden (403). This usually means YT rate limiting. Update your cookies.txt and wait 30-60 minutes before trying again.":r.includes("500")||r.includes("internal server error")?"YT server error (500). This is a temporary issue on YT's end. Please try again later.":r.includes("502")||r.includes("503")||r.includes("504")?"YT is experiencing service issues. Please try again later.":r.includes("ssl")||r.includes("certificate")?"SSL certificate error. Try updating yt-dlp: pip install --upgrade yt-dlp certifi":r.includes("channel")&&(r.includes("not found")||r.includes("does not exist"))?"Channel not found. Check the URL and try again.":r.includes("invalid url")||r.includes("could not resolve")?"Invalid URL. Make sure you're using the correct channel URL format.":t?`Failed to ${t}. Please try again.`:e}function ue({children:e,className:t=""}){return C.jsxDEV("div",{className:`sticky top-0 z-40 bg-dark-primary/95 backdrop-blur-lg py-4 px-3 sm:-mx-6 sm:px-6 lg:-mx-12 lg:px-12 xl:-mx-16 xl:px-16 ${t}`,children:e},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/StickyBar.jsx",lineNumber:3,columnNumber:5},this)}function me({value:e,onChange:t,placeholder:r="Search videos, channels...",className:n=""}){return C.jsxDEV("div",{className:`relative ${n}`,children:[C.jsxDEV("input",{type:"text",value:e,onChange:e=>t(e.target.value),onKeyDown:r=>{"Escape"===r.key&&e&&(t(""),r.target.blur())},placeholder:r,className:"w-full h-[35px] pl-10 pr-9 text-sm bg-dark-secondary border border-dark-border rounded-lg text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:16,columnNumber:7},this),C.jsxDEV("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-muted",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"11",cy:"11",r:"8"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:25,columnNumber:9},this),C.jsxDEV("path",{d:"m21 21-4.35-4.35"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:26,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:24,columnNumber:7},this),e&&C.jsxDEV("button",{type:"button",onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors","aria-label":"Clear search",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:37,columnNumber:13},this),C.jsxDEV("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:38,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:36,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:30,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:15,columnNumber:5},this)}function pe({value:e,onChange:r,placeholder:n="Search...",className:s="",desktopWidth:a="sm:w-[200px]"}){const[i,o]=t.useState(!1),l=t.useRef(null),d=t.useRef(null);t.useEffect(()=>{i&&l.current&&l.current.focus()},[i]),t.useEffect(()=>{if(!i)return;const t=t=>{d.current&&!d.current.contains(t.target)&&(e||o(!1))};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[i,e]);const c=t=>{"Escape"===t.key&&(e?r(""):o(!1),t.target.blur())};return C.jsxDEV(C.Fragment,{children:[C.jsxDEV("div",{className:`hidden sm:block relative ${a} ${s}`,children:[C.jsxDEV("input",{type:"text",value:e,onChange:e=>r(e.target.value),onKeyDown:c,placeholder:n,className:"w-full h-[35px] pl-10 pr-9 text-sm bg-dark-secondary border border-dark-border rounded-lg text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:68,columnNumber:9},this),C.jsxDEV("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-muted",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"11",cy:"11",r:"8"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:77,columnNumber:11},this),C.jsxDEV("path",{d:"m21 21-4.35-4.35"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:78,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:76,columnNumber:9},this),e&&C.jsxDEV("button",{type:"button",onClick:()=>r(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors","aria-label":"Clear search",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:88,columnNumber:15},this),C.jsxDEV("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:89,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:87,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:81,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:67,columnNumber:7},this),C.jsxDEV("div",{className:`sm:hidden ${s}`,ref:d,children:i?C.jsxDEV("div",{className:"fixed inset-x-0 top-0 z-50 p-3 bg-dark-primary border-b border-dark-border animate-fade-in",children:C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("div",{className:"relative flex-1",children:[C.jsxDEV("input",{ref:l,type:"text",value:e,onChange:e=>r(e.target.value),onKeyDown:c,placeholder:n,className:"w-full pl-10 pr-4 py-2.5 text-sm bg-dark-secondary border border-dark-border rounded-lg text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:114,columnNumber:17},this),C.jsxDEV("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-muted",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"11",cy:"11",r:"8"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:124,columnNumber:19},this),C.jsxDEV("path",{d:"m21 21-4.35-4.35"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:125,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:123,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:113,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>{r(""),o(!1)},className:"p-2.5 rounded-lg bg-dark-tertiary border border-dark-border text-text-secondary hover:bg-red-500 hover:border-red-500 hover:text-white transition-all flex-shrink-0",title:"Close search",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:134,columnNumber:19},this),C.jsxDEV("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:135,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:133,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:128,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:112,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:111,columnNumber:11},this):C.jsxDEV("button",{onClick:()=>o(!0),className:"h-[35px] w-[35px] rounded-lg text-sm font-medium transition-colors flex items-center justify-center bg-dark-tertiary border border-dark-border-light text-text-primary hover:bg-dark-hover flex-shrink-0 "+(e?"bg-accent/20 border-accent/40 text-accent":""),title:"Search",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"11",cy:"11",r:"8"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:105,columnNumber:15},this),C.jsxDEV("path",{d:"m21 21-4.35-4.35"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:106,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:104,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:99,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:96,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CollapsibleSearch.jsx",lineNumber:65,columnNumber:5},this)}function be({options:e,value:r,onChange:n,durationValue:s,onDurationChange:a,durationOptions:i,className:o=""}){const[l,d]=t.useState(!1),c=t.useRef(null);t.useEffect(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&d(!1)};if(l)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[l]);const u=e.find(e=>e.value===r),m=i?.find(e=>e.value===s),p=u?.label||"Sort",b=s&&"all"!==s&&""!==s;return C.jsxDEV("div",{className:`relative ${o}`,ref:c,children:[C.jsxDEV("button",{onClick:()=>d(!l),className:"h-[35px] px-2.5 sm:px-3 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 bg-dark-tertiary border border-dark-border-light text-text-primary hover:bg-dark-hover "+(l?"bg-dark-hover":""),children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M3 6h18M7 12h10M10 18h4"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:52,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:51,columnNumber:9},this),C.jsxDEV("span",{className:"hidden sm:inline",children:p},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:54,columnNumber:9},this),b&&C.jsxDEV("span",{className:"bg-accent text-white text-xs px-1.5 py-0.5 rounded-full",children:m?.label},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:56,columnNumber:11},this),C.jsxDEV("svg",{className:"w-3 h-3 transition-transform "+(l?"rotate-180":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"6 9 12 15 18 9"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:61,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:60,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:47,columnNumber:7},this),l&&C.jsxDEV("div",{className:"absolute right-0 mt-2 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-2 min-w-[180px] z-50",children:[e.map((e,t)=>e.header?C.jsxDEV("div",{className:"px-3 py-1 text-xs font-semibold text-text-muted uppercase tracking-wider",children:e.header},`header-${t}`,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:71,columnNumber:17},this):e.divider?C.jsxDEV("div",{className:"border-t border-dark-border my-1"},`divider-${t}`,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:78,columnNumber:22},this):C.jsxDEV("button",{onClick:()=>{n(e.value),i||d(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-dark-hover transition-colors flex items-center gap-2 "+(r===e.value?"text-accent":"text-text-primary"),children:[C.jsxDEV("span",{className:"flex-1",children:e.label},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:94,columnNumber:17},this),r===e.value&&C.jsxDEV("svg",{className:"w-4 h-4 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:97,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:96,columnNumber:19},this)]},e.value,!0,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:82,columnNumber:15},this)),i&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("div",{className:"border-t border-dark-border my-1"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:107,columnNumber:15},this),C.jsxDEV("div",{className:"px-3 py-1 text-xs font-semibold text-text-muted uppercase tracking-wider",children:"Duration"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:108,columnNumber:15},this),i.map(e=>C.jsxDEV("button",{onClick:()=>{a(e.value),d(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-dark-hover transition-colors flex items-center gap-2 "+(s===e.value?"text-accent":"text-text-primary"),children:[C.jsxDEV("span",{className:"flex-1",children:e.label},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:122,columnNumber:19},this),s===e.value&&C.jsxDEV("svg",{className:"w-4 h-4 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:125,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:124,columnNumber:21},this)]},e.value,!0,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:112,columnNumber:17},this))]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:106,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:66,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SortDropdown.jsx",lineNumber:46,columnNumber:5},this)}function Ne({selectedCount:e=0,totalCount:r=0,onSelectAll:n,onClear:s,onDone:a,actions:i=[],show:o=!1,hideDone:l=!1,hideSelectControls:d=!1}){const[c,u]=t.useState(!1),[m,p]=t.useState(!1),{setSelectionBarVisible:b}=de();return t.useEffect(()=>{if(!o){p(!1),b(!1);const e=setTimeout(()=>{u(!1)},200);return()=>clearTimeout(e)}u(!0),b(!0),requestAnimationFrame(()=>{p(!0)})},[o,b]),t.useEffect(()=>()=>b(!1),[b]),c?C.jsxDEV("div",{className:"fixed bottom-0 left-0 right-0 z-50 transition-all duration-200 ease-out "+(m?"translate-y-0 opacity-100":"translate-y-full opacity-0"),children:C.jsxDEV("div",{className:"bg-dark-secondary/95 backdrop-blur-lg border-t border-dark-border shadow-[0_-4px_20px_rgba(0,0,0,0.3)] safe-area-bottom",children:C.jsxDEV("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 pt-3.5 pb-[15px] sm:py-3",children:C.jsxDEV("div",{className:"flex items-center justify-between md:justify-center gap-2 sm:gap-3",children:[C.jsxDEV("div",{className:"flex items-center gap-2 sm:gap-2",children:[C.jsxDEV("span",{className:"text-base sm:text-sm text-text-primary font-semibold min-w-[1.5rem] text-center",children:[C.jsxDEV("span",{className:"md:hidden",children:e},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:76,columnNumber:17},this),C.jsxDEV("span",{className:"hidden md:inline",children:[e," Selected"]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:77,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:75,columnNumber:15},this),!d&&r>0&&e<r&&C.jsxDEV("button",{onClick:n,className:"px-2.5 sm:px-3 py-2.5 sm:py-1.5 text-sm sm:text-sm bg-dark-tertiary hover:bg-dark-hover text-text-primary rounded-lg transition-colors",children:"All"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:82,columnNumber:17},this),!d&&e>0&&C.jsxDEV("button",{onClick:s,className:"px-2.5 sm:px-3 py-2.5 sm:py-1.5 text-sm sm:text-sm bg-dark-tertiary hover:bg-dark-hover text-text-secondary rounded-lg transition-colors",children:"Clear"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:92,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:73,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-center gap-2 sm:gap-2",children:[i.map((e,t)=>{const r=e.variant||(e.danger?"danger":e.primary?"primary":"default");return C.jsxDEV("button",{onClick:e.onClick,disabled:e.disabled,className:`px-2.5 sm:px-3 py-2.5 sm:py-1.5 text-sm sm:text-sm rounded-lg transition-colors flex items-center gap-1 disabled:opacity-75 disabled:cursor-not-allowed whitespace-nowrap ${{primary:"bg-accent hover:bg-accent-hover !text-white font-medium",accent:"bg-accent/20 hover:bg-accent/30 text-accent-text border border-accent/40 font-medium",danger:"bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300",warning:"bg-yellow-500/10 hover:bg-yellow-500/20 text-yellow-400 hover:text-yellow-300",success:"bg-green-500/10 hover:bg-green-500/20 text-green-400 hover:text-green-300",default:"bg-dark-tertiary hover:bg-dark-hover text-text-primary"}[r]}`,...e.dataAttrs||{},children:[e.icon&&C.jsxDEV("span",{className:"w-4 h-4",children:e.icon},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:122,columnNumber:37},this),C.jsxDEV("span",{children:e.label},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:123,columnNumber:21},this)]},t,!0,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:115,columnNumber:19},this)}),!l&&a&&C.jsxDEV("button",{onClick:a,className:"px-3 sm:px-4 py-2.5 sm:py-1.5 text-sm sm:text-sm bg-accent hover:bg-accent-hover text-white font-medium rounded-lg transition-colors",children:"Done"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:130,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:102,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:71,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:69,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:68,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SelectionBar.jsx",lineNumber:61,columnNumber:5},this):null}function fe({to:e,onClick:t,title:r="Go back"}){const n=m();return C.jsxDEV("button",{onClick:()=>{t?t():n(e||-1)},className:"flex items-center justify-center w-[35px] h-[35px] rounded-lg bg-dark-tertiary hover:bg-dark-hover border border-dark-border text-text-secondary hover:text-text-primary transition-colors flex-shrink-0",title:r,children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"15 18 9 12 15 6"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/BackButton.jsx",lineNumber:28,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/BackButton.jsx",lineNumber:27,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/BackButton.jsx",lineNumber:26,columnNumber:5},this)}function he({active:e,onToggle:t,className:r=""}){return C.jsxDEV("button",{onClick:t,title:e?"Exit selection mode":"Select items for bulk actions",className:`h-[35px] px-2.5 sm:px-4 rounded-lg text-sm font-medium transition-colors flex items-center ${e?"bg-accent text-black border border-accent":"bg-dark-tertiary border border-dark-border-light text-text-primary hover:bg-dark-hover"} ${r}`,children:C.jsxDEV("span",{children:e?"Done":"Edit"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/EditButton.jsx",lineNumber:19,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/EditButton.jsx",lineNumber:10,columnNumber:5},this)}function xe({tabs:e,active:t,onChange:r,showCountOnActive:n=!0,hideCountOnMobile:s=!1,className:a=""}){return C.jsxDEV("div",{className:`flex h-[35px] bg-dark-secondary rounded-lg p-[3px] border border-dark-border ${a}`,children:e.map(e=>{const a=t===e.id,i=null!=e.count&&e.count>0&&(!n||a);return C.jsxDEV("button",{onClick:()=>r(e.id),className:"px-2.5 sm:px-4 rounded-md text-sm font-medium transition-colors flex items-center "+(a?"bg-accent text-black font-semibold":"text-text-secondary hover:text-text-primary"),children:[e.label,i&&C.jsxDEV("span",{className:s?"hidden sm:inline":"",children:` (${e.count})`},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/TabGroup.jsx",lineNumber:37,columnNumber:15},this)]},e.id,!0,{fileName:"/appdata/frontend/src/components/stickybar/TabGroup.jsx",lineNumber:26,columnNumber:11},this)})},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/TabGroup.jsx",lineNumber:20,columnNumber:5},this)}function ve({label:e,mobileIcon:r,items:n,disabled:s=!1,variant:a="default",className:i="",align:o="left"}){const[l,d]=t.useState(!1),c=t.useRef(null);t.useEffect(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&d(!1)};if(l)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[l]);const u={default:"filter-btn",primary:"h-[35px] px-2.5 sm:px-4 rounded-lg text-sm font-medium transition-colors flex items-center gap-1 bg-accent border border-accent text-black hover:bg-accent-hover",secondary:"h-[35px] px-2.5 sm:px-4 rounded-lg text-sm font-medium transition-colors flex items-center gap-1 bg-dark-tertiary border border-dark-border-light text-text-primary hover:bg-dark-hover",iconOnly:"h-[35px] w-[35px] rounded-lg text-sm font-medium transition-colors flex items-center justify-center bg-dark-tertiary border border-dark-border-light text-text-primary hover:bg-dark-hover"};return C.jsxDEV("div",{className:`relative ${i}`,ref:c,children:[r&&C.jsxDEV("button",{onClick:()=>d(!l),disabled:s,className:`sm:hidden ${u.iconOnly} ${l?"bg-dark-hover":""} ${s?"opacity-50 cursor-not-allowed":""}`,children:C.jsxDEV("span",{className:"w-4 h-4",children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:60,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:55,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>d(!l),disabled:s,className:`${r?"hidden sm:flex":""} ${u[a]} ${l?"active":""} ${s?"opacity-50 cursor-not-allowed":""}`,children:[C.jsxDEV("span",{children:e},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:69,columnNumber:9},this),C.jsxDEV("svg",{className:"w-3.5 h-3.5 transition-transform "+(l?"rotate-180":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"6 9 12 15 18 9"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:77,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:70,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:64,columnNumber:7},this),l&&C.jsxDEV("div",{className:`absolute ${"right"===o?"right-0":"left-0"} mt-2 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-2 min-w-[180px] z-50 animate-scale-in`,children:n.map((e,t)=>{if(e.divider)return C.jsxDEV("div",{className:"border-t border-dark-border my-1"},`divider-${t}`,!1,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:87,columnNumber:17},this);if(e.header)return C.jsxDEV("div",{className:"px-3 py-1 text-xs font-semibold text-text-muted uppercase tracking-wider",children:e.header},`header-${t}`,!1,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:97,columnNumber:17},this);const r="danger"===e.variant;return C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),e.onClick?.(),d(!1)},disabled:e.disabled,className:`w-full px-4 py-2 text-left text-sm transition-colors flex items-center gap-2 ${r?"text-red-400 hover:bg-red-900/30":"text-text-primary hover:bg-dark-hover"} ${e.disabled?"opacity-50 cursor-not-allowed":""}`,children:[e.icon&&C.jsxDEV("span",{className:"w-4 h-4 flex-shrink-0",children:e.icon},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:125,columnNumber:31},this),C.jsxDEV("span",{className:"flex-1",children:e.label},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:126,columnNumber:17},this)]},e.label,!0,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:110,columnNumber:15},this)})},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:82,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/ActionDropdown.jsx",lineNumber:52,columnNumber:5},this)}function je({currentPage:e,totalItems:t,itemsPerPage:r,onPageChange:n}){const s=Math.ceil(t/r),a=Math.min(e*r,t);return 0===t?null:C.jsxDEV("div",{className:"flex items-center h-[35px] bg-dark-tertiary border border-dark-border-light rounded-lg",children:[C.jsxDEV("button",{onClick:()=>n(e-1),disabled:1===e,className:"px-2 h-full rounded-l-lg hover:bg-dark-hover disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:C.jsxDEV("svg",{className:"w-4 h-4 text-text-secondary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"15 18 9 12 15 6"},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:20,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:19,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:14,columnNumber:7},this),C.jsxDEV("span",{className:"text-sm text-text-secondary px-2 border-x border-dark-border",children:[a,"/",t]},void 0,!0,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:24,columnNumber:7},this),C.jsxDEV("button",{onClick:()=>n(e+1),disabled:e>=s,className:"px-2 h-full rounded-r-lg hover:bg-dark-hover disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:C.jsxDEV("svg",{className:"w-4 h-4 text-text-secondary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"9 18 15 12 9 6"},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:34,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:33,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:28,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:13,columnNumber:5},this)}function ye({sortValue:e,onSortChange:t,sortOptions:r,durationValue:n,onDurationChange:s,durationOptions:a,currentPage:i,totalItems:o,itemsPerPage:l=50,onPageChange:d,showMobileSort:c=!0}){return C.jsxDEV(C.Fragment,{children:[c&&C.jsxDEV("div",{className:"sm:hidden",children:C.jsxDEV(be,{value:e,onChange:t,options:r,durationValue:n,onDurationChange:s,durationOptions:a},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/StickyBarRightSection.jsx",lineNumber:41,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/StickyBarRightSection.jsx",lineNumber:40,columnNumber:9},this),C.jsxDEV("div",{className:"hidden sm:flex items-center gap-2 flex-shrink-0",children:[C.jsxDEV(be,{value:e,onChange:t,options:r,durationValue:n,onDurationChange:s,durationOptions:a},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/StickyBarRightSection.jsx",lineNumber:54,columnNumber:9},this),C.jsxDEV(je,{currentPage:i,totalItems:o,itemsPerPage:l,onPageChange:d},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/StickyBarRightSection.jsx",lineNumber:62,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/StickyBarRightSection.jsx",lineNumber:53,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/StickyBarRightSection.jsx",lineNumber:37,columnNumber:5},this)}const ge=(e,t="library")=>{const r=window.innerWidth,n="ontouchstart"in window||navigator.maxTouchPoints>0,s={touch:{sm:{portrait:1,landscape:4,tablet:6},md:{portrait:1,landscape:3,tablet:5},lg:{portrait:1,landscape:2,tablet:4}},desktop:{channels:{sm:{upTo1920:8,over1920:12},md:{upTo1920:6,over1920:10},lg:{upTo1920:5,over1920:7}},library:{sm:{upTo1920:8,over1920:12},md:{upTo1920:6,over1920:10},lg:{upTo1920:4,over1920:6}}}},a=s.desktop[t]||s.desktop.library,i=n?s.touch[e]||s.touch.md:a[e]||a.md;return n?r<640?i.portrait:r<1024?i.landscape:i.tablet:r<=1920?i.upTo1920:i.over1920},De=(e,t=1/0)=>{const r=ge("lg"),n={1:"grid-cols-1",2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5",6:"grid-cols-6",7:"grid-cols-7",8:"grid-cols-8",9:"grid-cols-9",10:"grid-cols-10",11:"grid-cols-11",12:"grid-cols-12"};return n[Math.min(e,Math.max(r,t))]||n[6]},Ee=(e,t=1/0)=>{const r=ge(e),n=Math.min(r,t);if(n===r)return e;ge("sm");const s=ge("md");return n<=ge("lg")?"lg":n<=s?"md":"sm"},Ve=(e,t=1/0)=>{const r={sm:{title:"text-xs",titleClamp:"line-clamp-3",metadata:"text-xs",badge:"text-xs"},md:{title:"text-sm",titleClamp:"line-clamp-2",metadata:"text-xs",badge:"text-xs"},lg:{title:"text-base",titleClamp:"line-clamp-2",metadata:"text-sm",badge:"text-sm"}};return r[Ee(e,t)]||r.md};function we({size:e="md",className:t=""}){return C.jsxDEV("div",{className:"flex justify-center items-center h-32 md:h-64",children:C.jsxDEV("div",{className:`animate-spin ${{sm:"h-6 w-6 border-2",md:"h-8 w-8 border-4",lg:"h-12 w-12 border-4"}[e]} border-accent border-t-transparent rounded-full ${t}`},void 0,!1,{fileName:"/appdata/frontend/src/components/LoadingSpinner.jsx",lineNumber:10,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/LoadingSpinner.jsx",lineNumber:9,columnNumber:5},this)}function ke({currentCount:e,totalCount:t,onLoadMore:r,loading:n=!1}){return e>=t?null:C.jsxDEV("div",{className:"flex justify-center py-6",children:C.jsxDEV("button",{onClick:r,disabled:n,className:"px-6 py-2 bg-dark-tertiary hover:bg-dark-hover border border-dark-border rounded-lg text-text-secondary transition-colors disabled:opacity-50",children:n?"Loading...":`Load More (${e}/${t})`},void 0,!1,{fileName:"/appdata/frontend/src/components/LoadMore.jsx",lineNumber:11,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/LoadMore.jsx",lineNumber:10,columnNumber:5},this)}const Ce=(e,r="library")=>{const[n,s]=t.useState(ge(e,r));return t.useEffect(()=>{const t="ontouchstart"in window||navigator.maxTouchPoints>0,n=()=>{t?setTimeout(()=>{s(ge(e,r))},100):s(ge(e,r))};return n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}},[e,r]),n};function Se({icon:e,title:t,message:r,iconType:n="svg"}){return C.jsxDEV("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:["emoji"===n?C.jsxDEV("div",{className:"text-6xl mb-4",children:e},void 0,!1,{fileName:"/appdata/frontend/src/components/EmptyState.jsx",lineNumber:14,columnNumber:9},this):C.jsxDEV("svg",{className:"w-16 h-16 mx-auto mb-4 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e},void 0,!1,{fileName:"/appdata/frontend/src/components/EmptyState.jsx",lineNumber:16,columnNumber:9},this),C.jsxDEV("p",{className:"text-lg font-medium text-text-primary",children:t},void 0,!1,{fileName:"/appdata/frontend/src/components/EmptyState.jsx",lineNumber:22,columnNumber:7},this),r&&C.jsxDEV("p",{className:"text-sm mt-2 text-text-secondary",children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/EmptyState.jsx",lineNumber:26,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/EmptyState.jsx",lineNumber:11,columnNumber:5},this)}function Pe(e,t,r=!1){return e&&void 0!==e[t]?"true"===e[t]:r}function _e(e,t,r,n=1){if(!e||void 0===e[t])return r;const s=Number(e[t]);return isNaN(s)||s<n?r:s}function Le(e,t,r){return e&&void 0!==e[t]?e[t]:r}const Me={videos:[{value:"date-desc",label:"Newest"},{value:"date-asc",label:"Oldest"},{divider:!0},{value:"title-asc",label:"A â†’ Z"},{value:"title-desc",label:"Z â†’ A"},{divider:!0},{value:"duration-desc",label:"Longest"},{value:"duration-asc",label:"Shortest"}],channels:[{value:"title-asc",label:"A â†’ Z"},{value:"title-desc",label:"Z â†’ A"},{divider:!0},{value:"scan-desc",label:"Last Scanned (Newest)"},{value:"scan-asc",label:"Last Scanned (Oldest)"},{divider:!0},{value:"count-desc",label:"Most Downloaded"},{value:"count-asc",label:"Least Downloaded"}],libraryChannels:[{value:"title-asc",label:"A â†’ Z"},{value:"title-desc",label:"Z â†’ A"},{divider:!0},{value:"count-desc",label:"Most Videos"},{value:"count-asc",label:"Least Videos"},{divider:!0},{value:"date-desc",label:"Newest"},{value:"date-asc",label:"Oldest"}],playlists:[{value:"title-asc",label:"A â†’ Z"},{value:"title-desc",label:"Z â†’ A"},{divider:!0},{value:"count-desc",label:"Most Videos"},{value:"count-asc",label:"Least Videos"}]},Ie=[{value:"all",label:"All"},{value:"0-30",label:"0-30 min"},{value:"30-60",label:"30-60 min"},{value:"over60",label:"Over 60 min"}];function Te(){const{data:e,isLoading:a}=A(),{data:i}=J(),{data:o}=r({queryKey:["channel-categories"],queryFn:()=>T.getChannelCategories(),staleTime:6e4}),{data:l}=Y(),d=function(){const e=n();return s({mutationFn:e=>T.createChannel(e),onSuccess:()=>{e.invalidateQueries({queryKey:["channels"]})}})}(),c=B(),u=$(),b=R(),N=function(){const e=n();return s({mutationFn:e=>T.createChannelCategory(e),onSuccess:()=>{e.invalidateQueries({queryKey:["channel-categories"]})}})}(),f=function(){const e=n();return s({mutationFn:({id:e,data:t})=>T.updateChannelCategory(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["channel-categories"]})}})}(),h=function(){const e=n();return s({mutationFn:e=>T.deleteChannelCategory(e),onSuccess:()=>{e.invalidateQueries({queryKey:["channel-categories"]}),e.invalidateQueries({queryKey:["channels"]})}})}(),{showNotification:x}=I(),{cardSize:v}=ae("channels"),j=m(),y=n(),g=Ce(v,"channels"),[D,E]=t.useState(!1),[V,w]=t.useState(""),[k,S]=t.useState(0),[P,_]=t.useState(0),[L,M]=t.useState(null),[F,O]=t.useState(null),[q,z]=t.useState(null),[W,Q]=t.useState(null),[K,U]=t.useState(""),[H,G]=t.useState(localStorage.getItem("channels_sortBy")||"title-asc"),[X,Z]=t.useState([]),[ee,te]=t.useState(!1),[re,ne]=t.useState(null),[se,ie]=t.useState(()=>{const e=localStorage.getItem("channels_categoryFilter");return e?JSON.parse(e):[]}),[oe,le]=t.useState(!1),de=t.useRef(null),[fe,xe]=t.useState(!1),[ye,ge]=t.useState(""),[Pe,Le]=t.useState(null),[Ie,Te]=t.useState(null),[Ae,Re]=t.useState(null),[Be,$e]=t.useState(null),[Fe,Oe]=t.useState(1),[qe,ze]=t.useState(1),We=_e(l,"items_per_page",50),Qe=window.innerWidth<640,Ke=i?.current_operation,Ue=t.useRef(null),He="scanning"===Ke?.type;t.useEffect(()=>{"scan_complete"===Ke?.type&&"scan_complete"!==Ue.current&&(y.invalidateQueries(["channels"]),Z([]),$e(null)),Ue.current=Ke?.type},[Ke?.type,y]),t.useEffect(()=>{(async()=>{try{const e=await fetch("/api/settings/discoveries-flag");(await e.json()).new_discoveries&&(G("most_to_review"),localStorage.setItem("channels_sortBy","most_to_review"),await fetch("/api/settings/discoveries-flag",{method:"DELETE"}))}catch(e){console.error("Error checking discoveries flag:",e)}})()},[]);const Je=async(t=!1)=>{if(!e||0===e.length)return void x("No channels to scan","info");if(t)if(l?.youtube_api_key)try{(await T.testYoutubeApiKey()).valid||x("API key is invalid - upload dates will not be fetched","warning")}catch(o){x("API key is invalid - upload dates will not be fetched","warning")}else x("No API key configured - upload dates will not be fetched","warning");$e(t?"all":"new");const r=X.length>0?e.filter(e=>X.includes(e.id)):e.filter(e=>"__singles__"!==e.yt_id);if(0===r.length)return void x("No channels selected","info");let n;n=0===X.length?t?"Scan All":"Scan New":1===r.length?r[0].title:`Scan ${r.length} channels`,T.setOperation("scanning","Scanning channels for new videos").catch(()=>{}),y.invalidateQueries(["queue"]);let s=0,a=0,i=0;for(const e of r)try{const r=await u.mutateAsync({id:e.id,forceFull:t,is_batch_start:0===s,is_auto_scan:!1,batch_label:n});if("queued"===r.status)s++;else{if("batch_in_progress"===r.status)return void x("A scan is already running. Please wait for it to complete.","warning");"already_queued"===r.status&&a++}}catch(o){console.error(`Failed to queue scan for channel ${e.title}:`,o),i++}if(i>0){x(`Queued ${s} scans (${a} already queued, ${i} errors)`,"warning")}};t.useEffect(()=>{const e=e=>{const t=document.querySelectorAll(".channel-card-container");let r=!0;if(t.forEach(t=>{t.contains(e.target)&&(r=!1)}),r&&(z(null),Q(null),Re(null)),de.current&&!de.current.contains(e.target)){e.target.closest("[data-category-trigger]")||le(!1)}};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),t.useEffect(()=>{localStorage.setItem("channels_sortBy",H)},[H]),t.useEffect(()=>{localStorage.setItem("channels_categoryFilter",JSON.stringify(se))},[se]);const Ye=e=>{if(!e)return null;const t=new Date(e);if((e=>{const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()})(t)){const e=t.getHours(),r=e>=12?"pm":"am";return`${e%12||12}:${t.getMinutes().toString().padStart(2,"0")}${r}`}return t.toLocaleDateString("en-US",{month:"numeric",day:"numeric"})},Ge=e=>{if(!e)return"-";return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},Xe=t.useMemo(()=>{let t=e?.filter(e=>"__singles__"!==e.yt_id&&(e.title||"").toLowerCase().includes(K.toLowerCase()))||[];se.length>0&&(t=t.filter(e=>!(!se.includes("uncategorized")||e.category_id)||se.includes(e.category_id)));return[...t].sort((e,t)=>{const r=(e.video_count||0)>0?1:0,n=(t.video_count||0)>0?1:0;if(r!==n)return n-r;switch(H){case"title-asc":return(e.title||"").localeCompare(t.title||"");case"title-desc":return(t.title||"").localeCompare(e.title||"");case"scan-desc":return new Date(t.last_scan_at||0)-new Date(e.last_scan_at||0);case"scan-asc":return new Date(e.last_scan_at||0)-new Date(t.last_scan_at||0);case"count-desc":return(t.downloaded_count||0)-(e.downloaded_count||0);case"count-asc":return(e.downloaded_count||0)-(t.downloaded_count||0);default:return 0}})},[e,K,se,H]);t.useEffect(()=>{Oe(1),ze(1)},[K,H,se]);const Ze=t.useMemo(()=>{if(Qe)return Xe.slice(0,qe*We);const e=(Fe-1)*We;return Xe.slice(e,e+We)},[Xe,Fe,We,qe,Qe]);return C.jsxDEV("div",{className:"space-y-2 animate-fade-in",children:[C.jsxDEV(ue,{children:C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[C.jsxDEV(ve,{label:"Add",variant:"primary",items:[{label:"Follow Channel",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:561,columnNumber:23},this),C.jsxDEV("circle",{cx:"8.5",cy:"7",r:"4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:562,columnNumber:23},this),C.jsxDEV("line",{x1:"20",y1:"8",x2:"20",y2:"14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:563,columnNumber:23},this),C.jsxDEV("line",{x1:"23",y1:"11",x2:"17",y2:"11"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:564,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:560,columnNumber:21},this),onClick:()=>E(!0)},{divider:!0},{label:"Add Once",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polygon",{points:"23 7 16 12 23 17 23 7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:574,columnNumber:23},this),C.jsxDEV("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:575,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:573,columnNumber:21},this),onClick:()=>j("/videos")},{label:"Import Existing",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:584,columnNumber:23},this),C.jsxDEV("polyline",{points:"17 8 12 3 7 8"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:585,columnNumber:23},this),C.jsxDEV("line",{x1:"12",y1:"3",x2:"12",y2:"15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:586,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:583,columnNumber:21},this),onClick:()=>j("/import")}]},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:553,columnNumber:13},this),C.jsxDEV(ve,{label:He?"Scanning...":"Scan",variant:"secondary",disabled:!e||0===e.length||He,items:[{label:X.length>0?"Scan Selected (New)":"Scan New Videos",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"23 4 23 10 17 10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:604,columnNumber:23},this),C.jsxDEV("path",{d:"M20.49 15a9 9 0 01-2.12 3.36 9 9 0 01-11.58 1.47A9 9 0 013 12a9 9 0 011.79-5.37A9 9 0 0112 3a9 9 0 018.5 6.5L23 10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:605,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:603,columnNumber:21},this),onClick:()=>Je(!1)},{label:X.length>0?"Scan Selected (All)":"Scan All Videos",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"23 4 23 10 17 10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:614,columnNumber:23},this),C.jsxDEV("polyline",{points:"1 20 1 14 7 14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:615,columnNumber:23},this),C.jsxDEV("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:616,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:613,columnNumber:21},this),onClick:()=>Je(!0)}]},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:595,columnNumber:13},this),C.jsxDEV(he,{active:ee,onToggle:()=>{te(!ee),Z([])}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:625,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:551,columnNumber:11},this),C.jsxDEV("div",{className:"hidden sm:block flex-1 max-w-md mx-4",children:C.jsxDEV(me,{value:K,onChange:U,placeholder:"Search channels...",className:"w-full"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:636,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:635,columnNumber:11},this),C.jsxDEV("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0 ml-auto",children:[C.jsxDEV("div",{className:"sm:hidden flex items-center gap-1",children:[C.jsxDEV(be,{value:H,onChange:e=>{G(e),localStorage.setItem("channels_sortBy",e)},options:Me.channels},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:648,columnNumber:15},this),C.jsxDEV(pe,{value:K,onChange:U,placeholder:"Search channels..."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:656,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:647,columnNumber:13},this),C.jsxDEV("div",{className:"hidden sm:block",children:C.jsxDEV(be,{value:H,onChange:e=>{G(e),localStorage.setItem("channels_sortBy",e)},options:Me.channels},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:665,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:664,columnNumber:13},this),C.jsxDEV("div",{className:"hidden sm:block",children:C.jsxDEV(je,{currentPage:Fe,totalItems:Xe.length,itemsPerPage:We,onPageChange:Oe},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:675,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:674,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:645,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:549,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:547,columnNumber:7},this),C.jsxDEV(Ne,{show:ee&&Xe.length>0,selectedCount:X.length,totalCount:Xe.length,onSelectAll:()=>Z(Xe.map(e=>e.id)),onClear:()=>Z([]),onDone:()=>{te(!1),Z([])},actions:[...X.length>0?[{label:"Category",onClick:()=>le(e=>!e),variant:"default",dataAttrs:{"data-category-trigger":!0}}]:[],...X.length>0?[{label:"Delete",onClick:()=>O({bulk:!0,count:X.length}),variant:"danger"}]:[]]},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:687,columnNumber:7},this),oe&&C.jsxDEV("div",{ref:de,className:"fixed bottom-20 left-3 right-3 sm:left-auto sm:right-4 sm:w-64 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-2 z-[60]",children:[C.jsxDEV("div",{className:"px-3 py-2 text-xs font-semibold text-text-secondary uppercase",children:"Assign to Category"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:718,columnNumber:11},this),C.jsxDEV("button",{className:"flex items-center gap-2 px-4 py-2 hover:bg-dark-hover cursor-pointer w-full text-left",onClick:async()=>{const e=X.length;x(`Assigning ${e} channel${e>1?"s":""} to Uncategorized...`,"info");let t=0,r=0;for(const s of X)try{await b.mutateAsync({id:s,data:{category_id:null}}),t++}catch(n){console.error(`Failed to update channel ${s}:`,n),r++}0===r?x(`${t} channel${t>1?"s":""} set to Uncategorized`,"success"):x(`${t} assigned, ${r} failed`,"warning"),Z([]),le(!1)},children:C.jsxDEV("span",{className:"text-sm text-text-secondary italic",children:"Uncategorized"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:752,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:723,columnNumber:11},this),o?.map(e=>C.jsxDEV("button",{className:"flex items-center gap-2 px-4 py-2 hover:bg-dark-hover cursor-pointer w-full text-left",onClick:async()=>{const t=X.length;x(`Assigning ${t} channel${t>1?"s":""} to ${e.name}...`,"info");let r=0,n=0;for(const a of X)try{await b.mutateAsync({id:a,data:{category_id:e.id}}),r++}catch(s){console.error(`Failed to update channel ${a}:`,s),n++}0===n?x(`${r} channel${r>1?"s":""} assigned to ${e.name}`,"success"):x(`${r} assigned, ${n} failed`,"warning"),y.invalidateQueries(["channel-categories"]),Z([]),le(!1)},children:[C.jsxDEV("span",{className:"text-sm text-text-primary",children:e.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:788,columnNumber:15},this),C.jsxDEV("span",{className:"text-xs text-text-muted ml-auto",children:e.channel_count},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:789,columnNumber:15},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:757,columnNumber:13},this)),C.jsxDEV("div",{className:"border-t border-dark-border mt-2 pt-2",children:C.jsxDEV("button",{onClick:()=>{le(!1),xe(!0)},className:"w-full px-4 py-2 text-left text-sm text-accent-text hover:bg-dark-hover",children:"Manage Categories..."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:795,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:794,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:714,columnNumber:9},this),D&&C.jsxDEV("div",{className:"card p-4 animate-slide-down max-w-2xl mx-auto",children:C.jsxDEV("form",{onSubmit:async e=>{e.preventDefault();let t=V.trim();t.startsWith("@")&&!t.includes("youtube.com")&&(t=`https://www.youtube.com/${t}`);if(["/videos","/playlists","/streams","/shorts","/community","/about","/channels","/featured"].some(e=>t.toLowerCase().includes(e)))x("Invalid URL: Remove /videos, /playlists, or /streams from the channel URL","error");else try{const e=await d.mutateAsync({url:t,min_minutes:k,max_minutes:P});w(""),S(0),_(0),E(!1),e.scan_result&&"queued"===e.scan_result.status?x("Channel added! Initial scan queued","success"):x("Channel added successfully","success")}catch(r){x(ce(r.message,"add channel"),"error")}},className:"space-y-3",children:[C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"text-xs font-semibold text-text-secondary mb-1 block",children:"Channel URL or ID"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:812,columnNumber:15},this),C.jsxDEV("input",{type:"text",value:V,onChange:e=>w(e.target.value),placeholder:"https://www.youtube.com/channel/...",className:"input text-sm py-1.5 px-3 w-full",required:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:813,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:811,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-end gap-3",children:[C.jsxDEV("div",{className:"w-32",children:[C.jsxDEV("div",{className:"flex items-center gap-1 mb-1",children:[C.jsxDEV("label",{className:"text-xs font-semibold text-text-secondary",children:"Min (min)"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:825,columnNumber:19},this),C.jsxDEV("button",{type:"button",className:"text-text-secondary hover:text-text-primary transition-colors",title:"Minimum video duration in minutes. Only videos longer than this will be found. Use 0 for no minimum.",children:C.jsxDEV("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:832,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:831,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:826,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:824,columnNumber:17},this),C.jsxDEV("input",{type:"number",value:k,onChange:e=>S(Number(e.target.value)),placeholder:"0",className:"input text-sm py-1.5 px-3 w-full",min:"0"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:836,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:823,columnNumber:15},this),C.jsxDEV("div",{className:"w-32",children:[C.jsxDEV("div",{className:"flex items-center gap-1 mb-1",children:[C.jsxDEV("label",{className:"text-xs font-semibold text-text-secondary",children:"Max (min)"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:847,columnNumber:19},this),C.jsxDEV("button",{type:"button",className:"text-text-secondary hover:text-text-primary transition-colors",title:"Maximum video duration in minutes. Only videos shorter than this will be found. Use 0 for no maximum.",children:C.jsxDEV("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:854,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:853,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:848,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:846,columnNumber:17},this),C.jsxDEV("input",{type:"number",value:P,onChange:e=>_(Number(e.target.value)),placeholder:"0",className:"input text-sm py-1.5 px-3 w-full",min:"0"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:858,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:845,columnNumber:15},this),C.jsxDEV("button",{type:"submit",disabled:d.isPending,className:"btn btn-primary py-1.5 px-4 text-sm",children:d.isPending?"Adding...":"Add Channel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:867,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:822,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:810,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:809,columnNumber:9},this),(()=>{const e=Ee(v,Ze.length),t=Ve(e);return C.jsxDEV("div",{className:`grid ${De(g,Ze.length)} gap-4 w-full [&>*]:min-w-0`,children:Ze.map(e=>C.jsxDEV("div",{className:"relative group channel-card-container",children:[q===e.id&&C.jsxDEV("div",{className:"absolute top-10 right-2 bg-dark-secondary border border-dark-border rounded-lg shadow-xl z-[100] w-[200px] animate-scale-in",children:C.jsxDEV("div",{className:"py-1 max-h-[400px] overflow-y-auto",children:[C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation();const r=!e.auto_download;b.mutate({id:e.id,data:{auto_download:r}},{onSuccess:()=>{x(r?`Auto-download enabled for ${e.title}`:`Auto-download disabled for ${e.title}`,"success")}})},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",title:"If checked, will automatically download any new video that is found via scan (manual or automated)",children:[C.jsxDEV("input",{type:"checkbox",checked:e.auto_download||!1,readOnly:!0,className:"w-4 h-4 rounded border-dark-border bg-dark-tertiary text-accent-text"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:914,columnNumber:21},this),C.jsxDEV("span",{className:"font-medium",children:"Auto-Download"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:920,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:892,columnNumber:19},this),C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),Q(W===e.id?null:e.id),W!==e.id&&M(e)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center justify-between",children:[C.jsxDEV("span",{className:"font-medium",children:"Duration Settings"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:935,columnNumber:21},this),C.jsxDEV("svg",{className:"w-4 h-4 text-text-muted transition-transform "+(W===e.id?"rotate-90":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"9 18 15 12 9 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:937,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:936,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:924,columnNumber:19},this),W===e.id&&C.jsxDEV("div",{className:"bg-dark-tertiary/50 border-t border-dark-border p-3 space-y-2",children:[C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("div",{className:"flex-1",children:[C.jsxDEV("label",{className:"block text-xs text-text-secondary mb-1",children:"Min"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:946,columnNumber:27},this),C.jsxDEV("input",{type:"number",value:L?.id===e.id?L.min_minutes:e.min_minutes,onChange:t=>M({...e,min_minutes:Number(t.target.value),max_minutes:L?.id===e.id?L.max_minutes:e.max_minutes}),onClick:e=>e.stopPropagation(),className:"input text-sm py-1 w-full",min:"0",title:"Minimum video duration in minutes. Only videos longer than this will be found. Use 0 for no minimum."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:947,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:945,columnNumber:25},this),C.jsxDEV("div",{className:"flex-1",children:[C.jsxDEV("label",{className:"block text-xs text-text-secondary mb-1",children:"Max"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:962,columnNumber:27},this),C.jsxDEV("input",{type:"number",value:L?.id===e.id?L.max_minutes:e.max_minutes,onChange:t=>M({...e,max_minutes:Number(t.target.value),min_minutes:L?.id===e.id?L.min_minutes:e.min_minutes}),onClick:e=>e.stopPropagation(),className:"input text-sm py-1 w-full",min:"0",title:"Maximum video duration in minutes. Only videos shorter than this will be found. Use 0 for no maximum."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:963,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:961,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:944,columnNumber:23},this),C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),(async e=>{try{await b.mutateAsync({id:e.id,data:{min_minutes:e.min_minutes,max_minutes:e.max_minutes}}),M(null),x("Filters updated","success")}catch(t){x(ce(t.message,"update filters"),"error")}})(L||e),Q(null),z(null)},className:"w-full btn btn-primary btn-sm",children:"Save"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:978,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:943,columnNumber:21},this),C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),Re(Ae===e.id?null:e.id)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center justify-between",children:[C.jsxDEV("span",{className:"font-medium",children:"Set Category"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1002,columnNumber:21},this),C.jsxDEV("svg",{className:"w-4 h-4 text-text-muted transition-transform "+(Ae===e.id?"rotate-90":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"9 18 15 12 9 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1004,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1003,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:994,columnNumber:19},this),Ae===e.id&&C.jsxDEV("div",{className:"bg-dark-tertiary/50 border-t border-dark-border",children:[C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),b.mutate({id:e.id,data:{category_id:null}},{onSuccess:()=>{x(`${e.title} set to Uncategorized`,"success"),Re(null),z(null)}})},className:"w-full px-6 py-2 text-left text-sm hover:bg-dark-hover transition-colors flex items-center gap-2 "+(e.category_id?"text-text-secondary italic":"text-accent-text"),children:[!e.category_id&&C.jsxDEV("svg",{className:"w-3 h-3",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12",stroke:"currentColor",strokeWidth:"3",fill:"none"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1031,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1030,columnNumber:27},this),C.jsxDEV("span",{className:e.category_id?"ml-5":"",children:"Uncategorized"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1034,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1012,columnNumber:23},this),o?.map(t=>C.jsxDEV("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),b.mutate({id:e.id,data:{category_id:t.id}},{onSuccess:()=>{x(`${e.title} moved to ${t.name}`,"success"),Re(null),z(null)}})},className:"w-full px-6 py-2 text-left text-sm hover:bg-dark-hover transition-colors flex items-center gap-2 "+(e.category_id===t.id?"text-accent-text":"text-text-primary"),children:[e.category_id===t.id&&C.jsxDEV("svg",{className:"w-3 h-3",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12",stroke:"currentColor",strokeWidth:"3",fill:"none"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1059,columnNumber:31},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1058,columnNumber:29},this),C.jsxDEV("span",{className:e.category_id===t.id?"":"ml-5",children:t.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1062,columnNumber:27},this)]},t.id,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1039,columnNumber:25},this)),(!o||0===o.length)&&C.jsxDEV("div",{className:"px-6 py-2 text-sm text-text-muted italic",children:"No categories yet"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1068,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1010,columnNumber:21},this),C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),ne(e),z(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors",children:C.jsxDEV("span",{className:"font-medium",children:"Channel Info"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1085,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1076,columnNumber:19},this),C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),O({id:e.id,title:e.title}),z(null)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-red-900/30 transition-colors border-t border-dark-border",children:C.jsxDEV("span",{className:"font-medium",children:"Delete Channel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1098,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1089,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:890,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:889,columnNumber:15},this),C.jsxDEV("div",{className:"relative overflow-hidden cursor-pointer transition-all rounded-xl group",onClick:()=>{ee&&Z(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id])},children:[(e.video_count||0)>0&&C.jsxDEV("div",{className:"absolute top-0 left-0 bg-accent text-white font-bold text-sm px-2 py-1 rounded-tl-xl rounded-br-lg leading-none z-20",children:e.video_count},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1118,columnNumber:17},this),ee&&X.includes(e.id)&&C.jsxDEV("div",{className:"absolute top-2 right-2 bg-black/80 text-white rounded-full p-1.5 shadow-lg z-20",children:C.jsxDEV("svg",{className:"w-4 h-4 text-accent-text",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1127,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1126,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1125,columnNumber:17},this),C.jsxDEV(p,{to:`/channel/${e.id}`,className:"block",onClick:e=>{ee&&e.preventDefault()},children:[C.jsxDEV("div",{className:"relative w-full aspect-video bg-dark-tertiary overflow-hidden transition-all rounded-t-xl rounded-b-xl group-hover:rounded-b-none "+((e.video_count||0)>0?"border-4 border-accent":""),children:[e.thumbnail?C.jsxDEV("img",{src:e.thumbnail,alt:e.title,className:"absolute inset-0 w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1146,columnNumber:21},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-10 h-10 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1154,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1153,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1152,columnNumber:21},this),e.auto_download&&C.jsxDEV("div",{className:"absolute bottom-0 left-0 bg-green-500 text-white font-bold text-xs px-1.5 py-0.5 rounded-bl-xl group-hover:rounded-bl-none rounded-tr-lg z-10",children:"AUTO"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1161,columnNumber:21},this),C.jsxDEV("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded z-10",children:Ye(e.last_scan_time)||"Never"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1167,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1142,columnNumber:17},this),C.jsxDEV("div",{className:"p-3 rounded-b-xl transition-colors "+(ee&&X.includes(e.id)?"bg-dark-tertiary":"group-hover:bg-dark-tertiary"),children:C.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[C.jsxDEV("h3",{className:`${t.title} font-semibold text-text-primary line-clamp-2 leading-tight flex-1 min-w-0`,title:e.title,children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1176,columnNumber:21},this),!ee&&C.jsxDEV("div",{className:"relative flex-shrink-0",children:C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),Re(null),z(q===e.id?null:e.id)},className:"p-1 rounded hover:bg-dark-hover transition-colors","aria-label":"Channel options",children:C.jsxDEV("svg",{className:"w-5 h-5 text-text-secondary",viewBox:"0 0 24 24",fill:"currentColor",children:[C.jsxDEV("circle",{cx:"12",cy:"5",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1194,columnNumber:29},this),C.jsxDEV("circle",{cx:"12",cy:"12",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1195,columnNumber:29},this),C.jsxDEV("circle",{cx:"12",cy:"19",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1196,columnNumber:29},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1193,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1183,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1182,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1175,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1173,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1132,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1104,columnNumber:13},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:886,columnNumber:11},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:884,columnNumber:9},this)})(),Qe&&Xe.length>0&&C.jsxDEV(ke,{currentCount:Ze.length,totalCount:Xe.length,onLoadMore:()=>ze(e=>e+1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1214,columnNumber:9},this),a?C.jsxDEV("div",{className:"flex justify-center py-12",children:C.jsxDEV(we,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1223,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1222,columnNumber:9},this):0===Xe.length?K?C.jsxDEV(Se,{icon:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1228,columnNumber:19},this),title:"No matching channels",message:"Try a different search term"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1227,columnNumber:11},this):C.jsxDEV("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[C.jsxDEV("svg",{className:"w-20 h-20 text-text-muted mb-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1235,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1234,columnNumber:13},this),C.jsxDEV("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"No channels yet"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1237,columnNumber:13},this),C.jsxDEV("p",{className:"text-text-secondary mb-6 text-center max-w-md",children:"Subscribe to YT channels to monitor them for new videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1238,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>E(!0),className:"btn btn-primary text-lg px-8 py-3 flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1246,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1245,columnNumber:15},this),"Add your first channel"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1241,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1233,columnNumber:11},this):null,F&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary mb-3",children:F.bulk?`Delete ${F.count} Channel${F.count>1?"s":""}?`:"Delete Channel?"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1258,columnNumber:13},this),C.jsxDEV("p",{className:"text-text-secondary mb-4",children:F.bulk?`Are you sure you want to delete ${F.count} selected channel${F.count>1?"s":""}?`:C.jsxDEV(C.Fragment,{children:['Are you sure you want to delete "',C.jsxDEV("span",{className:"text-text-primary font-semibold",children:F.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1264,columnNumber:54},this),'"?']},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1264,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1261,columnNumber:13},this),C.jsxDEV("p",{className:"text-sm text-text-muted mb-6",children:["This will remove the channel",F.bulk&&F.count>1?"s":""," from your subscriptions and clear any pending/discovered videos. Downloaded videos will remain in your library."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1267,columnNumber:13},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>O(null),className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1271,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>F.bulk?(async()=>{if(0===X.length)return;X.length;let e=0,t=0;for(const n of X)try{await c.mutateAsync(n),e++}catch(r){console.error(`Failed to delete channel ${n}:`,r),t++}0===t?x(`${e} channel${e>1?"s":""} deleted`,"success"):x(`${e} deleted, ${t} failed`,"warning"),Z([]),O(null)})():(async e=>{try{await c.mutateAsync(e),x("Channel deleted","success"),O(null)}catch(t){x(ce(t.message,"delete channel"),"error")}})(F.id),disabled:c.isPending,className:"btn btn-danger flex-1",children:c.isPending?"Deleting...":"Delete"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1277,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1270,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1257,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1256,columnNumber:9},this),re&&C.jsxDEV("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>ne(null),children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-lg w-full shadow-2xl border border-dark-border",onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-dark-border",children:[C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Channel Info"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1300,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>ne(null),className:"text-text-secondary hover:text-text-primary transition-colors",children:C.jsxDEV("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1306,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1305,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1301,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1299,columnNumber:13},this),C.jsxDEV("div",{className:"p-4 space-y-1 text-sm font-mono",children:[C.jsxDEV("div",{className:"flex",children:[C.jsxDEV("span",{className:"text-text-secondary w-24 flex-shrink-0",children:"YT ID:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1312,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary",children:re.yt_id},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1313,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1311,columnNumber:15},this),C.jsxDEV("div",{className:"flex",children:[C.jsxDEV("span",{className:"text-text-secondary w-24 flex-shrink-0",children:"Title:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1316,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary",children:re.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1317,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1315,columnNumber:15},this),C.jsxDEV("div",{className:"flex",children:[C.jsxDEV("span",{className:"text-text-secondary w-24 flex-shrink-0",children:"Thumbnail:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1320,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary truncate",title:re.thumbnail||"-",children:re.thumbnail||"-"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1321,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1319,columnNumber:15},this),C.jsxDEV("div",{className:"flex",children:[C.jsxDEV("span",{className:"text-text-secondary w-24 flex-shrink-0",children:"Folder:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1326,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary",children:re.folder_name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1327,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1325,columnNumber:15},this),C.jsxDEV("div",{className:"flex",children:[C.jsxDEV("span",{className:"text-text-secondary w-24 flex-shrink-0",children:"Last Scan:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1330,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary",children:re.last_scan_at?Ge(re.last_scan_at):"-"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1331,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1329,columnNumber:15},this),C.jsxDEV("div",{className:"flex",children:[C.jsxDEV("span",{className:"text-text-secondary w-24 flex-shrink-0",children:"Created:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1336,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary",children:re.created_at?Ge(re.created_at):"-"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1337,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1335,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1310,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1295,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1291,columnNumber:9},this),fe&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary",children:"Manage Categories"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1351,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>{xe(!1),ge(""),Le(null)},className:"text-text-muted hover:text-text-primary",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1361,columnNumber:19},this),C.jsxDEV("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1362,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1360,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1352,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1350,columnNumber:13},this),C.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),ye.trim())try{await N.mutateAsync({name:ye.trim()}),ge(""),x("Category created","success")}catch(t){x(ce(t.message,"create category"),"error")}},className:"flex gap-2 mb-4",children:[C.jsxDEV("input",{type:"text",value:ye,onChange:e=>ge(e.target.value),placeholder:"New category name...",className:"input flex-1 text-sm py-1.5 px-3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1382,columnNumber:15},this),C.jsxDEV("button",{type:"submit",disabled:!ye.trim()||N.isPending,className:"btn btn-primary btn-sm",children:"Add"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1389,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1368,columnNumber:13},this),C.jsxDEV("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[0===o?.length&&C.jsxDEV("p",{className:"text-text-muted text-sm text-center py-4",children:"No categories yet"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1401,columnNumber:17},this),o?.map(e=>C.jsxDEV("div",{className:"flex items-center justify-between p-2 bg-dark-tertiary rounded",children:Pe?.id===e.id?C.jsxDEV("form",{onSubmit:async t=>{if(t.preventDefault(),Pe.name.trim())try{await f.mutateAsync({id:e.id,data:{name:Pe.name.trim()}}),Le(null),x("Category renamed","success")}catch(r){x(ce(r.message,"rename category"),"error")}},className:"flex gap-2 flex-1",children:[C.jsxDEV("input",{type:"text",value:Pe.name,onChange:e=>Le({...Pe,name:e.target.value}),className:"input flex-1 text-sm py-1 px-2",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1423,columnNumber:23},this),C.jsxDEV("button",{type:"submit",className:"text-green-500 hover:text-green-400",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1432,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1431,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1430,columnNumber:23},this),C.jsxDEV("button",{type:"button",onClick:()=>Le(null),className:"text-text-muted hover:text-text-primary",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1441,columnNumber:27},this),C.jsxDEV("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1442,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1440,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1435,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1406,columnNumber:21},this):C.jsxDEV(C.Fragment,{children:[C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("span",{className:"text-text-primary text-sm",children:e.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1449,columnNumber:25},this),C.jsxDEV("span",{className:"text-xs text-text-muted",children:["(",e.channel_count,")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1450,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1448,columnNumber:23},this),C.jsxDEV("div",{className:"flex items-center gap-1",children:[C.jsxDEV("button",{onClick:()=>Le({id:e.id,name:e.name}),className:"p-1 text-text-muted hover:text-text-primary",title:"Rename","aria-label":"Rename category",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1460,columnNumber:29},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1461,columnNumber:29},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1459,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1453,columnNumber:25},this),C.jsxDEV("button",{onClick:()=>Te(e),className:"p-1 text-text-muted hover:text-red-400",title:"Delete","aria-label":"Delete category",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"3 6 5 6 21 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1471,columnNumber:29},this),C.jsxDEV("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1472,columnNumber:29},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1470,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1464,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1452,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1447,columnNumber:21},this)},e.id,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1404,columnNumber:17},this))]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1399,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1349,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1348,columnNumber:9},this),Ie&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[60] p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-sm w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-lg font-bold text-text-primary mb-3",children:"Delete Category?"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1489,columnNumber:13},this),C.jsxDEV("p",{className:"text-text-secondary mb-4 text-sm",children:['Delete "',C.jsxDEV("span",{className:"text-text-primary font-semibold",children:Ie.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1491,columnNumber:23},this),'"?',Ie.channel_count>0&&C.jsxDEV("span",{className:"block mt-2 text-yellow-400",children:[Ie.channel_count," channel",1!==Ie.channel_count?"s":""," will become uncategorized."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1493,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1490,columnNumber:13},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>Te(null),className:"btn btn-secondary flex-1 btn-sm",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1499,columnNumber:15},this),C.jsxDEV("button",{onClick:async()=>{try{await h.mutateAsync(Ie.id),Te(null),x("Category deleted","success")}catch(e){x(ce(e.message,"delete category"),"error")}},disabled:h.isPending,className:"btn btn-danger flex-1 btn-sm",children:h.isPending?"Deleting...":"Delete"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1505,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1498,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1488,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1487,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:546,columnNumber:5},this)}function Ae({isOpen:e,title:r,message:n,confirmText:s="Confirm",cancelText:a="Cancel",confirmStyle:i="danger",onConfirm:o,onCancel:l}){const{theme:d}=re(),c=["online","pixel","debug"].includes(d);return t.useEffect(()=>{const t=t=>{"Escape"===t.key&&e&&l()};return e&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[e,l]),e?C.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[C.jsxDEV("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm animate-fade-in",onClick:l},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:44,columnNumber:7},this),C.jsxDEV("div",{role:"dialog","aria-modal":"true","aria-labelledby":"confirm-modal-title",className:"relative bg-dark-secondary border border-dark-border-light rounded-lg shadow-xl max-w-[90vw] sm:max-w-md w-full animate-slide-up",children:[C.jsxDEV("div",{className:"px-6 py-4 border-b border-dark-border",children:C.jsxDEV("h3",{id:"confirm-modal-title",className:"text-lg font-semibold "+(c?"text-black":"text-text-primary"),children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:58,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:57,columnNumber:9},this),C.jsxDEV("div",{className:"px-6 py-4",children:C.jsxDEV("p",{className:"text-sm "+(c?"text-gray-800":"text-text-secondary"),children:n},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:65,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:64,columnNumber:9},this),C.jsxDEV("div",{className:"px-6 py-4 border-t border-dark-border flex justify-end gap-3",children:[C.jsxDEV("button",{onClick:l,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(c?"bg-gray-200 hover:bg-gray-300 text-black":"bg-dark-hover hover:bg-dark-tertiary text-text-primary border border-dark-border-light"),children:a},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:72,columnNumber:11},this),C.jsxDEV("button",{onClick:o,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("danger"===i?"bg-red-600 hover:bg-red-700 text-white":"bg-accent hover:bg-accent-hover text-white"),children:s},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:82,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:71,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:50,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:42,columnNumber:5},this):null}const Re=({className:e="w-4 h-4"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/SettingsIcon.jsx",lineNumber:3,columnNumber:5},void 0),C.jsxDEV("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/SettingsIcon.jsx",lineNumber:4,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/SettingsIcon.jsx",lineNumber:2,columnNumber:3},void 0),Be=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:[C.jsxDEV("circle",{cx:"12",cy:"5",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ThreeDotsIcon.jsx",lineNumber:3,columnNumber:5},void 0),C.jsxDEV("circle",{cx:"12",cy:"12",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ThreeDotsIcon.jsx",lineNumber:4,columnNumber:5},void 0),C.jsxDEV("circle",{cx:"12",cy:"19",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ThreeDotsIcon.jsx",lineNumber:5,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/ThreeDotsIcon.jsx",lineNumber:2,columnNumber:3},void 0),$e=({className:e="w-4 h-4",strokeWidth:t="2.5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/CheckmarkIcon.jsx",lineNumber:3,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/CheckmarkIcon.jsx",lineNumber:2,columnNumber:3},void 0),Fe=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"3 6 5 6 21 6"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/TrashIcon.jsx",lineNumber:3,columnNumber:5},void 0),C.jsxDEV("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/TrashIcon.jsx",lineNumber:4,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/TrashIcon.jsx",lineNumber:2,columnNumber:3},void 0),Oe=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polygon",{points:"5 3 19 12 5 21 5 3"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/PlayIcon.jsx",lineNumber:3,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/PlayIcon.jsx",lineNumber:2,columnNumber:3},void 0),qe=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"16 3 21 3 21 8"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:3,columnNumber:5},void 0),C.jsxDEV("line",{x1:"4",y1:"20",x2:"21",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:4,columnNumber:5},void 0),C.jsxDEV("polyline",{points:"21 16 21 21 16 21"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:5,columnNumber:5},void 0),C.jsxDEV("line",{x1:"15",y1:"15",x2:"21",y2:"21"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:6,columnNumber:5},void 0),C.jsxDEV("line",{x1:"4",y1:"4",x2:"9",y2:"9"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:7,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:2,columnNumber:3},void 0),ze=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"15 18 9 12 15 6"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ArrowLeftIcon.jsx",lineNumber:3,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ArrowLeftIcon.jsx",lineNumber:2,columnNumber:3},void 0),We=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M12 5v14m-7-7h14"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/PlusIcon.jsx",lineNumber:3,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/PlusIcon.jsx",lineNumber:2,columnNumber:3},void 0),Qe=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/EyeIcon.jsx",lineNumber:3,columnNumber:5},void 0),C.jsxDEV("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/EyeIcon.jsx",lineNumber:4,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/EyeIcon.jsx",lineNumber:2,columnNumber:3},void 0),Ke=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:17,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:16,columnNumber:3},void 0),Ue=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:23,columnNumber:5},void 0),C.jsxDEV("polygon",{points:"10,9 15,12 10,15",fill:"currentColor"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:24,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:22,columnNumber:3},void 0),He=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:30,columnNumber:5},void 0),C.jsxDEV("polyline",{points:"7 10 12 15 17 10"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:31,columnNumber:5},void 0),C.jsxDEV("line",{x1:"12",y1:"15",x2:"12",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:32,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:29,columnNumber:3},void 0),Je=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:38,columnNumber:5},void 0),C.jsxDEV("polyline",{points:"16 17 21 12 16 7"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:39,columnNumber:5},void 0),C.jsxDEV("line",{x1:"21",y1:"12",x2:"9",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:40,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:37,columnNumber:3},void 0),Ye=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"3",y1:"12",x2:"21",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:46,columnNumber:5},void 0),C.jsxDEV("line",{x1:"3",y1:"6",x2:"21",y2:"6"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:47,columnNumber:5},void 0),C.jsxDEV("line",{x1:"3",y1:"18",x2:"21",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:48,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:45,columnNumber:3},void 0),Ge=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"11 17 6 12 11 7"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:54,columnNumber:5},void 0),C.jsxDEV("polyline",{points:"18 17 13 12 18 7"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:55,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/index.jsx",lineNumber:53,columnNumber:3},void 0),Xe=e=>{if(!e||0===e)return"";const t=e/1073741824,r=e/1048576;return t>=1?`${t.toFixed(2)} GB`:`${r.toFixed(0)} MB`},Ze=e=>{if(!e)return"";const t=e.slice(0,4);return`${e.slice(4,6)}/${e.slice(6,8)}/${t}`},et=e=>{if(!e)return"";const t=new Date(e);return`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`};function tt(){const[e]=b(),a=m(),{cardSize:i}=ae("library"),{data:o}=Y(),[l,d]=t.useState(""),[c,u]=t.useState(e.get("tab")||"channels"),N=Ce(i,"playlists"===c?"channels":"library"),[f,h]=t.useState(!1),[x,v]=t.useState([]),[j,y]=t.useState(!1),[g,D]=t.useState(null),[E,V]=t.useState(""),[w,k]=t.useState(null),[S,P]=t.useState(()=>localStorage.getItem("library_playlistSortBy")||"title-asc"),[_,L]=t.useState(()=>localStorage.getItem("library_channelSortBy")||"title-asc"),M=U(),R=K(),{showNotification:B}=I(),[$,O]=t.useState(null),q=t.useRef(null),z=t.useRef(null),{data:Q}=r({queryKey:["categories"],queryFn:()=>T.getCategories()}),H=function(){const e=n();return s({mutationFn:e=>T.createCategory(e),onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]})}})}(),J=function(){const e=n();return s({mutationFn:({id:e,data:t})=>T.updateCategory(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]}),e.invalidateQueries({queryKey:["category"]})}})}(),G=function(){const e=n();return s({mutationFn:e=>T.deleteCategory(e),onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]}),e.invalidateQueries({queryKey:["playlists"]})}})}(),X=function(){const e=n();return s({mutationFn:({playlistIds:e,categoryId:t})=>T.bulkAssignCategory(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["playlists"]}),e.invalidateQueries({queryKey:["categories"]})}})}(),[Z,ee]=t.useState(!1),[te,re]=t.useState(""),[ne,se]=t.useState(!1),[ie,oe]=t.useState(null),[le,de]=t.useState(null),[be,fe]=t.useState(!1),[ve,ge]=t.useState(""),[Pe,Le]=t.useState(()=>{const e=localStorage.getItem("expandedCategories");return e?JSON.parse(e):{}}),[Ie,Te]=t.useState(null),[Re,$e]=t.useState(null),[ze,We]=t.useState(""),[Qe,Ke]=t.useState(!1),[Ue,He]=t.useState(1),[Je,Ye]=t.useState(1),Ge=_e(o,"items_per_page",50),Ze=window.innerWidth<640;t.useEffect(()=>{const t=e.get("tab");"playlists"!==t&&"channels"!==t||u(t)},[e]),t.useEffect(()=>{localStorage.setItem("library_playlistSortBy",S)},[S]),t.useEffect(()=>{localStorage.setItem("library_channelSortBy",_)},[_]),t.useEffect(()=>{localStorage.setItem("expandedCategories",JSON.stringify(Pe))},[Pe]);const et=e=>{if(!e)return null;const t=new Date(e),r=new Date-t,n=Math.floor(r/864e5);if(n<=0)return"Today";if(1===n)return"Yesterday";if(n<7)return`${n} days ago`;return`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${String(t.getFullYear()).slice(-2)}`},{data:tt,isLoading:rt}=F({status:"library"}),{data:nt}=A(),{data:st,isLoading:at}=W(),it=t.useMemo(()=>tt?Object.values(tt.reduce((e,t)=>{const r=t.channel_id?`channel_${t.channel_id}`:t.folder_name?`playlist_${t.folder_name}`:null;return r?(e[r]||(e[r]={id:t.channel_id||t.folder_name,title:t.channel_title||t.folder_name,isPlaylistFolder:!t.channel_id,videoCount:0,totalSizeBytes:0,videos:[],watchedCount:0,lastAddedAt:null}),e[r].videoCount++,e[r].totalSizeBytes+=t.file_size_bytes||0,e[r].videos.push(t),t.watched&&e[r].watchedCount++,t.downloaded_at&&(!e[r].lastAddedAt||new Date(t.downloaded_at)>new Date(e[r].lastAddedAt))&&(e[r].lastAddedAt=t.downloaded_at),e):e},{})):[],[tt]),ot=t.useRef(Math.random()),lt=t.useMemo(()=>{const e=(nt||[]).reduce((e,t)=>(e[t.id]=t,e),{});return it.map((t,r)=>{const n=Math.floor(ot.current*(r+1)*9999%t.videos.length),s=t.videos[n],a=t.isPlaylistFolder?null:e[t.id];return{...t,thumbnail:s?.thumb_url,allWatched:t.watchedCount===t.videoCount,newVideoCount:a?.new_video_count||0}})},[it,nt]),dt=t.useMemo(()=>[...lt.filter(e=>!e.isPlaylistFolder&&!!(e.title||"").toLowerCase().includes(l.toLowerCase()))].sort((e,t)=>{switch(_){case"title-asc":return(e.title||"").localeCompare(t.title||"");case"title-desc":return(t.title||"").localeCompare(e.title||"");case"count-desc":return t.videoCount-e.videoCount;case"count-asc":return e.videoCount-t.videoCount;case"date-desc":return new Date(t.lastAddedAt||0)-new Date(e.lastAddedAt||0);case"date-asc":return new Date(e.lastAddedAt||0)-new Date(t.lastAddedAt||0);default:return 0}}),[lt,l,_]);t.useEffect(()=>{He(1),Ye(1)},[l,_,S,c]),t.useEffect(()=>{h(!1),v([])},[c]);const ct=t.useMemo(()=>{if(Ze)return dt.slice(0,Je*Ge);const e=(Ue-1)*Ge;return dt.slice(e,e+Ge)},[dt,Ue,Ge,Je,Ze]),ut=t.useMemo(()=>{if(!st)return[];return[...st.filter(e=>!!(e.title||e.name||"").toLowerCase().includes(l.toLowerCase()))].sort((e,t)=>{switch(S){case"title-asc":return(e.title||e.name||"").localeCompare(t.title||t.name||"");case"title-desc":return(t.title||t.name||"").localeCompare(e.title||e.name||"");case"count-desc":return(t.video_count||0)-(e.video_count||0);case"count-asc":return(e.video_count||0)-(t.video_count||0);default:return 0}})},[st,l,S]),mt=t.useMemo(()=>{if(!ut||!Q)return{categorized:{},uncategorized:ut||[]};const e={};Q.forEach(t=>{e[t.id]={category:t,playlists:[]}});const t=[];ut.forEach(r=>{r.category_id&&e[r.category_id]?e[r.category_id].playlists.push(r):t.push(r)});return{categorized:Object.entries(e).sort(([,e],[,t])=>{switch(S){case"title-asc":default:return e.category.name.localeCompare(t.category.name);case"title-desc":return t.category.name.localeCompare(e.category.name);case"count-desc":const r=e.playlists.reduce((e,t)=>e+(t.video_count||0),0);return t.playlists.reduce((e,t)=>e+(t.video_count||0),0)-r;case"count-asc":return e.playlists.reduce((e,t)=>e+(t.video_count||0),0)-t.playlists.reduce((e,t)=>e+(t.video_count||0),0)}}),uncategorized:t}},[ut,Q,S]);t.useEffect(()=>{const e=e=>{q.current&&!q.current.contains(e.target)&&k(null),z.current&&!z.current.contains(e.target)&&Te(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const pt=async e=>{O({type:"deletePlaylist",data:e})},bt=async()=>{if(E.trim())try{await R.mutateAsync({id:g,data:{name:E}}),B("Playlist renamed","success"),y(!1),D(null),V("")}catch(e){B(ce(e.message,"rename playlist"),"error")}else B("Please enter a playlist name","error")},Nt=e=>{v(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ft=async()=>{if(ze.trim())try{await J.mutateAsync({id:Re,data:{name:ze.trim()}}),B("Category renamed","success"),Ke(!1),$e(null),We(""),Te(null)}catch(e){B(ce(e.message,"rename category"),"error")}else B("Please enter a category name","error")},ht=async()=>{if($)try{if("deletePlaylist"===$.type)await M.mutateAsync($.data),B("Playlist deleted","success"),k(null);else if("deletePlaylists"===$.type){for(const e of x)await M.mutateAsync(e);B(`${x.length} playlists deleted`,"success"),v([]),h(!1)}else"deleteCategory"===$.type&&(await G.mutateAsync($.data),B("Category deleted","success"),Te(null));O(null)}catch(e){B(ce(e.message,"delete category"),"error")}},xt=async(e,t)=>{try{if("single"===ie&&le){const r=t?null:e;await R.mutateAsync({id:le,data:{category_id:r}}),B(t?"Removed from category":"Added to category","success"),se(!1),de(null),oe(null),fe(!1),ge("")}else"bulk"===ie&&x.length>0&&(await X.mutateAsync({playlistIds:x,categoryId:e}),B(`${x.length} playlists assigned to category`,"success"),v([]),h(!1),se(!1),de(null),oe(null),fe(!1),ge(""))}catch(r){B(ce(r.message,"update category"),"error")}};return C.jsxDEV("div",{className:"animate-fade-in",children:[C.jsxDEV(ue,{children:C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("div",{className:"flex items-center gap-2 flex-shrink-0",children:[C.jsxDEV(xe,{tabs:[{id:"channels",label:"Channels"},{id:"playlists",label:"Playlists"}],active:c,onChange:u,showCountOnActive:!1},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:540,columnNumber:13},this),"playlists"===c&&C.jsxDEV(he,{active:f,onToggle:()=>{h(!f),v([])}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:552,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:539,columnNumber:11},this),C.jsxDEV("div",{className:"hidden sm:block flex-1 max-w-md mx-4",children:C.jsxDEV(me,{value:l,onChange:d,placeholder:"channels"===c?"Search channels...":"Search playlists...",className:"w-full"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:564,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:563,columnNumber:11},this),C.jsxDEV("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0 ml-auto",children:[C.jsxDEV("div",{className:"sm:hidden flex items-center gap-1.5",children:[C.jsxDEV(ye,{sortValue:"channels"===c?_:S,onSortChange:e=>{"channels"===c?(L(e),localStorage.setItem("library_channelSortBy",e)):(P(e),localStorage.setItem("library_playlistSortBy",e))},sortOptions:"channels"===c?Me.libraryChannels:Me.playlists,currentPage:Ue,totalItems:"channels"===c?dt.length:ut.length,itemsPerPage:Ge,onPageChange:He,showMobileSort:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:576,columnNumber:15},this),C.jsxDEV(pe,{value:l,onChange:d,placeholder:"channels"===c?"Search channels...":"Search playlists..."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:594,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:575,columnNumber:13},this),C.jsxDEV(ye,{sortValue:"channels"===c?_:S,onSortChange:e=>{"channels"===c?(L(e),localStorage.setItem("library_channelSortBy",e)):(P(e),localStorage.setItem("library_playlistSortBy",e))},sortOptions:"channels"===c?Me.libraryChannels:Me.playlists,currentPage:Ue,totalItems:"channels"===c?dt.length:ut.length,itemsPerPage:Ge,onPageChange:He,showMobileSort:!1},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:602,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:573,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:537,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:536,columnNumber:7},this),C.jsxDEV(Ne,{show:f&&"playlists"===c&&ut.length>0,selectedCount:x.length,totalCount:ut.length,onSelectAll:()=>{v(ut.map(e=>e.id))},onClear:()=>{v([])},onDone:()=>{h(!1),v([])},actions:[...x.length>0?[{label:"Category",onClick:()=>{oe("bulk"),se(e=>!e)},variant:"default"}]:[],...x.length>0?[{label:"Delete",onClick:async()=>{0!==x.length&&O({type:"deletePlaylists",data:x.length})},variant:"danger"}]:[]]},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:625,columnNumber:7},this),"channels"===c&&C.jsxDEV(C.Fragment,{children:[rt?C.jsxDEV("div",{className:"flex justify-center py-12",children:C.jsxDEV(we,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:657,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:656,columnNumber:13},this):0===dt.length?lt.length>0&&l?C.jsxDEV(Se,{icon:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:662,columnNumber:23},this),title:"No channels match filters",message:"Remove filters to see them"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:661,columnNumber:15},this):C.jsxDEV("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[C.jsxDEV("svg",{className:"w-20 h-20 text-text-muted mb-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:669,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:668,columnNumber:17},this),C.jsxDEV("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"Your library is empty"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:671,columnNumber:17},this),C.jsxDEV("p",{className:"text-text-secondary mb-8 text-center",children:"Here's how to add videos:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:672,columnNumber:17},this),C.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl w-full",children:[C.jsxDEV("button",{onClick:()=>a("/channels"),className:"group p-6 bg-dark-secondary border border-dark-border rounded-xl hover:border-accent/50 hover:bg-dark-tertiary transition-all text-left",children:[C.jsxDEV("div",{className:"w-12 h-12 bg-dark-tertiary rounded-lg flex items-center justify-center mb-4 group-hover:bg-accent/20 transition-colors",children:C.jsxDEV("svg",{className:"w-6 h-6 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:682,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:681,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:680,columnNumber:21},this),C.jsxDEV("h4",{className:"font-semibold text-text-primary mb-1",children:"Subscribe"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:685,columnNumber:21},this),C.jsxDEV("p",{className:"text-sm text-text-secondary",children:"Monitor a channel for new uploads"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:686,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:676,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>a("/videos"),className:"group p-6 bg-dark-secondary border border-dark-border rounded-xl hover:border-accent/50 hover:bg-dark-tertiary transition-all text-left",children:[C.jsxDEV("div",{className:"w-12 h-12 bg-dark-tertiary rounded-lg flex items-center justify-center mb-4 group-hover:bg-accent/20 transition-colors",children:C.jsxDEV("svg",{className:"w-6 h-6 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:696,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:695,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:694,columnNumber:21},this),C.jsxDEV("h4",{className:"font-semibold text-text-primary mb-1",children:"One-off Videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:699,columnNumber:21},this),C.jsxDEV("p",{className:"text-sm text-text-secondary",children:"Grab single videos or playlists by URL"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:700,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:690,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>a("/import"),className:"group p-6 bg-dark-secondary border border-dark-border rounded-xl hover:border-accent/50 hover:bg-dark-tertiary transition-all text-left",children:[C.jsxDEV("div",{className:"w-12 h-12 bg-dark-tertiary rounded-lg flex items-center justify-center mb-4 group-hover:bg-accent/20 transition-colors",children:C.jsxDEV("svg",{className:"w-6 h-6 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:710,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:709,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:708,columnNumber:21},this),C.jsxDEV("h4",{className:"font-semibold text-text-primary mb-1",children:"Import Existing"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:713,columnNumber:21},this),C.jsxDEV("p",{className:"text-sm text-text-secondary",children:"Add videos you already downloaded"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:714,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:704,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:674,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:667,columnNumber:15},this):(()=>{const e=Ee(i,ct.length),t=Ve(e);return C.jsxDEV("div",{className:`grid ${De(N,ct.length)} gap-4 w-full [&>*]:min-w-0`,children:ct.map(e=>C.jsxDEV(p,{to:`/channel/${e.id}/library`,className:"group transition-colors rounded overflow-hidden",children:[C.jsxDEV("div",{className:"relative aspect-video bg-dark-tertiary rounded-t-xl rounded-b-xl group-hover:rounded-b-none overflow-hidden transition-all",children:[e.thumbnail?C.jsxDEV("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:733,columnNumber:19},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-10 h-10 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:741,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:740,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:739,columnNumber:19},this),e.newVideoCount>0&&C.jsxDEV("div",{className:"absolute top-0 left-0 bg-accent text-white font-bold text-sm px-2 py-1 rounded-tl-xl rounded-br-lg leading-none z-20",children:e.newVideoCount>99?"99+":e.newVideoCount},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:747,columnNumber:19},this),e.lastAddedAt&&C.jsxDEV("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded",children:["Last: ",et(e.lastAddedAt)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:753,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:731,columnNumber:15},this),C.jsxDEV("div",{className:"p-3 rounded-b-xl transition-colors group-hover:bg-dark-tertiary",children:[C.jsxDEV("h3",{className:`${t.title} font-semibold text-text-primary line-clamp-2 mb-1`,title:e.title,children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:761,columnNumber:17},this),C.jsxDEV("div",{className:"text-sm text-text-secondary font-medium",children:C.jsxDEV("span",{children:[e.videoCount," video",1!==e.videoCount?"s":""," â€¢ ",Xe(e.totalSizeBytes)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:765,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:764,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:760,columnNumber:15},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:725,columnNumber:13},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:723,columnNumber:15},this)})(),dt.length>Ge&&(Ze?C.jsxDEV(ke,{currentCount:ct.length,totalCount:dt.length,onLoadMore:()=>Ye(e=>e+1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:777,columnNumber:15},this):C.jsxDEV("div",{className:"flex justify-center mt-6",children:C.jsxDEV(je,{currentPage:Ue,totalItems:dt.length,itemsPerPage:Ge,onPageChange:He},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:784,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:783,columnNumber:15},this))]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:654,columnNumber:9},this),"playlists"===c&&C.jsxDEV("div",{children:mt.categorized.length>0||mt.uncategorized.length>0?C.jsxDEV("div",{className:"space-y-6",children:[mt.categorized.map(([e,{category:t,playlists:r}])=>{const n=!1!==Pe[e];return C.jsxDEV("div",{className:"space-y-3",children:[C.jsxDEV("div",{className:"flex items-center justify-between gap-3 pb-2 border-b border-dark-border",children:[C.jsxDEV("button",{onClick:()=>(e=>{Le(t=>({...t,[e]:!t[e]}))})(e),className:"flex items-center gap-2 group hover:text-accent transition-colors flex-1 min-w-0",children:[C.jsxDEV("svg",{className:"w-5 h-5 text-text-secondary group-hover:text-accent transition-transform "+(n?"rotate-90":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"9 18 15 12 9 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:823,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:814,columnNumber:25},this),C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary group-hover:text-accent truncate",children:t.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:827,columnNumber:25},this),C.jsxDEV("span",{className:"text-sm text-text-secondary whitespace-nowrap",children:["(",r.length," ",1===r.length?"playlist":"playlists",")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:830,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:809,columnNumber:23},this),C.jsxDEV("div",{className:"relative flex-shrink-0",ref:Ie===e?z:null,children:[C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),Te(Ie===e?null:e)},className:"p-2 rounded-lg bg-dark-tertiary hover:bg-dark-hover text-text-secondary hover:text-text-primary transition-colors","aria-label":"Category options",children:C.jsxDEV(Be,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:845,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:837,columnNumber:25},this),Ie===e&&C.jsxDEV("div",{className:"absolute right-0 mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-1 min-w-[160px] z-50",children:[C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),a(`/play/category/${e}`),Te(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(Oe,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:859,columnNumber:31},this),"Play All"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:851,columnNumber:29},this),C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),a(`/play/category/${e}?shuffle=true`),Te(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:870,columnNumber:31},this),"Shuffle"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:862,columnNumber:29},this),C.jsxDEV("button",{onClick:r=>{r.stopPropagation(),$e(e),We(t.name),Ke(!0),Te(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:884,columnNumber:33},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:885,columnNumber:33},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:883,columnNumber:31},this),"Rename"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:873,columnNumber:29},this),C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),(async e=>{O({type:"deleteCategory",data:e})})(e)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(Fe,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:896,columnNumber:31},this),"Delete"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:889,columnNumber:29},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:850,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:836,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:808,columnNumber:21},this),n&&(()=>{const e=Ve(i);return C.jsxDEV("div",{className:`grid ${De(N)} gap-4 w-full [&>*]:min-w-0`,children:r.map(t=>{const r=x.includes(t.id);return C.jsxDEV("div",{className:"group cursor-pointer transition-colors rounded",onClick:e=>{f?Nt(t.id):e.target.closest("button")||e.target.closest(".menu")||a(`/playlist/${t.id}`,{state:{from:"/library?tab=playlists"}})},children:[C.jsxDEV("div",{className:"relative aspect-video bg-dark-tertiary overflow-hidden transition-all "+(r?"rounded-t-xl":"rounded-t-xl rounded-b-xl group-hover:rounded-b-none"),children:[t.thumbnail?C.jsxDEV("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:932,columnNumber:37},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-10 h-10 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:940,columnNumber:41},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:939,columnNumber:39},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:938,columnNumber:37},this),r&&f&&C.jsxDEV("div",{className:"absolute top-2 right-2 bg-black/80 text-white rounded-full p-1.5 shadow-lg z-10",children:C.jsxDEV("svg",{className:"w-4 h-4 text-accent-text",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:949,columnNumber:41},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:948,columnNumber:39},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:947,columnNumber:37},this),C.jsxDEV("div",{className:`absolute bottom-1 right-1 bg-black/80 text-white ${e.badge} font-semibold px-1.5 py-0.5 rounded z-20`,children:[t.video_count||0," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:955,columnNumber:35},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:926,columnNumber:33},this),C.jsxDEV("div",{className:"p-3 space-y-1 rounded-b-xl transition-colors "+(r?"bg-dark-tertiary":"group-hover:bg-dark-tertiary"),children:[C.jsxDEV("div",{className:"flex items-center justify-between gap-2",children:[C.jsxDEV("h3",{className:`${e.title} font-semibold text-text-primary line-clamp-2 leading-tight flex-1`,title:t.title||t.name,children:t.title||t.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:964,columnNumber:37},this),!f&&C.jsxDEV("div",{className:"relative flex-shrink-0",ref:w===t.id?q:null,children:[C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),k(w===t.id?null:t.id)},className:"p-1 rounded hover:bg-dark-hover transition-colors text-text-secondary hover:text-text-primary","aria-label":"Playlist options",children:C.jsxDEV(Be,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:979,columnNumber:43},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:971,columnNumber:41},this),w===t.id&&C.jsxDEV("div",{className:"menu absolute right-0 mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-1 min-w-[160px] z-50",children:[C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),a(`/play/playlist/${t.id}`),k(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(Oe,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:993,columnNumber:47},this),"Play All"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:985,columnNumber:45},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),a(`/play/playlist/${t.id}?shuffle=true`),k(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1004,columnNumber:47},this),"Shuffle"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:996,columnNumber:45},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),D(t.id),V(t.title||t.name||""),y(!0),k(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1018,columnNumber:49},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1019,columnNumber:49},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1017,columnNumber:47},this),"Rename"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1007,columnNumber:45},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),de(t.id),oe("single"),se(!0),k(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1034,columnNumber:49},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1033,columnNumber:47},this),"Category Options"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1023,columnNumber:45},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),pt(t.id)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(Fe,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1045,columnNumber:47},this),"Delete"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1038,columnNumber:45},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:984,columnNumber:43},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:970,columnNumber:39},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:963,columnNumber:35},this),t.channel_title&&C.jsxDEV("div",{className:`${e.metadata} text-text-secondary truncate`,title:t.channel_title,children:t.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1056,columnNumber:37},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:961,columnNumber:33},this)]},t.id,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:912,columnNumber:31},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:908,columnNumber:27},this)})()]},e,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:806,columnNumber:19},this)}),mt.uncategorized.length>0&&C.jsxDEV("div",{className:"space-y-3",children:[Object.keys(mt.categorized).length>0&&C.jsxDEV("div",{className:"flex items-center gap-2 pb-2 border-b border-dark-border",children:[C.jsxDEV("h3",{className:"text-lg font-semibold text-text-secondary",children:"Uncategorized"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1077,columnNumber:23},this),C.jsxDEV("span",{className:"text-sm text-text-muted",children:["(",mt.uncategorized.length," ",1===mt.uncategorized.length?"playlist":"playlists",")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1080,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1076,columnNumber:21},this),(()=>{const e=Ve(i);return C.jsxDEV("div",{className:`grid ${De(N)} gap-4 w-full [&>*]:min-w-0`,children:mt.uncategorized.map(t=>{const r=x.includes(t.id);return C.jsxDEV("div",{className:"group cursor-pointer transition-colors rounded",onClick:e=>{f?Nt(t.id):e.target.closest("button")||e.target.closest(".menu")||a(`/playlist/${t.id}`,{state:{from:"/library?tab=playlists"}})},children:[C.jsxDEV("div",{className:"relative aspect-video bg-dark-tertiary overflow-hidden transition-all "+(r?"rounded-t-xl":"rounded-t-xl rounded-b-xl group-hover:rounded-b-none"),children:[t.thumbnail?C.jsxDEV("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1114,columnNumber:33},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-10 h-10 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1122,columnNumber:37},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1121,columnNumber:35},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1120,columnNumber:33},this),r&&f&&C.jsxDEV("div",{className:"absolute top-2 right-2 bg-black/80 text-white rounded-full p-1.5 shadow-lg z-10",children:C.jsxDEV("svg",{className:"w-4 h-4 text-accent-text",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1131,columnNumber:37},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1130,columnNumber:35},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1129,columnNumber:33},this),C.jsxDEV("div",{className:`absolute bottom-1 right-1 bg-black/80 text-white ${e.badge} font-semibold px-1.5 py-0.5 rounded z-20`,children:[t.video_count||0," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1137,columnNumber:31},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1108,columnNumber:29},this),!f&&C.jsxDEV("div",{className:"absolute top-2 right-2 z-20",ref:w===t.id?q:null,children:[C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),k(w===t.id?null:t.id)},className:"bg-black/70 hover:bg-black/90 text-white rounded-full p-1.5 transition-colors","aria-label":"Playlist options",children:C.jsxDEV(Be,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1153,columnNumber:35},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1145,columnNumber:33},this),w===t.id&&C.jsxDEV("div",{className:"menu absolute right-0 mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-1 min-w-[160px] z-50",onMouseLeave:e=>e.stopPropagation(),children:[C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),a(`/play/playlist/${t.id}`),k(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(Oe,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1170,columnNumber:39},this),"Play All"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1162,columnNumber:37},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),a(`/play/playlist/${t.id}?shuffle=true`),k(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1181,columnNumber:39},this),"Shuffle"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1173,columnNumber:37},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),D(t.id),V(t.title||t.name||""),y(!0),k(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1195,columnNumber:41},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1196,columnNumber:41},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1194,columnNumber:39},this),"Rename"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1184,columnNumber:37},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),de(t.id),oe("single"),se(!0),k(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1211,columnNumber:41},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1210,columnNumber:39},this),"Category Options"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1200,columnNumber:37},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),pt(t.id)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(Fe,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1222,columnNumber:39},this),"Delete"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1215,columnNumber:37},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1158,columnNumber:35},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1144,columnNumber:31},this),C.jsxDEV("div",{className:"p-3 space-y-1 rounded-b-xl transition-colors "+(r?"bg-dark-tertiary":"group-hover:bg-dark-tertiary"),children:[C.jsxDEV("h3",{className:`${e.title} font-semibold text-text-primary line-clamp-2 leading-tight`,title:t.title||t.name,children:t.title||t.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1232,columnNumber:31},this),t.channel_title&&C.jsxDEV("div",{className:`${e.metadata} text-text-secondary truncate`,title:t.channel_title,children:t.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1237,columnNumber:33},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1231,columnNumber:29},this)]},t.id,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1094,columnNumber:27},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1090,columnNumber:23},this)})()]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1073,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:800,columnNumber:13},this):C.jsxDEV(Se,{icon:C.jsxDEV(C.Fragment,{children:[C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 10h16M4 14h10M4 18h10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1253,columnNumber:23},this),C.jsxDEV("circle",{cx:"18",cy:"16",r:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1253,columnNumber:130},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1253,columnNumber:21},this),title:l?"No matching playlists":"No playlists yet",message:l?"Try a different search term":"Create playlists to organize your videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1252,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:798,columnNumber:9},this),j&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary mb-4",children:"Rename Playlist"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1265,columnNumber:13},this),C.jsxDEV("input",{type:"text",value:E,onChange:e=>V(e.target.value),onKeyPress:e=>{"Enter"===e.key&&bt()},placeholder:"Enter playlist name",className:"input w-full mb-4",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1266,columnNumber:13},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>{y(!1),D(null),V("")},className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1280,columnNumber:15},this),C.jsxDEV("button",{onClick:bt,disabled:!E.trim(),className:"btn btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Rename"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1290,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1279,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1264,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1263,columnNumber:9},this),Z&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary mb-4",children:"Create Category"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1306,columnNumber:13},this),C.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),te.trim())try{await H.mutateAsync({name:te.trim()}),B("Category created","success"),ee(!1),re("")}catch(t){B(ce(t.message,"create category"),"error")}else B("Please enter a category name","error")},children:[C.jsxDEV("input",{type:"text",value:te,onChange:e=>re(e.target.value),placeholder:"Enter category name",className:"input w-full mb-4",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1308,columnNumber:15},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{type:"button",onClick:()=>{ee(!1),re("")},className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1317,columnNumber:17},this),C.jsxDEV("button",{type:"submit",disabled:!te.trim(),className:"btn btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Create"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1327,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1316,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1307,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1305,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1304,columnNumber:9},this),Qe&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary mb-4",children:"Rename Category"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1344,columnNumber:13},this),C.jsxDEV("input",{type:"text",value:ze,onChange:e=>We(e.target.value),onKeyPress:e=>{"Enter"===e.key&&ft()},placeholder:"Enter category name",className:"input w-full mb-4",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1345,columnNumber:13},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>{Ke(!1),$e(null),We("")},className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1359,columnNumber:15},this),C.jsxDEV("button",{onClick:ft,disabled:!ze.trim(),className:"btn btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Rename"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1369,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1358,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1343,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1342,columnNumber:9},this),ne&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",onClick:()=>{se(!1),de(null),oe(null),fe(!1),ge("")},children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full shadow-2xl border border-dark-border flex flex-col max-h-[600px]",onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-border",children:[C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Category Options"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1399,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>{se(!1),de(null),oe(null),fe(!1),ge("")},className:"text-text-secondary hover:text-text-primary transition-colors",children:C.jsxDEV("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1411,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1410,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1400,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1398,columnNumber:13},this),C.jsxDEV("div",{className:"flex-1 overflow-y-auto p-2",children:Q&&Q.length>0?C.jsxDEV("div",{className:"space-y-1",children:[...Q].sort((e,t)=>e.name.localeCompare(t.name)).map(e=>{const t="single"===ie&&st?st.find(e=>e.id===le):null,r=t&&t.category_id===e.id;return C.jsxDEV("button",{onClick:()=>xt(e.id,r),className:"w-full px-3 py-2 text-left rounded-lg hover:bg-dark-hover transition-colors flex items-center gap-3",children:[C.jsxDEV("div",{className:"w-5 h-5 flex-shrink-0 rounded border-2 flex items-center justify-center transition-colors "+(r?"bg-accent border-accent":"border-text-secondary bg-transparent"),children:r&&C.jsxDEV("svg",{className:"w-3 h-3 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1441,columnNumber:31},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1440,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1434,columnNumber:25},this),C.jsxDEV("div",{className:"flex-1 min-w-0 flex items-center justify-between",children:[C.jsxDEV("div",{className:"text-sm font-medium text-text-primary truncate",children:e.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1448,columnNumber:27},this),C.jsxDEV("div",{className:"text-xs text-text-secondary ml-2",children:[e.playlist_count||0," ",1===e.playlist_count?"playlist":"playlists"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1449,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1447,columnNumber:25},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1428,columnNumber:23},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1419,columnNumber:17},this):C.jsxDEV("div",{className:"text-center py-8 text-text-secondary",children:C.jsxDEV("p",{className:"text-sm",children:"No categories yet"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1459,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1458,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1417,columnNumber:13},this),C.jsxDEV("div",{className:"border-t border-dark-border p-4",children:be?C.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),ve.trim())try{const e=await H.mutateAsync({name:ve.trim()});B("Category created","success"),await xt(e.id,!1),fe(!1),ge("")}catch(t){B(ce(t.message,"create category"),"error")}else B("Please enter a category name","error")},className:"space-y-2",children:[C.jsxDEV("input",{type:"text",value:ve,onChange:e=>ge(e.target.value),placeholder:"Category name",className:"w-full px-3 py-2 bg-dark-tertiary border border-dark-border rounded-lg text-sm text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1497,columnNumber:19},this),C.jsxDEV("div",{className:"flex gap-2",children:[C.jsxDEV("button",{type:"button",onClick:()=>{fe(!1),ge("")},className:"flex-1 px-3 py-1.5 text-sm rounded-lg bg-dark-tertiary hover:bg-dark-hover text-text-secondary transition-colors",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1506,columnNumber:21},this),C.jsxDEV("button",{type:"submit",className:"flex-1 px-3 py-1.5 text-sm rounded-lg bg-dark-tertiary hover:bg-dark-hover text-text-primary font-medium border border-dark-border-light transition-colors",disabled:H.isLoading,children:"Create"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1516,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1505,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1477,columnNumber:17},this):C.jsxDEV("button",{onClick:()=>fe(!0),className:"w-full px-4 py-2 text-left rounded-lg hover:bg-dark-hover transition-colors flex items-center gap-2 text-sm font-medium text-accent-text",children:[C.jsxDEV("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1472,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1471,columnNumber:19},this),"Create new category"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1467,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1465,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1393,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1383,columnNumber:9},this),C.jsxDEV(Ae,{isOpen:"deletePlaylist"===$?.type,title:"Delete Playlist",message:"Delete this playlist? Videos will not be deleted.",confirmText:"Delete",confirmStyle:"danger",onConfirm:ht,onCancel:()=>O(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1533,columnNumber:7},this),C.jsxDEV(Ae,{isOpen:"deletePlaylists"===$?.type,title:"Delete Playlists",message:C.jsxDEV(C.Fragment,{children:["Delete ",C.jsxDEV("span",{className:"font-semibold",children:[$?.data," playlists"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1548,columnNumber:20},this),"? Videos will not be deleted."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1547,columnNumber:11},this),confirmText:"Delete",confirmStyle:"danger",onConfirm:ht,onCancel:()=>O(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1543,columnNumber:7},this),C.jsxDEV(Ae,{isOpen:"deleteCategory"===$?.type,title:"Delete Category",message:"Delete this category? Playlists will become uncategorized.",confirmText:"Delete",confirmStyle:"danger",onConfirm:ht,onCancel:()=>O(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1557,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:533,columnNumber:5},this)}const rt=e=>{if(!e)return null;const t=e.replace(/\\/g,"/").split("/"),r=t.indexOf("downloads");return`/api/media/${r>=0?t.slice(r+1).join("/"):t.slice(-2).join("/")}`},nt=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?`${t}:${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${r}:${n.toString().padStart(2,"0")}`};function st({videoId:e,videoIds:r,onClose:a,video:i,triggerRef:o}){const{data:l}=W(),d=function(){const e=n();return s({mutationFn:({playlistId:e,videoId:t})=>T.addVideoToPlaylist(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["playlists"]}),e.invalidateQueries({queryKey:["playlist"]})}})}(),c=function(){const e=n();return s({mutationFn:({playlistId:e,videoIds:t})=>T.addVideosToPlaylistBulk(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["playlists"]}),e.invalidateQueries({queryKey:["playlist"]}),e.invalidateQueries({queryKey:["videos"]})}})}(),u=H(),m=function(){const e=n();return s({mutationFn:e=>T.createPlaylist(e),onSuccess:()=>{e.invalidateQueries({queryKey:["playlists"]})}})}(),{showNotification:p}=I(),[b,f]=t.useState(!1),[h,x]=t.useState(""),[v,j]=t.useState({top:0,left:0}),y=t.useRef(null),g=r&&r.length>0,D=g?r:[e],E=!g&&i&&i.playlist_ids?new Set(i.playlist_ids):new Set;t.useEffect(()=>{const e=()=>{if(o?.current){const e=o.current.getBoundingClientRect(),t=384,r=500,n=window.innerWidth,s=window.innerHeight;let a,i;a=(n-t)/2,a<10?a=10:a+t>n-10&&(a=n-t-10),i=e.top<s/2?e.top:(s-r)/2,i<10?i=10:i+r>s-10&&(i=Math.max(10,s-r-10)),j({top:i,left:a})}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[o]);const V=C.jsxDEV(C.Fragment,{children:[C.jsxDEV("div",{className:"fixed inset-0 z-[99998]",onClick:e=>{e.stopPropagation(),a()}},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:164,columnNumber:7},this),C.jsxDEV("div",{ref:y,className:"fixed bg-dark-secondary rounded-xl border border-dark-border w-full max-w-sm max-h-[500px] flex flex-col animate-scale-in shadow-2xl z-[99999]",style:{top:`${v.top}px`,left:`${v.left}px`},onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-border",children:[C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Save to playlist"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:184,columnNumber:11},this),C.jsxDEV("button",{onClick:a,className:"text-text-secondary hover:text-text-primary transition-colors",children:C.jsxDEV("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:190,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:189,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:185,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:183,columnNumber:9},this),C.jsxDEV("div",{className:"flex-1 overflow-y-auto p-2",children:l&&l.length>0?C.jsxDEV("div",{className:"space-y-1",children:[...l].sort((e,t)=>e.name.localeCompare(t.name)).map(t=>{const r=E.has(t.id);return C.jsxDEV("button",{onClick:()=>{g?(async e=>{try{if(g){const t=await c.mutateAsync({playlistId:e,videoIds:D});t.skipped_count>0?p(`${t.added_count} videos added to playlist, ${t.skipped_count} already in playlist`,"success"):p(`${t.added_count} videos added to playlist`,"success")}else await d.mutateAsync({playlistId:e,videoId:D[0]}),p("Added to playlist","success");a()}catch(t){p(ce(t.message,"add to playlist"),"error"),a()}})(t.id):(async(t,r)=>{try{if(g){for(const n of D)r?await u.mutateAsync({playlistId:t,videoId:n}):await d.mutateAsync({playlistId:t,videoId:n});const e=r?"removed from":"added to";p(`${D.length} video${D.length>1?"s":""} ${e} playlist`,"success")}else r?(await u.mutateAsync({playlistId:t,videoId:e}),p("Removed from playlist","success")):(await d.mutateAsync({playlistId:t,videoId:e}),p("Added to playlist","success"))}catch(n){p(ce(n.message,"update playlist"),"error")}})(t.id,r)},className:"w-full px-3 py-2 text-left rounded-lg hover:bg-dark-hover transition-colors flex items-center gap-3",children:[C.jsxDEV("div",{className:"w-5 h-5 flex-shrink-0 rounded border-2 flex items-center justify-center transition-colors "+(r?"bg-accent border-accent":"border-text-secondary bg-transparent"),children:r&&C.jsxDEV("svg",{className:"w-3 h-3 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:221,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:220,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:214,columnNumber:21},this),C.jsxDEV("div",{className:"flex-1 min-w-0",children:[C.jsxDEV("div",{className:"text-sm font-medium text-text-primary truncate",title:t.name,children:t.name},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:228,columnNumber:23},this),C.jsxDEV("div",{className:"text-xs text-text-secondary",children:[t.video_count||0," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:229,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:227,columnNumber:21},this)]},t.id,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:202,columnNumber:19},this)})},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:198,columnNumber:13},this):C.jsxDEV("div",{className:"text-center py-8 text-text-secondary",children:C.jsxDEV("p",{className:"text-sm",children:"No playlists yet"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:239,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:238,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:196,columnNumber:9},this),C.jsxDEV("div",{className:"border-t border-dark-border p-3",children:b?C.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),h.trim())try{const e=await m.mutateAsync({name:h});if(g){const t=await c.mutateAsync({playlistId:e.id,videoIds:D});p(`Playlist created and ${t.added_count} videos added`,"success")}else await d.mutateAsync({playlistId:e.id,videoId:D[0]}),p("Playlist created and video added","success");a()}catch(t){p(ce(t.message,"create playlist"),"error"),a()}else p("Please enter a playlist name","error")},className:"space-y-2",children:[C.jsxDEV("input",{type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"Playlist name",className:"w-full px-3 py-2 bg-dark-tertiary border border-dark-border rounded-lg text-sm text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:258,columnNumber:15},this),C.jsxDEV("div",{className:"flex gap-2",children:[C.jsxDEV("button",{type:"button",onClick:()=>{f(!1),x("")},className:"flex-1 px-3 py-1.5 text-sm rounded-lg bg-dark-tertiary hover:bg-dark-hover text-text-secondary transition-colors",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:267,columnNumber:17},this),C.jsxDEV("button",{type:"submit",className:"flex-1 px-3 py-1.5 text-sm rounded-lg bg-dark-tertiary hover:bg-dark-hover text-text-primary font-medium border border-dark-border-light transition-colors",disabled:m.isLoading||d.isLoading,children:"Create"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:277,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:266,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:257,columnNumber:13},this):C.jsxDEV("button",{onClick:()=>f(!0),className:"w-full px-3 py-2 text-left rounded-lg hover:bg-dark-hover transition-colors flex items-center gap-2 text-sm font-medium text-accent-text",children:[C.jsxDEV("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:252,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:251,columnNumber:15},this),"Create new playlist"]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:247,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:245,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:173,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:162,columnNumber:5},this);return N.createPortal(V,document.body)}function at({isOpen:e,onClose:t,onConfirm:r,title:n,message:s,confirmText:a="Delete",cancelText:i="Cancel",isDanger:o=!0}){if(!e)return null;return N.createPortal(C.jsxDEV("div",{className:"fixed inset-0 bg-black/70 z-[99999] flex items-center justify-center animate-fade-in p-4",onClick:t,children:C.jsxDEV("div",{role:"dialog","aria-modal":"true","aria-labelledby":"confirm-dialog-title",className:"bg-dark-secondary rounded-xl border border-dark-border w-full max-w-md animate-scale-in",onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"px-6 py-4 border-b border-dark-border",children:C.jsxDEV("h2",{id:"confirm-dialog-title",className:"text-lg font-medium text-text-primary",children:n},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:25,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:24,columnNumber:9},this),C.jsxDEV("div",{className:"px-6 py-6",children:C.jsxDEV("p",{className:"text-text-secondary leading-relaxed",children:s},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:30,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:29,columnNumber:9},this),C.jsxDEV("div",{className:"px-6 py-4 border-t border-dark-border flex justify-end gap-3",children:[C.jsxDEV("button",{onClick:t,className:"btn btn-secondary",children:i},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:35,columnNumber:11},this),C.jsxDEV("button",{onClick:()=>{r(),t()},className:o?"btn btn-danger":"btn btn-primary",children:a},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:41,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:34,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:16,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:12,columnNumber:5},this),document.body)}function it({video:e,isSelected:r,onToggleSelect:n,isQueued:s,editMode:a=!1,isLibraryView:i=!1,effectiveCardSize:o}){const{data:l}=Y(),d=Ve(o),c=m(),u=f(),p=q(),{showNotification:b}=I(),[N,h]=t.useState(!1),[x,v]=t.useState(!1),[j,y]=t.useState(!1),[g,D]=t.useState(!1),[E,V]=t.useState(!1),[w,k]=t.useState(!0),[S,P]=t.useState(0),[_,L]=t.useState(!1),M=t.useRef(null),T=t.useRef(null),A=t.useRef(null),R=t.useRef(null),B=t.useRef(null);t.useEffect(()=>{L(!1)},[e.id,e.thumb_url]),t.useEffect(()=>{const e=e=>{M.current&&!M.current.contains(e.target)&&h(!1)};if(N)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[N]),t.useEffect(()=>()=>{R.current&&clearTimeout(R.current),B.current&&cancelAnimationFrame(B.current),A.current&&(A.current.pause(),A.current.oncanplay=null,A.current.src="")},[]),t.useEffect(()=>{if(E&&A.current){const e=()=>{const t=A.current;t&&t.duration&&P(t.currentTime/t.duration*100),E&&(B.current=requestAnimationFrame(e))};B.current=requestAnimationFrame(e)}else B.current&&cancelAnimationFrame(B.current),P(0);return()=>{B.current&&cancelAnimationFrame(B.current)}},[E]),t.useEffect(()=>{A.current&&E&&(A.current.muted=w)},[w,E]);const $="library"===e.status,F="downloading"===e.status,O=$&&e.file_path?`/api/media/${e.file_path.replace(/\\/g,"/").split("/").slice(-2).join("/")}`:null;t.useEffect(()=>{A.current&&O&&A.current.getAttribute("src")!==O&&(A.current.src=O)},[O]);const z=F?{text:"DOWNLOADING",bg:"bg-accent/95",position:"top"}:s?{text:"QUEUED",bg:"bg-blue-600/95",position:"top"}:"removed"===e.status?{text:"REMOVED",bg:"bg-red-600/95",position:"bottom"}:"ignored"===e.status?{text:"IGNORED",bg:"bg-gray-900/70",position:"bottom"}:null;return C.jsxDEV("div",{className:"group cursor-pointer transition-colors rounded",onClick:t=>{t.target.closest("button")||t.target.closest(".menu")||(n?n(e.id):"library"===e.status&&c(`/player/${e.id}`,{state:{from:u.pathname+u.search}}))},children:[C.jsxDEV("div",{className:"relative aspect-video bg-dark-tertiary overflow-hidden transition-all "+(r?"rounded-t-xl":"rounded-t-xl rounded-b-xl group-hover:rounded-b-none"),onMouseEnter:()=>{if(!O||!A.current)return;const e=A.current;e.getAttribute("src")!==O&&(e.src=O,e.load());const t=()=>{e.currentTime=0,V(!0),e.play().catch(()=>{V(!1)})};e.readyState>=2?t():e.oncanplay=()=>{t(),e.oncanplay=null}},onMouseLeave:()=>{R.current&&clearTimeout(R.current),V(!1),A.current&&(A.current.pause(),A.current.oncanplay=null)},children:[O&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("video",{ref:A,src:O,className:"absolute inset-0 w-full h-full object-cover "+(E?"block":"hidden"),muted:!0,playsInline:!0,loop:!0,preload:"metadata"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:240,columnNumber:13},this),E&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),k(!w)},className:"absolute top-2 right-2 z-30 bg-black/70 hover:bg-black/90 text-white rounded-full p-2 transition-colors",title:w?"Unmute":"Mute",children:w?C.jsxDEV("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:263,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:262,columnNumber:21},this):C.jsxDEV("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:267,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:266,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:252,columnNumber:17},this),C.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 h-6 z-30 cursor-pointer group/scrubber",onClick:e=>{if(e.preventDefault(),e.stopPropagation(),A.current&&A.current.duration){const t=e.currentTarget.getBoundingClientRect(),r=(e.clientX-t.left)/t.width;A.current.currentTime=r*A.current.duration}},onMouseMove:e=>{if(1===e.buttons&&A.current&&A.current.duration){const t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,n=Math.max(0,Math.min(1,r/t.width));A.current.currentTime=n*A.current.duration}},children:[C.jsxDEV("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:296,columnNumber:19},this),C.jsxDEV("div",{className:"absolute bottom-1 left-2 right-2 h-1 bg-white/30 rounded-full overflow-hidden group-hover/scrubber:h-2 transition-all",children:C.jsxDEV("div",{className:"h-full bg-accent rounded-full transition-none",style:{width:`${S}%`}},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:300,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:298,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:273,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:251,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:239,columnNumber:11},this),!E&&C.jsxDEV(C.Fragment,{children:e.thumb_url&&!_?C.jsxDEV("img",{src:e.thumb_url,alt:e.title,className:"w-full h-full object-cover",onError:()=>L(!0)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:315,columnNumber:15},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-10 h-10 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:324,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:323,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:322,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:313,columnNumber:11},this),r&&n&&C.jsxDEV("div",{className:"absolute top-2 right-2 bg-accent rounded-full p-1.5 shadow-lg z-10",children:C.jsxDEV($e,{className:"w-4 h-4 text-white",strokeWidth:"3"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:335,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:334,columnNumber:11},this),z&&"top"===z.position&&C.jsxDEV("div",{className:`absolute top-2 left-2 ${z.bg} text-white px-3 py-1 rounded ${d.badge} font-bold tracking-wide backdrop-blur-sm z-10`,children:z.text},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:341,columnNumber:11},this),z&&"bottom"===z.position&&C.jsxDEV("div",{className:`absolute bottom-0 left-0 right-0 ${z.bg} text-white px-3 py-1.5 text-center ${d.badge} font-bold tracking-wide backdrop-blur-sm z-10`,children:z.text},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:346,columnNumber:11},this),e.duration_sec&&!E&&C.jsxDEV("div",{className:`absolute bottom-1 right-1 bg-black/80 text-white ${d.badge} font-semibold px-1.5 py-0.5 rounded z-20`,children:nt(e.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:353,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:228,columnNumber:7},this),C.jsxDEV("div",{className:"p-3 space-y-2 rounded-b-xl transition-colors "+(r?"bg-dark-tertiary":"group-hover:bg-dark-tertiary"),children:[i?C.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[C.jsxDEV("h3",{className:`${d.title} font-medium text-text-primary ${d.titleClamp||"line-clamp-2"} leading-tight flex-1 min-w-0`,title:e.title,children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:366,columnNumber:13},this),$&&!a&&C.jsxDEV("div",{className:"relative flex-shrink-0",ref:M,children:[C.jsxDEV("button",{ref:T,onClick:e=>{e.stopPropagation(),h(!N)},title:"Video options","aria-label":"Video options",className:"p-1 rounded hover:bg-dark-hover transition-colors text-text-secondary hover:text-text-primary",children:C.jsxDEV(Be,{},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:383,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:373,columnNumber:17},this),N&&C.jsxDEV("div",{className:"menu absolute right-0 mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-1 min-w-[160px] z-50",onMouseLeave:e=>e.stopPropagation(),children:[C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),h(!1),v(!0)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("rect",{x:"3",y:"3",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:401,columnNumber:25},this),C.jsxDEV("rect",{x:"14",y:"3",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:402,columnNumber:25},this),C.jsxDEV("rect",{x:"3",y:"14",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:403,columnNumber:25},this),C.jsxDEV("rect",{x:"14",y:"14",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:404,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:400,columnNumber:23},this),"Playlist Options"]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:392,columnNumber:21},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),h(!1),D(!0)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:417,columnNumber:25},this),C.jsxDEV("line",{x1:"12",y1:"16",x2:"12",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:418,columnNumber:25},this),C.jsxDEV("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:419,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:416,columnNumber:23},this),"Video Info"]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:408,columnNumber:21},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),h(!1),y(!0)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(Fe,{className:"w-4 h-4"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:431,columnNumber:23},this),"Delete video"]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:423,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:388,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:372,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:365,columnNumber:11},this):C.jsxDEV("h3",{className:`${d.title} font-medium text-text-primary line-clamp-2 leading-tight`,title:e.title,children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:441,columnNumber:11},this),i&&e.file_size_bytes?C.jsxDEV("div",{className:`${d.metadata} text-text-secondary font-medium flex items-center gap-1 flex-wrap`,children:[C.jsxDEV("span",{children:"uploaded"===Le(l,"library_date_display","downloaded")&&e.upload_date?Ze(e.upload_date):et(e.downloaded_at)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:450,columnNumber:13},this),C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:459,columnNumber:13},this),C.jsxDEV("span",{children:Xe(e.file_size_bytes)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:460,columnNumber:13},this),e.watched&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:463,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-muted uppercase",children:"Watched"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:464,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:462,columnNumber:15},this),e.playlist_ids&&e.playlist_ids.length>0&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:469,columnNumber:17},this),C.jsxDEV("span",{className:"text-green-500 uppercase",children:"Playlist"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:470,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:468,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:449,columnNumber:11},this):C.jsxDEV("div",{className:`${d.metadata} text-text-secondary font-medium`,children:C.jsxDEV("span",{children:Ze(e.upload_date)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:477,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:476,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:361,columnNumber:7},this),x&&C.jsxDEV(st,{videoId:e.id,video:e,triggerRef:T,onClose:()=>v(!1)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:484,columnNumber:9},this),C.jsxDEV(at,{isOpen:j,onClose:()=>y(!1),onConfirm:async()=>{try{await p.mutateAsync(e.id),b("Video deleted","success"),h(!1),y(!1)}catch(t){b(ce(t.message,"delete video"),"error")}},title:"Delete Video",message:`Are you sure you want to delete "${e.title}"? This will permanently remove the video file from your system.`,confirmText:"Delete",cancelText:"Cancel",isDanger:!0},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:493,columnNumber:7},this),g&&C.jsxDEV("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:e=>{e.stopPropagation(),D(!1)},children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-lg w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"flex items-center justify-between p-4 border-b border-dark-border",children:[C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Video Info"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:518,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>D(!1),className:"text-text-secondary hover:text-text-primary transition-colors",children:C.jsxDEV("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:524,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:523,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:519,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:517,columnNumber:13},this),C.jsxDEV("div",{className:"p-4 space-y-1 text-sm font-mono",children:[C.jsxDEV(ot,{label:"YT ID",value:e.yt_id},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:529,columnNumber:15},this),C.jsxDEV(ot,{label:"Title",value:e.title},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:530,columnNumber:15},this),C.jsxDEV(ot,{label:"Status",value:e.status},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:531,columnNumber:15},this),C.jsxDEV(ot,{label:"Duration",value:e.duration_sec?`${e.duration_sec}s (${nt(e.duration_sec)})`:"-"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:532,columnNumber:15},this),C.jsxDEV(ot,{label:"Upload Date",value:e.upload_date||"-"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:533,columnNumber:15},this),C.jsxDEV(ot,{label:"Thumb URL",value:e.thumb_url||"-",truncate:!0},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:534,columnNumber:15},this),C.jsxDEV(ot,{label:"File Path",value:e.file_path||"-",truncate:!0},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:535,columnNumber:15},this),C.jsxDEV(ot,{label:"File Size",value:e.file_size_bytes?Xe(e.file_size_bytes):"-"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:536,columnNumber:15},this),C.jsxDEV(ot,{label:"Watched",value:e.watched?"Yes":"No"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:537,columnNumber:15},this),C.jsxDEV(ot,{label:"Playback",value:e.playback_seconds?`${e.playback_seconds}s`:"-"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:538,columnNumber:15},this),C.jsxDEV(ot,{label:"Channel ID",value:e.channel_id||"-"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:539,columnNumber:15},this),C.jsxDEV(ot,{label:"Channel",value:e.channel_title||"-"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:540,columnNumber:15},this),C.jsxDEV(ot,{label:"Folder",value:e.folder_name||"-"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:541,columnNumber:15},this),C.jsxDEV(ot,{label:"Discovered",value:e.discovered_at?et(e.discovered_at):"-"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:542,columnNumber:15},this),C.jsxDEV(ot,{label:"Downloaded",value:e.downloaded_at?et(e.downloaded_at):"-"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:543,columnNumber:15},this),C.jsxDEV(ot,{label:"Playlists",value:e.playlist_ids?.length?e.playlist_ids.join(", "):"-"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:544,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:528,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:513,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:506,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:223,columnNumber:5},this)}function ot({label:e,value:t,truncate:r}){return C.jsxDEV("div",{className:"flex",children:[C.jsxDEV("span",{className:"text-text-secondary w-24 flex-shrink-0",children:[e,":"]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:556,columnNumber:7},this),C.jsxDEV("span",{className:"text-text-primary "+(r?"truncate":""),title:r?t:void 0,children:t},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:557,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:555,columnNumber:5},this)}function lt(){const{channelId:e}=h(),r=f(),a=m(),[i,o]=b(),{data:l}=A(),{data:d}=J(),{data:c}=Y();!function(){const e=n();s({mutationFn:e=>T.addToQueue(e),onSuccess:()=>{e.invalidateQueries({queryKey:["queue"]}),e.invalidateQueries({queryKey:["videos"]}),e.invalidateQueries({queryKey:["channels"]})}})}();const u=function(){const e=n();return s({mutationFn:e=>T.addToQueueBulk(e),onSuccess:()=>{e.invalidateQueries({queryKey:["queue"]}),e.invalidateQueries({queryKey:["videos"]}),e.invalidateQueries({queryKey:["channels"]})}})}(),p=z(),N=function(){const e=n();return s({mutationFn:e=>T.bulkDeleteVideos(e),onSuccess:()=>{e.invalidateQueries({queryKey:["videos"]}),e.invalidateQueries({queryKey:["playlists"]}),e.invalidateQueries({queryKey:["channels"]})}})}();q();const x=B(),v=$(),j=R(),y=function(){const e=n();return s({mutationFn:e=>T.markChannelVisited(e),onSuccess:()=>{e.invalidateQueries({queryKey:["channels"]})}})}(),{showNotification:g}=I(),D=r.pathname.endsWith("/library");t.useEffect(()=>{D&&e&&y.mutate(parseInt(e))},[e,D]);const{cardSize:E}=ae(D?"library":"channels"),V=Ce(E),w=new Set((d?.queue_items||[]).filter(e=>"pending"===e.status||"downloading"===e.status).map(e=>e.video?.id).filter(Boolean)),k=d?.current_operation,S="scanning"===k?.type,[P,_]=t.useState([]),[L,M]=t.useState(""),[O,W]=t.useState(!1),[Q,K]=t.useState(!1),[U,H]=t.useState(!1),[G,X]=t.useState(!1),[Z,ee]=t.useState(null),[te,re]=t.useState(null),[ne,se]=t.useState(1),[ie,oe]=t.useState(1),le=_e(c,"items_per_page",50),de=window.innerWidth<640,[be,ge]=t.useState(null),Ve=l?.find(t=>t.id===Number(e)),Te=`channelLibrary_${e}`,Re=(()=>{const e=i.get("filter");if(e)return e;return localStorage.getItem(`${Te}_filter`)||(D?"videos":"to-review")})(),Be=i.get("search")||"",$e=(()=>{const e=i.get("sort");if(e)return e;return localStorage.getItem(`${Te}_sort`)||"date-desc"})(),Fe=(()=>{const e=i.get("duration");if(e)return e;return localStorage.getItem(`${Te}_duration`)||"all"})(),Oe="30-60"===Fe?"30":"over60"===Fe?"60":null,qe="0-30"===Fe?"30":"30-60"===Fe?"60":null,ze=D&&Pe(c,"hide_watched"),We=D&&Pe(c,"hide_playlisted");let Qe,Ke;D?(Qe="library",Ke="false"):"ignored"===Re?Ke="true":(Qe="discovered",Ke="false");const{data:Ue,isLoading:He}=F({channel_id:e,status:Qe,ignored:Ke,search:Be,min_duration:Oe,max_duration:qe});t.useEffect(()=>{const e=new URLSearchParams(i);let t=!1;if(!i.has("sort")){const r=localStorage.getItem(`${Te}_sort`);r&&(e.set("sort",r),t=!0)}if(!i.has("filter")){const r=localStorage.getItem(`${Te}_filter`);r&&(e.set("filter",r),t=!0)}if(!i.has("duration")){const r=localStorage.getItem(`${Te}_duration`);r&&"all"!==r&&(e.set("duration",r),t=!0)}t&&o(e,{replace:!0})},[e]),t.useEffect(()=>{const e=()=>{W(window.scrollY>400)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const Je=e=>{const t=new URLSearchParams(i);t.set("sort",e),localStorage.setItem(`${Te}_sort`,e),o(t)},Ye=e=>{if(D){if("uploaded"===Le(c,"library_date_display","downloaded")&&e.upload_date){const t=e.upload_date.slice(0,4),r=e.upload_date.slice(4,6),n=e.upload_date.slice(6,8);return new Date(`${t}-${r}-${n}`)}if(e.downloaded_at)return new Date(e.downloaded_at)}if(e.upload_date){const t=e.upload_date.slice(0,4),r=e.upload_date.slice(4,6),n=e.upload_date.slice(6,8),s=new Date(`${t}-${r}-${n}`);return isNaN(s.getTime())?new Date(e.discovered_at||0):s}return new Date(e.discovered_at||0)},Ge=t.useMemo(()=>Ue?[...Ue].filter(e=>!!(e.title||"").toLowerCase().includes(L.toLowerCase())&&((!ze||!e.watched)&&(!We||!e.playlist_name))).sort((e,t)=>{switch($e){case"date-desc":return Ye(t)-Ye(e);case"date-asc":return Ye(e)-Ye(t);case"duration-desc":return t.duration_sec-e.duration_sec;case"duration-asc":return e.duration_sec-t.duration_sec;case"title-asc":return e.title.localeCompare(t.title);case"title-desc":return t.title.localeCompare(e.title);default:return 0}}):[],[Ue,L,ze,We,$e]);t.useEffect(()=>{se(1),oe(1)},[L,$e,Fe,Re]),t.useEffect(()=>{_([]),K(!1)},[Re]),t.useEffect(()=>{const e=Math.ceil(Ge.length/le);ne>e&&e>0&&se(e)},[Ge.length,le,ne]);const Xe=t.useMemo(()=>{if(de)return Ge.slice(0,ie*le);const e=(ne-1)*le;return Ge.slice(e,e+le)},[Ge,ne,le,ie,de]),Ze=e=>{const t=new URLSearchParams(i);e&&"all"!==e?(t.set("duration",e),localStorage.setItem(`${Te}_duration`,e)):(t.delete("duration"),localStorage.removeItem(`${Te}_duration`)),o(t)},et=e=>{M(e)},tt=async e=>{if(0!==P.length)try{switch(e){case"queue":const e=await u.mutateAsync(P);e.skipped_count>0?g(`${e.added_count} videos added to queue, ${e.skipped_count} already in queue`,"success"):g(`${e.added_count} videos added to queue`,"success");break;case"ignore":await p.mutateAsync({videoIds:P,updates:{status:"ignored"}}),g(`${P.length} videos ignored`,"success");break;case"unignore":const t=await u.mutateAsync(P);t.skipped_count>0?g(`${t.added_count} videos added to queue, ${t.skipped_count} already in queue`,"success"):g(`${t.added_count} videos added to queue`,"success");break;case"delete":return void ge({count:P.length});case"playlist":return void H(!0)}_([])}catch(t){g(ce(t.message,"complete action"),"error")}},rt=e=>{_(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},nt=()=>{_(Ge.map(e=>e.id))},at=()=>{_([])},ot=async(t=!1)=>{if(t)if(c?.youtube_api_key)try{(await T.testYoutubeApiKey()).valid||g("API key is invalid - upload dates will not be fetched","warning")}catch(r){g("API key is invalid - upload dates will not be fetched","warning")}else g("No API key configured - upload dates will not be fetched","warning");try{const n=l?.find(t=>t.id===Number(e)),s=n?.title||`Channel ${e}`;try{await T.setOperation("scanning","Scanning channels for new videos")}catch(r){}await v.mutateAsync({id:Number(e),forceFull:t,is_batch_start:!0,is_auto_scan:!1,batch_label:s})}catch(r){g(ce(r.message,"scan channel"),"error")}};return C.jsxDEV("div",{className:"space-y-4 animate-fade-in",children:[C.jsxDEV(ue,{className:"md:-mx-8 md:px-8 mb-4",children:C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[C.jsxDEV(fe,{to:D?"/library":"/",title:D?"Back to Library":"Back to Channels"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:512,columnNumber:13},this),D?C.jsxDEV(xe,{tabs:[{id:"videos",label:"Videos"},{id:"playlists",label:"Playlists"}],active:Re,onChange:e=>{if("playlists"===e)a("/library?tab=playlists");else{const e=new URLSearchParams(i);e.delete("filter"),o(e)}},showCountOnActive:!1},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:519,columnNumber:15},this):C.jsxDEV(xe,{tabs:[{id:"to-review",label:"Review",count:Ve?.video_count},{id:"ignored",label:"Ignored",count:Ve?.ignored_count}],active:Re,onChange:e=>{const t=new URLSearchParams(i);"ignored"===e?t.set("filter","ignored"):t.delete("filter"),o(t)},showCountOnActive:!0,hideCountOnMobile:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:537,columnNumber:15},this),D&&"playlists"!==Re&&C.jsxDEV(he,{active:Q,onToggle:()=>{K(!Q),_([])}},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:559,columnNumber:15},this),!D&&Ve&&C.jsxDEV(ve,{label:"Manage",variant:"secondary",mobileIcon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"4",y1:"21",x2:"4",y2:"14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:575,columnNumber:21},this),C.jsxDEV("line",{x1:"4",y1:"10",x2:"4",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:576,columnNumber:21},this),C.jsxDEV("line",{x1:"12",y1:"21",x2:"12",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:577,columnNumber:21},this),C.jsxDEV("line",{x1:"12",y1:"8",x2:"12",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:578,columnNumber:21},this),C.jsxDEV("line",{x1:"20",y1:"21",x2:"20",y2:"16"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:579,columnNumber:21},this),C.jsxDEV("line",{x1:"20",y1:"12",x2:"20",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:580,columnNumber:21},this),C.jsxDEV("line",{x1:"1",y1:"14",x2:"7",y2:"14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:581,columnNumber:21},this),C.jsxDEV("line",{x1:"9",y1:"8",x2:"15",y2:"8"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:582,columnNumber:21},this),C.jsxDEV("line",{x1:"17",y1:"16",x2:"23",y2:"16"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:583,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:574,columnNumber:19},this),items:[{label:"Scan New Videos",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"23 4 23 10 17 10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:591,columnNumber:25},this),C.jsxDEV("path",{d:"M20.49 15a9 9 0 01-2.12 3.36 9 9 0 01-11.58 1.47A9 9 0 013 12a9 9 0 011.79-5.37A9 9 0 0112 3a9 9 0 018.5 6.5L23 10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:592,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:590,columnNumber:23},this),onClick:()=>ot(!1),disabled:S},{label:"Scan All Videos",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"23 4 23 10 17 10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:602,columnNumber:25},this),C.jsxDEV("polyline",{points:"1 20 1 14 7 14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:603,columnNumber:25},this),C.jsxDEV("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:604,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:601,columnNumber:23},this),onClick:()=>ot(!0),disabled:S},{divider:!0},{label:"Duration Settings",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:615,columnNumber:25},this),C.jsxDEV("polyline",{points:"12 6 12 12 16 14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:616,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:614,columnNumber:23},this),onClick:()=>{X(!0),ee(Ve)}},{label:Ve.auto_download?"Auto-Download âœ“":"Auto-Download",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:628,columnNumber:25},this),C.jsxDEV("polyline",{points:"7 10 12 15 17 10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:629,columnNumber:25},this),C.jsxDEV("line",{x1:"12",y1:"15",x2:"12",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:630,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:627,columnNumber:23},this),onClick:()=>{const e=!Ve.auto_download;j.mutate({id:Ve.id,data:{auto_download:e}},{onSuccess:()=>{g(e?`Auto-download enabled for ${Ve.title}`:`Auto-download disabled for ${Ve.title}`,"success")}})}},{divider:!0},{label:"Delete Channel",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"3 6 5 6 21 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:655,columnNumber:25},this),C.jsxDEV("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:656,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:654,columnNumber:23},this),onClick:()=>re({id:Ve.id,title:Ve.title}),variant:"danger"}]},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:570,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:511,columnNumber:11},this),C.jsxDEV("div",{className:"hidden sm:block flex-1 max-w-md mx-4",children:C.jsxDEV(me,{value:L,onChange:et,placeholder:"Search videos...",className:"w-full"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:669,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:668,columnNumber:11},this),C.jsxDEV("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0 ml-auto",children:[C.jsxDEV("div",{className:"sm:hidden flex items-center gap-1.5",children:[C.jsxDEV(ye,{sortValue:$e,onSortChange:Je,sortOptions:Me.videos,durationValue:Fe,onDurationChange:Ze,durationOptions:Ie,currentPage:ne,totalItems:Ge.length,itemsPerPage:le,onPageChange:se,showMobileSort:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:681,columnNumber:15},this),C.jsxDEV(pe,{value:L,onChange:et,placeholder:"Search videos..."},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:694,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:680,columnNumber:13},this),C.jsxDEV(ye,{sortValue:$e,onSortChange:Je,sortOptions:Me.videos,durationValue:Fe,onDurationChange:Ze,durationOptions:Ie,currentPage:ne,totalItems:Ge.length,itemsPerPage:le,onPageChange:se,showMobileSort:!1},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:702,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:678,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:509,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:508,columnNumber:7},this),D&&"playlists"!==Re&&C.jsxDEV(Ne,{show:Q&&Ge.length>0,selectedCount:P.length,totalCount:Ge.length,onSelectAll:nt,onClear:at,onDone:()=>{K(!1),_([])},actions:[...P.length>0?[{label:"Playlist",onClick:()=>tt("playlist"),variant:"default"}]:[],...P.length>0?[{label:"Delete",onClick:()=>tt("delete"),variant:"danger"}]:[]]},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:721,columnNumber:9},this),!D&&"playlists"!==Re&&C.jsxDEV(Ne,{show:P.length>0,selectedCount:P.length,totalCount:Ge.length,onSelectAll:nt,onClear:at,onDone:at,actions:"to-review"===Re?[{label:"Add to Queue",onClick:()=>tt("queue"),primary:!0},{label:"Ignore",onClick:()=>tt("ignore")}]:[{label:"Add to Queue",onClick:()=>tt("unignore"),primary:!0}]},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:748,columnNumber:9},this),Ve&&"playlists"!==Re&&!D&&C.jsxDEV("div",{className:"flex items-center gap-4 mb-4",children:[Ve.thumbnail&&C.jsxDEV("img",{src:Ve.thumbnail,alt:Ve.title,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full border-2 border-dark-border"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:779,columnNumber:13},this),C.jsxDEV("div",{children:[C.jsxDEV("h2",{className:"text-base sm:text-xl font-bold text-text-primary",children:Ve.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:786,columnNumber:13},this),C.jsxDEV("p",{className:"text-text-secondary text-sm",children:[Ge.length," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:787,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:785,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:777,columnNumber:9},this),G&&Z&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-sm w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-lg font-bold text-text-primary mb-4",children:"Duration Settings"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:796,columnNumber:13},this),C.jsxDEV("div",{className:"space-y-4",children:[C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Min Minutes"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:799,columnNumber:17},this),C.jsxDEV("input",{type:"number",value:Z.min_minutes,onChange:e=>ee({...Z,min_minutes:Number(e.target.value)}),className:"input w-full",min:"0",placeholder:"0 = no minimum"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:802,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:798,columnNumber:15},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-sm font-medium text-text-secondary mb-1",children:"Max Minutes"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:815,columnNumber:17},this),C.jsxDEV("input",{type:"number",value:Z.max_minutes,onChange:e=>ee({...Z,max_minutes:Number(e.target.value)}),className:"input w-full",min:"0",placeholder:"0 = no maximum"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:818,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:814,columnNumber:15},this),C.jsxDEV("div",{className:"flex gap-3 pt-2",children:[C.jsxDEV("button",{onClick:()=>{X(!1),ee(null)},className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:831,columnNumber:17},this),C.jsxDEV("button",{onClick:async()=>{try{await j.mutateAsync({id:Number(e),data:{min_minutes:Z.min_minutes,max_minutes:Z.max_minutes}}),ee(null),X(!1),g("Filters updated","success")}catch(t){g(ce(t.message,"update filters"),"error")}},className:"btn btn-primary flex-1",children:"Save"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:840,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:830,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:797,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:795,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:794,columnNumber:9},this),He?C.jsxDEV("div",{className:"flex justify-center py-12",children:C.jsxDEV(we,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:855,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:854,columnNumber:9},this):0===Ge.length?C.jsxDEV(Se,{icon:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:859,columnNumber:17},this),title:Ue&&Ue.length>0&&(ze||We)?"All videos are "+(ze&&We?"watched or in playlists":ze?"watched":"in playlists"):"No videos found",message:Ue&&Ue.length>0&&(ze||We)?"Remove filter to see them":D?"No downloaded videos yet":"Try adjusting your filters or scan for videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:858,columnNumber:9},this):(()=>{const e=Ee(E,Xe.length);return C.jsxDEV("div",{className:"px-0 sm:px-6 lg:px-12 xl:px-16",children:C.jsxDEV("div",{className:`grid ${De(V,Xe.length)} gap-4 w-full [&>*]:min-w-0`,children:Xe.map(t=>C.jsxDEV(it,{video:t,isSelected:P.includes(t.id),onToggleSelect:D&&Q?rt:D?void 0:rt,isQueued:w.has(t.id),editMode:D&&Q,isLibraryView:D,effectiveCardSize:e},t.id,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:873,columnNumber:13},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:871,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:870,columnNumber:9},this)})(),Ge.length>0&&(de?C.jsxDEV(ke,{currentCount:Xe.length,totalCount:Ge.length,onLoadMore:()=>oe(e=>e+1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:892,columnNumber:11},this):C.jsxDEV("div",{className:"flex justify-center mt-6",children:C.jsxDEV(je,{currentPage:ne,totalItems:Ge.length,itemsPerPage:le,onPageChange:se},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:899,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:898,columnNumber:11},this)),O&&C.jsxDEV("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-20 right-6 p-3 bg-gray-700 hover:bg-gray-600 rounded-full shadow-lg transition-colors z-50 animate-fade-in","aria-label":"Scroll to top",children:C.jsxDEV("svg",{className:"w-5 h-5 text-text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"18 15 12 9 6 15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:917,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:916,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:911,columnNumber:9},this),te&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary mb-3",children:"Delete Channel?"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:926,columnNumber:13},this),C.jsxDEV("p",{className:"text-text-secondary mb-4",children:['Are you sure you want to delete "',C.jsxDEV("span",{className:"text-text-primary font-semibold",children:te.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:928,columnNumber:48},this),'"?']},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:927,columnNumber:13},this),C.jsxDEV("p",{className:"text-sm text-yellow-400 mb-6",children:"âš ï¸ This will permanently delete all scanned videos from this channel. Downloaded videos in your library will not be affected."},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:930,columnNumber:13},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>re(null),className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:934,columnNumber:15},this),C.jsxDEV("button",{onClick:async()=>{try{await x.mutateAsync(Number(e)),g("Channel deleted","success"),re(null),a("/")}catch(t){g(ce(t.message,"delete channel"),"error")}},disabled:x.isPending,className:"btn btn-danger flex-1",children:x.isPending?"Deleting...":"Delete"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:940,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:933,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:925,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:924,columnNumber:9},this),U&&C.jsxDEV(st,{videoIds:P,onClose:()=>{H(!1),_([])}},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:954,columnNumber:9},this),C.jsxDEV(Ae,{isOpen:!!be,title:"Delete Videos",message:C.jsxDEV(C.Fragment,{children:["Permanently delete ",C.jsxDEV("span",{className:"font-semibold",children:[be?.count," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:969,columnNumber:32},this)," from your library? This will also delete the video files from disk."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:968,columnNumber:11},this),confirmText:"Delete",confirmStyle:"danger",onConfirm:async()=>{if(be)try{await N.mutateAsync(P),g(`${P.length} videos deleted`,"success"),_([]),K(!1),ge(null)}catch(e){g(ce(e.message,"delete videos"),"error")}},onCancel:()=>ge(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:964,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:506,columnNumber:5},this)}function dt(){const{id:e}=h(),r=m(),n=f(),{data:s,isLoading:a}=Q(e),{data:i}=Y(),o=H(),l=q(),d=z(),c=U(),u=K(),{showNotification:p}=I(),{cardSize:b}=ae("library"),N=Ce(b),[x,v]=t.useState(""),[j,y]=t.useState(localStorage.getItem("playlist_sort")||"date-desc"),[g,D]=t.useState(localStorage.getItem("playlist_duration")||"all"),E=Pe(i,"hide_watched"),[V,w]=t.useState(!1),[k,S]=t.useState([]),[P,_]=t.useState(!1),[L,M]=t.useState(1),[T,A]=t.useState(1),R=_e(i,"items_per_page",50),B=window.innerWidth<640,[$,F]=t.useState(null),[O,W]=t.useState(!1),[J,G]=t.useState("");t.useEffect(()=>{localStorage.setItem("playlist_sort",j)},[j]),t.useEffect(()=>{localStorage.setItem("playlist_duration",g)},[g]);const X=e=>{S(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Z=async()=>{if($)try{if("remove"===$.type){for(const t of k)await o.mutateAsync({playlistId:parseInt(e),videoId:t});p(`${k.length} videos removed from playlist`,"success")}else if("delete"===$.type){for(const e of k)await l.mutateAsync(e);p(`${k.length} videos deleted from library`,"success")}else if("deletePlaylist"===$.type)return void(await se());S([]),F(null)}catch(t){p(ce(t.message,"complete action"),"error")}},ee=e=>e.downloaded_at?new Date(e.downloaded_at):new Date(e.discovered_at||0),te=t.useMemo(()=>{if(!s?.videos)return[];const e=(()=>{switch(g){case"0-30":return{min:0,max:1800};case"30-60":return{min:1800,max:3600};case"over60":return{min:3600,max:1/0};default:return null}})();return s.videos.filter(t=>{if(!(t.title||"").toLowerCase().includes(x.toLowerCase()))return!1;if(E&&t.watched)return!1;if(e){const r=t.duration_sec||0;if(r<e.min||r>=e.max)return!1}return!0}).sort((e,t)=>{switch(j){case"date-desc":return ee(t)-ee(e);case"date-asc":return ee(e)-ee(t);case"duration-desc":return t.duration_sec-e.duration_sec;case"duration-asc":return e.duration_sec-t.duration_sec;case"title-asc":return e.title.localeCompare(t.title);case"title-desc":return t.title.localeCompare(e.title);default:return 0}})},[s?.videos,x,E,j,g]);t.useEffect(()=>{M(1),A(1)},[x,j,g]);const re=t.useMemo(()=>{if(B)return te.slice(0,T*R);const e=(L-1)*R;return te.slice(e,e+R)},[te,L,R,T,B]),ne=async()=>{if(J.trim())try{await u.mutateAsync({id:e,data:{name:J.trim()}}),p("Playlist renamed","success"),W(!1),G("")}catch(t){p(ce(t.message,"rename playlist"),"error")}},se=async()=>{try{await c.mutateAsync(e),p("Playlist deleted","success"),r("/library?tab=playlists")}catch(t){p(ce(t.message,"delete playlist"),"error")}};return a?C.jsxDEV("div",{className:"text-center py-20 text-text-secondary",children:"Loading playlist..."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:244,columnNumber:12},this):s?C.jsxDEV("div",{className:"space-y-4 animate-fade-in",children:[C.jsxDEV(ue,{className:"-mx-8 px-8 mb-4",children:C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("div",{className:"flex items-center gap-2 flex-shrink-0",children:[C.jsxDEV(fe,{onClick:()=>r(n.state?.from||"/library?tab=playlists"),title:"Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:268,columnNumber:13},this),C.jsxDEV("h2",{className:"text-sm sm:text-lg font-semibold text-text-primary truncate max-w-[100px] sm:max-w-none",children:s.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:274,columnNumber:13},this),C.jsxDEV("span",{className:"text-xs sm:text-sm text-text-secondary whitespace-nowrap",children:["(",te.length,")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:275,columnNumber:13},this),C.jsxDEV(ve,{label:"Options",variant:"secondary",mobileIcon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"4",y1:"21",x2:"4",y2:"14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:283,columnNumber:19},this),C.jsxDEV("line",{x1:"4",y1:"10",x2:"4",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:284,columnNumber:19},this),C.jsxDEV("line",{x1:"12",y1:"21",x2:"12",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:285,columnNumber:19},this),C.jsxDEV("line",{x1:"12",y1:"8",x2:"12",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:286,columnNumber:19},this),C.jsxDEV("line",{x1:"20",y1:"21",x2:"20",y2:"16"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:287,columnNumber:19},this),C.jsxDEV("line",{x1:"20",y1:"12",x2:"20",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:288,columnNumber:19},this),C.jsxDEV("line",{x1:"1",y1:"14",x2:"7",y2:"14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:289,columnNumber:19},this),C.jsxDEV("line",{x1:"9",y1:"8",x2:"15",y2:"8"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:290,columnNumber:19},this),C.jsxDEV("line",{x1:"17",y1:"16",x2:"23",y2:"16"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:291,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:282,columnNumber:17},this),items:[{label:"Play All",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polygon",{points:"5 3 19 12 5 21 5 3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:299,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:298,columnNumber:21},this),onClick:()=>{te.length>0&&r(`/video/${te[0].id}`,{state:{playlistId:e,playlistVideos:te.map(e=>e.id)}})},disabled:0===te.length},{label:"Shuffle",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"16 3 21 3 21 8"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:309,columnNumber:23},this),C.jsxDEV("line",{x1:"4",y1:"20",x2:"21",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:310,columnNumber:23},this),C.jsxDEV("polyline",{points:"21 16 21 21 16 21"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:311,columnNumber:23},this),C.jsxDEV("line",{x1:"15",y1:"15",x2:"21",y2:"21"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:312,columnNumber:23},this),C.jsxDEV("line",{x1:"4",y1:"4",x2:"9",y2:"9"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:313,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:308,columnNumber:21},this),onClick:()=>{if(te.length>0){const t=[...te].sort(()=>Math.random()-.5);r(`/video/${t[0].id}`,{state:{playlistId:e,playlistVideos:t.map(e=>e.id),shuffle:!0}})}},disabled:0===te.length},{divider:!0},{label:"Edit",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:324,columnNumber:23},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:325,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:323,columnNumber:21},this),onClick:()=>{w(!V),S([])}},{label:"Rename",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M17 3a2.828 2.828 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:337,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:336,columnNumber:21},this),onClick:()=>{G(s.name),W(!0)}},{divider:!0},{label:"Delete Playlist",icon:C.jsxDEV("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"3 6 5 6 21 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:350,columnNumber:23},this),C.jsxDEV("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:351,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:349,columnNumber:21},this),onClick:()=>F({type:"deletePlaylist"}),variant:"danger"}]},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:278,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:267,columnNumber:11},this),C.jsxDEV("div",{className:"hidden sm:block flex-1 max-w-md mx-4",children:C.jsxDEV(me,{value:x,onChange:v,placeholder:"Search videos...",className:"w-full"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:363,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:362,columnNumber:11},this),C.jsxDEV("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0 ml-auto",children:[C.jsxDEV("div",{className:"sm:hidden flex items-center gap-1.5",children:[C.jsxDEV(ye,{sortValue:j,onSortChange:y,sortOptions:Me.videos,durationValue:g,onDurationChange:D,durationOptions:Ie,currentPage:L,totalItems:te.length,itemsPerPage:R,onPageChange:M,showMobileSort:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:375,columnNumber:15},this),C.jsxDEV(pe,{value:x,onChange:v,placeholder:"Search videos..."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:388,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:374,columnNumber:13},this),C.jsxDEV(ye,{sortValue:j,onSortChange:y,sortOptions:Me.videos,durationValue:g,onDurationChange:D,durationOptions:Ie,currentPage:L,totalItems:te.length,itemsPerPage:R,onPageChange:M,showMobileSort:!1},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:396,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:372,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:265,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:264,columnNumber:7},this),C.jsxDEV(Ne,{show:V&&te.length>0,selectedCount:k.length,totalCount:te.length,onSelectAll:()=>{S(te.map(e=>e.id))},onClear:()=>{S([])},onDone:()=>{w(!1),S([])},actions:[...k.length>0?[{label:"Playlist",onClick:()=>_(!0),variant:"default"}]:[],...k.length>0?[{label:"Delete",onClick:()=>(async e=>{if(0!==k.length)try{switch(e){case"mark-watched":await d.mutateAsync({videoIds:k,updates:{watched:!0}}),p(`${k.length} videos marked as watched`,"success");break;case"remove":return void F({type:"remove",count:k.length});case"delete":return void F({type:"delete",count:k.length})}S([])}catch(t){p(ce(t.message,"complete action"),"error")}})("delete"),variant:"danger"}]:[]]},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:414,columnNumber:7},this),te.length>0?(()=>{const e=Ee(b,re.length);return C.jsxDEV("div",{className:"px-0 sm:px-6 lg:px-12 xl:px-16",children:C.jsxDEV("div",{className:`grid ${De(N,re.length)} gap-4 w-full [&>*]:min-w-0`,children:re.map(t=>C.jsxDEV(it,{video:t,isLibraryView:!0,editMode:V,isSelected:k.includes(t.id),onToggleSelect:V?X:void 0,effectiveCardSize:e},t.id,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:445,columnNumber:13},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:443,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:442,columnNumber:9},this)})():C.jsxDEV(Se,{icon:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:460,columnNumber:17},this),title:0===(s.videos||[]).length?"This playlist is empty":"No videos match your filters",message:0===(s.videos||[]).length?"Add videos from your library to get started":"Try adjusting your search or filters"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:459,columnNumber:9},this),te.length>0&&(B?C.jsxDEV(ke,{currentCount:re.length,totalCount:te.length,onLoadMore:()=>A(e=>e+1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:469,columnNumber:11},this):C.jsxDEV("div",{className:"flex justify-center mt-6",children:C.jsxDEV(je,{currentPage:L,totalItems:te.length,itemsPerPage:R,onPageChange:M},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:476,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:475,columnNumber:11},this)),C.jsxDEV(Ae,{isOpen:"remove"===$?.type,title:"Remove from Playlist",message:C.jsxDEV(C.Fragment,{children:["Remove ",C.jsxDEV("span",{className:"font-semibold",children:[$?.count," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:492,columnNumber:20},this)," from this playlist? The videos will remain in your library."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:491,columnNumber:11},this),confirmText:"Remove",confirmStyle:"danger",onConfirm:Z,onCancel:()=>F(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:487,columnNumber:7},this),C.jsxDEV(Ae,{isOpen:"delete"===$?.type,title:"Delete Videos",message:C.jsxDEV(C.Fragment,{children:["Permanently delete ",C.jsxDEV("span",{className:"font-semibold",children:[$?.count," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:507,columnNumber:32},this)," from your library? This will also delete the video files from disk."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:506,columnNumber:11},this),confirmText:"Delete",confirmStyle:"danger",onConfirm:Z,onCancel:()=>F(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:502,columnNumber:7},this),C.jsxDEV(Ae,{isOpen:"deletePlaylist"===$?.type,title:"Delete Playlist",message:C.jsxDEV(C.Fragment,{children:["Delete playlist ",C.jsxDEV("span",{className:"font-semibold",children:s?.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:522,columnNumber:29},this),"? The videos will remain in your library."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:521,columnNumber:11},this),confirmText:"Delete",confirmStyle:"danger",onConfirm:Z,onCancel:()=>F(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:517,columnNumber:7},this),C.jsxDEV(Ae,{isOpen:O,title:"Rename Playlist",message:C.jsxDEV("input",{type:"text",value:J,onChange:e=>G(e.target.value),onKeyDown:e=>"Enter"===e.key&&ne(),className:"w-full px-3 py-2 bg-dark-tertiary border border-dark-border rounded-lg text-text-primary focus:outline-none focus:border-accent",placeholder:"Playlist name",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:537,columnNumber:11},this),confirmText:"Rename",onConfirm:ne,onCancel:()=>{W(!1),G("")}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:533,columnNumber:7},this),P&&C.jsxDEV(st,{videoIds:k,onClose:()=>{_(!1),S([]),w(!1)}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:557,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:262,columnNumber:5},this):C.jsxDEV("div",{className:"text-center py-20 text-text-secondary",children:[C.jsxDEV("p",{className:"text-lg font-medium",children:"Playlist not found"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:250,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>r("/library?tab=playlists"),className:"btn btn-primary mt-4",children:"Back to Library"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:251,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:249,columnNumber:7},this)}function ct(){const{showNotification:e}=I(),{cardSize:r}=ae("videos"),a=s({mutationFn:({url:e,filter:t="new"})=>T.scanYouTubePlaylist(e,t)}),i=function(){const e=n();return s({mutationFn:({videos:e})=>T.queuePlaylistVideos(e),onSuccess:()=>{e.invalidateQueries({queryKey:["queue"]}),e.invalidateQueries({queryKey:["videos"]})}})}(),o=s({mutationFn:({videos:e})=>T.removePlaylistVideos(e)}),l=Ce(r),[d,c]=t.useState(""),[u,m]=t.useState(null),[p,b]=t.useState(!1),[N,f]=t.useState(!1),[h,x]=t.useState(()=>{const e=localStorage.getItem("videos_url_history");return e?JSON.parse(e):[]}),v=t.useRef(null),j=t.useRef(null);t.useEffect(()=>{const e=e=>{j.current&&!j.current.contains(e.target)&&v.current&&!v.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),t.useEffect(()=>{const e=()=>{b(window.scrollY>400)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const[y,g]=t.useState(new Set),[D,E]=t.useState(!1),[V,w]=t.useState(!1),[k,S]=t.useState(!1),[P,_]=t.useState("new"),[L,M]=t.useState("available"),[A,R]=t.useState(""),B=async(t,r=P)=>{if(t&&t.preventDefault(),d.trim()){E(!0),m(null),g(new Set),_(r),M("available"),R("");try{const t=await a.mutateAsync({url:d,filter:r});if(m(t),(e=>{const t=e.trim();if(!t)return;const r=[t,...h.filter(e=>e!==t)].slice(0,5);x(r),localStorage.setItem("videos_url_history",JSON.stringify(r))})(d),0===t.videos.length)e(t.total_in_playlist>0?`All ${t.total_in_playlist} videos already in your library`:"No videos found in playlist","info");else{const n="all"===r?`Found ${t.total_in_playlist} videos (${t.new_videos_count} new)`:`Found ${t.new_videos_count} new videos (${t.already_in_db} already in DB)`;e(n,"success")}}catch(n){e(ce(n.message||"Failed to scan URL"),"error")}finally{E(!1)}}else e("Please enter a playlist URL","error")};return C.jsxDEV("div",{className:"pb-4 space-y-4",children:[C.jsxDEV("form",{onSubmit:B,className:"bg-dark-secondary rounded-lg p-4",children:C.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-3",children:[C.jsxDEV("div",{className:"flex-1 relative",children:[C.jsxDEV("input",{ref:v,type:"text",value:d,onChange:e=>c(e.target.value),onFocus:()=>h.length>0&&f(!0),placeholder:"Paste YT video, playlist, or channel URL",className:"w-full bg-dark-tertiary border border-dark-border rounded-lg px-4 py-2 text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent",disabled:D},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:224,columnNumber:13},this),N&&h.length>0&&C.jsxDEV("div",{ref:j,className:"absolute top-full left-0 right-0 mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl z-50 overflow-hidden",children:C.jsxDEV("div",{className:"py-1",children:h.map((e,t)=>C.jsxDEV("button",{onClick:()=>{c(e),f(!1)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors truncate",title:e,children:e},t,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:242,columnNumber:21},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:240,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:236,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:223,columnNumber:11},this),C.jsxDEV("div",{className:"flex gap-2",children:[C.jsxDEV("button",{type:"button",onClick:e=>B(e,"new"),disabled:D||!d.trim(),className:`px-4 py-2 font-semibold rounded-lg transition-colors ${"new"===P&&u?"bg-accent text-white":"bg-dark-tertiary hover:bg-dark-border text-text-secondary"} disabled:opacity-50 disabled:cursor-not-allowed`,children:D&&"new"===P?C.jsxDEV("span",{className:"flex items-center gap-2",children:[C.jsxDEV("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[C.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:272,columnNumber:21},this),C.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:273,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:271,columnNumber:19},this),"Scanning..."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:270,columnNumber:17},this):"Scan New"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:259,columnNumber:13},this),C.jsxDEV("button",{type:"button",onClick:e=>B(e,"all"),disabled:D||!d.trim(),className:`px-4 py-2 font-semibold rounded-lg transition-colors ${"all"===P&&u?"bg-accent text-white":"bg-dark-tertiary hover:bg-dark-border text-text-secondary"} disabled:opacity-50 disabled:cursor-not-allowed`,children:D&&"all"===P?C.jsxDEV("span",{className:"flex items-center gap-2",children:[C.jsxDEV("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[C.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:294,columnNumber:21},this),C.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:295,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:293,columnNumber:19},this),"Scanning..."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:292,columnNumber:17},this):"Scan All"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:281,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:258,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:222,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:221,columnNumber:7},this),u&&C.jsxDEV(ue,{className:"rounded-lg",children:C.jsxDEV("div",{className:"flex flex-col gap-3",children:[C.jsxDEV("div",{className:"flex items-center justify-between",children:C.jsxDEV("div",{className:"text-text-secondary",children:0===u.videos.length?C.jsxDEV("span",{children:"No new videos to import"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:315,columnNumber:19},this):C.jsxDEV("span",{children:["Found ",C.jsxDEV("span",{className:"text-text-primary font-semibold",children:u.videos.length},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:318,columnNumber:27},this)," new videos",u.already_in_db>0&&C.jsxDEV("span",{className:"text-text-muted",children:[" (",u.already_in_db," previously seen)"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:320,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:317,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:313,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:312,columnNumber:13},this),u.videos.length>0&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("div",{className:"w-full sm:w-auto sm:max-w-xs",children:C.jsxDEV(me,{value:A,onChange:R,placeholder:"Search videos...",className:"w-full"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:331,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:330,columnNumber:17},this),"all"===P&&C.jsxDEV("div",{className:"flex items-center gap-1 bg-dark-tertiary rounded-lg p-1 w-full sm:w-auto",children:[C.jsxDEV("button",{onClick:()=>M("available"),className:"flex-1 sm:flex-none px-3 py-1.5 text-xs rounded transition-colors "+("available"===L?"bg-accent text-white":"text-text-secondary hover:text-text-primary"),children:"Available"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:342,columnNumber:21},this),C.jsxDEV("button",{onClick:()=>M("ignored"),className:"flex-1 sm:flex-none px-3 py-1.5 text-xs rounded transition-colors "+("ignored"===L?"bg-yellow-500 text-black":"text-text-secondary hover:text-text-primary"),children:"Ignored"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:350,columnNumber:21},this),C.jsxDEV("button",{onClick:()=>M("error"),className:"flex-1 sm:flex-none px-3 py-1.5 text-xs rounded transition-colors "+("error"===L?"bg-red-500 text-white":"text-text-secondary hover:text-text-primary"),children:"Errors"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:358,columnNumber:21},this),C.jsxDEV("button",{onClick:()=>M("all"),className:"flex-1 sm:flex-none px-3 py-1.5 text-xs rounded transition-colors "+("all"===L?"bg-dark-border text-text-primary":"text-text-secondary hover:text-text-primary"),children:"All"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:366,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:341,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:328,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:310,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:309,columnNumber:9},this),u?.videos&&u.videos.length>0&&C.jsxDEV(Ne,{show:!0,selectedCount:y.size,totalCount:u.videos.length,onSelectAll:()=>{if(u?.videos){const e=u.videos.filter(e=>!(A&&!(e.title||"").toLowerCase().includes(A.toLowerCase()))&&("all"!==P||"all"===L||("available"===L?!e.status||"discovered"===e.status:"ignored"===L?"ignored"===e.status:"error"!==L||"removed"===e.status)));g(new Set(e.map(e=>e.yt_id)))}},onClear:()=>{g(new Set)},hideDone:!0,actions:y.size>0?[{label:"Ignore",onClick:async()=>{if(u?.videos&&0!==y.size){S(!0);try{const t=u.videos.filter(e=>y.has(e.yt_id));if(await o.mutateAsync({videos:t}),e(`Marked ${t.length} videos as ignored`,"success"),"all"===P){const e=u.videos.map(e=>y.has(e.yt_id)?{...e,status:"ignored"}:e);m({...u,videos:e})}else{const e=u.videos.filter(e=>!y.has(e.yt_id));m({...u,videos:e})}g(new Set)}catch(t){e(ce(t.message||"Failed to remove videos"),"error")}finally{S(!1)}}},disabled:k,variant:"warning"},{label:"Queue",onClick:async()=>{if(0!==y.size){w(!0);try{const t=u.videos.filter(e=>y.has(e.yt_id)),r=await i.mutateAsync({videos:t});if(e(`Queued ${r.queued} videos`,"success"),"all"===P){const e=u.videos.map(e=>y.has(e.yt_id)?{...e,status:"queued"}:e);m({...u,videos:e})}else{const e=u.videos.filter(e=>!y.has(e.yt_id));m({...u,videos:e})}g(new Set)}catch(t){e(ce(t.message||"Failed to queue videos"),"error")}finally{w(!1)}}else e("No videos selected","error")},disabled:V,variant:"primary"}]:[]},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:384,columnNumber:9},this),u?.videos&&u.videos.length>0&&(()=>{const e=u.videos.filter(e=>!(A&&!(e.title||"").toLowerCase().includes(A.toLowerCase()))&&("all"!==P||"all"===L||("available"===L?!e.status||"discovered"===e.status:"ignored"===L?"ignored"===e.status:"error"!==L||"removed"===e.status)));return C.jsxDEV("div",{className:`grid ${De(l,e.length)} gap-4 w-full [&>*]:min-w-0`,children:e.map(e=>C.jsxDEV("div",{onClick:()=>(e=>{const t=new Set(y);t.has(e)?t.delete(e):t.add(e),g(t)})(e.yt_id),className:"bg-dark-secondary rounded-lg overflow-hidden cursor-pointer transition-all "+(y.has(e.yt_id)?"ring-2 ring-accent":"hover:bg-dark-tertiary"),children:[C.jsxDEV("div",{className:"relative aspect-video bg-dark-tertiary",children:[e.thumbnail?C.jsxDEV("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover",loading:"lazy"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:438,columnNumber:19},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center text-text-muted",children:C.jsxDEV("svg",{className:"w-12 h-12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[C.jsxDEV("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:447,columnNumber:23},this),C.jsxDEV("path",{d:"M10 8l6 4-6 4V8z",fill:"currentColor"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:448,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:446,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:445,columnNumber:19},this),C.jsxDEV("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-1.5 py-0.5 rounded",children:nt(e.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:454,columnNumber:17},this),e.status&&C.jsxDEV("div",{className:"absolute top-2 right-2 text-xs px-2 py-0.5 rounded font-medium "+("library"===e.status?"bg-green-500/90 text-white":"queued"===e.status?"bg-blue-500/90 text-white":"ignored"===e.status?"bg-yellow-500/90 text-black":"removed"===e.status?"bg-red-500/90 text-white":"bg-gray-500/90 text-white"),children:"library"===e.status?"Downloaded":"queued"===e.status?"Queued":"ignored"===e.status?"Ignored":"removed"===e.status?"Error":e.status},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:460,columnNumber:19},this),y.has(e.yt_id)&&C.jsxDEV("div",{className:"absolute top-2 right-2 bg-black/80 text-white rounded-full p-1.5 shadow-lg z-20",children:C.jsxDEV("svg",{className:"w-4 h-4 text-accent-text",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:479,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:478,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:477,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:436,columnNumber:15},this),C.jsxDEV("div",{className:"p-3",children:[C.jsxDEV("h3",{className:"text-text-primary font-medium text-sm line-clamp-2 mb-1",title:e.title,children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:487,columnNumber:17},this),C.jsxDEV("div",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[C.jsxDEV("span",{children:e.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:491,columnNumber:19},this),e.upload_date&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:494,columnNumber:23},this),C.jsxDEV("span",{children:Ze(e.upload_date)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:495,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:493,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:490,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:486,columnNumber:15},this)]},e.yt_id,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:426,columnNumber:13},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:424,columnNumber:13},this)})(),!u&&!D&&C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg p-8",children:C.jsxDEV(Se,{icon:C.jsxDEV("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:510,columnNumber:19},this),title:"Paste a URL to get started",message:C.jsxDEV("div",{className:"space-y-3",children:[C.jsxDEV("p",{children:"Paste a YT video, playlist, or channel URL above. Select which videos to download as singles without subscribing to the full channel."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:514,columnNumber:17},this),C.jsxDEV("div",{className:"text-center space-y-1.5 text-sm",children:[C.jsxDEV("p",{children:[C.jsxDEV("span",{className:"font-semibold text-text-primary",children:"Scan New"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:516,columnNumber:22},this)," â€“ Checks the URL and shows only video(s) not already in your library"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:516,columnNumber:19},this),C.jsxDEV("p",{children:[C.jsxDEV("span",{className:"font-semibold text-text-primary",children:"Scan All"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:517,columnNumber:22},this)," â€“ Checks the URL and shows all video(s), including ones already in your library"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:517,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:515,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:513,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:509,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:508,columnNumber:9},this),p&&C.jsxDEV("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-20 right-6 p-3 bg-gray-700 hover:bg-gray-600 rounded-full shadow-lg transition-colors z-50 animate-fade-in","aria-label":"Scroll to top",children:C.jsxDEV("svg",{className:"w-5 h-5 text-text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"18 15 12 9 6 15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:533,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:532,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:527,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:219,columnNumber:5},this)}const ut="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function mt(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function pt(e){return"nodeType"in e}function bt(e){var t,r;return e?mt(e)?e:pt(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function Nt(e){const{Document:t}=bt(e);return e instanceof t}function ft(e){return!mt(e)&&e instanceof bt(e).HTMLElement}function ht(e){return e instanceof bt(e).SVGElement}function xt(e){return e?mt(e)?e.document:pt(e)?Nt(e)?e:ft(e)||ht(e)?e.ownerDocument:document:document:document}const vt=ut?t.useLayoutEffect:t.useEffect;function jt(e){const r=t.useRef(e);return vt(()=>{r.current=e}),t.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return null==r.current?void 0:r.current(...t)},[])}function yt(e,r){void 0===r&&(r=[e]);const n=t.useRef(e);return vt(()=>{n.current!==e&&(n.current=e)},r),n}function gt(e,r){const n=t.useRef();return t.useMemo(()=>{const t=e(n.current);return n.current=t,t},[...r])}function Dt(e){const r=jt(e),n=t.useRef(null),s=t.useCallback(e=>{e!==n.current&&(null==r||r(e,n.current)),n.current=e},[]);return[n,s]}function Et(e){const r=t.useRef();return t.useEffect(()=>{r.current=e},[e]),r.current}let Vt={};function wt(e,r){return t.useMemo(()=>{if(r)return r;const t=null==Vt[e]?0:Vt[e]+1;return Vt[e]=t,e+"-"+t},[e,r])}function kt(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((t,r)=>{const n=Object.entries(r);for(const[s,a]of n){const r=t[s];null!=r&&(t[s]=r+e*a)}return t},{...t})}}const Ct=kt(1),St=kt(-1);function Pt(e){if(!e)return!1;const{KeyboardEvent:t}=bt(e.target);return t&&e instanceof t}function _t(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=bt(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const Lt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Lt.Translate.toString(e),Lt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),Mt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function It(e){return e.matches(Mt)?e:e.querySelector(Mt)}const Tt={display:"none"};function At(e){let{id:t,value:r}=e;return a.createElement("div",{id:t,style:Tt},r)}function Rt(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return a.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}const Bt=t.createContext(null);const $t={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},Ft={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Ot(e){let{announcements:r=Ft,container:n,hiddenTextDescribedById:s,screenReaderInstructions:i=$t}=e;const{announce:o,announcement:l}=function(){const[e,r]=t.useState("");return{announce:t.useCallback(e=>{null!=e&&r(e)},[]),announcement:e}}(),d=wt("DndLiveRegion"),[c,u]=t.useState(!1);if(t.useEffect(()=>{u(!0)},[]),function(e){const r=t.useContext(Bt);t.useEffect(()=>{if(!r)throw new Error("useDndMonitor must be used within a children of <DndContext>");return r(e)},[e,r])}(t.useMemo(()=>({onDragStart(e){let{active:t}=e;o(r.onDragStart({active:t}))},onDragMove(e){let{active:t,over:n}=e;r.onDragMove&&o(r.onDragMove({active:t,over:n}))},onDragOver(e){let{active:t,over:n}=e;o(r.onDragOver({active:t,over:n}))},onDragEnd(e){let{active:t,over:n}=e;o(r.onDragEnd({active:t,over:n}))},onDragCancel(e){let{active:t,over:n}=e;o(r.onDragCancel({active:t,over:n}))}}),[o,r])),!c)return null;const m=a.createElement(a.Fragment,null,a.createElement(At,{id:s,value:i.draggable}),a.createElement(Rt,{id:d,announcement:l}));return n?N.createPortal(m,n):m}var qt,zt;function Wt(){}function Qt(e,r){return t.useMemo(()=>({sensor:e,options:null!=r?r:{}}),[e,r])}(zt=qt||(qt={})).DragStart="dragStart",zt.DragMove="dragMove",zt.DragEnd="dragEnd",zt.DragCancel="dragCancel",zt.DragOver="dragOver",zt.RegisterDroppable="registerDroppable",zt.SetDroppableDisabled="setDroppableDisabled",zt.UnregisterDroppable="unregisterDroppable";const Kt=Object.freeze({x:0,y:0});function Ut(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ht(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function Jt(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function Yt(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}const Gt=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=Yt(t,t.left,t.top),a=[];for(const i of n){const{id:e}=i,t=r.get(e);if(t){const r=Ut(Yt(t),s);a.push({id:e,data:{droppableContainer:i,value:r}})}}return a.sort(Ht)};function Xt(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),i=s-n,o=a-r;if(n<s&&r<a){const r=t.width*t.height,n=e.width*e.height,s=i*o;return Number((s/(r+n-s)).toFixed(4))}return 0}const Zt=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=[];for(const a of n){const{id:e}=a,n=r.get(e);if(n){const r=Xt(n,t);r>0&&s.push({id:e,data:{droppableContainer:a,value:r}})}}return s.sort(Jt)};function er(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Kt}function tr(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x}),{...t})}}const rr=tr(1);const nr={ignoreTransform:!1};function sr(e,t){void 0===t&&(t=nr);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:n}=bt(e).getComputedStyle(e);t&&(r=function(e,t,r){const n=function(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!n)return e;const{scaleX:s,scaleY:a,x:i,y:o}=n,l=e.left-i-(1-s)*parseFloat(r),d=e.top-o-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),c=s?e.width/s:e.width,u=a?e.height/a:e.height;return{width:c,height:u,top:d,right:l+c,bottom:d+u,left:l}}(r,t,n))}const{top:n,left:s,width:a,height:i,bottom:o,right:l}=r;return{top:n,left:s,width:a,height:i,bottom:o,right:l}}function ar(e){return sr(e,{ignoreTransform:!0})}function ir(e,t){const r=[];return e?function n(s){if(null!=t&&r.length>=t)return r;if(!s)return r;if(Nt(s)&&null!=s.scrollingElement&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!ft(s)||ht(s))return r;if(r.includes(s))return r;const a=bt(e).getComputedStyle(s);return s!==e&&function(e,t){void 0===t&&(t=bt(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const n=t[e];return"string"==typeof n&&r.test(n)})}(s,a)&&r.push(s),function(e,t){return void 0===t&&(t=bt(e).getComputedStyle(e)),"fixed"===t.position}(s,a)?r:n(s.parentNode)}(e):r}function or(e){const[t]=ir(e,1);return null!=t?t:null}function lr(e){return ut&&e?mt(e)?e:pt(e)?Nt(e)||e===xt(e).scrollingElement?window:ft(e)?e:null:null:null}function dr(e){return mt(e)?e.scrollX:e.scrollLeft}function cr(e){return mt(e)?e.scrollY:e.scrollTop}function ur(e){return{x:dr(e),y:cr(e)}}var mr,pr;function br(e){return!(!ut||!e)&&e===document.scrollingElement}function Nr(e){const t={x:0,y:0},r=br(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}(pr=mr||(mr={}))[pr.Forward=1]="Forward",pr[pr.Backward=-1]="Backward";const fr={x:.2,y:.2};function hr(e,t,r,n,s){let{top:a,left:i,right:o,bottom:l}=r;void 0===n&&(n=10),void 0===s&&(s=fr);const{isTop:d,isBottom:c,isLeft:u,isRight:m}=Nr(e),p={x:0,y:0},b={x:0,y:0},N=t.height*s.y,f=t.width*s.x;return!d&&a<=t.top+N?(p.y=mr.Backward,b.y=n*Math.abs((t.top+N-a)/N)):!c&&l>=t.bottom-N&&(p.y=mr.Forward,b.y=n*Math.abs((t.bottom-N-l)/N)),!m&&o>=t.right-f?(p.x=mr.Forward,b.x=n*Math.abs((t.right-f-o)/f)):!u&&i<=t.left+f&&(p.x=mr.Backward,b.x=n*Math.abs((t.left+f-i)/f)),{direction:p,speed:b}}function xr(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:r,right:n,bottom:s}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:s,width:e.clientWidth,height:e.clientHeight}}function vr(e){return e.reduce((e,t)=>Ct(e,ur(t)),Kt)}const jr=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+dr(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+cr(t),0)}]];class yr{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ir(t),n=vr(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,a,i]of jr)for(const e of a)Object.defineProperty(this,e,{get:()=>{const t=i(r),a=n[s]-t;return this.rect[e]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class gr{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function Dr(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}var Er,Vr,wr,kr;function Cr(e){e.preventDefault()}function Sr(e){e.stopPropagation()}(Vr=Er||(Er={})).Click="click",Vr.DragStart="dragstart",Vr.Keydown="keydown",Vr.ContextMenu="contextmenu",Vr.Resize="resize",Vr.SelectionChange="selectionchange",Vr.VisibilityChange="visibilitychange",(kr=wr||(wr={})).Space="Space",kr.Down="ArrowDown",kr.Right="ArrowRight",kr.Left="ArrowLeft",kr.Up="ArrowUp",kr.Esc="Escape",kr.Enter="Enter",kr.Tab="Tab";const Pr={start:[wr.Space,wr.Enter],cancel:[wr.Esc],end:[wr.Space,wr.Enter,wr.Tab]},_r=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case wr.Right:return{...r,x:r.x+25};case wr.Left:return{...r,x:r.x-25};case wr.Down:return{...r,y:r.y+25};case wr.Up:return{...r,y:r.y-25}}};class Lr{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new gr(xt(t)),this.windowListeners=new gr(bt(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Er.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&function(e,t){if(void 0===t&&(t=sr),!e)return;const{top:r,left:n,bottom:s,right:a}=t(e);or(e)&&(s<=0||a<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(r),t(Kt)}handleKeyDown(e){if(Pt(e)){const{active:t,context:r,options:n}=this.props,{keyboardCodes:s=Pr,coordinateGetter:a=_r,scrollBehavior:i="smooth"}=n,{code:o}=e;if(s.end.includes(o))return void this.handleEnd(e);if(s.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:l}=r.current,d=l?{x:l.left,y:l.top}:Kt;this.referenceCoordinates||(this.referenceCoordinates=d);const c=a(e,{active:t,context:r.current,currentCoordinates:d});if(c){const t=St(c,d),n={x:0,y:0},{scrollableAncestors:s}=r.current;for(const r of s){const s=e.code,{isTop:a,isRight:o,isLeft:l,isBottom:d,maxScroll:u,minScroll:m}=Nr(r),p=xr(r),b={x:Math.min(s===wr.Right?p.right-p.width/2:p.right,Math.max(s===wr.Right?p.left:p.left+p.width/2,c.x)),y:Math.min(s===wr.Down?p.bottom-p.height/2:p.bottom,Math.max(s===wr.Down?p.top:p.top+p.height/2,c.y))},N=s===wr.Right&&!o||s===wr.Left&&!l,f=s===wr.Down&&!d||s===wr.Up&&!a;if(N&&b.x!==c.x){const e=r.scrollLeft+t.x,a=s===wr.Right&&e<=u.x||s===wr.Left&&e>=m.x;if(a&&!t.y)return void r.scrollTo({left:e,behavior:i});n.x=a?r.scrollLeft-e:s===wr.Right?r.scrollLeft-u.x:r.scrollLeft-m.x,n.x&&r.scrollBy({left:-n.x,behavior:i});break}if(f&&b.y!==c.y){const e=r.scrollTop+t.y,a=s===wr.Down&&e<=u.y||s===wr.Up&&e>=m.y;if(a&&!t.x)return void r.scrollTo({top:e,behavior:i});n.y=a?r.scrollTop-e:s===wr.Down?r.scrollTop-u.y:r.scrollTop-m.y,n.y&&r.scrollBy({top:-n.y,behavior:i});break}}this.handleMove(e,Ct(St(c,this.referenceCoordinates),n))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Mr(e){return Boolean(e&&"distance"in e)}function Ir(e){return Boolean(e&&"delay"in e)}Lr.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=Pr,onActivation:s}=t,{active:a}=r;const{code:i}=e.nativeEvent;if(n.start.includes(i)){const t=a.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==s||s({event:e.nativeEvent}),!0)}return!1}}];class Tr{constructor(e,t,r){var n;void 0===r&&(r=function(e){const{EventTarget:t}=bt(e);return e instanceof t?e:xt(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:s}=e,{target:a}=s;this.props=e,this.events=t,this.document=xt(a),this.documentListeners=new gr(this.document),this.listeners=new gr(r),this.windowListeners=new gr(bt(a)),this.initialCoordinates=null!=(n=_t(s))?n:Kt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.DragStart,Cr),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),this.windowListeners.add(Er.ContextMenu,Cr),this.documentListeners.add(Er.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ir(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(Mr(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Er.Click,Sr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Er.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:n,props:s}=this,{onMove:a,options:{activationConstraint:i}}=s;if(!n)return;const o=null!=(t=_t(e))?t:Kt,l=St(n,o);if(!r&&i){if(Mr(i)){if(null!=i.tolerance&&Dr(l,i.tolerance))return this.handleCancel();if(Dr(l,i.distance))return this.handleStart()}return Ir(i)&&Dr(l,i.tolerance)?this.handleCancel():void this.handlePending(i,l)}e.cancelable&&e.preventDefault(),a(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===wr.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const Ar={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Rr extends Tr{constructor(e){const{event:t}=e,r=xt(t.target);super(e,Ar,r)}}Rr.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!(!r.isPrimary||0!==r.button)&&(null==n||n({event:r}),!0)}}];const Br={move:{name:"mousemove"},end:{name:"mouseup"}};var $r,Fr;(Fr=$r||($r={}))[Fr.RightClick=2]="RightClick";(class extends Tr{constructor(e){super(e,Br,xt(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button!==$r.RightClick&&(null==n||n({event:r}),!0)}}];const Or={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class qr extends Tr{constructor(e){super(e,Or)}static setup(){return window.addEventListener(Or.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Or.move.name,e)};function e(){}}}var zr,Wr,Qr,Kr;function Ur(e){let{acceleration:r,activator:n=zr.Pointer,canScroll:s,draggingRect:a,enabled:i,interval:o=5,order:l=Qr.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:u,delta:m,threshold:p}=e;const b=function(e){let{delta:t,disabled:r}=e;const n=Et(t);return gt(e=>{if(r||!n||!e)return Hr;const s={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[mr.Backward]:e.x[mr.Backward]||-1===s.x,[mr.Forward]:e.x[mr.Forward]||1===s.x},y:{[mr.Backward]:e.y[mr.Backward]||-1===s.y,[mr.Forward]:e.y[mr.Forward]||1===s.y}}},[r,t,n])}({delta:m,disabled:!i}),[N,f]=function(){const e=t.useRef(null);return[t.useCallback((t,r)=>{e.current=setInterval(t,r)},[]),t.useCallback(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),h=t.useRef({x:0,y:0}),x=t.useRef({x:0,y:0}),v=t.useMemo(()=>{switch(n){case zr.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case zr.DraggableRect:return a}},[n,a,d]),j=t.useRef(null),y=t.useCallback(()=>{const e=j.current;if(!e)return;const t=h.current.x*x.current.x,r=h.current.y*x.current.y;e.scrollBy(t,r)},[]),g=t.useMemo(()=>l===Qr.TreeOrder?[...c].reverse():c,[l,c]);t.useEffect(()=>{if(i&&c.length&&v){for(const e of g){if(!1===(null==s?void 0:s(e)))continue;const t=c.indexOf(e),n=u[t];if(!n)continue;const{direction:a,speed:i}=hr(e,n,v,r,p);for(const e of["x","y"])b[e][a[e]]||(i[e]=0,a[e]=0);if(i.x>0||i.y>0)return f(),j.current=e,N(y,o),h.current=i,void(x.current=a)}h.current={x:0,y:0},x.current={x:0,y:0},f()}else f()},[r,y,s,f,i,o,JSON.stringify(v),JSON.stringify(b),N,c,g,u,JSON.stringify(p)])}qr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:s}=r;return!(s.length>1)&&(null==n||n({event:r}),!0)}}],(Wr=zr||(zr={}))[Wr.Pointer=0]="Pointer",Wr[Wr.DraggableRect=1]="DraggableRect",(Kr=Qr||(Qr={}))[Kr.TreeOrder=0]="TreeOrder",Kr[Kr.ReversedTreeOrder=1]="ReversedTreeOrder";const Hr={x:{[mr.Backward]:!1,[mr.Forward]:!1},y:{[mr.Backward]:!1,[mr.Forward]:!1}};var Jr,Yr,Gr;(Yr=Jr||(Jr={}))[Yr.Always=0]="Always",Yr[Yr.BeforeDragging=1]="BeforeDragging",Yr[Yr.WhileDragging=2]="WhileDragging",(Gr||(Gr={})).Optimized="optimized";const Xr=new Map;function Zr(e,t){return gt(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function en(e){let{callback:r,disabled:n}=e;const s=jt(r),a=t.useMemo(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(s)},[n]);return t.useEffect(()=>()=>null==a?void 0:a.disconnect(),[a]),a}function tn(e){return new yr(sr(e),e)}function rn(e,r,n){void 0===r&&(r=tn);const[s,a]=t.useState(null);function i(){a(t=>{if(!e)return null;var s;if(!1===e.isConnected)return null!=(s=null!=t?t:n)?s:null;const a=r(e);return JSON.stringify(t)===JSON.stringify(a)?t:a})}const o=function(e){let{callback:r,disabled:n}=e;const s=jt(r),a=t.useMemo(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(s)},[s,n]);return t.useEffect(()=>()=>null==a?void 0:a.disconnect(),[a]),a}({callback(t){if(e)for(const r of t){const{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){i();break}}}}),l=en({callback:i});return vt(()=>{i(),e?(null==l||l.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==o||o.disconnect())},[e]),s}const nn=[];function sn(e,r){void 0===r&&(r=[]);const n=t.useRef(null);return t.useEffect(()=>{n.current=null},r),t.useEffect(()=>{const t=e!==Kt;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?St(e,n.current):Kt}function an(e){return t.useMemo(()=>e?function(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null,[e])}const on=[];function ln(e){let{measure:r}=e;const[n,s]=t.useState(null),a=en({callback:t.useCallback(e=>{for(const{target:t}of e)if(ft(t)){s(e=>{const n=r(t);return e?{...e,width:n.width,height:n.height}:n});break}},[r])}),i=t.useCallback(e=>{const t=function(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return ft(t)?t:e}(e);null==a||a.disconnect(),t&&(null==a||a.observe(t)),s(t?r(t):null)},[r,a]),[o,l]=Dt(i);return t.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const dn=[{sensor:Rr,options:{}},{sensor:Lr,options:{}}],cn={current:{}},un={draggable:{measure:ar},droppable:{measure:ar,strategy:Jr.WhileDragging,frequency:Gr.Optimized},dragOverlay:{measure:sr}};class mn extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}const pn={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new mn,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Wt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:un,measureDroppableContainers:Wt,windowRect:null,measuringScheduled:!1},bn={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Wt,draggableNodes:new Map,over:null,measureDroppableContainers:Wt},Nn=t.createContext(bn),fn=t.createContext(pn);function hn(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new mn}}}function xn(e,t){switch(t.type){case qt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case qt.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case qt.DragEnd:case qt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case qt.RegisterDroppable:{const{element:r}=t,{id:n}=r,s=new mn(e.droppable.containers);return s.set(n,r),{...e,droppable:{...e.droppable,containers:s}}}case qt.SetDroppableDisabled:{const{id:r,key:n,disabled:s}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const i=new mn(e.droppable.containers);return i.set(r,{...a,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case qt.UnregisterDroppable:{const{id:r,key:n}=t,s=e.droppable.containers.get(r);if(!s||n!==s.key)return e;const a=new mn(e.droppable.containers);return a.delete(r),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function vn(e){let{disabled:r}=e;const{active:n,activatorEvent:s,draggableNodes:a}=t.useContext(Nn),i=Et(s),o=Et(null==n?void 0:n.id);return t.useEffect(()=>{if(!r&&!s&&i&&null!=o){if(!Pt(i))return;if(document.activeElement===i.target)return;const e=a.get(o);if(!e)return;const{activatorNode:t,node:r}=e;if(!t.current&&!r.current)return;requestAnimationFrame(()=>{for(const e of[t.current,r.current]){if(!e)continue;const t=It(e);if(t){t.focus();break}}})}},[s,r,a,o,i]),null}const jn=t.createContext({...Kt,scaleX:1,scaleY:1});var yn,gn;(gn=yn||(yn={}))[gn.Uninitialized=0]="Uninitialized",gn[gn.Initializing=1]="Initializing",gn[gn.Initialized=2]="Initialized";const Dn=t.memo(function(e){var r,n,s,i;let{id:o,accessibility:l,autoScroll:d=!0,children:c,sensors:u=dn,collisionDetection:m=Zt,measuring:p,modifiers:b,...f}=e;const h=t.useReducer(xn,void 0,hn),[x,v]=h,[j,y]=function(){const[e]=t.useState(()=>new Set),r=t.useCallback(t=>(e.add(t),()=>e.delete(t)),[e]);return[t.useCallback(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),r]}(),[g,D]=t.useState(yn.Uninitialized),E=g===yn.Initialized,{draggable:{active:V,nodes:w,translate:k},droppable:{containers:C}}=x,S=null!=V?w.get(V):null,P=t.useRef({initial:null,translated:null}),_=t.useMemo(()=>{var e;return null!=V?{id:V,data:null!=(e=null==S?void 0:S.data)?e:cn,rect:P}:null},[V,S]),L=t.useRef(null),[M,I]=t.useState(null),[T,A]=t.useState(null),R=yt(f,Object.values(f)),B=wt("DndDescribedBy",o),$=t.useMemo(()=>C.getEnabled(),[C]),F=(O=p,t.useMemo(()=>({draggable:{...un.draggable,...null==O?void 0:O.draggable},droppable:{...un.droppable,...null==O?void 0:O.droppable},dragOverlay:{...un.dragOverlay,...null==O?void 0:O.dragOverlay}}),[null==O?void 0:O.draggable,null==O?void 0:O.droppable,null==O?void 0:O.dragOverlay]));var O;const{droppableRects:q,measureDroppableContainers:z,measuringScheduled:W}=function(e,r){let{dragging:n,dependencies:s,config:a}=r;const[i,o]=t.useState(null),{frequency:l,measure:d,strategy:c}=a,u=t.useRef(e),m=function(){switch(c){case Jr.Always:return!1;case Jr.BeforeDragging:return n;default:return!n}}(),p=yt(m),b=t.useCallback(function(e){void 0===e&&(e=[]),p.current||o(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[p]),N=t.useRef(null),f=gt(t=>{if(m&&!n)return Xr;if(!t||t===Xr||u.current!==e||null!=i){const t=new Map;for(let r of e){if(!r)continue;if(i&&i.length>0&&!i.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}const e=r.node.current,n=e?new yr(d(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,i,n,m,d]);return t.useEffect(()=>{u.current=e},[e]),t.useEffect(()=>{m||b()},[n,m]),t.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),t.useEffect(()=>{m||"number"!=typeof l||null!==N.current||(N.current=setTimeout(()=>{b(),N.current=null},l))},[l,m,b,...s]),{droppableRects:f,measureDroppableContainers:b,measuringScheduled:null!=i}}($,{dragging:E,dependencies:[k.x,k.y],config:F.droppable}),Q=function(e,t){const r=null!=t?e.get(t):void 0,n=r?r.node.current:null;return gt(e=>{var r;return null==t?null:null!=(r=null!=n?n:e)?r:null},[n,t])}(w,V),K=t.useMemo(()=>T?_t(T):null,[T]),U=function(){const e=!1===(null==M?void 0:M.autoScrollEnabled),t="object"==typeof d?!1===d.enabled:!1===d,r=E&&!e&&!t;if("object"==typeof d)return{...d,enabled:r};return{enabled:r}}(),H=function(e,t){return Zr(e,t)}(Q,F.draggable.measure);!function(e){let{activeNode:r,measure:n,initialRect:s,config:a=!0}=e;const i=t.useRef(!1),{x:o,y:l}="boolean"==typeof a?{x:a,y:a}:a;vt(()=>{if(!o&&!l||!r)return void(i.current=!1);if(i.current||!s)return;const e=null==r?void 0:r.node.current;if(!e||!1===e.isConnected)return;const t=er(n(e),s);if(o||(t.x=0),l||(t.y=0),i.current=!0,Math.abs(t.x)>0||Math.abs(t.y)>0){const r=or(e);r&&r.scrollBy({top:t.y,left:t.x})}},[r,o,l,s,n])}({activeNode:null!=V?w.get(V):null,config:U.layoutShiftCompensation,initialRect:H,measure:F.draggable.measure});const J=rn(Q,F.draggable.measure,H),Y=rn(Q?Q.parentElement:null),G=t.useRef({activatorEvent:null,active:null,activeNode:Q,collisionRect:null,collisions:null,droppableRects:q,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:C,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),X=C.getNodeFor(null==(r=G.current.over)?void 0:r.id),Z=ln({measure:F.dragOverlay.measure}),ee=null!=(n=Z.nodeRef.current)?n:Q,te=E?null!=(s=Z.rect)?s:J:null,re=Boolean(Z.nodeRef.current&&Z.rect),ne=er(se=re?null:J,Zr(se));var se;const ae=an(ee?bt(ee):null),ie=function(e){const r=t.useRef(e),n=gt(t=>e?t&&t!==nn&&e&&r.current&&e.parentNode===r.current.parentNode?t:ir(e):nn,[e]);return t.useEffect(()=>{r.current=e},[e]),n}(E?null!=X?X:Q:null),oe=function(e,r){void 0===r&&(r=sr);const[n]=e,s=an(n?bt(n):null),[a,i]=t.useState(on);function o(){i(()=>e.length?e.map(e=>br(e)?s:new yr(r(e),e)):on)}const l=en({callback:o});return vt(()=>{null==l||l.disconnect(),o(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),a}(ie),le=function(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}(b,{transform:{x:k.x-ne.x,y:k.y-ne.y,scaleX:1,scaleY:1},activatorEvent:T,active:_,activeNodeRect:J,containerNodeRect:Y,draggingNodeRect:te,over:G.current.over,overlayNodeRect:Z.rect,scrollableAncestors:ie,scrollableAncestorRects:oe,windowRect:ae}),de=K?Ct(K,k):null,ce=function(e){const[r,n]=t.useState(null),s=t.useRef(e),a=t.useCallback(e=>{const t=lr(e.target);t&&n(e=>e?(e.set(t,ur(t)),new Map(e)):null)},[]);return t.useEffect(()=>{const t=s.current;if(e!==t){r(t);const i=e.map(e=>{const t=lr(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,ur(t)]):null}).filter(e=>null!=e);n(i.length?new Map(i):null),s.current=e}return()=>{r(e),r(t)};function r(e){e.forEach(e=>{const t=lr(e);null==t||t.removeEventListener("scroll",a)})}},[a,e]),t.useMemo(()=>e.length?r?Array.from(r.values()).reduce((e,t)=>Ct(e,t),Kt):vr(e):Kt,[e,r])}(ie),ue=sn(ce),me=sn(ce,[J]),pe=Ct(le,ue),be=te?rr(te,le):null,Ne=_&&be?m({active:_,collisionRect:be,droppableRects:q,droppableContainers:$,pointerCoordinates:de}):null,fe=function(e,t){if(!e||0===e.length)return null;const[r]=e;return r[t]}(Ne,"id"),[he,xe]=t.useState(null),ve=function(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}(re?le:Ct(le,me),null!=(i=null==he?void 0:he.rect)?i:null,J),je=t.useRef(null),ye=t.useCallback((e,t)=>{let{sensor:r,options:n}=t;if(null==L.current)return;const s=w.get(L.current);if(!s)return;const a=e.nativeEvent,i=new r({active:L.current,activeNode:s,event:a,options:n,context:G,onAbort(e){if(!w.get(e))return;const{onDragAbort:t}=R.current,r={id:e};null==t||t(r),j({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!w.get(e))return;const{onDragPending:s}=R.current,a={id:e,constraint:t,initialCoordinates:r,offset:n};null==s||s(a),j({type:"onDragPending",event:a})},onStart(e){const t=L.current;if(null==t)return;const r=w.get(t);if(!r)return;const{onDragStart:n}=R.current,s={activatorEvent:a,active:{id:t,data:r.data,rect:P}};N.unstable_batchedUpdates(()=>{null==n||n(s),D(yn.Initializing),v({type:qt.DragStart,initialCoordinates:e,active:t}),j({type:"onDragStart",event:s}),I(je.current),A(a)})},onMove(e){v({type:qt.DragMove,coordinates:e})},onEnd:o(qt.DragEnd),onCancel:o(qt.DragCancel)});function o(e){return async function(){const{active:t,collisions:r,over:n,scrollAdjustedTranslate:s}=G.current;let i=null;if(t&&s){const{cancelDrop:o}=R.current;if(i={activatorEvent:a,active:t,collisions:r,delta:s,over:n},e===qt.DragEnd&&"function"==typeof o){await Promise.resolve(o(i))&&(e=qt.DragCancel)}}L.current=null,N.unstable_batchedUpdates(()=>{v({type:e}),D(yn.Uninitialized),xe(null),I(null),A(null),je.current=null;const t=e===qt.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=R.current[t];null==e||e(i),j({type:t,event:i})}})}}je.current=i},[w]),ge=function(e,r){return t.useMemo(()=>e.reduce((e,t)=>{const{sensor:n}=t;return[...e,...n.activators.map(e=>({eventName:e.eventName,handler:r(e.handler,t)}))]},[]),[e,r])}(u,t.useCallback((e,t)=>(r,n)=>{const s=r.nativeEvent,a=w.get(n);if(null!==L.current||!a||s.dndKit||s.defaultPrevented)return;const i={active:a};!0===e(r,t.options,i)&&(s.dndKit={capturedBy:t.sensor},L.current=n,ye(r,t))},[w,ye]));!function(e){t.useEffect(()=>{if(!ut)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(u),vt(()=>{J&&g===yn.Initializing&&D(yn.Initialized)},[J,g]),t.useEffect(()=>{const{onDragMove:e}=R.current,{active:t,activatorEvent:r,collisions:n,over:s}=G.current;if(!t||!r)return;const a={active:t,activatorEvent:r,collisions:n,delta:{x:pe.x,y:pe.y},over:s};N.unstable_batchedUpdates(()=>{null==e||e(a),j({type:"onDragMove",event:a})})},[pe.x,pe.y]),t.useEffect(()=>{const{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:s}=G.current;if(!e||null==L.current||!t||!s)return;const{onDragOver:a}=R.current,i=n.get(fe),o=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,l={active:e,activatorEvent:t,collisions:r,delta:{x:s.x,y:s.y},over:o};N.unstable_batchedUpdates(()=>{xe(o),null==a||a(l),j({type:"onDragOver",event:l})})},[fe]),vt(()=>{G.current={activatorEvent:T,active:_,activeNode:Q,collisionRect:be,collisions:Ne,droppableRects:q,draggableNodes:w,draggingNode:ee,draggingNodeRect:te,droppableContainers:C,over:he,scrollableAncestors:ie,scrollAdjustedTranslate:pe},P.current={initial:te,translated:be}},[_,Q,Ne,be,w,ee,te,q,C,he,ie,pe]),Ur({...U,delta:k,draggingRect:be,pointerCoordinates:de,scrollableAncestors:ie,scrollableAncestorRects:oe});const De=t.useMemo(()=>({active:_,activeNode:Q,activeNodeRect:J,activatorEvent:T,collisions:Ne,containerNodeRect:Y,dragOverlay:Z,draggableNodes:w,droppableContainers:C,droppableRects:q,over:he,measureDroppableContainers:z,scrollableAncestors:ie,scrollableAncestorRects:oe,measuringConfiguration:F,measuringScheduled:W,windowRect:ae}),[_,Q,J,T,Ne,Y,Z,w,C,q,he,z,ie,oe,F,W,ae]),Ee=t.useMemo(()=>({activatorEvent:T,activators:ge,active:_,activeNodeRect:J,ariaDescribedById:{draggable:B},dispatch:v,draggableNodes:w,over:he,measureDroppableContainers:z}),[T,ge,_,J,v,B,w,he,z]);return a.createElement(Bt.Provider,{value:y},a.createElement(Nn.Provider,{value:Ee},a.createElement(fn.Provider,{value:De},a.createElement(jn.Provider,{value:ve},c)),a.createElement(vn,{disabled:!1===(null==l?void 0:l.restoreFocus)})),a.createElement(Ot,{...l,hiddenTextDescribedById:B}))}),En=t.createContext(null),Vn="button";function wn(e){let{id:r,data:n,disabled:s=!1,attributes:a}=e;const i=wt("Draggable"),{activators:o,activatorEvent:l,active:d,activeNodeRect:c,ariaDescribedById:u,draggableNodes:m,over:p}=t.useContext(Nn),{role:b=Vn,roleDescription:N="draggable",tabIndex:f=0}=null!=a?a:{},h=(null==d?void 0:d.id)===r,x=t.useContext(h?jn:En),[v,j]=Dt(),[y,g]=Dt(),D=function(e,r){return t.useMemo(()=>e.reduce((e,t)=>{let{eventName:n,handler:s}=t;return e[n]=e=>{s(e,r)},e},{}),[e,r])}(o,r),E=yt(n);vt(()=>(m.set(r,{id:r,key:i,node:v,activatorNode:y,data:E}),()=>{const e=m.get(r);e&&e.key===i&&m.delete(r)}),[m,r]);return{active:d,activatorEvent:l,activeNodeRect:c,attributes:t.useMemo(()=>({role:b,tabIndex:f,"aria-disabled":s,"aria-pressed":!(!h||b!==Vn)||void 0,"aria-roledescription":N,"aria-describedby":u.draggable}),[s,b,f,h,N,u.draggable]),isDragging:h,listeners:s?void 0:D,node:v,over:p,setNodeRef:j,setActivatorNodeRef:g,transform:x}}const kn={timeout:25};function Cn(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function Sn(e,t){return e.reduce((e,r,n)=>{const s=t.get(r);return s&&(e[n]=s),e},Array(e.length))}function Pn(e){return null!==e&&e>=0}const _n=e=>{let{rects:t,activeIndex:r,overIndex:n,index:s}=e;const a=Cn(t,n,r),i=t[s],o=a[s];return o&&i?{x:o.left-i.left,y:o.top-i.top,scaleX:o.width/i.width,scaleY:o.height/i.height}:null},Ln={scaleX:1,scaleY:1},Mn=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:s,rects:a,overIndex:i}=e;const o=null!=(t=a[r])?t:n;if(!o)return null;if(s===r){const e=a[i];return e?{x:0,y:r<i?e.top+e.height-(o.top+o.height):e.top-o.top,...Ln}:null}const l=function(e,t,r){const n=e[t],s=e[t-1],a=e[t+1];if(!n)return 0;if(r<t)return s?n.top-(s.top+s.height):a?a.top-(n.top+n.height):0;return a?a.top-(n.top+n.height):s?n.top-(s.top+s.height):0}(a,s,r);return s>r&&s<=i?{x:0,y:-o.height-l,...Ln}:s<r&&s>=i?{x:0,y:o.height+l,...Ln}:{x:0,y:0,...Ln}};const In="Sortable",Tn=a.createContext({activeIndex:-1,containerId:In,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:_n,disabled:{draggable:!1,droppable:!1}});function An(e){let{children:r,id:n,items:s,strategy:i=_n,disabled:o=!1}=e;const{active:l,dragOverlay:d,droppableRects:c,over:u,measureDroppableContainers:m}=t.useContext(fn),p=wt(In,n),b=Boolean(null!==d.rect),N=t.useMemo(()=>s.map(e=>"object"==typeof e&&"id"in e?e.id:e),[s]),f=null!=l,h=l?N.indexOf(l.id):-1,x=u?N.indexOf(u.id):-1,v=t.useRef(N),j=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(N,v.current),y=-1!==x&&-1===h||j,g=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(o);vt(()=>{j&&f&&m(N)},[j,N,f,m]),t.useEffect(()=>{v.current=N},[N]);const D=t.useMemo(()=>({activeIndex:h,containerId:p,disabled:g,disableTransforms:y,items:N,overIndex:x,useDragOverlay:b,sortedRects:Sn(N,c),strategy:i}),[h,p,g.draggable,g.droppable,y,N,x,c,b,i]);return a.createElement(Tn.Provider,{value:D},r)}const Rn=e=>{let{id:t,items:r,activeIndex:n,overIndex:s}=e;return Cn(r,n,s).indexOf(t)},Bn=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:s,items:a,newIndex:i,previousItems:o,previousContainerId:l,transition:d}=e;return!(!d||!n)&&((o===a||s!==i)&&(!!r||i!==s&&t===l))},$n={duration:200,easing:"ease"},Fn="transform",On=Lt.Transition.toString({property:Fn,duration:0,easing:"linear"}),qn={roleDescription:"sortable"};function zn(e){let{animateLayoutChanges:r=Bn,attributes:n,disabled:s,data:a,getNewIndex:i=Rn,id:o,strategy:l,resizeObserverConfig:d,transition:c=$n}=e;const{items:u,containerId:m,activeIndex:p,disabled:b,disableTransforms:N,sortedRects:f,overIndex:h,useDragOverlay:x,strategy:v}=t.useContext(Tn),j=function(e,t){var r,n;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(r=null==e?void 0:e.draggable)?r:t.draggable,droppable:null!=(n=null==e?void 0:e.droppable)?n:t.droppable}}(s,b),y=u.indexOf(o),g=t.useMemo(()=>({sortable:{containerId:m,index:y,items:u},...a}),[m,a,y,u]),D=t.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:E,node:V,isOver:w,setNodeRef:k}=function(e){let{data:r,disabled:n=!1,id:s,resizeObserverConfig:a}=e;const i=wt("Droppable"),{active:o,dispatch:l,over:d,measureDroppableContainers:c}=t.useContext(Nn),u=t.useRef({disabled:n}),m=t.useRef(!1),p=t.useRef(null),b=t.useRef(null),{disabled:N,updateMeasurementsFor:f,timeout:h}={...kn,...a},x=yt(null!=f?f:s),v=en({callback:t.useCallback(()=>{m.current?(null!=b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),b.current=null},h)):m.current=!0},[h]),disabled:N||!o}),j=t.useCallback((e,t)=>{v&&(t&&(v.unobserve(t),m.current=!1),e&&v.observe(e))},[v]),[y,g]=Dt(j),D=yt(r);return t.useEffect(()=>{v&&y.current&&(v.disconnect(),m.current=!1,v.observe(y.current))},[y,v]),t.useEffect(()=>(l({type:qt.RegisterDroppable,element:{id:s,key:i,disabled:n,node:y,rect:p,data:D}}),()=>l({type:qt.UnregisterDroppable,key:i,id:s})),[s]),t.useEffect(()=>{n!==u.current.disabled&&(l({type:qt.SetDroppableDisabled,id:s,key:i,disabled:n}),u.current.disabled=n)},[s,i,n,l]),{active:o,rect:p,isOver:(null==d?void 0:d.id)===s,node:y,over:d,setNodeRef:g}}({id:o,data:g,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...d}}),{active:C,activatorEvent:S,activeNodeRect:P,attributes:_,setNodeRef:L,listeners:M,isDragging:I,over:T,setActivatorNodeRef:A,transform:R}=wn({id:o,data:g,attributes:{...qn,...n},disabled:j.draggable}),B=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.useMemo(()=>e=>{r.forEach(t=>t(e))},r)}(k,L),$=Boolean(C),F=$&&!N&&Pn(p)&&Pn(h),O=!x&&I,q=O&&F?R:null,z=F?null!=q?q:(null!=l?l:v)({rects:f,activeNodeRect:P,activeIndex:p,overIndex:h,index:y}):null,W=Pn(p)&&Pn(h)?i({id:o,items:u,activeIndex:p,overIndex:h}):y,Q=null==C?void 0:C.id,K=t.useRef({activeId:Q,items:u,newIndex:W,containerId:m}),U=u!==K.current.items,H=r({active:C,containerId:m,isDragging:I,isSorting:$,id:o,index:y,items:u,newIndex:K.current.newIndex,previousItems:K.current.items,previousContainerId:K.current.containerId,transition:c,wasDragging:null!=K.current.activeId}),J=function(e){let{disabled:r,index:n,node:s,rect:a}=e;const[i,o]=t.useState(null),l=t.useRef(n);return vt(()=>{if(!r&&n!==l.current&&s.current){const e=a.current;if(e){const t=sr(s.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&o(r)}}n!==l.current&&(l.current=n)},[r,n,s,a]),t.useEffect(()=>{i&&o(null)},[i]),i}({disabled:!H,index:y,node:V,rect:E});return t.useEffect(()=>{$&&K.current.newIndex!==W&&(K.current.newIndex=W),m!==K.current.containerId&&(K.current.containerId=m),u!==K.current.items&&(K.current.items=u)},[$,W,m,u]),t.useEffect(()=>{if(Q===K.current.activeId)return;if(null!=Q&&null==K.current.activeId)return void(K.current.activeId=Q);const e=setTimeout(()=>{K.current.activeId=Q},50);return()=>clearTimeout(e)},[Q]),{active:C,activeIndex:p,attributes:_,data:g,rect:E,index:y,newIndex:W,items:u,isOver:w,isSorting:$,isDragging:I,listeners:M,node:V,overIndex:h,over:T,setNodeRef:B,setActivatorNodeRef:A,setDroppableNodeRef:k,setDraggableNodeRef:L,transform:null!=J?J:z,transition:function(){if(J||U&&K.current.newIndex===y)return On;if(O&&!Pt(S)||!c)return;if($||H)return Lt.Transition.toString({...c,property:Fn});return}()}}function Wn({item:e,index:t,onRemove:r,onMoveToTop:n,onMoveToBottom:s}){const{attributes:a,listeners:i,setNodeRef:o,transform:l,transition:d,isDragging:c}=zn({id:e.id}),u={transform:Lt.Transform.toString(l),transition:d,opacity:c?.5:1};return C.jsxDEV("div",{ref:o,style:u,className:"card p-3 transition-colors "+(t%2==0?"bg-dark-secondary":"bg-dark-tertiary"),children:C.jsxDEV("div",{className:"flex items-stretch gap-3",children:[C.jsxDEV("div",{...a,...i,className:"flex items-center flex-shrink-0 cursor-grab active:cursor-grabbing text-text-muted hover:text-text-primary active:text-accent transition-colors px-2 md:px-1 touch-none rounded hover:bg-dark-hover active:bg-dark-tertiary",style:{touchAction:"none"},title:"Hold and drag to reorder",children:C.jsxDEV("svg",{className:"w-7 h-7",viewBox:"0 0 24 24",fill:"currentColor",children:[C.jsxDEV("circle",{cx:"9",cy:"5",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:48,columnNumber:13},this),C.jsxDEV("circle",{cx:"9",cy:"12",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:49,columnNumber:13},this),C.jsxDEV("circle",{cx:"9",cy:"19",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:50,columnNumber:13},this),C.jsxDEV("circle",{cx:"15",cy:"5",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:51,columnNumber:13},this),C.jsxDEV("circle",{cx:"15",cy:"12",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:52,columnNumber:13},this),C.jsxDEV("circle",{cx:"15",cy:"19",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:53,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:47,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:40,columnNumber:9},this),C.jsxDEV("div",{className:"flex items-center flex-shrink-0 w-8 text-center text-sm font-semibold text-text-secondary",children:t+1},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:58,columnNumber:9},this),C.jsxDEV("div",{onClick:()=>r(e.id),className:"group flex-1 flex items-center gap-3 cursor-pointer hover:bg-red-950/30 rounded-lg px-2 -mx-2 transition-colors",children:[C.jsxDEV("div",{className:"flex-shrink-0 w-[60px] h-[34px] md:w-[100px] md:h-[56px] bg-dark-tertiary rounded overflow-hidden",children:e.video?.thumb_url?C.jsxDEV("img",{src:e.video.thumb_url,alt:e.video.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:70,columnNumber:15},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-5 h-5 md:w-8 md:h-8 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:78,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:77,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:76,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:68,columnNumber:11},this),C.jsxDEV("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[C.jsxDEV("p",{className:"text-sm text-text-primary font-medium line-clamp-2 md:truncate group-hover:text-red-400 transition-colors",title:e.video?.title,children:[e.video?.title," ",C.jsxDEV("span",{className:"text-text-secondary",children:["â€¢ ",e.video?.channel_title]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:87,columnNumber:35},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:86,columnNumber:13},this),C.jsxDEV("p",{className:"text-xs text-red-400 text-center opacity-0 group-hover:opacity-100 transition-opacity mt-1",children:"Click to cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:85,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:63,columnNumber:9},this),C.jsxDEV("div",{className:"flex flex-shrink-0 gap-1 -my-3",children:[C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),t.currentTarget.blur(),n(e.id)},className:"flex items-center justify-center px-2 text-text-secondary hover:text-text-primary hover:bg-dark-tertiary transition-colors",title:"Move to top",children:C.jsxDEV("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"17 11 12 6 7 11"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:109,columnNumber:15},this),C.jsxDEV("polyline",{points:"17 18 12 13 7 18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:110,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:108,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:99,columnNumber:11},this),C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),t.currentTarget.blur(),s(e.id)},className:"flex items-center justify-center px-2 text-text-secondary hover:text-text-primary hover:bg-dark-tertiary transition-colors",title:"Move to bottom",children:C.jsxDEV("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"17 13 12 18 7 13"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:125,columnNumber:15},this),C.jsxDEV("polyline",{points:"17 6 12 11 7 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:126,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:124,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:115,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:97,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:38,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:33,columnNumber:5},this)}function Qn(){const{data:e,isLoading:r,refetch:a}=J({enablePolling:!0}),i=s({mutationFn:()=>T.resumeQueue()}),o=function(){const e=n();return s({mutationFn:()=>T.cancelCurrent(),onSuccess:()=>{e.invalidateQueries({queryKey:["queue"]})}})}(),l=function(){const e=n();return s({mutationFn:e=>T.removeFromQueue(e),onSuccess:()=>{e.invalidateQueries({queryKey:["queue"]})}})}(),d=function(){const e=n();return s({mutationFn:({itemId:e,newPosition:t})=>T.reorderQueue(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["queue"]})}})}(),c=function(){const e=n();return s({mutationFn:e=>T.moveToTop(e),onSuccess:()=>{e.invalidateQueries({queryKey:["queue"]})}})}(),u=function(){const e=n();return s({mutationFn:e=>T.moveToBottom(e),onSuccess:()=>{e.invalidateQueries({queryKey:["queue"]})}})}(),m=function(){const e=n();return s({mutationFn:()=>T.clearQueue(),onSuccess:()=>{e.invalidateQueries({queryKey:["queue"]}),e.invalidateQueries({queryKey:["videos"]})}})}(),{showNotification:p}=I(),{theme:b}=re(),[N,f]=t.useState(!1),[h,x]=t.useState(!1),v="online"===b||"pixel"===b||"debug"===b,j=t.useRef(null),y=t.useRef(!1);t.useLayoutEffect(()=>{y.current&&null!==j.current&&(window.scrollTo(0,j.current),y.current=!1,j.current=null)},[e]),t.useEffect(()=>{const e=()=>{x(window.scrollY>400)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const g=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.useMemo(()=>[...r].filter(e=>null!=e),[...r])}(Qt(Rr,{activationConstraint:{distance:8}}),Qt(qr,{activationConstraint:{delay:150,tolerance:8}})),D=async e=>{try{await l.mutateAsync(e),p("Removed from queue","success")}catch(t){p(ce(t.message,"remove from queue"),"error")}},E=async e=>{try{j.current=window.scrollY,y.current=!0,await c.mutateAsync(e),p("Moved to top of queue","success")}catch(t){y.current=!1,j.current=null,p(ce(t.message,"reorder queue"),"error")}},V=async e=>{try{j.current=window.scrollY,y.current=!0,await u.mutateAsync(e),p("Moved to bottom of queue","success")}catch(t){y.current=!1,j.current=null,p(ce(t.message,"reorder queue"),"error")}},w=e?.queue_items||[],k=e?.current_download||w.find(e=>"downloading"===e.video?.status),S=w.filter(e=>"queued"===e.video?.status)||[],P=e?.is_paused,_=S.length>0||k;return C.jsxDEV("div",{className:"space-y-4 animate-fade-in",children:[C.jsxDEV(ue,{children:C.jsxDEV("div",{className:"flex items-center justify-center gap-4",children:C.jsxDEV("div",{className:"flex space-x-2 items-center",children:[P&&_&&C.jsxDEV("button",{onClick:async()=>{try{await i.mutateAsync(),p("Queue resumed","success")}catch(e){p(ce(e.message,"resume queue"),"error")}},disabled:i.isPending,className:"px-2 md:px-4 py-1 md:py-1.5 text-xs md:text-sm bg-accent hover:bg-accent-hover text-white rounded transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:i.isPending?"Resuming...":"Resume"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:321,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>f(!0),disabled:m.isPending,className:"px-2 md:px-4 py-1 md:py-1.5 text-xs md:text-sm bg-dark-hover hover:bg-dark-tertiary border border-dark-border-light rounded text-text-primary transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:m.isPending?"Clearing...":"Clear Queue"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:329,columnNumber:13},this),e?.delay_info&&C.jsxDEV("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-dark-secondary border border-dark-border-light rounded",children:C.jsxDEV("span",{className:"text-xs font-medium text-yellow-500",children:["[",e.delay_info,"]"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:340,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:339,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:318,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:317,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:316,columnNumber:7},this),P&&_&&C.jsxDEV("div",{className:"card p-4 "+(v?"bg-yellow-900/30 border-2 border-yellow-700":"bg-yellow-600/10 border-2 border-yellow-600/40"),children:C.jsxDEV("div",{className:"flex items-start gap-3",children:[C.jsxDEV("svg",{className:`w-6 h-6 ${v?"text-yellow-700":"text-yellow-500"} flex-shrink-0 mt-0.5`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:354,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:353,columnNumber:13},this),C.jsxDEV("div",{className:"flex-1",children:[C.jsxDEV("h3",{className:`text-lg font-semibold ${v?"text-yellow-800":"text-yellow-500"} mb-1`,children:"Downloads Paused"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:357,columnNumber:15},this),C.jsxDEV("p",{className:"text-sm "+(v?"text-gray-800":"text-text-secondary"),children:["The program was closed with items in the queue. Press ",C.jsxDEV("span",{className:"font-semibold "+(v?"text-black":"text-text-primary"),children:"Resume"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:359,columnNumber:71},this)," to start downloading."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:358,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:356,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:352,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:351,columnNumber:9},this),r?C.jsxDEV("div",{className:"flex justify-center py-12",children:C.jsxDEV(we,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:369,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:368,columnNumber:9},this):0===w.length?C.jsxDEV(Se,{icon:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:373,columnNumber:17},this),title:"Queue is empty",message:"Add videos from channels to start downloading"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:372,columnNumber:9},this):C.jsxDEV("div",{className:"space-y-2",children:[k&&C.jsxDEV("div",{onClick:async()=>{try{await o.mutateAsync(),p("Download cancelled","success")}catch(e){p(ce(e.message,"cancel download"),"error")}},className:"card p-3 border-2 border-accent/40 bg-accent/5 relative cursor-pointer hover:bg-accent/10 transition-colors group",children:C.jsxDEV("div",{className:"flex items-start gap-3",children:[C.jsxDEV("div",{className:"hidden md:block flex-shrink-0 w-[100px] h-[56px] bg-dark-tertiary rounded overflow-hidden",children:k.video?.thumb_url?C.jsxDEV("img",{src:k.video.thumb_url,alt:k.video.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:389,columnNumber:21},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-8 h-8 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:397,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:396,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:395,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:387,columnNumber:17},this),C.jsxDEV("div",{className:"flex-1 min-w-0 space-y-1.5",children:[C.jsxDEV("div",{className:"flex items-center justify-between gap-3",children:[C.jsxDEV("p",{className:"text-sm text-text-primary font-medium line-clamp-2 md:truncate group-hover:text-red-400 transition-colors",title:k.video?.title,children:[k.video?.title," ",C.jsxDEV("span",{className:"text-text-secondary",children:["â€¢ ",k.video?.channel_title]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:408,columnNumber:54},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:407,columnNumber:21},this),C.jsxDEV("span",{className:"text-xs text-red-400 font-medium opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:"Click to cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:410,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:406,columnNumber:19},this),C.jsxDEV("div",{className:"w-full bg-dark-tertiary rounded-full h-1.5 overflow-hidden",children:"postprocessing"===k.phase?C.jsxDEV("div",{className:"bg-accent h-full w-1/3 animate-pulse",style:{animation:"indeterminate 1.5s infinite linear"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:418,columnNumber:23},this):C.jsxDEV("div",{className:"bg-accent h-full transition-all duration-300",style:{width:`${k.progress_pct||0}%`}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:420,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:416,columnNumber:19},this),C.jsxDEV("div",{className:"flex items-center gap-4 text-xs text-text-secondary",children:"postprocessing"===k.phase?C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{className:"text-accent font-medium flex items-center gap-2",children:[C.jsxDEV("span",{className:"w-3 h-3 border-2 border-accent/30 border-t-accent rounded-full animate-spin"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:432,columnNumber:27},this),"Processing (",Math.floor((k.postprocess_elapsed||0)/60),":",((k.postprocess_elapsed||0)%60).toString().padStart(2,"0"),")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:431,columnNumber:25},this),C.jsxDEV("span",{className:"text-text-muted",children:"SponsorBlock re-encoding"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:435,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:430,columnNumber:23},this):C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{children:[(k.progress_pct||0).toFixed(1),"%"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:439,columnNumber:25},this),C.jsxDEV("span",{children:(e=>{if(!e)return"N/A";return`${(e/1048576).toFixed(1)} MB/s`})(k.speed_bps)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:440,columnNumber:25},this),C.jsxDEV("span",{children:["Size: ",Xe(k.total_bytes)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:441,columnNumber:25},this),C.jsxDEV("span",{children:["ETA: ",(e=>{if(!e||e<=0)return"N/A";const t=Math.floor(e/60),r=Math.floor(e%60);return t>0?`${t}m ${r}s`:`${r}s`})(k.eta_seconds)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:442,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:438,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:428,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:404,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:385,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:381,columnNumber:13},this),S.length>0&&C.jsxDEV(Dn,{sensors:g,collisionDetection:Gt,onDragEnd:async e=>{const{active:t,over:r}=e;if(!r||t.id===r.id)return;const n=S.findIndex(e=>e.id===t.id),s=S.findIndex(e=>e.id===r.id);if(n===s)return;const a=s+1;try{await d.mutateAsync({itemId:t.id,newPosition:a})}catch(i){p(ce(i.message,"reorder queue"),"error")}},children:C.jsxDEV(An,{items:S.map(e=>e.id),strategy:Mn,children:S.map((e,t)=>C.jsxDEV(Wn,{item:e,index:t,onRemove:D,onMoveToTop:E,onMoveToBottom:V},e.id,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:463,columnNumber:19},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:458,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:453,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:378,columnNumber:9},this),h&&C.jsxDEV("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-20 right-6 p-3 bg-gray-700 hover:bg-gray-600 rounded-full shadow-lg transition-colors z-50 animate-fade-in","aria-label":"Scroll to top",children:C.jsxDEV("svg",{className:"w-5 h-5 text-text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"18 15 12 9 6 15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:487,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:486,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:481,columnNumber:9},this),C.jsxDEV(Ae,{isOpen:N,title:"Clear Queue",message:C.jsxDEV(C.Fragment,{children:["Are you sure you want to clear all ",C.jsxDEV("span",{className:"font-semibold",children:[S.length," pending items"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:498,columnNumber:48},this),"? The currently downloading video will not be affected."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:497,columnNumber:11},this),confirmText:"Clear Queue",confirmStyle:"danger",onConfirm:async()=>{try{const e=await m.mutateAsync();p(e.message||"Queue cleared","success"),f(!1)}catch(e){p(ce(e.message,"clear queue"),"error")}},onCancel:()=>f(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:493,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:314,columnNumber:5},this)}function Kn({children:e,text:r}){const[n,s]=t.useState(!1);return C.jsxDEV("div",{className:"relative inline-block",children:[C.jsxDEV("div",{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:e},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/Tooltip.jsx",lineNumber:8,columnNumber:7},this),n&&C.jsxDEV("div",{className:"absolute z-50 px-2 py-1 text-xs text-white bg-gray-800 rounded shadow-lg whitespace-nowrap bottom-full left-1/2 transform -translate-x-1/2 mb-1",children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/Tooltip.jsx",lineNumber:15,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ui/Tooltip.jsx",lineNumber:7,columnNumber:5},this)}wr.Down,wr.Right,wr.Up,wr.Left;const Un="7.3.3",Hn=()=>C.jsxDEV("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:17,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:16,columnNumber:3},void 0),Jn=()=>C.jsxDEV("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:23,columnNumber:5},void 0),C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:24,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:22,columnNumber:3},void 0),Yn=()=>C.jsxDEV("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:30,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:29,columnNumber:3},void 0),Gn=()=>C.jsxDEV("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:36,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:35,columnNumber:3},void 0),Xn=()=>C.jsxDEV("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:42,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:41,columnNumber:3},void 0),Zn=()=>C.jsxDEV("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:48,columnNumber:5},void 0),C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:49,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:47,columnNumber:3},void 0),es=()=>C.jsxDEV("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:61,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:60,columnNumber:3},void 0),ts=({collapsed:e})=>C.jsxDEV("svg",{className:"w-4 h-4 text-text-muted transition-transform duration-200 "+(e?"-rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:80,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:73,columnNumber:3},void 0);function rs(){const e=n(),{data:s,isLoading:a}=Y(),{data:i}=X(),{data:o}=A(),l=G(),{showNotification:d}=I(),{theme:c,setTheme:u}=re(),[m,p]=t.useState({discovered:0,ignored:0,library:0});t.useEffect(()=>{fetch("/api/stats").then(e=>e.json()).then(e=>p(e)).catch(e=>console.error("Failed to fetch stats:",e))},[]);const[b,N]=t.useState(!1),[f,h]=t.useState(!1),[x,v]=t.useState("times"),[j,y]=t.useState(["3 AM"]),[g,D]=t.useState(6),[E,V]=t.useState(3),[w,k]=t.useState(0),[S,P]=t.useState("AM"),[_,L]=t.useState("INFO"),[M,R]=t.useState(!1),[B,$]=t.useState(""),[F,O]=t.useState(""),[q,z]=t.useState(""),[W,Q]=t.useState(""),[K,U]=t.useState(!1),[H,J]=t.useState(!1),[Z,ee]=t.useState("file"),[te,ne]=t.useState(""),[se,ie]=t.useState(!1),[oe,le]=t.useState(!1),[de,ue]=t.useState(!1),[me,pe]=t.useState(!1),[be,Ne]=t.useState(!1),[fe,he]=t.useState(!1),[xe,ve]=t.useState(!1),[je,ye]=t.useState("downloaded"),[ge,De]=t.useState(50),{channelsCardSize:Ee,setChannelsCardSize:Ve,libraryCardSize:we,setLibraryCardSize:ke}=ae(),[Ce,Se]=t.useState(!1),[Pe,_e]=t.useState(!1),[Le,Me]=t.useState("1"),[Ie,Te]=t.useState(!1),[Re,Be]=t.useState(()=>{const e=localStorage.getItem("logsVisible");return null!==e&&"true"===e}),{data:$e}=function(e=500,t={}){const{enabled:n=!0}=t;return r({queryKey:["logs",e],queryFn:()=>T.getLogs(e),staleTime:1e4,refetchInterval:!!n&&1e4,enabled:n})}(500,{enabled:Re}),Fe=t.useRef(null);t.useEffect(()=>{Re&&Fe.current&&(Fe.current.scrollTop=Fe.current.scrollHeight)},[Re,$e]);const[Oe,qe]=t.useState(!1),[ze,We]=t.useState(!1),[Qe,Ke]=t.useState(!1),[Ue,He]=t.useState(!1),[Je,Ye]=t.useState(null),[Ge,Xe]=t.useState(null),[Ze,et]=t.useState([]),[tt,rt]=t.useState([]),[nt,st]=t.useState(!1),[at,it]=t.useState(!1),[ot,lt]=t.useState(!1),[dt,ct]=t.useState(null),[ut,mt]=t.useState(!1),[pt,bt]=t.useState(()=>{const e=localStorage.getItem("settings_collapsed_sections");return e?JSON.parse(e):{}}),Nt=e=>{bt(t=>{const r={...t,[e]:!t[e]};return localStorage.setItem("settings_collapsed_sections",JSON.stringify(r)),r})};t.useEffect(()=>{window.scrollTo({top:0,behavior:"instant"})},[]);t.useEffect(()=>{if(s){const t="true"===s.auto_refresh_enabled;if(N(t),h(t),L(s.log_level||"INFO"),s.auto_refresh_config)try{const e=JSON.parse(s.auto_refresh_config);if(v(e.mode||"times"),"times"===e.mode&&e.times){const t=e.times.map(e=>{const[t]=e.split(":");return{0:"12 AM",3:"3 AM",6:"6 AM",9:"9 AM",12:"12 PM",15:"3 PM",18:"6 PM",21:"9 PM"}[parseInt(t)]||null}).filter(e=>null!==e);t.length>0&&y(t)}else if("interval"===e.mode&&(e.interval_hours&&D(e.interval_hours),e.interval_start)){const[t,r]=e.interval_start.split(":"),n=parseInt(t)||0,s=parseInt(r)||0,{hour:a,ampm:i}=(e=>0===e?{hour:12,ampm:"AM"}:12===e?{hour:12,ampm:"PM"}:e<12?{hour:e,ampm:"AM"}:{hour:e-12,ampm:"PM"})(n);V(a),k(s),P(i)}}catch(e){console.error("Failed to parse auto_refresh_config:",e)}pe("true"===s.sponsorblock_remove_sponsor),Ne("true"===s.sponsorblock_remove_selfpromo),he("true"===s.sponsorblock_remove_interaction),ve("true"===s.sponsorblock_skip_long),ee(s.cookie_source||"file"),Me(s.default_playback_speed||"1"),Te("true"===s.download_subtitles),ne(s.youtube_api_key||""),ie(!!s.youtube_api_key),Se("true"===s.hide_watched),_e("true"===s.hide_playlisted),ye(s.library_date_display||"downloaded"),De(Number(s.items_per_page)||50)}},[s]),t.useEffect(()=>{localStorage.removeItem("library_itemsPerPage"),localStorage.removeItem("channelLibrary_itemsPerPage"),localStorage.removeItem("playlist_itemsPerPage")},[]);t.useEffect(()=>{if(i?.latest_version){const e=i.latest_version;ct(e),e&&e!==Un&&mt(((e,t)=>{const r=e=>e.replace(/^v/,"").split(".").map(e=>parseInt(e,10)||0),[n,s,a]=r(e),[i,o,l]=r(t);return n!==i?n-i:s!==o?s-o:a-l})(e,Un)>0)}},[i?.latest_version]);const ft=async(e,t,r)=>{const n=!t;r(n);try{await l.mutateAsync({[e]:n?"true":"false"})}catch(s){console.error(`Failed to save ${e}:`,s),r(t)}},ht=e=>{v(e)},xt=async()=>{lt(!0);try{const e=await fetch("/api/settings/fix-upload-dates",{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();if(t.error)return void d(t.error,"error");const r=[];if(t.updated>0){const e="api"===t.method?"YT API":"yt-dlp";r.push(`${t.updated} upload date${1!==t.updated?"s":""} via ${e}`)}t.thumbnails_fixed>0&&r.push(`${t.thumbnails_fixed} thumbnail${1!==t.thumbnails_fixed?"s":""}`);const n=r.length>0?`Fixed ${r.join(", ")}${t.failed>0?` (${t.failed} failed)`:""}`:"No issues found to fix";d(n,t.failed>0?"warning":"success"),He(!1),qe(!1),Xe(null)}catch(e){d("Failed to fix metadata","error")}finally{lt(!1)}},vt=async e=>{ee(e);try{await l.mutateAsync({cookie_source:e,cookie_browser:"firefox"}),d("Cookie source updated successfully!","success")}catch(t){d("Failed to update cookie source","error")}};return C.jsxDEV(C.Fragment,{children:C.jsxDEV("div",{className:"animate-fade-in pt-4",children:[C.jsxDEV("div",{className:"flex flex-col gap-4 w-full max-w-3xl mx-auto",children:[C.jsxDEV("div",{className:"stats-bar",children:[C.jsxDEV("div",{className:"stat-item",children:[C.jsxDEV("div",{className:"stat-label",children:"YTandchill"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:715,columnNumber:13},this),C.jsxDEV("div",{className:"stat-value",children:Un},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:716,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:714,columnNumber:11},this),C.jsxDEV("div",{className:"stat-item",children:[C.jsxDEV("div",{className:"stat-label",children:"YT-DLP"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:719,columnNumber:13},this),C.jsxDEV("div",{className:"stat-value",children:i?.ytdlp_version||"Unknown"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:720,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:718,columnNumber:11},this),C.jsxDEV("div",{className:"stat-item",children:[C.jsxDEV("div",{className:"stat-label",children:"Database"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:723,columnNumber:13},this),C.jsxDEV("button",{onClick:async()=>{st(!0);try{const[e,t]=await Promise.all([fetch("/api/queue/check-orphaned"),fetch("/api/settings/missing-metadata")]),r=await e.json(),n=await t.json();if(r.error)return void d(r.error,"error");fetch("/api/stats").then(e=>e.json()).then(e=>p(e)).catch(e=>console.error("Failed to fetch stats:",e)),Ye(r),Xe(n),qe(!0)}catch(e){d(`Failed to check database: ${e.message}`,"error")}finally{st(!1)}},disabled:nt,className:"db-action-btn",title:"Click to open database maintenance",children:[nt?"Checking...":i?.database_size||"N/A",C.jsxDEV(Zn,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:731,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:724,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:722,columnNumber:11},this),C.jsxDEV("div",{className:"stat-item",children:[C.jsxDEV("div",{className:"stat-label",children:"Storage"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:735,columnNumber:13},this),C.jsxDEV("div",{className:"stat-value",children:i?.total_storage||"0B"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:736,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:734,columnNumber:11},this),C.jsxDEV("div",{className:"stat-item",children:[C.jsxDEV("div",{className:"stat-label",children:"Library"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:739,columnNumber:13},this),C.jsxDEV("div",{className:"stat-value",children:m.library},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:740,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:738,columnNumber:11},this),C.jsxDEV("div",{className:"stat-item",children:[C.jsxDEV("div",{className:"stat-label",children:"To Review"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:743,columnNumber:13},this),C.jsxDEV("div",{className:"stat-value text-accent",children:m.discovered},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:744,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:742,columnNumber:11},this),C.jsxDEV("div",{className:"stat-item",children:[C.jsxDEV("div",{className:"stat-label",children:"Channels"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:747,columnNumber:13},this),C.jsxDEV("div",{className:"stat-value",children:o?.length||0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:748,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:746,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:713,columnNumber:9},this),ut&&C.jsxDEV("div",{className:"bg-accent/10 border border-accent/30 rounded-xl p-4",children:C.jsxDEV("div",{className:"flex items-center justify-between gap-4",children:[C.jsxDEV("div",{className:"flex items-center gap-3",children:[C.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-accent/20 flex items-center justify-center flex-shrink-0",children:C.jsxDEV("svg",{className:"w-5 h-5 text-accent",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:759,columnNumber:21},this),C.jsxDEV("polyline",{points:"17 8 12 3 7 8"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:760,columnNumber:21},this),C.jsxDEV("line",{x1:"12",y1:"3",x2:"12",y2:"15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:761,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:758,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:757,columnNumber:17},this),C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"text-text-primary font-medium",children:"Update Available"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:765,columnNumber:19},this),C.jsxDEV("div",{className:"text-text-secondary text-sm",children:["v",Un," â†’ v",dt]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:766,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:764,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:756,columnNumber:15},this),C.jsxDEV("a",{href:"https://github.com/thenunner/ytandchill/releases/latest",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-accent hover:bg-accent-hover text-white font-medium rounded-lg transition-colors text-sm",children:"View Release"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:771,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:755,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:754,columnNumber:11},this),C.jsxDEV("div",{className:"settings-section",children:[C.jsxDEV("div",{className:"section-header cursor-pointer",onClick:()=>Nt("playback"),children:[C.jsxDEV(Hn,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:786,columnNumber:13},this),"Playback",C.jsxDEV(ts,{collapsed:pt.playback},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:788,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:785,columnNumber:11},this),C.jsxDEV("div",{className:"section-content "+(pt.playback?"collapsed":""),children:[C.jsxDEV("div",{className:"setting-row mobile-hide-desc",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"Default Speed"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:795,columnNumber:17},this),C.jsxDEV("div",{className:"setting-desc",children:"Starting playback speed for all videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:796,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:794,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:793,columnNumber:13},this),C.jsxDEV("div",{className:"settings-toggle-group",children:["1","1.5","2","2.5"].map(e=>C.jsxDEV("button",{onClick:()=>(async e=>{Me(e);try{await l.mutateAsync({default_playback_speed:e}),d(`Default playback speed set to ${e}x`,"success")}catch(t){d("Failed to update playback speed","error"),Me(Le)}})(e),className:"settings-toggle-btn "+(Le===e?"active":""),children:[e,"x"]},e,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:801,columnNumber:17},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:799,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:792,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row mobile-hide-desc",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"Closed Captions"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:815,columnNumber:17},this),C.jsxDEV("div",{className:"setting-desc",children:"Download subtitles with videos (English, if available)"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:816,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:814,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:813,columnNumber:13},this),C.jsxDEV("label",{className:"toggle-switch",children:[C.jsxDEV("input",{type:"checkbox",checked:Ie,onChange:async e=>{const t=e.target.checked;Te(t);try{await l.mutateAsync({download_subtitles:t?"true":"false"})}catch(r){Te(!t)}}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:820,columnNumber:15},this),C.jsxDEV("span",{className:"toggle-slider"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:835,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:819,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:812,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row mobile-stack",children:[C.jsxDEV("div",{className:"setting-label flex items-center gap-2 max-md:w-full",children:[C.jsxDEV("div",{className:"setting-name",children:"SponsorBlock"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:841,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center gap-2 max-md:ml-auto",children:[C.jsxDEV(Kn,{text:"Skip SponsorBlock for videos 60 minutes or longer to avoid long re-encoding times",children:C.jsxDEV("button",{onClick:async()=>{const e=!xe;ve(e);try{await l.mutateAsync({sponsorblock_skip_long:e?"true":"false"}),d(e?"SponsorBlock disabled for 60min+ videos":"SponsorBlock enabled for all videos","success")}catch{ve(!e)}},className:"px-2 py-1 text-xs font-medium rounded border transition-colors "+(xe?"bg-orange-600 border-orange-500 text-white":"bg-dark-primary border-dark-border text-text-muted hover:bg-dark-hover"),children:"Disable"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:844,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:843,columnNumber:15},this),C.jsxDEV("span",{className:"text-xs text-text-muted",children:"60min+ videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:864,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:842,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:840,columnNumber:13},this),C.jsxDEV("div",{className:"settings-toggle-group",children:[C.jsxDEV(Kn,{text:"Paid promotions and sponsored segments",children:C.jsxDEV("button",{onClick:()=>ft("sponsorblock_remove_sponsor",me,pe),className:"settings-toggle-btn "+(me?"active":""),children:"Sponsors"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:869,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:868,columnNumber:15},this),C.jsxDEV(Kn,{text:"Self-promotion of own products, channels, or social media",children:C.jsxDEV("button",{onClick:()=>ft("sponsorblock_remove_selfpromo",be,Ne),className:"settings-toggle-btn "+(be?"active":""),children:"Promo"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:877,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:876,columnNumber:15},this),C.jsxDEV(Kn,{text:"Reminders to like, subscribe, or follow",children:C.jsxDEV("button",{onClick:()=>ft("sponsorblock_remove_interaction",fe,he),className:"settings-toggle-btn "+(fe?"active":""),children:"Like/Sub"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:885,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:884,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:867,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:839,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:791,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:784,columnNumber:9},this),C.jsxDEV("div",{className:"settings-section",children:[C.jsxDEV("div",{className:"section-header cursor-pointer",onClick:()=>Nt("display"),children:[C.jsxDEV(Jn,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:900,columnNumber:13},this),"Display",C.jsxDEV(ts,{collapsed:pt.display},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:902,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:899,columnNumber:11},this),C.jsxDEV("div",{className:"section-content "+(pt.display?"collapsed":""),children:[C.jsxDEV("div",{className:"setting-row mobile-hide-desc",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"Card Date"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:909,columnNumber:17},this),C.jsxDEV("div",{className:"setting-desc",children:"Which date to show on library cards"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:910,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:908,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:907,columnNumber:13},this),C.jsxDEV("div",{className:"settings-toggle-group",children:[C.jsxDEV(Kn,{text:"When the video was originally published on YT",children:C.jsxDEV("button",{onClick:async()=>{ye("uploaded");try{await l.mutateAsync({library_date_display:"uploaded"}),d("Library cards will show upload date","success")}catch{ye("downloaded")}},className:"settings-toggle-btn "+("uploaded"===je?"active":""),children:"YT Upload"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:915,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:914,columnNumber:15},this),C.jsxDEV(Kn,{text:"When the video was added to your library",children:C.jsxDEV("button",{onClick:async()=>{ye("downloaded");try{await l.mutateAsync({library_date_display:"downloaded"}),d("Library cards will show download date","success")}catch{ye("uploaded")}},className:"settings-toggle-btn "+("downloaded"===je?"active":""),children:"Download"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:931,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:930,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:913,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:906,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row mobile-hide-desc",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"Items Per Page"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:952,columnNumber:17},this),C.jsxDEV("div",{className:"setting-desc",children:"Number of items to display in card views"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:953,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:951,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:950,columnNumber:13},this),C.jsxDEV("div",{className:"settings-toggle-group",children:[25,50,100,250].map(e=>C.jsxDEV("button",{onClick:async()=>{const t=ge;De(e);try{await l.mutateAsync({items_per_page:String(e)}),d(`Items per page set to ${e}`,"success")}catch{De(t)}},className:"settings-toggle-btn "+(ge===e?"active":""),children:e},e,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:958,columnNumber:17},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:956,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:949,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:C.jsxDEV("div",{className:"setting-name",children:"Card Size - Channels"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:981,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:980,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:979,columnNumber:13},this),C.jsxDEV("div",{className:"settings-toggle-group",children:[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}].map(e=>C.jsxDEV("button",{onClick:()=>{Ve(e.value),d(`Channels card size set to ${e.label}`,"success")},className:"settings-toggle-btn "+(Ee===e.value?"active":""),children:e.label},e.value,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:990,columnNumber:17},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:984,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:978,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:C.jsxDEV("div",{className:"setting-name",children:"Card Size - Library"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1007,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1006,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1005,columnNumber:13},this),C.jsxDEV("div",{className:"settings-toggle-group",children:[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}].map(e=>C.jsxDEV("button",{onClick:()=>{ke(e.value),d(`Library card size set to ${e.label}`,"success")},className:"settings-toggle-btn "+(we===e.value?"active":""),children:e.label},e.value,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1016,columnNumber:17},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1010,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1004,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:C.jsxDEV("div",{className:"setting-name",children:"Theme"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1033,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1032,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1031,columnNumber:13},this),C.jsxDEV("div",{className:"theme-grid",children:Object.entries({kernel:"hsl(220, 10%, 70%)",fatal:"hsl(0, 100%, 50%)",subnet:"hsl(220, 50%, 40%)",archive:"hsl(95, 20%, 45%)",buffer:"hsl(35, 45%, 58%)",catppuccin:"#89b4fa",pixel:"hsl(315, 80%, 75%)",debug:"hsl(210, 30%, 55%)"}).map(([e,t])=>C.jsxDEV("button",{onClick:()=>{u(e),d(`Theme changed to ${e.charAt(0).toUpperCase()+e.slice(1)}`,"success")},className:"theme-option "+(c===e?"active":""),style:{backgroundColor:t},title:e.charAt(0).toUpperCase()+e.slice(1)},e,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1038,columnNumber:17},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1036,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1030,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"Hide Watched Videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1052,columnNumber:17},this),C.jsxDEV("div",{className:"setting-desc",children:"Hide videos you've already watched from all video lists"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1053,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1051,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1050,columnNumber:13},this),C.jsxDEV("label",{className:"toggle-switch",children:[C.jsxDEV("input",{type:"checkbox",checked:Ce,onChange:async e=>{const t=e.target.checked;Se(t);try{await l.mutateAsync({hide_watched:t?"true":"false"}),d(t?"Watched videos will be hidden":"Watched videos will be shown","success")}catch{Se(!t),d("Failed to save setting","error")}}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1057,columnNumber:15},this),C.jsxDEV("span",{className:"toggle-slider"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1072,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1056,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1049,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"Hide Videos in Playlists"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1079,columnNumber:17},this),C.jsxDEV("div",{className:"setting-desc",children:"Hide videos that are already added to a playlist"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1080,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1078,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1077,columnNumber:13},this),C.jsxDEV("label",{className:"toggle-switch",children:[C.jsxDEV("input",{type:"checkbox",checked:Pe,onChange:async e=>{const t=e.target.checked;_e(t);try{await l.mutateAsync({hide_playlisted:t?"true":"false"}),d(t?"Playlisted videos will be hidden":"Playlisted videos will be shown","success")}catch{_e(!t),d("Failed to save setting","error")}}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1084,columnNumber:15},this),C.jsxDEV("span",{className:"toggle-slider"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1099,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1083,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1076,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:905,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:898,columnNumber:9},this),C.jsxDEV("div",{className:"settings-section",children:[C.jsxDEV("div",{className:"section-header cursor-pointer",onClick:()=>Nt("downloads"),children:[C.jsxDEV(Yn,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1108,columnNumber:13},this),"Downloads",C.jsxDEV(ts,{collapsed:pt.downloads},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1110,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1107,columnNumber:11},this),C.jsxDEV("div",{className:"section-content "+(pt.downloads?"collapsed":""),children:[C.jsxDEV("div",{className:"setting-row mobile-hide-desc",children:[C.jsxDEV("div",{className:"setting-label",children:[C.jsxDEV("span",{className:"autoscan-status "+("none"===Z?"":"browser"===Z?i?.firefox_has_cookies?"active":"":i?.cookies_available?"active":"")},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1116,columnNumber:15},this),C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"Cookies"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1122,columnNumber:17},this),C.jsxDEV("div",{className:"setting-desc",children:"YT authentication for downloads"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1123,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1121,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1115,columnNumber:13},this),C.jsxDEV("div",{className:"settings-toggle-group",children:[C.jsxDEV(Kn,{text:"Use cookies.txt file from downloads folder",children:C.jsxDEV("button",{onClick:()=>vt("file"),className:"settings-toggle-btn "+("file"===Z?"active":""),children:"File"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1128,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1127,columnNumber:15},this),C.jsxDEV(Kn,{text:"Extract cookies from local Firefox browser",children:C.jsxDEV("button",{onClick:()=>vt("browser"),className:"settings-toggle-btn "+("browser"===Z?"active":""),children:"Firefox"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1136,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1135,columnNumber:15},this),C.jsxDEV(Kn,{text:"No auth - may fail on age-restricted videos",children:C.jsxDEV("button",{onClick:()=>vt("none"),className:"settings-toggle-btn "+("none"===Z?"active":""),children:"None"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1144,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1143,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1126,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1114,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row mobile-hide-desc",children:[C.jsxDEV("div",{className:"setting-label",children:[C.jsxDEV("span",{className:"autoscan-status "+(se?"active":"")},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1157,columnNumber:15},this),C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"API Key"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1159,columnNumber:17},this),C.jsxDEV("div",{className:"setting-desc",children:["Fetches upload dates quickly for new channels."," ",C.jsxDEV("a",{href:"https://developers.google.com/youtube/v3/getting-started",target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline",children:"Get an API key"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1162,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1160,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1158,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1156,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("div",{className:"relative",children:[C.jsxDEV("input",{type:de?"text":"password",value:te,onChange:e=>ne(e.target.value),placeholder:"API key",className:"input text-sm py-1.5 px-2 pr-8 w-28 sm:w-40"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1175,columnNumber:17},this),C.jsxDEV("button",{type:"button",onClick:()=>ue(!de),className:"absolute right-2 top-1/2 -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors",title:de?"Hide API key":"Show API key",children:de?C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1190,columnNumber:23},this),C.jsxDEV("line",{x1:"1",y1:"1",x2:"23",y2:"23"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1191,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1189,columnNumber:21},this):C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1195,columnNumber:23},this),C.jsxDEV("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1196,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1194,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1182,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1174,columnNumber:15},this),C.jsxDEV("button",{onClick:async()=>{const e=te.trim();if(e){le(!0);try{await l.mutateAsync({youtube_api_key:e});const t=await fetch("/api/settings/test-youtube-api",{method:"POST",credentials:"include"}),r=await t.json();r.valid?(ie(!0),d("API key tested and saved!","success")):(ie(!1),d(r.error||"API key saved but invalid","warning"))}catch(t){d("Failed to save API key","error")}finally{le(!1)}}else{le(!0);try{await l.mutateAsync({youtube_api_key:""}),ie(!1),d("YT API key cleared","success")}catch(t){d("Failed to clear API key","error")}finally{le(!1)}}},disabled:oe,className:"settings-action-btn",children:oe?"Saving...":"Save"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1201,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1173,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1155,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row flex-col !items-stretch !py-0 !border-b-0",children:[C.jsxDEV("div",{className:"flex items-center justify-between py-3.5",children:[C.jsxDEV("div",{className:"setting-label",children:[C.jsxDEV("span",{className:"autoscan-status "+(b?"active":"")},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1214,columnNumber:17},this),C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"Auto-Scan"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1216,columnNumber:19},this),C.jsxDEV("div",{className:"setting-desc",children:"Check channels on schedule"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1217,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1215,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1213,columnNumber:15},this),C.jsxDEV("label",{className:"toggle-switch",children:[C.jsxDEV("input",{type:"checkbox",checked:b,onChange:e=>{return t=e.target.checked,void N(t);var t}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1221,columnNumber:17},this),C.jsxDEV("span",{className:"toggle-slider"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1226,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1220,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1212,columnNumber:13},this),C.jsxDEV("div",{className:"autoscan-config "+(b?"show":""),children:[C.jsxDEV("div",{className:"flex items-center gap-2 w-full",children:[C.jsxDEV("div",{className:"mode-pills",children:[C.jsxDEV("button",{onClick:()=>ht("times"),className:"mode-pill "+("times"===x?"active":""),children:"Set Times"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1235,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>ht("interval"),className:"mode-pill "+("interval"===x?"active":""),children:"Interval"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1241,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1234,columnNumber:17},this),C.jsxDEV("button",{onClick:async()=>{try{let t;if("times"===x){t={mode:"times",times:j.map(e=>{const t=(e=>({"12 AM":0,"3 AM":3,"6 AM":6,"9 AM":9,"12 PM":12,"3 PM":15,"6 PM":18,"9 PM":21}[e]??0))(e);return`${String(t).padStart(2,"0")}:00`}),interval_hours:null,interval_start:null}}else{const r=(e=E,"AM"===S?12===e?0:e:12===e?12:e+12);t={mode:"interval",times:[],interval_hours:g,interval_start:`${String(r).padStart(2,"0")}:${String(w).padStart(2,"0")}`}}await l.mutateAsync({auto_refresh_enabled:b?"true":"false",auto_refresh_config:JSON.stringify(t)});d(!f&&b?"Auto-scan enabled":f&&!b?"Auto-scan disabled":"Auto-scan schedule saved","success"),h(b)}catch(t){d(ce(t.message,"save settings"),"error")}var e},className:"mode-pill active ml-auto",children:!f&&b?"Enable":f&&!b?"Disable":"Save"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1248,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1233,columnNumber:15},this),C.jsxDEV("span",{className:"config-divider"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1256,columnNumber:15},this),"times"===x&&C.jsxDEV("div",{className:"preset-times",children:["12 AM","3 AM","6 AM","9 AM","12 PM","3 PM","6 PM","9 PM"].map(e=>C.jsxDEV("button",{className:"preset-time-btn "+(j.includes(e)?"selected":""),onClick:()=>(e=>{j.includes(e)?j.length>1&&y(j.filter(t=>t!==e)):y([...j,e])})(e),children:e},e,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1262,columnNumber:21},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1260,columnNumber:17},this),"interval"===x&&C.jsxDEV("div",{className:"interval-inline",children:[C.jsxDEV("span",{className:"interval-label",children:"Every"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1276,columnNumber:19},this),C.jsxDEV("select",{className:"interval-select",value:g,onChange:e=>D(parseInt(e.target.value)),children:[C.jsxDEV("option",{value:6,children:"6 hours"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1282,columnNumber:21},this),C.jsxDEV("option",{value:8,children:"8 hours"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1283,columnNumber:21},this),C.jsxDEV("option",{value:12,children:"12 hours"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1284,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1277,columnNumber:19},this),C.jsxDEV("span",{className:"interval-label",children:"from"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1286,columnNumber:19},this),C.jsxDEV("div",{className:"time-chip",children:[C.jsxDEV("input",{type:"text",value:String(E).padStart(2,"0"),maxLength:2,onChange:e=>{let t=parseInt(e.target.value.replace(/\D/g,""))||1;t>12&&(t=12),t<1&&(t=1),V(t)}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1288,columnNumber:21},this),C.jsxDEV("span",{className:"sep",children:":"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1299,columnNumber:21},this),C.jsxDEV("input",{type:"text",value:String(w).padStart(2,"0"),maxLength:2,onChange:e=>{let t=parseInt(e.target.value.replace(/\D/g,""))||0;t>59&&(t=59),t<0&&(t=0),k(t)}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1300,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1287,columnNumber:19},this),C.jsxDEV("div",{className:"ampm-toggle",children:[C.jsxDEV("button",{className:"ampm-btn "+("AM"===S?"active":""),onClick:()=>P("AM"),children:"AM"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1313,columnNumber:21},this),C.jsxDEV("button",{className:"ampm-btn "+("PM"===S?"active":""),onClick:()=>P("PM"),children:"PM"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1319,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1312,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1275,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1231,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1211,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1113,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1106,columnNumber:9},this),C.jsxDEV("div",{className:"settings-section",children:[C.jsxDEV("div",{className:"section-header cursor-pointer",onClick:()=>Nt("system"),children:[C.jsxDEV(Gn,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1336,columnNumber:13},this),"System",C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),fetch("/api/auth/logout",{method:"POST",credentials:"include"}).then(()=>window.location.replace("/login")).catch(()=>window.location.replace("/login"))},className:"md:hidden ml-auto mr-2 px-2.5 py-1 text-sm font-semibold text-red-500 bg-dark-tertiary border border-dark-border rounded-md hover:bg-dark-hover hover:border-red-500/50 transition-all",children:"Logout"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1338,columnNumber:13},this),C.jsxDEV(ts,{collapsed:pt.system},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1349,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1335,columnNumber:11},this),C.jsxDEV("div",{className:"section-content "+(pt.system?"collapsed":""),children:[C.jsxDEV("div",{className:"setting-row flex-col !items-stretch gap-3",children:[C.jsxDEV("div",{className:"flex items-center justify-between",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1358,columnNumber:19},this),C.jsxDEV("div",{className:"setting-desc",children:"Change your account password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1359,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1357,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1356,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>R(!M),className:"settings-action-btn",children:[C.jsxDEV(es,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1366,columnNumber:17},this),"Change Password"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1362,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1355,columnNumber:13},this),M&&C.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),Q(""),B&&F&&q)if(F.length<3)Q("Password must be at least 3 characters");else if(F===q){U(!0);try{const e=await fetch("/api/auth/change",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:B,new_password:F})}),t=await e.json();if(!e.ok)return Q(t.error||"Failed to change password"),void U(!1);d("Password changed successfully!","success"),$(""),O(""),z(""),R(!1)}catch(t){Q("Failed to connect to server"),U(!1)}}else Q("New passwords do not match");else Q("All fields are required")},className:"expandable-content -mx-4 -mb-3.5 rounded-none space-y-3",children:[C.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs text-text-secondary mb-1",children:"Current Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1376,columnNumber:21},this),C.jsxDEV("input",{type:"password",value:B,onChange:e=>$(e.target.value),placeholder:"Current password",className:"input text-sm py-1.5 px-3 w-full",disabled:K,autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1377,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1375,columnNumber:19},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs text-text-secondary mb-1",children:"New Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1388,columnNumber:21},this),C.jsxDEV("input",{type:"password",value:F,onChange:e=>O(e.target.value),placeholder:"New password",className:"input text-sm py-1.5 px-3 w-full",disabled:K},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1389,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1387,columnNumber:19},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs text-text-secondary mb-1",children:"Confirm Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1399,columnNumber:21},this),C.jsxDEV("input",{type:"password",value:q,onChange:e=>z(e.target.value),placeholder:"Confirm password",className:"input text-sm py-1.5 px-3 w-full",disabled:K},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1400,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1398,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1374,columnNumber:17},this),W&&C.jsxDEV("div",{className:"bg-red-900/20 border border-red-500 text-red-400 px-3 py-2 rounded text-xs",children:W},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1412,columnNumber:19},this),C.jsxDEV("button",{type:"submit",disabled:K,className:"settings-action-btn disabled:opacity-50",children:K?"Saving...":"Save Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1417,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1373,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1354,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:C.jsxDEV("div",{className:"setting-name",children:"Can't Access your Account?"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1432,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1431,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1430,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>J(!0),className:"settings-action-btn text-red-400 hover:text-red-300",children:"Reset"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1435,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1429,columnNumber:11},this),C.jsxDEV("div",{className:"setting-row",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"Clear Logs"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1447,columnNumber:17},this),C.jsxDEV("div",{className:"setting-desc",children:"Delete log entries"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1448,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1446,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1445,columnNumber:13},this),C.jsxDEV("div",{className:"flex gap-2",children:[C.jsxDEV("button",{onClick:async()=>{try{const t=await T.clearLogs("current");d(t.message||"Current log cleared","success"),e.invalidateQueries({queryKey:["logs"]})}catch(t){d("Failed to clear logs","error")}},className:"settings-action-btn",children:"Current"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1452,columnNumber:15},this),C.jsxDEV("button",{onClick:async()=>{try{const t=await T.clearLogs("all");d(t.message||"All logs cleared","success"),e.invalidateQueries({queryKey:["logs"]})}catch(t){d("Failed to clear logs","error")}},className:"settings-action-btn text-red-400 hover:text-red-300",children:"All"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1466,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1451,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1444,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1352,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1334,columnNumber:9},this),C.jsxDEV("div",{className:"settings-section",children:[C.jsxDEV("div",{className:"section-header cursor-pointer",onClick:()=>Nt("logging"),children:[C.jsxDEV(Xn,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1488,columnNumber:13},this),"Logging",C.jsxDEV(ts,{collapsed:pt.logging},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1490,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1487,columnNumber:11},this),C.jsxDEV("div",{className:"section-content "+(pt.logging?"collapsed":""),children:C.jsxDEV("div",{className:"setting-row flex-col !items-stretch gap-3 mobile-stack-log mobile-hide-desc",children:[C.jsxDEV("div",{className:"flex items-center justify-between",children:[C.jsxDEV("div",{className:"setting-label",children:C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"setting-name",children:"Log Level"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1498,columnNumber:19},this),C.jsxDEV("div",{className:"setting-desc",children:"DEBUG shows everything, ERROR shows only failures"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1499,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1497,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1496,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center gap-3",children:[C.jsxDEV("div",{className:"settings-toggle-group",children:[{level:"DEBUG",tip:"All messages including detailed debugging info"},{level:"INFO",tip:"General information about operations"},{level:"API",tip:"HTTP request/response logs"},{level:"WARNING",tip:"Warnings and errors only"},{level:"ERROR",tip:"Only error messages"}].map(({level:e,tip:t})=>C.jsxDEV(Kn,{text:t,children:C.jsxDEV("button",{onClick:async()=>{L(e);try{await l.mutateAsync({log_level:e}),d(`Log level changed to ${e}`,"success")}catch(t){d(ce(t.message,"save settings"),"error")}},className:"settings-toggle-btn "+(_===e?"active":""),children:"WARNING"===e?"WARN":e},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1512,columnNumber:23},this)},e,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1511,columnNumber:21},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1503,columnNumber:17},this),C.jsxDEV("button",{onClick:()=>{const e=!Re;Be(e),localStorage.setItem("logsVisible",e.toString())},className:"settings-action-btn",children:[Re?"Hide":"View"," Logs"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1529,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1502,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1495,columnNumber:13},this),C.jsxDEV("div",{className:"log-viewer "+(Re?"expanded":""),children:[C.jsxDEV("div",{className:"log-header",children:$e?.total_lines&&C.jsxDEV("span",{className:"text-xs text-text-muted",children:["Showing last 500 of ",$e.total_lines," lines"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1539,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1537,columnNumber:15},this),C.jsxDEV("div",{className:"log-content",ref:Fe,children:$e?.logs&&$e.logs.length>0?$e.logs.map((e,t)=>{const r=e.match(/^(.* - )(\[(?:ERROR|WARNING|INFO|API|DEBUG)\])( - .*)$/);if(r){const[,e,n,s]=r,a=n.includes("ERROR")?"error":n.includes("WARNING")?"warn":n.includes("INFO")?"info":n.includes("API")?"api":"debug";return C.jsxDEV("div",{className:"log-line",children:[C.jsxDEV("span",{className:"log-time",children:e.replace(" - ","")},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1557,columnNumber:27},this),C.jsxDEV("span",{className:`log-level ${a}`,children:n},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1558,columnNumber:27},this),C.jsxDEV("span",{children:s.replace(" - ","")},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1559,columnNumber:27},this)]},t,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1556,columnNumber:25},this)}return C.jsxDEV("div",{className:"log-line",children:e},t,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1563,columnNumber:28},this)}):C.jsxDEV("div",{className:"text-text-muted text-center py-8",children:"No logs available"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1566,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1544,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1536,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1494,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1493,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1486,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:710,columnNumber:7},this),Oe&&Je&&C.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[C.jsxDEV("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>qe(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1579,columnNumber:11},this),C.jsxDEV("div",{className:"relative bg-dark-secondary border border-dark-border-light rounded-lg shadow-xl max-w-md w-full",children:[C.jsxDEV("div",{className:"px-6 py-4 border-b border-dark-border",children:C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Database Maintenance"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1582,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1581,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4 space-y-4",children:[Je.orphaned_cleaned>0&&C.jsxDEV("div",{className:"bg-dark-tertiary border border-dark-border rounded-lg p-3",children:C.jsxDEV("div",{className:"text-sm text-text-primary",children:["âœ“ Auto-cleaned ",Je.orphaned_cleaned," orphaned item",1!==Je.orphaned_cleaned?"s":""]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1587,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1586,columnNumber:17},this),C.jsxDEV("p",{className:"text-sm text-text-secondary",children:"Choose a maintenance option:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1593,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>{qe(!1),We(!0)},className:"w-full p-4 bg-dark-tertiary hover:bg-dark-hover border border-dark-border-light rounded-lg text-left transition-colors",children:C.jsxDEV("div",{className:"flex items-center justify-between",children:[C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"font-medium text-text-primary",children:["Unavailable Videos ",C.jsxDEV("span",{className:"text-text-muted font-normal",children:["(",Je.not_found_videos?.length||0," found)"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1601,columnNumber:87},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1601,columnNumber:21},this),C.jsxDEV("div",{className:"text-xs text-text-secondary mt-1",children:"Remove videos from DB no longer playable on YT"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1602,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1600,columnNumber:19},this),C.jsxDEV("div",{className:"text-2xl text-text-muted",children:"â†’"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1604,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1599,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1595,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>{qe(!1),Ke(!0)},className:"w-full p-4 bg-dark-tertiary hover:bg-dark-hover border border-dark-border-light rounded-lg text-left transition-colors",children:C.jsxDEV("div",{className:"flex items-center justify-between",children:[C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"font-medium text-text-primary",children:["Purge Channels ",C.jsxDEV("span",{className:"text-text-muted font-normal",children:["(",Je.deletable_channels?.length||0," found)"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1614,columnNumber:83},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1614,columnNumber:21},this),C.jsxDEV("div",{className:"text-xs text-text-secondary mt-1",children:"Delete removed channels fully from DB and locally"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1615,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1613,columnNumber:19},this),C.jsxDEV("div",{className:"text-2xl text-text-muted",children:"â†’"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1617,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1612,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1608,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>{qe(!1),He(!0)},className:"w-full p-4 bg-dark-tertiary hover:bg-dark-hover border border-dark-border-light rounded-lg text-left transition-colors",children:C.jsxDEV("div",{className:"flex items-center justify-between",children:[C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"font-medium text-text-primary",children:["Repair Metadata ",C.jsxDEV("span",{className:"text-text-muted font-normal",children:["(",(Ge?.count||0)+(Ge?.broken_thumbnails||0)+(Ge?.missing_channel_thumbnails||0)+(Ge?.missing_video_thumbnails||0)," found)"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1627,columnNumber:84},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1627,columnNumber:21},this),C.jsxDEV("div",{className:"text-xs text-text-secondary mt-1",children:"Fix missing upload dates and missing channel/video thumbnails"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1628,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1626,columnNumber:19},this),C.jsxDEV("div",{className:"text-2xl text-text-muted",children:"â†’"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1630,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1625,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1621,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1584,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4 border-t border-dark-border",children:C.jsxDEV("button",{onClick:()=>qe(!1),className:"btn btn-secondary w-full",children:"Close"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1635,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1634,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1580,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1578,columnNumber:9},this),ze&&Je&&C.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[C.jsxDEV("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>We(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1646,columnNumber:11},this),C.jsxDEV("div",{className:"relative bg-dark-secondary border border-dark-border-light rounded-lg shadow-xl max-w-2xl w-full",children:[C.jsxDEV("div",{className:"px-6 py-4 border-b border-dark-border",children:C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Videos Not Found on YT"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1649,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1648,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4",children:0===Je.not_found_videos?.length?C.jsxDEV("p",{className:"text-sm text-text-secondary",children:"âœ“ No videos to remove"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1653,columnNumber:17},this):C.jsxDEV(C.Fragment,{children:[C.jsxDEV("label",{className:"flex items-center gap-2 text-sm text-text-secondary mb-3 cursor-pointer",children:[C.jsxDEV("input",{type:"checkbox",checked:Ze.length===Je.not_found_videos.length,onChange:e=>{e.target.checked?et(Je.not_found_videos.map(e=>e.id)):et([])}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1657,columnNumber:21},this),"Select all videos to remove from database:"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1656,columnNumber:19},this),C.jsxDEV("div",{className:"max-h-96 overflow-y-auto space-y-2",children:Je.not_found_videos.map(e=>C.jsxDEV("label",{className:"flex items-start gap-3 p-3 bg-dark-tertiary hover:bg-dark-hover border border-dark-border rounded-lg cursor-pointer",children:[C.jsxDEV("input",{type:"checkbox",checked:Ze.includes(e.id),onChange:t=>{t.target.checked?et([...Ze,e.id]):et(Ze.filter(t=>t!==e.id))},className:"mt-1"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1673,columnNumber:25},this),C.jsxDEV("div",{className:"flex-1 min-w-0",children:[C.jsxDEV("div",{className:"font-medium text-text-primary truncate",children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1686,columnNumber:27},this),C.jsxDEV("div",{className:"text-xs text-text-secondary",children:["Channel: ",e.channel_name]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1687,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1685,columnNumber:25},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1672,columnNumber:23},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1670,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1655,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1651,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4 border-t border-dark-border flex gap-3",children:[C.jsxDEV("button",{onClick:()=>We(!1),className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1696,columnNumber:15},this),Je.not_found_videos?.length>0&&C.jsxDEV("button",{onClick:async()=>{if(0!==Ze.length){it(!0);try{const e=await fetch("/api/queue/remove-not-found",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({video_ids:Ze})}),t=await e.json();if(t.error)return void d(t.error,"error");d(`Removed ${t.removed} video${1!==t.removed?"s":""}`,"success"),We(!1),qe(!1),et([]),Ye(null)}catch(e){d("Failed to remove videos","error")}finally{it(!1)}}else d("No videos selected","warning")},disabled:0===Ze.length||at,className:"btn bg-red-600 hover:bg-red-700 text-white flex-1 disabled:opacity-50",children:at?"Removing...":`Remove Selected (${Ze.length})`},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1700,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1695,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1647,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1645,columnNumber:9},this),Qe&&Je&&C.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[C.jsxDEV("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>Ke(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1716,columnNumber:11},this),C.jsxDEV("div",{className:"relative bg-dark-secondary border border-dark-border-light rounded-lg shadow-xl max-w-2xl w-full",children:[C.jsxDEV("div",{className:"px-6 py-4 border-b border-dark-border",children:C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Shrink Database"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1719,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1718,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4",children:0===Je.deletable_channels?.length?C.jsxDEV("p",{className:"text-sm text-text-secondary",children:"âœ“ No channels to purge"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1723,columnNumber:17},this):C.jsxDEV(C.Fragment,{children:[C.jsxDEV("p",{className:"text-sm text-text-secondary mb-3",children:"Select deleted channels to permanently remove:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1726,columnNumber:19},this),C.jsxDEV("div",{className:"max-h-96 overflow-y-auto space-y-2",children:Je.deletable_channels.map(e=>C.jsxDEV("label",{className:"flex items-start gap-3 p-3 bg-dark-tertiary hover:bg-dark-hover border border-dark-border rounded-lg cursor-pointer",children:[C.jsxDEV("input",{type:"checkbox",checked:tt.includes(e.id),onChange:t=>{t.target.checked?rt([...tt,e.id]):rt(tt.filter(t=>t!==e.id))},className:"mt-1"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1730,columnNumber:25},this),C.jsxDEV("div",{className:"flex-1 min-w-0",children:[C.jsxDEV("div",{className:"font-medium text-text-primary truncate",children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1743,columnNumber:27},this),C.jsxDEV("div",{className:"text-xs text-text-secondary",children:[e.video_count," video",1!==e.video_count?"s":""," â€¢ No library videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1744,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1742,columnNumber:25},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1729,columnNumber:23},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1727,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1725,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1721,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4 border-t border-dark-border flex gap-3",children:[C.jsxDEV("button",{onClick:()=>Ke(!1),className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1753,columnNumber:15},this),Je.deletable_channels?.length>0&&C.jsxDEV("button",{onClick:async()=>{if(0!==tt.length){it(!0);try{const e=await fetch("/api/queue/purge-channels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_ids:tt})}),t=await e.json();if(t.error)return void d(t.error,"error");d(`Purged ${t.purged_channels} channel${1!==t.purged_channels?"s":""}, freed ${t.videos_removed} video records`,"success"),Ke(!1),qe(!1),rt([]),Ye(null)}catch(e){d("Failed to purge channels","error")}finally{it(!1)}}else d("No channels selected","warning")},disabled:0===tt.length||at,className:"btn bg-red-600 hover:bg-red-700 text-white flex-1 disabled:opacity-50",children:at?"Purging...":`Purge Selected (${tt.length})`},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1757,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1752,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1717,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1715,columnNumber:9},this),Ue&&Ge&&(()=>{const e=(Ge.count||0)+(Ge.broken_thumbnails||0)+(Ge.missing_channel_thumbnails||0)+(Ge.missing_video_thumbnails||0),r=({title:e,count:r,items:n,icon:s,isChannel:a})=>{const[i,o]=t.useState(!1);return 0===r?null:C.jsxDEV("div",{className:"rounded-lg bg-dark-tertiary border border-dark-border overflow-hidden",children:[C.jsxDEV("button",{onClick:()=>o(!i),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-dark-hover transition-colors",children:[C.jsxDEV("div",{className:"flex items-center gap-3",children:[C.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-yellow-500"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1783,columnNumber:19},this),C.jsxDEV("span",{className:"text-sm font-medium text-text-primary",children:e},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1784,columnNumber:19},this),C.jsxDEV("span",{className:"px-2 py-0.5 rounded text-xs font-mono bg-dark-hover text-text-secondary",children:[r," ",a?1===r?"channel":"channels":1===r?"video":"videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1785,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1782,columnNumber:17},this),C.jsxDEV("svg",{className:"w-4 h-4 text-text-muted transition-transform "+(i?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1790,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1789,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1778,columnNumber:15},this),i&&n?.length>0&&C.jsxDEV("div",{className:"px-4 pb-3 space-y-1.5",children:[n.slice(0,20).map(e=>C.jsxDEV("div",{className:"flex items-center gap-3 px-3 py-2 rounded bg-dark-primary/50",children:[C.jsxDEV("div",{className:`w-8 h-8 ${a?"rounded-full":"rounded"} flex-shrink-0 flex items-center justify-center bg-dark-hover`,children:s},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1797,columnNumber:23},this),C.jsxDEV("div",{className:"min-w-0 flex-1",children:[C.jsxDEV("div",{className:"text-sm text-text-primary truncate",children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1801,columnNumber:25},this),e.channel_title&&C.jsxDEV("div",{className:"text-xs text-text-muted",children:e.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1802,columnNumber:48},this),a&&C.jsxDEV("div",{className:"text-xs font-mono text-text-muted",children:[e.yt_id?.slice(0,8),"..."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1803,columnNumber:39},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1800,columnNumber:23},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1796,columnNumber:21},this)),r>20&&C.jsxDEV("p",{className:"text-xs text-text-muted text-center py-2",children:["...and ",r-20," more"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1808,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1794,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1777,columnNumber:13},this)};return C.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[C.jsxDEV("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>He(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1817,columnNumber:13},this),C.jsxDEV("div",{className:"relative bg-dark-secondary border border-dark-border-light rounded-xl shadow-2xl max-w-2xl w-full animate-scale-in",children:[C.jsxDEV("div",{className:"px-6 py-4 border-b border-dark-border flex items-center justify-between",children:[C.jsxDEV("div",{className:"flex items-center gap-3",children:[C.jsxDEV("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-accent/15",children:C.jsxDEV("svg",{className:"w-5 h-5 text-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1824,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1823,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1822,columnNumber:19},this),C.jsxDEV("div",{children:[C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Repair Metadata"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1828,columnNumber:21},this),C.jsxDEV("p",{className:"text-xs text-text-muted",children:[e," issue",1!==e?"s":""," found"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1829,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1827,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1821,columnNumber:17},this),C.jsxDEV("button",{onClick:()=>He(!1),className:"w-8 h-8 rounded-lg flex items-center justify-center bg-dark-tertiary text-text-secondary hover:text-text-primary transition-colors",children:C.jsxDEV("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1834,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1833,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1832,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1820,columnNumber:15},this),C.jsxDEV("div",{className:"p-4 space-y-2 max-h-96 overflow-y-auto",children:0===e?C.jsxDEV("div",{className:"flex flex-col items-center justify-center py-8",children:[C.jsxDEV("div",{className:"w-16 h-16 rounded-full flex items-center justify-center bg-green-500/15 mb-4",children:C.jsxDEV("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1844,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1843,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1842,columnNumber:21},this),C.jsxDEV("p",{className:"text-sm font-medium text-text-primary",children:"All Clear"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1847,columnNumber:21},this),C.jsxDEV("p",{className:"text-xs text-text-muted",children:"No metadata issues found"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1848,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1841,columnNumber:19},this):C.jsxDEV(C.Fragment,{children:[C.jsxDEV(r,{title:"Missing Upload Dates",count:Ge.count||0,items:Ge.videos,icon:C.jsxDEV("svg",{className:"w-4 h-4 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1856,columnNumber:124},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1856,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1852,columnNumber:21},this),C.jsxDEV(r,{title:"Broken Thumbnail URLs",count:Ge.broken_thumbnails||0,items:[],icon:C.jsxDEV("svg",{className:"w-4 h-4 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1862,columnNumber:124},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1862,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1858,columnNumber:21},this),C.jsxDEV(r,{title:"Missing Channel Thumbnails",count:Ge.missing_channel_thumbnails||0,items:Ge.missing_channel_thumbs_list,isChannel:!0,icon:C.jsxDEV("svg",{className:"w-4 h-4 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1869,columnNumber:124},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1869,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1864,columnNumber:21},this),C.jsxDEV(r,{title:"Missing Video Thumbnails",count:Ge.missing_video_thumbnails||0,items:Ge.missing_video_thumbs_list,icon:C.jsxDEV("svg",{className:"w-4 h-4 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1875,columnNumber:124},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1875,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1871,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1851,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1839,columnNumber:15},this),C.jsxDEV("div",{className:"px-6 py-4 border-t border-dark-border flex items-center justify-between bg-dark-tertiary/50",children:[C.jsxDEV("p",{className:"text-xs text-text-muted",children:se?C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{className:"text-accent",children:"Tip:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1883,columnNumber:34},this)," Will use YT API for fast fetching"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1883,columnNumber:32},this):C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{className:"text-yellow-500",children:"Note:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1883,columnNumber:117},this)," Add API key for faster processing"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1883,columnNumber:115},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1882,columnNumber:17},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>He(!1),className:"btn btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1886,columnNumber:19},this),e>0&&C.jsxDEV("button",{onClick:xt,disabled:ot,className:"btn btn-primary disabled:opacity-50 flex items-center gap-2",children:ot?"Fixing...":C.jsxDEV(C.Fragment,{children:[C.jsxDEV("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1892,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1891,columnNumber:27},this),"Fix ",e," Issue",1!==e?"s":""]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1890,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1888,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1885,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1881,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1818,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1816,columnNumber:11},this)})(),H&&C.jsxDEV(Ae,{isOpen:H,onCancel:()=>J(!1),onConfirm:async()=>{try{(await fetch("/api/auth/reset",{method:"POST"})).ok?window.location.href="/setup":d("Failed to reset authentication","error")}catch(e){d("Failed to connect to server","error")}J(!1)},title:"Wipe Credentials?",message:"This will delete your credentials and return to initial setup.",confirmText:"Wipe Credentials",confirmStyle:"danger"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1908,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:709,columnNumber:5},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:708,columnNumber:5},this)}function ns({queueCount:e=0,reviewCount:t=0}){const r=f(),n=[{to:"/",icon:Ke,label:"Channels",badge:t,isActive:"/"===r.pathname||r.pathname.startsWith("/channel/")&&!r.pathname.endsWith("/library")},{to:"/library",icon:Ue,label:"Library",isActive:"/library"===r.pathname||r.pathname.startsWith("/playlist/")||r.pathname.endsWith("/library")},{to:"/queue",icon:He,label:"Queue",badge:e,isActive:"/queue"===r.pathname},{to:"/settings",icon:Re,label:"Settings",isActive:"/settings"===r.pathname}];return C.jsxDEV("nav",{className:"flex items-center justify-around py-2 px-1 border-t border-dark-border bg-dark-secondary safe-area-bottom",children:n.map(({to:e,icon:t,label:r,badge:n,isActive:s})=>C.jsxDEV(p,{to:e,className:"flex flex-col items-center gap-1 px-3 py-1.5 rounded-lg relative min-w-[60px] "+(s?"text-accent-text":"text-text-secondary"),children:[C.jsxDEV(t,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/components/MobileBottomNav.jsx",lineNumber:57,columnNumber:11},this),C.jsxDEV("span",{className:"text-[10px] font-medium",children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/MobileBottomNav.jsx",lineNumber:58,columnNumber:11},this),n>0&&C.jsxDEV("span",{className:"absolute top-0 right-1 bg-accent text-dark-primary text-[10px] font-bold min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1",children:n>99?"99+":n},void 0,!1,{fileName:"/appdata/frontend/src/components/MobileBottomNav.jsx",lineNumber:60,columnNumber:13},this)]},e,!0,{fileName:"/appdata/frontend/src/components/MobileBottomNav.jsx",lineNumber:50,columnNumber:9},this))},void 0,!1,{fileName:"/appdata/frontend/src/components/MobileBottomNav.jsx",lineNumber:48,columnNumber:5},this)}const ss=c.getComponent("Button");let as=!1;function is(e){as||(c.registerComponent("TheaterButton",class extends ss{constructor(e,t){super(e,t),this.addClass("vjs-theater-button"),this.onToggleCallback=t?.onToggle,"true"===localStorage.getItem("theaterMode")?(this.addClass("vjs-theater-mode-active"),this.controlText("Default view")):this.controlText("Theater mode")}buildCSSClass(){return`vjs-theater-button ${super.buildCSSClass()}`}handleClick(){const e=!("true"===localStorage.getItem("theaterMode"));localStorage.setItem("theaterMode",String(e)),window.dispatchEvent(new Event("storage")),e?(this.addClass("vjs-theater-mode-active"),this.controlText("Default view")):(this.removeClass("vjs-theater-mode-active"),this.controlText("Theater mode")),this.onToggleCallback&&this.onToggleCallback(e)}createEl(){const e=super.createEl("button",{className:this.buildCSSClass()}),t=e.querySelector(".vjs-icon-placeholder");return t&&(t.innerHTML='\n          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="theater-icon-expand">\n            <line x1="2" y1="5" x2="2" y2="19"></line>\n            <line x1="11" y1="12" x2="4" y2="12"></line>\n            <polyline points="7,9 4,12 7,15"></polyline>\n            <line x1="13" y1="12" x2="20" y2="12"></line>\n            <polyline points="17,9 20,12 17,15"></polyline>\n            <line x1="22" y1="5" x2="22" y2="19"></line>\n          </svg>\n          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="theater-icon-contract">\n            <line x1="1" y1="12" x2="6" y2="12"></line>\n            <polyline points="3,9 6,12 3,15"></polyline>\n            <line x1="9" y1="5" x2="9" y2="19"></line>\n            <line x1="15" y1="5" x2="15" y2="19"></line>\n            <line x1="23" y1="12" x2="18" y2="12"></line>\n            <polyline points="21,9 18,12 21,15"></polyline>\n          </svg>\n        '),e}}),as=!0)}const os=c.getPlugin("plugin");c.registerPlugin("seekCoordinator",class extends os{constructor(e,t){super(e,t),this.options=c.obj.merge({snapBackward:.4,settleTime:100,enabled:!0,minSnapTime:1,debug:!1},t),this.seekTarget=null,this.rafId=null,this.isSeeking=!1,this.lastSeekCompleteTime=0,this.originalCurrentTime=null,this.options.enabled&&this.initialize()}initialize(){this.log("Initializing Seek Coordinator Plugin"),this.wrapCurrentTime(),this._handleSeeking=()=>this.handleSeeking(),this._handleSeeked=()=>this.handleSeeked(),this.player.on("seeking",this._handleSeeking),this.player.on("seeked",this._handleSeeked)}wrapCurrentTime(){const e=this.player;this.originalCurrentTime=e.currentTime.bind(e),e.currentTime=t=>void 0===t?this.originalCurrentTime():(this.requestSeek(t),e),this.log("Wrapped player.currentTime()")}requestSeek(e){if(!this.options.enabled)return this.originalCurrentTime(e);const t=this.player.duration();isNaN(e)||!t||isNaN(t)||(this.seekTarget=e,this.log(`Seek requested: ${e.toFixed(2)}s`),this.rafId||(this.rafId=requestAnimationFrame(()=>this.executeSeek())))}executeSeek(){if(this.rafId=null,null===this.seekTarget)return;const e=this.player;if(!e||e.isDisposed())return void(this.seekTarget=null);if(e.readyState()<1)return this.log("Metadata not ready, retrying..."),void(this.rafId=requestAnimationFrame(()=>this.executeSeek()));const t=e.duration();if(!t||isNaN(t))return void(this.seekTarget=null);if(this.isSeeking)return this.log("Already seeking, re-queuing..."),void(this.rafId=requestAnimationFrame(()=>this.executeSeek()));const r=Date.now()-this.lastSeekCompleteTime;if(this.lastSeekCompleteTime>0&&r<this.options.settleTime)return this.log(`In settling window (${r}ms), waiting...`),void(this.rafId=requestAnimationFrame(()=>this.executeSeek()));let n=Math.max(0,Math.min(t,this.seekTarget));const s=this.snapToLikelyKeyframe(n);this.log(`Executing seek: ${n.toFixed(2)}s â†’ ${s.toFixed(2)}s (snapped)`),this.seekTarget=null,this.originalCurrentTime(s)}snapToLikelyKeyframe(e){if(e<this.options.minSnapTime)return e;return Math.max(0,e-this.options.snapBackward)}handleSeeking(){this.isSeeking=!0,this.log("Seeking started")}handleSeeked(){this.isSeeking=!1,this.lastSeekCompleteTime=Date.now(),this.log("Seek completed"),null===this.seekTarget||this.rafId||(this.rafId=requestAnimationFrame(()=>this.executeSeek()))}enable(){this.options.enabled||(this.options.enabled=!0,this.initialize(),this.log("Plugin enabled"))}disable(){this.options.enabled&&(this.options.enabled=!1,this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.originalCurrentTime&&this.player&&!this.player.isDisposed()&&(this.player.currentTime=this.originalCurrentTime),this.log("Plugin disabled"))}log(e){this.options.debug&&console.log(`[SeekCoordinator] ${e}`)}dispose(){this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.player&&!this.player.isDisposed()&&(this._handleSeeking&&this.player.off("seeking",this._handleSeeking),this._handleSeeked&&this.player.off("seeked",this._handleSeeked),this.originalCurrentTime&&(this.player.currentTime=this.originalCurrentTime,this.originalCurrentTime=null)),this.seekTarget=null,this.options.enabled=!1,this.player&&!this.player.isDisposed()&&super.dispose()}});const ls=c.getComponent("Button");c.registerComponent("SeekBackward10Button",class extends ls{constructor(e,t){super(e,t),this.controlText("Seek backward 10 seconds")}buildCSSClass(){return`vjs-seek-backward-10 ${super.buildCSSClass()}`}handleClick(){const e=this.player(),t=e.currentTime();e.currentTime(t-10)}createEl(){const e=super.createEl("button",{className:"vjs-seek-backward-10 vjs-control vjs-button"});return e.innerHTML='\n      <span class="vjs-icon-placeholder" aria-hidden="true">\n        <svg viewBox="0 0 24 24" fill="currentColor">\n          <path d="M11.99 5V1l-5 5 5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6h-2c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>\n          <text x="12" y="16" text-anchor="middle" font-size="7" font-weight="bold" fill="currentColor">10</text>\n        </svg>\n      </span>\n    ',e}}),c.registerComponent("SeekForward10Button",class extends ls{constructor(e,t){super(e,t),this.controlText("Seek forward 10 seconds")}buildCSSClass(){return`vjs-seek-forward-10 ${super.buildCSSClass()}`}handleClick(){const e=this.player(),t=e.currentTime();e.currentTime(t+10)}createEl(){const e=super.createEl("button",{className:"vjs-seek-forward-10 vjs-control vjs-button"});return e.innerHTML='\n      <span class="vjs-icon-placeholder" aria-hidden="true">\n        <svg viewBox="0 0 24 24" fill="currentColor">\n          <path d="M12 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8z"/>\n          <text x="12" y="16" text-anchor="middle" font-size="7" font-weight="bold" fill="currentColor">10</text>\n        </svg>\n      </span>\n    ',e}});let ds=!1;function cs({video:e,videoRef:r,saveProgress:n=!0,onEnded:s=null,onWatched:a=null,updateVideoMutation:i=null,isTheaterMode:o=!1,setIsTheaterMode:l=null,persistPlayer:d=!1}){const u=t.useRef(null),m=t.useRef(null),p=t.useRef(!1),b=t.useRef(e),N=t.useRef(i),f=t.useRef(null);return t.useEffect(()=>{b.current=e,N.current=i},[e,i]),t.useEffect(()=>{if(!r.current||!e)return;const t=r.current;if(!t.tagName||"VIDEO"!==t.tagName&&"AUDIO"!==t.tagName)return void console.warn("[useVideoJsPlayer] Invalid element type:",t.tagName);if(f.current&&f.current!==t&&u.current){try{u.current.isDisposed()||u.current.dispose()}catch(y){console.warn("[useVideoJsPlayer] Error disposing player:",y)}u.current=null}if(f.current=t,d&&u.current)return;const{isMobile:i,isIOS:o}=(()=>{const e=/iPhone|iPad|iPod/i.test(navigator.userAgent);return{isMobile:(()=>{const e=window.matchMedia("(pointer: coarse)").matches,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return e&&t})(),isIOS:e}})();ds||(is(),ds=!0);const h=c(r.current,{controls:!0,fill:!0,preload:"metadata",poster:i&&e.thumb_url||"",inactivityTimeout:i?0:2e3,nativeControlsForTouch:!1,playbackRates:[1,1.5,2,2.5],controlBar:{currentTimeDisplay:!1,timeDivider:!1,durationDisplay:!1,remainingTimeDisplay:!0,chaptersButton:!i},html5:{vhs:{overrideNative:!1},nativeVideoTracks:!0,nativeAudioTracks:!0}});if(u.current=h,h.seekCoordinator({snapBackward:.4,settleTime:100,enabled:!0,debug:!1}),fetch("/api/settings",{credentials:"include"}).then(e=>e.json()).then(e=>{const t=parseFloat(e.default_playback_speed)||1;1!==t&&h&&!h.isDisposed()&&h.playbackRate(t)}).catch(e=>{console.warn("[useVideoJsPlayer] Failed to fetch default playback speed:",e)}),i){let e=null;const t=2e3,r=()=>{h.userActive(!0),e&&clearTimeout(e),e=setTimeout(()=>{h.isFullscreen()&&!h.paused()&&h.userActive(!1)},t)};h.on("fullscreenchange",()=>{h.isFullscreen()?r():(e&&clearTimeout(e),h.userActive(!0))}),h.on("touchstart",()=>{h.isFullscreen()&&r()}),h.on("play",()=>{h.isFullscreen()&&r()}),h.on("pause",()=>{h.isFullscreen()&&(e&&clearTimeout(e),h.userActive(!0))}),h.on("dispose",()=>{e&&clearTimeout(e)})}else{let e=null,t=!1;const r=2e3,n=()=>{e&&clearTimeout(e),h.paused()||(e=setTimeout(()=>{t||h.paused()||h.userActive(!1)},r))},s=h.controlBar.el(),a=()=>{t=!0,e&&(clearTimeout(e),e=null),h.userActive(!0)},i=()=>{t=!1,n()};s.addEventListener("mouseenter",a),s.addEventListener("mouseleave",i),h.on("pause",()=>{e&&(clearTimeout(e),e=null),h.userActive(!0)}),h.on("play",()=>{e&&(clearTimeout(e),e=null)}),h.on("userinactive",()=>{h.paused()&&h.userActive(!0)}),h.on("canplay",()=>{h.paused()&&h.userActive(!0)}),h.on("dispose",()=>{e&&clearTimeout(e),s.removeEventListener("mouseenter",a),s.removeEventListener("mouseleave",i)})}if(!i)try{const e=h.controlBar,t=e.getChild("playToggle"),r=e.addChild("SeekBackward10Button",{},e.children().indexOf(t)+1);e.addChild("SeekForward10Button",{},e.children().indexOf(r)+1)}catch(g){console.error("[useVideoJsPlayer] Error adding seek buttons:",g)}if(!i)try{const e=h.controlBar.addChild("TheaterButton",{onToggle:e=>{l&&l(e)}}),t=h.controlBar.getChild("fullscreenToggle");if(t){h.controlBar.el().insertBefore(e.el(),t.el())}}catch(g){console.error("[useVideoJsPlayer] Error adding theater button:",g)}if(e.file_path){const t=rt(e.file_path);if(t){h.src({src:t,type:"video/mp4"}),h.one("loadedmetadata",()=>{try{const t=h.duration(),r=e.progress_sec&&e.progress_sec>0&&e.progress_sec<.95*t?e.progress_sec:0;h.currentTime(r),i||(h.load(),setTimeout(()=>{try{h.hasStarted(!0),h.userActive(!0)}catch(e){console.warn("[useVideoJsPlayer] Failed to mark as started:",e)}},100))}catch(t){console.warn("[useVideoJsPlayer] Failed to restore progress:",t)}});const r=t.replace(/\.[^.]+$/,".en.vtt");fetch(r,{method:"HEAD",credentials:"include"}).then(e=>{e.ok&&h&&!h.isDisposed()&&h.addRemoteTextTrack({kind:"subtitles",srclang:"en",label:"English",src:r,default:!1},!1)}).catch(()=>{})}else console.warn("[useVideoJsPlayer] No video source found for:",e.file_path)}o&&(h.tech(!0).el().setAttribute("playsinline","true"),h.tech(!0).el().setAttribute("webkit-playsinline","true"));const x=()=>{if(n&&N.current&&b.current&&h)try{const e=Math.floor(h.currentTime());N.current.mutate({id:b.current.id,data:{playback_seconds:e}})}catch(g){console.warn("[useVideoJsPlayer] Failed to save progress:",g)}},v=e=>{if("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)return;const t=e.key.toLowerCase();switch(t){case" ":case"k":e.preventDefault(),h.paused()?h.play():h.pause();break;case"arrowleft":case"j":e.preventDefault(),h.currentTime(h.currentTime()-10);break;case"arrowright":case"l":e.preventDefault(),h.currentTime(h.currentTime()+10);break;case"f":e.preventDefault(),h.isFullscreen()?h.exitFullscreen():h.requestFullscreen();break;case"m":e.preventDefault(),h.muted(!h.muted());break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.preventDefault();const r=h.duration();if(r&&!isNaN(r)){const e=r*(parseInt(t)/10);h.currentTime(e)}}};document.addEventListener("keydown",v);let j=null;return i&&(j=(e=>{let t=0;const r=r=>{const n=Date.now(),s=n-t<250;e.isFullscreen()?s&&(r.preventDefault(),r.stopPropagation()):s&&(r.preventDefault(),e.requestFullscreen()),t=n},n=e.el().querySelector("video");n.addEventListener("touchend",r);const s=document.createElement("div");s.className="vjs-touch-overlay",s.style.cssText="\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 60px;\n    display: none;\n    z-index: 150;\n    -webkit-tap-highlight-color: transparent;\n    pointer-events: auto !important;\n  ";const a=(e=100)=>`\n    position: absolute;\n    background: rgba(255, 255, 255, 0.15);\n    backdrop-filter: blur(12px);\n    -webkit-backdrop-filter: blur(12px);\n    border: 2px solid rgba(255, 255, 255, 0.25);\n    border-radius: 50%;\n    width: ${e}px;\n    height: ${e}px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    opacity: 0;\n    transform: scale(0.9);\n    transition: opacity 0.2s ease, transform 0.2s ease;\n    pointer-events: auto !important;\n    cursor: pointer;\n    z-index: 200;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n  `,i=document.createElement("button");i.className="vjs-mobile-btn",i.innerHTML='\n    <div style="display: flex; flex-direction: column; align-items: center; gap: 4px;">\n      <svg viewBox="0 0 24 24" fill="white" style="width: 32px; height: 32px;">\n        <path d="M11.5 12L20 18V6M11 18V6l-8.5 6"/>\n      </svg>\n      <span style="font-size: 14px; font-weight: bold;">-10</span>\n    </div>\n  ',i.style.cssText=a(110)+"left: 20%; top: 50%; transform: translate(-50%, -50%) scale(0.9);";const o=document.createElement("button");o.className="vjs-mobile-btn",o.innerHTML='\n    <svg class="play-icon" viewBox="0 0 24 24" fill="white" style="width: 50px; height: 50px;">\n      <polygon points="8 5 19 12 8 19 8 5"/>\n    </svg>\n    <svg class="pause-icon" viewBox="0 0 24 24" fill="white" style="width: 50px; height: 50px; display: none;">\n      <rect x="6" y="4" width="4" height="16" rx="2"/>\n      <rect x="14" y="4" width="4" height="16" rx="2"/>\n    </svg>\n  ',o.style.cssText=a(130)+"left: 50%; top: 50%; transform: translate(-50%, -50%) scale(0.9);";const l=document.createElement("button");l.className="vjs-mobile-btn",l.innerHTML='\n    <div style="display: flex; flex-direction: column; align-items: center; gap: 4px;">\n      <svg viewBox="0 0 24 24" fill="white" style="width: 32px; height: 32px;">\n        <path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"/>\n      </svg>\n      <span style="font-size: 14px; font-weight: bold;">+10</span>\n    </div>\n  ',l.style.cssText=a(110)+"right: 20%; top: 50%; transform: translate(50%, -50%) scale(0.9);";const d=document.createElement("button");d.className="vjs-mobile-btn",d.innerHTML='\n    <svg viewBox="0 0 24 24" fill="white" style="width: 32px; height: 32px;">\n      <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n    </svg>\n  ',d.style.cssText=a(100)+"left: 50%; top: 50px; transform: translate(-50%, 0) scale(0.9);",s.appendChild(i),s.appendChild(o),s.appendChild(l),s.appendChild(d);let c=null,u=0,m=null,p=null;const b=e=>{[i,o,l,d].forEach(e=>{e.style.opacity="0",e.style.transform=e===i?"translate(-50%, -50%) scale(0.9)":e===l?"translate(50%, -50%) scale(0.9)":e===d?"translate(-50%, 0) scale(0.9)":"translate(-50%, -50%) scale(0.9)"}),e.style.opacity="1",e.style.transform=e===i?"translate(-50%, -50%) scale(1)":e===l?"translate(50%, -50%) scale(1)":e===d?"translate(-50%, 0) scale(1)":"translate(-50%, -50%) scale(1)",c=e,p&&clearTimeout(p),p=setTimeout(()=>{e.style.opacity="0",e.style.transform=e===i?"translate(-50%, -50%) scale(0.9)":e===l?"translate(50%, -50%) scale(0.9)":e===d?"translate(-50%, 0) scale(0.9)":"translate(-50%, -50%) scale(0.9)",c=null},1500)},N=()=>{const t=o.querySelector(".play-icon"),r=o.querySelector(".pause-icon");e.paused()?(t.style.display="block",r.style.display="none"):(t.style.display="none",r.style.display="block")},f=t=>{t.preventDefault();const r=t.changedTouches[0],n=s.getBoundingClientRect(),a=r.clientX-n.left,p=r.clientY-n.top,f=n.width,h=n.height,x=Date.now(),v=x-u<250;let j=null,y=null,D=null;p<.2*h?(j="exit",y=d,D=()=>e.exitFullscreen()):a<.3*f?(j="rewind",y=i,D=()=>{try{if(!e)return;const t=e.currentTime();e.currentTime(t-10)}catch(g){console.error("[MobileControls] Rewind error:",g)}}):a>.7*f?(j="forward",y=l,D=()=>{try{if(!e)return;const t=e.currentTime();e.currentTime(t+10)}catch(g){console.error("[MobileControls] Forward error:",g)}}):(j="center",y=o,D=()=>{e.paused()?e.play():e.pause()}),"center"===j?(D(),N(),b(y)):v&&m===j||c===y?(D(),b(y)):b(y),u=x,m=j};return s.addEventListener("touchend",f),e.on("play",N),e.on("pause",N),e.on("playing",N),e.el().appendChild(s),e.on("fullscreenchange",()=>{e.isFullscreen()?(s.style.display="block",N()):s.style.display="none"}),()=>{p&&clearTimeout(p),n.removeEventListener("touchend",r),s.removeEventListener("touchend",f),s.parentNode&&s.parentNode.removeChild(s)}})(h)),h.on("error",()=>{const e=h.error();if(!e)return;console.error("Video.js error:",{code:e.code,message:e.message,type:e.type});let t="Video playback error";switch(e.code){case 1:t="Video loading was aborted";break;case 2:t="Network error occurred while loading video";break;case 3:t="Video decoding failed. The file may be corrupted";break;case 4:t="Video format not supported by your browser",o&&(t+=". On iOS, try opening in Safari");break;default:t=e.message||"Unknown video error"}console.error("User-facing error:",t)}),n&&N.current?(h.on("seeked",()=>{x()}),h.on("timeupdate",()=>{if(!h||h.seeking())return;const e=h.currentTime(),t=Math.floor(e);m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{N.current&&b.current&&N.current.mutate({id:b.current.id,data:{playback_seconds:t}})},3e3)}),h.on("pause",()=>{x()}),h.on("loadedmetadata",()=>{const t=h.duration(),r=e.playback_seconds||0;r>0&&r<t-5&&h.currentTime(r)})):h.on("loadedmetadata",()=>{h.currentTime(0)}),h.on("timeupdate",()=>{if(p.current)return;const e=h.currentTime(),t=h.duration();t>0&&e/t>=.9&&(p.current=!0,a&&a())}),s&&h.on("ended",()=>{s()}),()=>{d?m.current&&clearTimeout(m.current):(m.current&&clearTimeout(m.current),j&&j(),document.removeEventListener("keydown",v),u.current&&(u.current.dispose(),u.current=null))}},d?[e?.id,o]:[e?.id]),t.useEffect(()=>{const e=()=>{if(u.current&&!u.current.isDisposed()&&n&&N.current&&b.current)try{const e=Math.floor(u.current.currentTime());N.current.mutate({id:b.current.id,data:{playback_seconds:e}})}catch(e){console.warn("[useVideoJsPlayer] Failed to save progress on unload:",e)}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[n]),t.useEffect(()=>()=>{u.current&&!u.current.isDisposed()&&(u.current.pause(),u.current.dispose(),u.current=null)},[]),t.useEffect(()=>{u.current&&function(e,t){const r=e.controlBar.getChild("TheaterButton");r&&(t?(r.addClass("vjs-theater-mode-active"),r.controlText("Default view")):(r.removeClass("vjs-theater-mode-active"),r.controlText("Theater mode")))}(u.current,o)},[o]),u}function us(e){const[r,n]=t.useState(()=>"undefined"!=typeof window&&window.matchMedia(e).matches);return t.useEffect(()=>{if("undefined"==typeof window)return;const t=window.matchMedia(e),r=e=>n(e.matches);return n(t.matches),t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[e]),r}function ms(){const{videoId:e}=h(),n=m(),s=f(),{data:a,isLoading:i}=r({queryKey:["video",o=e],queryFn:()=>T.getVideo(o),enabled:!!o});var o;const{data:l}=J({}),d=O(),c=q(),{showNotification:u}=I(),b=t.useRef(null),N=t.useRef(null),x=t.useRef(u),v=t.useRef(a),[j,y]=t.useState(!1),[g,D]=t.useState(!1),[E,V]=t.useState(!1),[w,k]=t.useState(()=>"true"===localStorage.getItem("theaterMode")),S=us("(max-width: 767px)"),P=l?.queue?.length||0;t.useEffect(()=>{x.current=u,v.current=a}),t.useEffect(()=>{w&&V(!0)},[w]);const _=t.useCallback(()=>{a?.watched||d.mutateAsync({id:a.id,data:{watched:!0}}).then(()=>{x.current("Video marked as watched","success")}).catch(e=>{console.error("Error marking video as watched:",e),x.current("Failed to mark as watched","error")})},[a?.id,a?.watched,d]),L=cs({video:a,videoRef:b,saveProgress:!0,onEnded:null,onWatched:_,updateVideoMutation:d,isTheaterMode:w,setIsTheaterMode:k});t.useEffect(()=>{if(L.current&&a?.file_path)try{const e=L.current;if(e.isDisposed&&e.isDisposed())return;const t=rt(a.file_path);if(!t)return;e.src({src:t,type:"video/mp4"});const r=()=>{e.error()&&x.current("Failed to load video","error")};return e.on("error",r),()=>{e.off("error",r)}}catch(e){}},[L,a?.file_path,a?.id]);if(i)return C.jsxDEV(we,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:150,columnNumber:12},this);if(!a)return C.jsxDEV("div",{className:"text-center py-12",children:[C.jsxDEV("p",{className:"text-gray-400 text-lg",children:"Video not found"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:156,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>n(-1),className:"btn btn-primary mt-4",children:"Go Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:157,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:155,columnNumber:7},this);if(!a.file_path||"library"!==a.status)return C.jsxDEV("div",{className:"text-center py-12",children:[C.jsxDEV("p",{className:"text-gray-400 text-lg",children:"Video not downloaded yet"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:167,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>n(-1),className:"btn btn-primary mt-4",children:"Go Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:168,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:166,columnNumber:7},this);const M=async()=>{try{await c.mutateAsync(a.id),u("Video deleted","success"),y(!1),n(-1)}catch(e){u(ce(e.message,"delete video"),"error")}},A=async()=>{try{await d.mutateAsync({id:a.id,data:{watched:!a.watched}}),u(a.watched?"Marked as unwatched":"Marked as watched","success")}catch(e){u(ce(e.message,"update video"),"error")}},R=({to:e,icon:t,label:r,badge:n,onClick:a,isButton:i=!1})=>{const o="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors "+(s.pathname===e?"bg-accent/20 text-accent-text":"text-text-secondary hover:bg-dark-hover hover:text-text-primary");return i?C.jsxDEV("button",{onClick:a,className:o,title:r,children:[t,!E&&C.jsxDEV("span",{className:"text-sm font-medium",children:r},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:223,columnNumber:33},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:221,columnNumber:9},this):C.jsxDEV(p,{to:e,className:o,title:r,children:[t,!E&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{className:"text-sm font-medium",children:r},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:233,columnNumber:13},this),n>0&&C.jsxDEV("span",{className:"ml-auto bg-accent text-dark-primary text-xs font-bold px-2 py-0.5 rounded-full",children:n},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:235,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:232,columnNumber:11},this),E&&n>0&&C.jsxDEV("span",{className:"absolute -top-1 -right-1 bg-accent text-dark-primary text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full",children:n},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:242,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:229,columnNumber:7},this)};return S?C.jsxDEV("div",{className:"flex flex-col h-screen bg-dark-primary animate-fade-in",children:[C.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:[C.jsxDEV("div",{className:"player-wrapper-mobile",children:C.jsxDEV("video",{ref:b,className:"video-js vjs-big-play-centered",playsInline:!0,preload:"auto"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:258,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:257,columnNumber:11},this),C.jsxDEV("div",{className:"px-4 py-3 space-y-3",children:[C.jsxDEV("h1",{className:"text-base font-semibold text-text-primary leading-tight line-clamp-2",children:a.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:268,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[C.jsxDEV(p,{to:`/channel/${a.channel_id}/library`,className:"hover:text-text-primary transition-colors font-medium",children:a.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:273,columnNumber:15},this),C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:279,columnNumber:15},this),C.jsxDEV("span",{children:nt(a.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:280,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:272,columnNumber:13},this),C.jsxDEV("div",{className:"flex flex-wrap gap-2",children:[C.jsxDEV("button",{ref:N,onClick:()=>D(!0),className:"flex items-center justify-center px-5 py-3 bg-dark-secondary border border-dark-border rounded-lg text-text-primary text-sm font-medium transition-colors",children:"Playlist"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:285,columnNumber:15},this),C.jsxDEV("button",{onClick:A,className:"flex items-center justify-center px-5 py-3 border rounded-lg text-sm font-medium transition-colors "+(a.watched?"bg-accent border-accent text-white":"bg-dark-secondary border-dark-border text-text-primary"),children:C.jsxDEV(Qe,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:300,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:292,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>y(!0),className:"flex items-center justify-center px-5 py-3 bg-dark-secondary border border-dark-border rounded-lg text-red-400 text-sm font-medium transition-colors",children:"Delete"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:302,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:284,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:267,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:255,columnNumber:9},this),C.jsxDEV(ns,{queueCount:P},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:313,columnNumber:9},this),C.jsxDEV(at,{isOpen:j,onClose:()=>y(!1),onConfirm:M,title:"Delete Video",message:`Are you sure you want to delete "${a.title}"?`,confirmText:"Delete",cancelText:"Cancel",isDanger:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:316,columnNumber:9},this),g&&C.jsxDEV(st,{videoId:a.id,video:a,triggerRef:N,onClose:()=>D(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:327,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:253,columnNumber:7},this):C.jsxDEV("div",{className:"flex h-screen overflow-hidden animate-fade-in",children:[C.jsxDEV("nav",{className:"flex flex-col bg-dark-secondary border-r border-dark-border transition-all duration-200 "+(E?"w-16":"w-44"),children:[C.jsxDEV("div",{className:"flex items-center justify-between p-3 border-b border-dark-border",children:[!E&&C.jsxDEV("span",{className:"text-sm font-medium text-text-secondary",children:"YTandChill"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:350,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>{V(!E)},className:"p-2 rounded-lg text-text-secondary hover:bg-dark-hover hover:text-text-primary transition-colors",title:E?"Expand sidebar":"Collapse sidebar",children:E?C.jsxDEV(Ye,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:357,columnNumber:33},this):C.jsxDEV(Ge,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:357,columnNumber:48},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:352,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:348,columnNumber:9},this),C.jsxDEV("div",{className:"flex-1 p-2 space-y-1",children:[C.jsxDEV(R,{to:"/",icon:C.jsxDEV(Ke,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:363,columnNumber:33},this),label:"Channels"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:363,columnNumber:11},this),C.jsxDEV(R,{to:"/library",icon:C.jsxDEV(Ue,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:364,columnNumber:40},this),label:"Library"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:364,columnNumber:11},this),C.jsxDEV(R,{to:"/queue",icon:C.jsxDEV(He,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:365,columnNumber:38},this),label:"Queue",badge:P},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:365,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:362,columnNumber:9},this),C.jsxDEV("div",{className:"p-2 border-t border-dark-border space-y-1",children:[C.jsxDEV(R,{to:"/settings",icon:C.jsxDEV(Re,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:370,columnNumber:41},this),label:"Settings"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:370,columnNumber:11},this),C.jsxDEV(R,{isButton:!0,onClick:async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),window.location.replace("/login")}catch(e){console.error("Logout failed:",e),window.location.replace("/login")}},icon:C.jsxDEV(Je,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:371,columnNumber:58},this),label:"Logout"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:371,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:369,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:342,columnNumber:7},this),C.jsxDEV("div",{className:"flex-1 flex flex-col overflow-y-auto bg-dark-primary",children:C.jsxDEV("div",{className:"shrink-0 "+(w?"bg-black flex justify-center":"p-4 pb-0"),children:C.jsxDEV("div",{className:"flex flex-col",style:w?{width:"100%",maxWidth:"calc(100vh * 16 / 9)"}:{},children:[C.jsxDEV("div",{className:"player-wrapper "+(w?"":"shadow-card-hover"),style:{height:w?"100vh":"calc(100vh - 180px)",maxWidth:w?"100%":"calc((100vh - 180px) * 16 / 9)",width:"100%"},children:C.jsxDEV("video",{ref:b,className:"video-js vjs-big-play-centered",playsInline:!0,preload:"auto"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:400,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:392,columnNumber:13},this),C.jsxDEV("div",{className:""+(w?"bg-dark-primary py-3 px-1":"py-3"),children:[C.jsxDEV("h1",{className:"text-lg font-bold text-text-primary leading-tight line-clamp-2",children:a.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:410,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center gap-2 mt-1 text-sm text-text-secondary",children:[C.jsxDEV(p,{to:`/channel/${a.channel_id}/library`,className:"hover:text-text-primary transition-colors font-medium",children:a.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:415,columnNumber:17},this),C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:421,columnNumber:17},this),C.jsxDEV("span",{children:nt(a.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:422,columnNumber:17},this),C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:423,columnNumber:17},this),C.jsxDEV("span",{children:a.upload_date?new Date(a.upload_date.slice(0,4),a.upload_date.slice(4,6)-1,a.upload_date.slice(6,8)).toLocaleDateString():"Unknown date"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:424,columnNumber:17},this),a.watched&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:435,columnNumber:21},this),C.jsxDEV("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-accent/20 text-accent-text text-xs font-semibold",children:[C.jsxDEV($e,{className:"w-3 h-3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:437,columnNumber:23},this),"Watched"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:436,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:434,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:414,columnNumber:15},this),C.jsxDEV("div",{className:"flex gap-2 mt-3",children:[C.jsxDEV("button",{onClick:()=>{const e=s.state?.from||`/channel/${a.channel_id}/library`;n(e)},className:"flex items-center justify-center px-4 py-2 bg-dark-surface border border-dark-border rounded-lg text-text-secondary hover:bg-dark-hover hover:text-text-primary transition-colors text-sm font-medium",children:"Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:446,columnNumber:17},this),C.jsxDEV("button",{ref:N,onClick:()=>D(!0),className:"flex items-center justify-center px-4 py-2 bg-dark-surface border border-dark-border rounded-lg text-text-secondary hover:bg-accent hover:border-accent hover:text-dark-primary transition-colors text-sm font-medium",children:"Playlist"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:453,columnNumber:17},this),C.jsxDEV("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors text-sm font-medium "+(a.watched?"bg-accent border-accent text-dark-primary":"bg-dark-surface border-dark-border text-text-secondary hover:bg-accent hover:border-accent hover:text-dark-primary"),children:[C.jsxDEV(Qe,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:469,columnNumber:19},this),C.jsxDEV("span",{children:a.watched?"Watched":"Mark Watched"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:470,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:461,columnNumber:17},this),C.jsxDEV("button",{onClick:()=>y(!0),className:"flex items-center justify-center px-4 py-2 bg-dark-surface border border-dark-border rounded-lg text-red-400 hover:bg-red-600 hover:border-red-600 hover:text-white transition-colors text-sm font-medium",children:"Delete"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:473,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:445,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:409,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:383,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:378,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:376,columnNumber:7},this),C.jsxDEV(at,{isOpen:j,onClose:()=>y(!1),onConfirm:M,title:"Delete Video",message:`Are you sure you want to delete "${a.title}"? This will permanently remove the video file from your system.`,confirmText:"Delete",cancelText:"Cancel",isDanger:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:486,columnNumber:7},this),g&&C.jsxDEV(st,{videoId:a.id,video:a,triggerRef:N,onClose:()=>D(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:498,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:340,columnNumber:5},this)}function ps(){const{playlistId:e,categoryId:r}=h(),[n,s]=b(),a=m(),o=f(),{showNotification:l}=I(),{data:d}=J({}),c=d?.queue?.length||0,u=n.get("v"),N=t.useRef(!1),{data:x,isLoading:v}=Q(e),{data:j,isLoading:y}=W({enabled:!!r}),g=t.useMemo(()=>{if(!r||!j)return[];const e=parseInt(r,10);return isNaN(e)?[]:j.filter(t=>t.category_id===e)},[r,j]),D=i({queries:g.map(e=>({queryKey:["playlist",e.id],queryFn:async()=>{const t=await fetch(`/api/playlists/${e.id}`);if(!t.ok)throw new Error("Failed to fetch playlist");return t.json()},enabled:!!r&&g.length>0}))}),E=O(),V=q(),[w,k]=t.useState(!1),[S,P]=t.useState(0),[_,L]=t.useState(()=>"true"===localStorage.getItem("playlistLoop")),[M,T]=t.useState([]),[A,R]=t.useState(!1),[B,$]=t.useState(()=>"true"===localStorage.getItem("theaterMode")),[F,z]=t.useState(()=>"true"===localStorage.getItem("queueCollapsed")),[K,U]=t.useState(!1),[H,Y]=t.useState(!1),[G,X]=t.useState(!1),[Z,ee]=t.useState(!0),[te,re]=t.useState(!1),ne=us("(max-width: 767px)"),se=t.useRef(null),ae=t.useRef(null);t.useRef(null);const ie=t.useRef(null),oe=t.useRef(null),le=t.useRef(null),de=t.useRef(null),ue=t.useMemo(()=>{if(e&&x?.videos)return x.videos.filter(e=>"library"===e.status&&e.file_path);if(r&&D.length>0){if(!D.every(e=>e.isSuccess))return[];const e=[];return D.forEach(t=>{if(t.data?.videos){const r=t.data.videos.filter(e=>"library"===e.status&&e.file_path);e.push(...r)}}),e}return[]},[e,r,x,D]),me=t.useMemo(()=>e&&x?.name?x.name:r&&g.length>0?g[0]?.category_name||"Category":"Playlist",[e,x,r,g]),pe=t.useMemo(()=>e?v:!!r&&(y||D.some(e=>e.isLoading)),[e,r,v,y,D]),be=t.useMemo(()=>M.length===ue.length&&ue.length>0?M:ue.map((e,t)=>t),[M,ue.length]),Ne=t.useMemo(()=>{if(0===ue.length)return null;const e=Math.min(S,be.length-1),t=be[e];return void 0===t||t>=ue.length?ue[0]:ue[t]},[ue,be,S]),fe=t.useMemo(()=>{if(0===ue.length)return null;const e=S+1;return e>=be.length?_?ue[be[0]]:null:ue[be[e]]},[ue,be,S,_]);t.useEffect(()=>{if(!N.current&&0!==ue.length){if(u){const e=parseInt(u,10);if(!isNaN(e)){const t=ue.findIndex(t=>t.id===e);if(-1!==t){const e=be.findIndex(e=>e===t);P(-1!==e?e:t)}}}N.current=!0}},[ue.length]);const he=t.useCallback(e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const e=Math.floor(Math.random()*(r+1));[t[r],t[e]]=[t[e],t[r]]}return t},[]),xe=t.useCallback(()=>{if(ue.length>0){const e=ue.map((e,t)=>t),t=be[S]??0,r=e.filter(e=>e!==t),n=[t,...he(r)];T(n),P(0)}},[ue,be,S,he]),ve=t.useCallback(()=>{L(e=>{const t=!e;return localStorage.setItem("playlistLoop",t.toString()),t})},[]),je=t.useCallback(()=>{0!==ue.length&&(S<be.length-1?P(S+1):_&&(P(0),l("Playlist restarted","info")))},[S,be.length,_,ue.length,l]),ye=t.useCallback(()=>{0!==ue.length&&(S>0?P(S-1):_&&P(be.length-1))},[S,be.length,_,ue.length]),ge=t.useCallback(e=>{e>=0&&e<be.length&&P(e)},[be.length]),De=t.useCallback(()=>{Ne&&a(e?`/playlist/${e}`:-1)},[Ne,e,a]),Ee=t.useCallback(async()=>{if(Ne)try{await V.mutateAsync(Ne.id),l("Video deleted","success"),Y(!1),je&&ue.length>1?je():a(-1)}catch(e){l(ce(e.message,"delete video"),"error")}},[Ne,V,l,je,ue.length,a]),Ve=t.useCallback(async()=>{if(Ne)try{await E.mutateAsync({id:Ne.id,data:{watched:!Ne.watched}}),l(Ne.watched?"Marked as unwatched":"Marked as watched","success")}catch(e){l(ce(e.message,"update video"),"error")}},[Ne,E,l]);t.useCallback(()=>{z(e=>{const t=!e;return localStorage.setItem("queueCollapsed",t.toString()),$(t),localStorage.setItem("theaterMode",t.toString()),t})},[]);const ke=t.useCallback(()=>{if(!le.current)return;const{scrollLeft:e,scrollWidth:t,clientWidth:r}=le.current;X(e>10),ee(e<t-r-10)},[]),Ce=t.useCallback(e=>{if(le.current){const t=400;le.current.scrollBy({left:"left"===e?-t:t,behavior:"smooth"})}},[]);t.useEffect(()=>{const e=le.current;if(e&&B)return e.addEventListener("scroll",ke),requestAnimationFrame(()=>{ke()}),()=>e.removeEventListener("scroll",ke)},[B,ke,be.length]);const Se=t.useCallback(()=>{Ne?.id&&!Ne?.watched&&E.mutateAsync({id:Ne.id,data:{watched:!0}}).then(()=>{l("Video marked as watched","success")}).catch(()=>{l("Failed to mark as watched","error")})},[Ne?.id,Ne?.watched,E,l]),Pe=t.useCallback(e=>{$(e),localStorage.setItem("theaterMode",e.toString()),z(e),localStorage.setItem("queueCollapsed",e.toString())},[]);t.useEffect(()=>{B&&k(!0)},[B]);const _e=t.useCallback(()=>{k(e=>!e)},[]),Le=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),window.location.replace("/login")}catch(e){console.error("Logout failed:",e),window.location.replace("/login")}};t.useEffect(()=>{de.current=je},[je]);const Me=cs({video:Ne,videoRef:se,saveProgress:!1,onEnded:()=>de.current?.(),onWatched:Se,updateVideoMutation:E,isTheaterMode:B,setIsTheaterMode:Pe,persistPlayer:!0});if(t.useEffect(()=>{Ne&&s({v:Ne.id},{replace:!0})},[Ne?.id,s]),t.useEffect(()=>{const e=e=>{if("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)return;const t=Me.current?.isFullscreen?.();if(!t)switch(e.key.toLowerCase()){case"n":e.preventDefault(),je(),l("Next video","info");break;case"p":e.preventDefault(),ye(),l("Previous video","info");break;case"l":e.preventDefault(),ve(),l(_?"Loop disabled":"Loop enabled","info");break;case"s":e.preventDefault(),xe(),l("Playlist shuffled","info");break;case"escape":e.preventDefault(),t?Me.current?.exitFullscreen?.():De()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[je,ye,ve,xe,_,l,De,Me]),t.useEffect(()=>{if(fe&&ie.current){const e=rt(fe.file_path);e&&(ie.current.src=e,ie.current.load())}},[fe?.id]),t.useEffect(()=>{if(!Ne||!Me.current)return;if(Me.current.isDisposed&&Me.current.isDisposed())return;let e;try{if(e=rt(Ne.file_path),!e)return;Me.current.pause(),Me.current.src({src:e,type:"video/mp4"}),Me.current.load()}catch(t){}Me.current.one("loadedmetadata",()=>{Me.current.currentTime(0);/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||Me.current.play().catch(()=>{})})},[Ne?.id,Me]),pe)return C.jsxDEV(we,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:539,columnNumber:12},this);if(!Ne)return C.jsxDEV("div",{className:"text-center py-12",children:[C.jsxDEV("p",{className:"text-gray-400 text-lg",children:"No video selected"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:545,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>a(-1),className:"btn btn-primary mt-4",children:"Go Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:546,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:544,columnNumber:7},this);if(!Ne.file_path||"library"!==Ne.status)return C.jsxDEV("div",{className:"text-center py-12",children:[C.jsxDEV("p",{className:"text-gray-400 text-lg",children:"Video not downloaded yet"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:556,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>a(-1),className:"btn btn-primary mt-4",children:"Go Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:557,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:555,columnNumber:7},this);const Ie=({to:e,icon:t,label:r,badge:n,onClick:s,isButton:a=!1})=>{const i="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors "+(o.pathname===e?"bg-accent/20 text-accent-text":"text-text-secondary hover:bg-dark-hover hover:text-text-primary");return a?C.jsxDEV("button",{onClick:s,className:i,title:r,children:[t,!w&&C.jsxDEV("span",{className:"text-sm font-medium",children:r},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:577,columnNumber:33},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:575,columnNumber:9},this):C.jsxDEV(p,{to:e,className:i,title:r,children:[t,!w&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{className:"text-sm font-medium",children:r},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:587,columnNumber:13},this),n>0&&C.jsxDEV("span",{className:"ml-auto bg-accent text-dark-primary text-xs font-bold px-2 py-0.5 rounded-full",children:n},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:589,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:586,columnNumber:11},this),w&&n>0&&C.jsxDEV("span",{className:"absolute -top-1 -right-1 bg-accent text-dark-primary text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full",children:n},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:596,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:583,columnNumber:7},this)};return ne?C.jsxDEV("div",{className:"flex flex-col h-screen bg-dark-primary animate-fade-in",children:[C.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:[C.jsxDEV("div",{className:"player-wrapper-mobile",children:C.jsxDEV("video",{ref:se,className:"video-js vjs-big-play-centered",playsInline:!0,preload:"auto"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1172,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1171,columnNumber:9},this),C.jsxDEV("div",{className:"px-4 py-3 space-y-3",children:[C.jsxDEV("div",{className:"flex items-start gap-2",children:[C.jsxDEV("button",{onClick:ye,disabled:0===S&&!_,className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-dark-surface border border-dark-border text-text-secondary hover:bg-accent hover:border-accent hover:text-dark-primary disabled:opacity-30 disabled:cursor-not-allowed transition-all",title:"Previous",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("path",{d:"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1191,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1190,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1184,columnNumber:13},this),C.jsxDEV("h1",{className:"flex-1 text-base font-semibold text-text-primary leading-tight line-clamp-2",children:Ne.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1194,columnNumber:13},this),C.jsxDEV("button",{onClick:je,disabled:S===be.length-1&&!_,className:"flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-dark-surface border border-dark-border text-text-secondary hover:bg-accent hover:border-accent hover:text-dark-primary disabled:opacity-30 disabled:cursor-not-allowed transition-all",title:"Next",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("path",{d:"M6 6l8.5 6L6 18V6zm10.5 0v12h2V6h-2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1204,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1203,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1197,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1183,columnNumber:11},this),C.jsxDEV("div",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[C.jsxDEV(p,{to:`/channel/${Ne.channel_id}/library`,className:"hover:text-text-primary transition-colors font-medium",children:Ne.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1210,columnNumber:13},this),C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1216,columnNumber:13},this),C.jsxDEV("span",{children:nt(Ne.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1217,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1209,columnNumber:11},this),C.jsxDEV("div",{className:"flex gap-2",children:[C.jsxDEV("button",{onClick:Ve,className:"flex items-center justify-center px-5 py-3 border rounded-lg text-sm font-medium transition-colors "+(Ne.watched?"bg-accent border-accent text-white":"bg-dark-secondary border-dark-border text-text-primary"),title:Ne.watched?"Mark unwatched":"Mark watched",children:C.jsxDEV(Qe,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1231,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1222,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>Y(!0),className:"flex items-center justify-center px-5 py-3 bg-dark-secondary border border-dark-border rounded-lg text-red-400 text-sm font-medium transition-colors",children:"Delete"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1233,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>R(!0),className:"flex items-center justify-center px-5 py-3 bg-dark-secondary border border-dark-border rounded-lg text-text-primary text-sm font-medium transition-colors ml-auto",children:"Playlist"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1239,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1221,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1181,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1169,columnNumber:7},this),A&&C.jsxDEV("div",{className:"fixed inset-0 z-50 bg-dark-primary flex flex-col animate-fade-in",children:[C.jsxDEV("div",{className:"p-4 border-b border-dark-border flex items-center justify-between",children:[C.jsxDEV("div",{children:[C.jsxDEV("h3",{className:"font-semibold text-base text-text-primary",children:me},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1255,columnNumber:15},this),C.jsxDEV("p",{className:"text-xs text-text-secondary",children:[S+1," of ",ue.length," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1256,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1254,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("button",{onClick:xe,className:"w-10 h-10 flex items-center justify-center rounded-lg bg-dark-surface border border-dark-border text-text-secondary active:bg-red-500 active:border-red-500 active:text-white transition-all",title:"Shuffle",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"16 3 21 3 21 8"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1265,columnNumber:19},this),C.jsxDEV("line",{x1:"4",y1:"20",x2:"21",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1266,columnNumber:19},this),C.jsxDEV("polyline",{points:"21 16 21 21 16 21"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1267,columnNumber:19},this),C.jsxDEV("line",{x1:"15",y1:"15",x2:"21",y2:"21"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1268,columnNumber:19},this),C.jsxDEV("line",{x1:"4",y1:"4",x2:"9",y2:"9"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1269,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1264,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1259,columnNumber:15},this),C.jsxDEV("button",{onClick:ve,className:"w-10 h-10 flex items-center justify-center rounded-lg border transition-all "+(_?"bg-red-500 border-red-500 text-white":"bg-dark-surface border-dark-border text-text-secondary"),title:_?"Disable loop":"Enable loop",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M17 1l4 4-4 4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1282,columnNumber:19},this),C.jsxDEV("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1283,columnNumber:19},this),C.jsxDEV("path",{d:"M7 23l-4-4 4-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1284,columnNumber:19},this),C.jsxDEV("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1285,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1281,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1272,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>R(!1),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-dark-surface border border-dark-border text-text-secondary hover:bg-red-500 hover:border-red-500 hover:text-white transition-all",title:"Close",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1294,columnNumber:19},this),C.jsxDEV("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1295,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1293,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1288,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1258,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1253,columnNumber:11},this),C.jsxDEV("div",{className:"flex-1 overflow-y-auto",children:be.map((e,t)=>{const r=ue[e];if(!r)return null;const n=t===S,s=r.watch_position&&r.duration_sec?Math.min(r.watch_position/r.duration_sec*100,100):0;return C.jsxDEV("button",{onClick:()=>{ge(t),R(!1)},className:"w-full p-3 flex gap-3 hover:bg-surface-hover transition-colors "+(n?"bg-accent/20 border-l-2 border-accent":""),children:[C.jsxDEV("div",{className:"relative flex-shrink-0 w-24 h-14 bg-black rounded overflow-hidden",children:[r.thumb_url?C.jsxDEV("img",{src:r.thumb_url,alt:r.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1324,columnNumber:23},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center bg-surface-hover",children:C.jsxDEV("svg",{className:"w-6 h-6 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1328,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1327,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1326,columnNumber:23},this),C.jsxDEV("div",{className:"absolute bottom-0.5 right-0.5 bg-black/80 text-white text-xs px-1 rounded",children:nt(r.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1332,columnNumber:21},this),r.watched&&C.jsxDEV("div",{className:"absolute top-0.5 left-0.5 bg-accent/90 text-accent-text px-1 rounded",children:C.jsxDEV($e,{className:"w-2.5 h-2.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1337,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1336,columnNumber:23},this),s>0&&!r.watched&&C.jsxDEV("div",{className:"watch-progress-bar",children:C.jsxDEV("div",{className:"watch-progress-bar-fill",style:{width:`${s}%`}},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1342,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1341,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1322,columnNumber:19},this),C.jsxDEV("div",{className:"flex-1 text-left min-w-0",children:[C.jsxDEV("h3",{className:"text-sm font-medium line-clamp-2 leading-tight "+(n?"text-accent-text":"text-text-primary"),children:r.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1347,columnNumber:21},this),C.jsxDEV("p",{className:"text-xs text-text-secondary mt-1",children:r.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1350,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1346,columnNumber:19},this),n&&C.jsxDEV(Oe,{className:"w-5 h-5 text-accent flex-shrink-0 self-center"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1352,columnNumber:33},this)]},r.id,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1312,columnNumber:17},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1302,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1251,columnNumber:9},this),C.jsxDEV(ns,{queueCount:c},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1361,columnNumber:7},this),C.jsxDEV("video",{ref:ie,style:{display:"none"},preload:"auto"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1364,columnNumber:7},this),C.jsxDEV(at,{isOpen:H,onClose:()=>Y(!1),onConfirm:Ee,title:"Delete Video",message:`Are you sure you want to delete "${Ne.title}"? This will permanently remove the video file from your system.`,confirmText:"Delete",cancelText:"Cancel",isDanger:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1371,columnNumber:7},this),K&&C.jsxDEV(st,{videoId:Ne.id,video:Ne,triggerRef:oe,onClose:()=>U(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1384,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1167,columnNumber:5},this):C.jsxDEV("div",{className:"flex h-screen overflow-hidden animate-fade-in",children:[C.jsxDEV("nav",{className:"flex flex-col bg-dark-secondary border-r border-dark-border transition-all duration-200 "+(w?"w-16":"w-44"),children:[C.jsxDEV("div",{className:"flex items-center justify-between p-3 border-b border-dark-border",children:[!w&&C.jsxDEV("span",{className:"text-sm font-medium text-text-secondary",children:"YTandChill"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:617,columnNumber:15},this),C.jsxDEV("button",{onClick:_e,className:"p-2 rounded-lg text-text-secondary hover:bg-dark-hover hover:text-text-primary transition-colors",title:w?"Expand sidebar":"Collapse sidebar",children:w?C.jsxDEV(Ye,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:624,columnNumber:35},this):C.jsxDEV(Ge,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:624,columnNumber:50},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:619,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:615,columnNumber:11},this),C.jsxDEV("div",{className:"flex-1 p-2 space-y-1",children:[C.jsxDEV(Ie,{to:"/",icon:C.jsxDEV(Ke,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:630,columnNumber:35},this),label:"Channels"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:630,columnNumber:13},this),C.jsxDEV(Ie,{to:"/library",icon:C.jsxDEV(Ue,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:631,columnNumber:42},this),label:"Library"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:631,columnNumber:13},this),C.jsxDEV(Ie,{to:"/queue",icon:C.jsxDEV(He,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:632,columnNumber:40},this),label:"Queue",badge:c},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:632,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:629,columnNumber:11},this),C.jsxDEV("div",{className:"p-2 border-t border-dark-border space-y-1",children:[C.jsxDEV(Ie,{to:"/settings",icon:C.jsxDEV(Re,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:637,columnNumber:43},this),label:"Settings"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:637,columnNumber:13},this),C.jsxDEV(Ie,{isButton:!0,onClick:Le,icon:C.jsxDEV(Je,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:638,columnNumber:60},this),label:"Logout"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:638,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:636,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:609,columnNumber:9},this),C.jsxDEV("div",{className:"flex-1 bg-dark-primary min-h-0 overflow-y-auto",children:[B&&C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"bg-black flex justify-center",children:C.jsxDEV("div",{style:{width:"100%",maxWidth:"calc(100vh * 16 / 9)"},children:C.jsxDEV("div",{className:"player-wrapper",style:{height:"100vh",width:"100%"},children:C.jsxDEV("video",{ref:se,className:"video-js vjs-big-play-centered",playsInline:!0,preload:"auto"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:654,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:650,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:649,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:648,columnNumber:15},this),C.jsxDEV("div",{className:"bg-dark-primary py-4 px-6",children:[C.jsxDEV("h1",{className:"text-2xl font-bold text-text-primary leading-tight",children:Ne.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:666,columnNumber:17},this),C.jsxDEV("div",{className:"flex flex-wrap items-center gap-3 text-sm text-text-secondary mt-2",children:[C.jsxDEV(p,{to:`/channel/${Ne.channel_id}/library`,className:"hover:text-text-primary transition-colors font-medium",children:Ne.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:670,columnNumber:19},this),C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:676,columnNumber:19},this),C.jsxDEV("span",{children:nt(Ne.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:677,columnNumber:19},this),C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:678,columnNumber:19},this),C.jsxDEV("span",{children:Ne.upload_date?new Date(Ne.upload_date.slice(0,4),Ne.upload_date.slice(4,6)-1,Ne.upload_date.slice(6,8)).toLocaleDateString():"Unknown date"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:679,columnNumber:19},this),Ne.watched&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:690,columnNumber:23},this),C.jsxDEV("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-accent/20 border border-accent/40 text-accent-text font-semibold text-xs",children:[C.jsxDEV($e,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:692,columnNumber:25},this),"Watched"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:691,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:689,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:669,columnNumber:17},this),C.jsxDEV("div",{className:"flex gap-2 mt-3",children:[C.jsxDEV("button",{onClick:De,className:"flex items-center gap-2 px-3 py-1.5 bg-dark-surface border border-dark-border rounded-lg text-text-secondary hover:bg-dark-hover hover:text-text-primary transition-colors text-sm",children:[C.jsxDEV(ze,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:705,columnNumber:21},this),C.jsxDEV("span",{className:"font-medium",children:"Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:706,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:701,columnNumber:19},this),C.jsxDEV("button",{ref:oe,onClick:()=>U(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-dark-surface border border-dark-border rounded-lg text-text-secondary hover:bg-accent hover:border-accent hover:text-dark-primary transition-colors text-sm",children:[C.jsxDEV(We,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:714,columnNumber:21},this),C.jsxDEV("span",{className:"font-medium",children:"Playlist"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:715,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:709,columnNumber:19},this),C.jsxDEV("button",{onClick:Ve,className:"flex items-center gap-2 px-3 py-1.5 border rounded-lg transition-colors text-sm "+(Ne.watched?"bg-accent border-accent text-dark-primary":"bg-dark-surface border-dark-border text-text-secondary hover:bg-accent hover:border-accent hover:text-dark-primary"),children:[C.jsxDEV(Qe,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:726,columnNumber:21},this),C.jsxDEV("span",{className:"font-medium",children:Ne.watched?"Watched":"Mark Watched"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:727,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:718,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>Y(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-dark-surface border border-dark-border rounded-lg text-text-secondary hover:bg-red-600 hover:border-red-600 hover:text-white transition-colors text-sm",children:[C.jsxDEV(Fe,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:734,columnNumber:21},this),C.jsxDEV("span",{className:"font-medium",children:"Delete"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:735,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:730,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:700,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:665,columnNumber:15},this),C.jsxDEV("div",{className:"bg-surface mx-6 mb-6 rounded-xl shadow-card overflow-hidden",children:[C.jsxDEV("div",{className:"p-4 border-b border-accent/30 flex items-center gap-4",children:[C.jsxDEV("div",{className:"flex-shrink-0",children:[C.jsxDEV("h2",{className:"font-semibold text-text-primary",children:me},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:746,columnNumber:21},this),C.jsxDEV("p",{className:"text-sm text-text-secondary",children:[S+1," of ",ue.length," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:747,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:745,columnNumber:19},this),C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("button",{onClick:ye,disabled:0===S&&!_,className:"icon-btn icon-btn-sm hover:bg-accent hover:border-accent disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous video (P)",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("path",{d:"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:759,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:758,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:752,columnNumber:21},this),C.jsxDEV("button",{onClick:xe,className:"icon-btn icon-btn-sm hover:bg-accent hover:border-accent",title:"Shuffle playlist (S)",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"16 3 21 3 21 8"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:768,columnNumber:25},this),C.jsxDEV("line",{x1:"4",y1:"20",x2:"21",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:769,columnNumber:25},this),C.jsxDEV("polyline",{points:"21 16 21 21 16 21"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:770,columnNumber:25},this),C.jsxDEV("line",{x1:"15",y1:"15",x2:"21",y2:"21"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:771,columnNumber:25},this),C.jsxDEV("line",{x1:"4",y1:"4",x2:"9",y2:"9"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:772,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:767,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:762,columnNumber:21},this),C.jsxDEV("button",{onClick:ve,className:"icon-btn icon-btn-sm hover:bg-accent hover:border-accent "+(_?"bg-accent border-accent":""),title:_?"Disable loop (L)":"Enable loop (L)",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M17 1l4 4-4 4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:781,columnNumber:25},this),C.jsxDEV("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:782,columnNumber:25},this),C.jsxDEV("path",{d:"M7 23l-4-4 4-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:783,columnNumber:25},this),C.jsxDEV("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:784,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:780,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:775,columnNumber:21},this),C.jsxDEV("button",{onClick:je,disabled:S===be.length-1&&!_,className:"icon-btn icon-btn-sm hover:bg-accent hover:border-accent disabled:opacity-30 disabled:cursor-not-allowed",title:"Next video (N)",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("path",{d:"M6 6l8.5 6L6 18V6zm10.5 0v12h2V6h-2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:794,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:793,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:787,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:751,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:743,columnNumber:17},this),C.jsxDEV("div",{className:"relative group",children:[G&&C.jsxDEV("div",{onClick:()=>Ce("left"),className:"absolute left-0 top-0 bottom-0 w-20 z-10 flex items-center justify-center cursor-pointer group/nav","aria-label":"Scroll left",children:[C.jsxDEV("div",{className:"absolute inset-0 backdrop-blur-md transition-all duration-300 opacity-80 group-hover/nav:opacity-95",style:{background:"linear-gradient(to right, hsl(var(--bg-surface) / 0.85) 0%, hsl(var(--bg-surface) / 0.6) 60%, transparent 100%)",borderRadius:"0 0 0 0.75rem"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:810,columnNumber:25},this),C.jsxDEV("div",{className:"absolute right-0 top-4 bottom-4 w-px opacity-0 group-hover/nav:opacity-60 transition-opacity duration-300",style:{background:"linear-gradient(to bottom, transparent, hsl(var(--accent) / 0.5), transparent)"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:818,columnNumber:25},this),C.jsxDEV("div",{className:"relative z-10 w-12 h-12 rounded-full flex items-center justify-center backdrop-blur-xl transition-all duration-300 group-hover/nav:scale-110",style:{background:"radial-gradient(circle at 30% 30%, hsl(var(--bg-surface-hover) / 0.95) 0%, hsl(var(--bg-surface) / 0.9) 100%)",border:"1px solid hsl(0 0% 100% / 0.2)",boxShadow:"inset 0 2px 4px hsl(0 0% 100% / 0.12), inset 0 -2px 4px hsl(0 0% 0% / 0.2), 0 0 0 1px hsl(0 0% 0% / 0.1), 0 8px 24px hsl(0 0% 0% / 0.4)"},children:C.jsxDEV("svg",{className:"w-6 h-6 text-text-primary/90 group-hover/nav:text-text-primary transition-colors drop-shadow-sm",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:C.jsxDEV("polyline",{points:"15 18 9 12 15 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:832,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:831,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:823,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:804,columnNumber:23},this),C.jsxDEV("div",{ref:le,className:"flex overflow-x-auto gap-3 p-4 scrollbar-hide",children:be.map((e,t)=>{const r=ue[e];if(!r)return null;const n=t===S;return C.jsxDEV("button",{onClick:()=>ge(t),className:"flex-shrink-0 w-44 p-2 rounded-lg hover:bg-surface-hover transition-colors "+(n?"bg-accent/15 border border-accent/40":"bg-surface"),children:[C.jsxDEV("div",{className:"relative w-full bg-black rounded overflow-hidden",style:{aspectRatio:"16/9"},children:[r.thumb_url?C.jsxDEV("img",{src:r.thumb_url,alt:r.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:858,columnNumber:33},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center bg-surface-hover",children:C.jsxDEV("svg",{className:"w-8 h-8 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:862,columnNumber:37},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:861,columnNumber:35},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:860,columnNumber:33},this),C.jsxDEV("div",{className:"absolute bottom-1 right-1 bg-black/80 text-white text-xs px-1 py-0.5 rounded",children:nt(r.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:866,columnNumber:31},this),r.watched&&C.jsxDEV("div",{className:"absolute top-1 left-1 bg-accent/90 text-accent-text text-xs px-1 py-0.5 rounded",children:C.jsxDEV($e,{className:"w-3 h-3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:871,columnNumber:35},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:870,columnNumber:33},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:856,columnNumber:29},this),C.jsxDEV("p",{className:"text-sm font-medium mt-2 line-clamp-2 text-left "+(n?"text-accent-text":"text-text-primary"),children:r.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:875,columnNumber:29},this),C.jsxDEV("p",{className:"text-xs text-text-secondary mt-0.5 text-left",children:r.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:878,columnNumber:29},this)]},r.id,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:849,columnNumber:27},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:839,columnNumber:21},this),Z&&C.jsxDEV("div",{onClick:()=>Ce("right"),className:"absolute right-0 top-0 bottom-0 w-20 z-10 flex items-center justify-center cursor-pointer group/nav","aria-label":"Scroll right",children:[C.jsxDEV("div",{className:"absolute inset-0 backdrop-blur-md transition-all duration-300 opacity-80 group-hover/nav:opacity-95",style:{background:"linear-gradient(to left, hsl(var(--bg-surface) / 0.85) 0%, hsl(var(--bg-surface) / 0.6) 60%, transparent 100%)",borderRadius:"0 0 0.75rem 0"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:892,columnNumber:25},this),C.jsxDEV("div",{className:"absolute left-0 top-4 bottom-4 w-px opacity-0 group-hover/nav:opacity-60 transition-opacity duration-300",style:{background:"linear-gradient(to bottom, transparent, hsl(var(--accent) / 0.5), transparent)"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:900,columnNumber:25},this),C.jsxDEV("div",{className:"relative z-10 w-12 h-12 rounded-full flex items-center justify-center backdrop-blur-xl transition-all duration-300 group-hover/nav:scale-110",style:{background:"radial-gradient(circle at 30% 30%, hsl(var(--bg-surface-hover) / 0.95) 0%, hsl(var(--bg-surface) / 0.9) 100%)",border:"1px solid hsl(0 0% 100% / 0.2)",boxShadow:"inset 0 2px 4px hsl(0 0% 100% / 0.12), inset 0 -2px 4px hsl(0 0% 0% / 0.2), 0 0 0 1px hsl(0 0% 0% / 0.1), 0 8px 24px hsl(0 0% 0% / 0.4)"},children:C.jsxDEV("svg",{className:"w-6 h-6 text-text-primary/90 group-hover/nav:text-text-primary transition-colors drop-shadow-sm",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:C.jsxDEV("polyline",{points:"9 18 15 12 9 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:914,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:913,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:905,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:886,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:801,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:741,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:646,columnNumber:13},this),!B&&C.jsxDEV("div",{className:"space-y-4 pt-4 px-4",children:C.jsxDEV("div",{className:"flex gap-4 items-start max-w-[1600px]",children:[C.jsxDEV("div",{className:"flex-1 min-w-0",children:[C.jsxDEV("div",{className:"player-wrapper shadow-card-hover",children:C.jsxDEV("video",{ref:se,className:"video-js vjs-big-play-centered",playsInline:!0,preload:"auto"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:932,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:931,columnNumber:19},this),C.jsxDEV("div",{className:"mt-4 space-y-3",children:[C.jsxDEV("h1",{className:"text-xl font-bold text-text-primary leading-tight",children:Ne.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:942,columnNumber:21},this),C.jsxDEV("div",{className:"flex flex-wrap items-center gap-3 text-sm text-text-secondary",children:[C.jsxDEV(p,{to:`/channel/${Ne.channel_id}/library`,className:"hover:text-text-primary transition-colors font-medium",children:Ne.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:946,columnNumber:23},this),C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:952,columnNumber:23},this),C.jsxDEV("span",{children:nt(Ne.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:953,columnNumber:23},this),C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:954,columnNumber:23},this),C.jsxDEV("span",{children:Ne.upload_date?new Date(Ne.upload_date.slice(0,4),Ne.upload_date.slice(4,6)-1,Ne.upload_date.slice(6,8)).toLocaleDateString():"Unknown date"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:955,columnNumber:23},this),Ne.watched&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:966,columnNumber:27},this),C.jsxDEV("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-accent/20 border border-accent/40 text-accent-text font-semibold text-xs",children:[C.jsxDEV($e,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:968,columnNumber:29},this),"Watched"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:967,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:965,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:945,columnNumber:21},this),C.jsxDEV("div",{className:"flex gap-2 mt-3",children:[C.jsxDEV("button",{onClick:De,className:"flex items-center gap-2 px-3 py-1.5 bg-dark-surface border border-dark-border rounded-lg text-text-secondary hover:bg-dark-hover hover:text-text-primary transition-colors text-sm",children:[C.jsxDEV(ze,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:981,columnNumber:25},this),C.jsxDEV("span",{className:"font-medium",children:"Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:982,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:977,columnNumber:23},this),C.jsxDEV("button",{ref:oe,onClick:()=>U(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-dark-surface border border-dark-border rounded-lg text-text-secondary hover:bg-accent hover:border-accent hover:text-dark-primary transition-colors text-sm",children:[C.jsxDEV(We,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:990,columnNumber:25},this),C.jsxDEV("span",{className:"font-medium",children:"Playlist"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:991,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:985,columnNumber:23},this),C.jsxDEV("button",{onClick:Ve,className:"flex items-center gap-2 px-3 py-1.5 border rounded-lg transition-colors text-sm "+(Ne.watched?"bg-accent border-accent text-dark-primary":"bg-dark-surface border-dark-border text-text-secondary hover:bg-accent hover:border-accent hover:text-dark-primary"),children:[C.jsxDEV(Qe,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1002,columnNumber:25},this),C.jsxDEV("span",{className:"font-medium",children:Ne.watched?"Watched":"Mark Watched"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1003,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:994,columnNumber:23},this),C.jsxDEV("button",{onClick:()=>Y(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-dark-surface border border-dark-border rounded-lg text-text-secondary hover:bg-red-600 hover:border-red-600 hover:text-white transition-colors text-sm",children:[C.jsxDEV(Fe,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1010,columnNumber:25},this),C.jsxDEV("span",{className:"font-medium",children:"Delete"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1011,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1006,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:976,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:941,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:929,columnNumber:17},this),C.jsxDEV("div",{ref:ae,className:"bg-surface rounded-xl shadow-card overflow-hidden flex flex-col w-80 flex-shrink-0",style:{maxHeight:"500px"},children:[C.jsxDEV("div",{className:"p-4 border-b border-accent/30 flex-shrink-0",children:[C.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:C.jsxDEV("div",{children:[C.jsxDEV("h2",{className:"font-semibold text-text-primary",children:me},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1026,columnNumber:23},this),C.jsxDEV("p",{className:"text-sm text-text-secondary",children:[S+1," of ",ue.length," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1027,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1025,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1024,columnNumber:19},this),C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("button",{onClick:ye,disabled:0===S&&!_,className:"icon-btn icon-btn-sm hover:bg-accent hover:border-accent disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous video (P)","aria-label":"Go to previous video",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("path",{d:"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1039,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1038,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1031,columnNumber:21},this),C.jsxDEV("button",{onClick:xe,className:"icon-btn icon-btn-sm hover:bg-accent hover:border-accent",title:"Shuffle playlist (S)","aria-label":"Shuffle playlist",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"16 3 21 3 21 8"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1049,columnNumber:25},this),C.jsxDEV("line",{x1:"4",y1:"20",x2:"21",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1050,columnNumber:25},this),C.jsxDEV("polyline",{points:"21 16 21 21 16 21"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1051,columnNumber:25},this),C.jsxDEV("line",{x1:"15",y1:"15",x2:"21",y2:"21"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1052,columnNumber:25},this),C.jsxDEV("line",{x1:"4",y1:"4",x2:"9",y2:"9"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1053,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1048,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1042,columnNumber:21},this),C.jsxDEV("button",{onClick:ve,className:"icon-btn icon-btn-sm hover:bg-accent hover:border-accent "+(_?"bg-accent border-accent":""),title:_?"Disable loop (L)":"Enable loop (L)","aria-label":_?"Disable loop":"Enable loop",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M17 1l4 4-4 4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1063,columnNumber:25},this),C.jsxDEV("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1064,columnNumber:25},this),C.jsxDEV("path",{d:"M7 23l-4-4 4-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1065,columnNumber:25},this),C.jsxDEV("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1066,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1062,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1056,columnNumber:21},this),C.jsxDEV("button",{onClick:je,disabled:S===be.length-1&&!_,className:"icon-btn icon-btn-sm hover:bg-accent hover:border-accent disabled:opacity-30 disabled:cursor-not-allowed",title:"Next video (N)","aria-label":"Go to next video",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("path",{d:"M6 6l8.5 6L6 18V6zm10.5 0v12h2V6h-2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1077,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1076,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1069,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1030,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1023,columnNumber:17},this),C.jsxDEV("div",{className:"overflow-y-auto flex-1",children:be.map((e,t)=>{const r=ue[e];if(!r)return null;const n=t===S;return C.jsxDEV("button",{onClick:()=>ge(t),className:"w-full p-2 flex gap-2 hover:bg-surface-hover transition-colors "+(n?"bg-accent/20 border-l-2 border-accent":""),children:[C.jsxDEV("div",{className:"relative flex-shrink-0 w-20 h-12 bg-black rounded overflow-hidden",children:[r.thumb_url?C.jsxDEV("img",{src:r.thumb_url,alt:r.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1099,columnNumber:29},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center bg-surface-hover",children:C.jsxDEV("svg",{className:"w-8 h-8 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1103,columnNumber:33},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1102,columnNumber:31},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1101,columnNumber:29},this),C.jsxDEV("div",{className:"absolute bottom-1 right-1 bg-black/80 text-white text-xs px-1 py-0.5 rounded",children:nt(r.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1107,columnNumber:27},this),r.watched&&C.jsxDEV("div",{className:"absolute top-1 left-1 bg-accent/90 text-accent-text text-xs px-1 py-0.5 rounded",children:C.jsxDEV($e,{className:"w-3 h-3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1112,columnNumber:31},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1111,columnNumber:29},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1097,columnNumber:25},this),C.jsxDEV("div",{className:"flex-1 text-left min-w-0",children:[C.jsxDEV("h3",{className:"text-xs font-medium line-clamp-2 leading-tight "+(n?"text-accent-text":"text-text-primary"),children:r.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1117,columnNumber:27},this),C.jsxDEV("p",{className:"text-xs text-text-secondary mt-0.5",children:r.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1120,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1116,columnNumber:25},this),n&&C.jsxDEV(Oe,{className:"w-4 h-4 text-accent flex-shrink-0 self-center"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1122,columnNumber:39},this)]},r.id,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1090,columnNumber:23},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1083,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1018,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:927,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:926,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:643,columnNumber:9},this),C.jsxDEV("video",{ref:ie,style:{display:"none"},preload:"auto"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1134,columnNumber:9},this),C.jsxDEV(at,{isOpen:H,onClose:()=>Y(!1),onConfirm:Ee,title:"Delete Video",message:`Are you sure you want to delete "${Ne.title}"? This will permanently remove the video file from your system.`,confirmText:"Delete",cancelText:"Cancel",isDanger:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1141,columnNumber:9},this),K&&C.jsxDEV(st,{videoId:Ne.id,video:Ne,triggerRef:oe,onClose:()=>U(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1154,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:607,columnNumber:7},this)}function bs(){const e=m(),r=n(),{showNotification:s}=I(),[a,i]=t.useState(""),[o,l]=t.useState(""),[d,c]=t.useState(""),[u,p]=t.useState(!1),[b,N]=t.useState("");return C.jsxDEV("div",{className:"h-screen flex items-center justify-center p-4 bg-dark-primary overflow-hidden",children:C.jsxDEV("div",{className:"card p-6 sm:p-8 max-w-md w-full",children:[C.jsxDEV("div",{className:"mb-4 sm:mb-6",children:[C.jsxDEV("h1",{className:"text-xl sm:text-2xl font-bold text-text-primary mb-1 sm:mb-2",children:"Setup Login Credentials"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:79,columnNumber:11},this),C.jsxDEV("p",{className:"text-text-secondary text-xs sm:text-sm",children:"Create your username and password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:82,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:78,columnNumber:9},this),C.jsxDEV("form",{onSubmit:async t=>{if(t.preventDefault(),N(""),a&&o&&d)if(a.length<3)N("Username must be at least 3 characters");else if(o.length<3)N("Password must be at least 3 characters");else if(o===d){p(!0);try{const t=await fetch("/api/auth/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:o})}),n=await t.json();if(!t.ok)return N(n.error||"Failed to save credentials"),void p(!1);s("Credentials saved! Please log in.","success"),await r.invalidateQueries({queryKey:["auth","first-run"]}),setTimeout(()=>{e("/login")},1e3)}catch(n){N("Failed to connect to server"),p(!1)}}else N("Passwords do not match");else N("All fields are required")},className:"space-y-3 sm:space-y-4",children:[C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs sm:text-sm font-medium text-text-secondary mb-1.5 sm:mb-2",children:"Username"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:89,columnNumber:13},this),C.jsxDEV("input",{type:"text",value:a,onChange:e=>i(e.target.value),placeholder:"Choose a username",className:"input w-full py-2 px-3 text-sm",disabled:u,autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:92,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:88,columnNumber:11},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs sm:text-sm font-medium text-text-secondary mb-1.5 sm:mb-2",children:"Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:104,columnNumber:13},this),C.jsxDEV("input",{type:"password",value:o,onChange:e=>l(e.target.value),placeholder:"Choose a password",className:"input w-full py-2 px-3 text-sm",disabled:u},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:107,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:103,columnNumber:11},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs sm:text-sm font-medium text-text-secondary mb-1.5 sm:mb-2",children:"Confirm Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:118,columnNumber:13},this),C.jsxDEV("input",{type:"password",value:d,onChange:e=>c(e.target.value),placeholder:"Confirm your password",className:"input w-full py-2 px-3 text-sm",disabled:u},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:121,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:117,columnNumber:11},this),b&&C.jsxDEV("div",{className:"bg-red-900/20 border border-red-500 text-red-400 px-3 py-2 sm:px-4 sm:py-3 rounded-lg text-xs sm:text-sm",children:b},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:132,columnNumber:13},this),C.jsxDEV("button",{type:"submit",disabled:u,className:"btn bg-red-700 hover:bg-red-800 text-text-primary font-bold w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:u?"Saving...":"Complete Setup"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:137,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:87,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:77,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:76,columnNumber:5},this)}function Ns(){m();const[e,r]=t.useState(""),[n,s]=t.useState(""),[a,i]=t.useState(!1),[o,l]=t.useState(!1),[d,c]=t.useState("");return C.jsxDEV("div",{className:"h-screen flex items-center justify-center p-4 bg-dark-primary overflow-hidden",children:C.jsxDEV("div",{className:"card p-6 sm:p-8 max-w-md w-full",children:[C.jsxDEV("div",{className:"mb-4 sm:mb-6",children:[C.jsxDEV("h1",{className:"text-xl sm:text-2xl font-bold text-text-primary mb-1 sm:mb-2",children:"Login"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:52,columnNumber:11},this),C.jsxDEV("p",{className:"text-text-secondary text-xs sm:text-sm",children:"Enter your credentials to continue"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:55,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:51,columnNumber:9},this),C.jsxDEV("form",{onSubmit:async t=>{if(t.preventDefault(),c(""),e&&n){l(!0);try{const t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:n,remember_me:a})}),r=await t.json();if(!t.ok)return c(r.error||"Login failed"),void l(!1);window.location.replace("/")}catch(r){c("Failed to connect to server"),l(!1)}}else c("Username and password are required")},className:"space-y-3 sm:space-y-4",children:[C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs sm:text-sm font-medium text-text-secondary mb-1.5 sm:mb-2",children:"Username"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:62,columnNumber:13},this),C.jsxDEV("input",{type:"text",value:e,onChange:e=>r(e.target.value),placeholder:"Enter your username",className:"input w-full py-2 px-3 text-sm",disabled:o,autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:65,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:61,columnNumber:11},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs sm:text-sm font-medium text-text-secondary mb-1.5 sm:mb-2",children:"Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:77,columnNumber:13},this),C.jsxDEV("input",{type:"password",value:n,onChange:e=>s(e.target.value),placeholder:"Enter your password",className:"input w-full py-2 px-3 text-sm",disabled:o},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:76,columnNumber:11},this),d&&C.jsxDEV("div",{className:"bg-red-900/20 border border-red-500 text-red-400 px-3 py-2 sm:px-4 sm:py-3 rounded-lg text-xs sm:text-sm",children:d},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:91,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("input",{type:"checkbox",id:"rememberMe",checked:a,onChange:e=>i(e.target.checked),className:"w-3.5 h-3.5 sm:w-4 sm:h-4 rounded border-dark-border bg-dark-tertiary text-accent-text focus:ring-accent focus:ring-offset-0 flex-shrink-0"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:97,columnNumber:13},this),C.jsxDEV("label",{htmlFor:"rememberMe",className:"text-xs sm:text-sm text-text-secondary cursor-pointer",children:"Remember me for 1 year (otherwise 90 days)"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:104,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:96,columnNumber:11},this),C.jsxDEV("button",{type:"submit",disabled:o,className:"btn bg-gray-700 hover:bg-gray-600 text-text-primary font-bold w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:o?"Logging in...":"Login"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:109,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:60,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:50,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:49,columnNumber:5},this)}function fs({mkvCount:e,onInclude:t,onSkip:r}){return C.jsxDEV("div",{className:"bg-dark-secondary border-l-4 border-l-accent border border-dark-border rounded-lg p-3 mb-4",children:C.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[C.jsxDEV("div",{className:"flex-1 min-w-0",children:[C.jsxDEV("div",{className:"text-sm font-semibold text-text-primary",children:[e," MKV file",1!==e?"s":""," need re-encoding"]},void 0,!0,{fileName:"/appdata/frontend/src/components/MkvPromptCard.jsx",lineNumber:10,columnNumber:11},this),C.jsxDEV("div",{className:"text-xs text-text-secondary",children:"Must be converted to MP4 for browser playback."},void 0,!1,{fileName:"/appdata/frontend/src/components/MkvPromptCard.jsx",lineNumber:13,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/MkvPromptCard.jsx",lineNumber:9,columnNumber:9},this),C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("button",{onClick:t,className:"btn btn-primary btn-sm",children:"Re-encode"},void 0,!1,{fileName:"/appdata/frontend/src/components/MkvPromptCard.jsx",lineNumber:20,columnNumber:11},this),C.jsxDEV("button",{onClick:r,className:"btn btn-secondary btn-sm",children:"Skip"},void 0,!1,{fileName:"/appdata/frontend/src/components/MkvPromptCard.jsx",lineNumber:26,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/MkvPromptCard.jsx",lineNumber:19,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/MkvPromptCard.jsx",lineNumber:8,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/MkvPromptCard.jsx",lineNumber:7,columnNumber:5},this)}function hs(e){if(!e||0===e)return"";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB"][t]}function xs({imported:e=[],skipped:r=[],failed:n=[],onClose:s}){const[a,i]=t.useState(!1),[o,l]=t.useState("text"),[d,c]=t.useState({matched:!0,skipped:!0,failed:!0}),[u,m]=t.useState(!1),p={matched:e.length,skipped:r.length,failed:n.length},b=[...e.map(e=>({...e,_type:"matched"})),...r.map(e=>({...e,_type:"skipped"})),...n.map(e=>({...e,_type:"failed"}))],f=e=>{c(t=>({...t,[e]:!t[e]}))},h=e=>{if(!e)return"--:--";const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?`${t}:${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}`:`${r}:${String(n).padStart(2,"0")}`},x=Object.entries(d).filter(([e,t])=>t&&p[e]>0).reduce((e,[t])=>e+p[t],0);return N.createPortal(C.jsxDEV("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:[C.jsxDEV("div",{className:"import-results-modal bg-[#12141a] border border-[#2a2f3a] rounded-xl w-full max-w-[760px] max-h-[85vh] flex flex-col shadow-2xl",children:[C.jsxDEV("div",{className:"px-5 py-4 border-b border-[#2a2f3a]",children:[C.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[C.jsxDEV("h2",{className:"text-[15px] font-semibold text-white",children:"Import Results"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:220,columnNumber:13},this),C.jsxDEV("button",{onClick:s,className:"text-[#64748b] hover:text-white p-1 transition-colors","aria-label":"Close",children:C.jsxDEV("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:227,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:226,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:221,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:219,columnNumber:11},this),C.jsxDEV("p",{className:"text-[12px] text-[#64748b] leading-relaxed",children:"Your files have been matched against your YT library. Successfully matched files are now linked to their videos."},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:231,columnNumber:11},this),C.jsxDEV("div",{className:"flex gap-4 mt-3 pt-3 border-t border-[#2a2f3a] flex-wrap",children:[p.matched>0&&C.jsxDEV("span",{className:"flex items-center gap-1.5 text-[12px] font-medium text-[#4ade80]",children:[C.jsxDEV("span",{className:"w-2 h-2 rounded-full bg-[#4ade80]"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:240,columnNumber:17},this),p.matched," matched"]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:239,columnNumber:15},this),p.skipped>0&&C.jsxDEV("span",{className:"flex items-center gap-1.5 text-[12px] font-medium text-[#fbbf24]",children:[C.jsxDEV("span",{className:"w-2 h-2 rounded-full bg-[#fbbf24]"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:246,columnNumber:17},this),p.skipped," skipped"]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:245,columnNumber:15},this),p.failed>0&&C.jsxDEV("span",{className:"flex items-center gap-1.5 text-[12px] font-medium text-[#f87171]",children:[C.jsxDEV("span",{className:"w-2 h-2 rounded-full bg-[#f87171]"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:252,columnNumber:17},this),p.failed," failed"]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:251,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:237,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:218,columnNumber:9},this),C.jsxDEV("div",{className:"flex-1 overflow-y-auto p-2 import-results-list",children:0===b.length?C.jsxDEV("div",{className:"text-center text-[#64748b] py-12",children:"No results"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:262,columnNumber:13},this):b.map((e,t)=>C.jsxDEV(vs,{item:e},t,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:265,columnNumber:15},this))},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:260,columnNumber:9},this),C.jsxDEV("div",{className:"flex items-center justify-between px-5 py-3.5 border-t border-[#2a2f3a]",children:[C.jsxDEV("div",{className:"relative",children:[C.jsxDEV("button",{onClick:()=>i(!a),className:"flex items-center gap-2 px-4 py-2 text-[12px] font-medium text-[#64748b] bg-[#1a1d24] border border-[#2a2f3a] rounded-md hover:text-white hover:border-[#3a4555] transition-colors",children:["Export",C.jsxDEV("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:279,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:278,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:273,columnNumber:13},this),a&&C.jsxDEV("div",{className:"absolute bottom-full left-0 mb-2 w-64 bg-[#1a1d24] border border-[#2a2f3a] rounded-lg shadow-xl z-10",children:[C.jsxDEV("div",{className:"p-3 border-b border-[#2a2f3a]",children:[C.jsxDEV("div",{className:"text-[11px] text-[#64748b] uppercase tracking-wide mb-2",children:"Format"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:288,columnNumber:19},this),C.jsxDEV("div",{className:"flex gap-1 bg-[#12141a] p-1 rounded-md",children:[C.jsxDEV("button",{onClick:()=>l("text"),className:"flex-1 px-3 py-1.5 text-[11px] font-medium rounded transition-colors "+("text"===o?"bg-[#3b82f6] text-white":"text-[#64748b] hover:text-white"),children:"Text"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:290,columnNumber:21},this),C.jsxDEV("button",{onClick:()=>l("csv"),className:"flex-1 px-3 py-1.5 text-[11px] font-medium rounded transition-colors "+("csv"===o?"bg-[#3b82f6] text-white":"text-[#64748b] hover:text-white"),children:"CSV"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:300,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:289,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:287,columnNumber:17},this),C.jsxDEV("div",{className:"p-3 border-b border-[#2a2f3a]",children:[C.jsxDEV("div",{className:"text-[11px] text-[#64748b] uppercase tracking-wide mb-2",children:"Include"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:315,columnNumber:19},this),C.jsxDEV("label",{className:"flex items-center gap-2 py-1.5 cursor-pointer group",children:[C.jsxDEV("input",{type:"checkbox",checked:d.matched,onChange:()=>f("matched"),disabled:0===p.matched,className:"w-4 h-4 rounded border-[#2a2f3a] bg-[#12141a] text-[#4ade80] focus:ring-[#4ade80] focus:ring-offset-0 disabled:opacity-40"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:318,columnNumber:21},this),C.jsxDEV("span",{className:"text-[12px] "+(0===p.matched?"text-[#475569]":"text-[#4ade80] group-hover:text-[#4ade80]"),children:["Matched (",p.matched,")"]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:325,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:317,columnNumber:19},this),C.jsxDEV("label",{className:"flex items-center gap-2 py-1.5 cursor-pointer group",children:[C.jsxDEV("input",{type:"checkbox",checked:d.skipped,onChange:()=>f("skipped"),disabled:0===p.skipped,className:"w-4 h-4 rounded border-[#2a2f3a] bg-[#12141a] text-[#fbbf24] focus:ring-[#fbbf24] focus:ring-offset-0 disabled:opacity-40"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:331,columnNumber:21},this),C.jsxDEV("span",{className:"text-[12px] "+(0===p.skipped?"text-[#475569]":"text-[#fbbf24] group-hover:text-[#fbbf24]"),children:["Skipped (",p.skipped,")"]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:338,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:330,columnNumber:19},this),C.jsxDEV("label",{className:"flex items-center gap-2 py-1.5 cursor-pointer group",children:[C.jsxDEV("input",{type:"checkbox",checked:d.failed,onChange:()=>f("failed"),disabled:0===p.failed,className:"w-4 h-4 rounded border-[#2a2f3a] bg-[#12141a] text-[#f87171] focus:ring-[#f87171] focus:ring-offset-0 disabled:opacity-40"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:344,columnNumber:21},this),C.jsxDEV("span",{className:"text-[12px] "+(0===p.failed?"text-[#475569]":"text-[#f87171] group-hover:text-[#f87171]"),children:["Failed (",p.failed,")"]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:351,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:343,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:314,columnNumber:17},this),C.jsxDEV("div",{className:"p-2",children:C.jsxDEV("button",{onClick:async()=>{const t="csv"===o?(()=>{const t=[];return t.push(["Status","Filename","Local Duration","YT Duration","File Size","Matched Video Title","Matched Video ID","Matched Channel","Closest Video Title","Closest Video ID","Closest Channel","Similarity %","Reason"].join(",")),d.matched&&e.forEach(e=>{const r=h(e.duration||e.local_duration||e.video?.duration);t.push(["Matched",`"${(e.filename||"").replace(/"/g,'""')}"`,r,r,hs(e.file_size||e.video?.file_size||0),`"${(e.video?.title||"").replace(/"/g,'""')}"`,e.video?.id||"",`"${(e.video?.channel_title||e.channel||"").replace(/"/g,'""')}"`,"","","","",""].join(","))}),d.skipped&&r.forEach(e=>{const r=h(e.duration||e.local_duration);t.push(["Skipped",`"${(e.filename||"").replace(/"/g,'""')}"`,r,"",hs(e.file_size||0),"","","","","","","",`"${(e.reason||"").replace(/"/g,'""')}"`].join(","))}),d.failed&&n.forEach(e=>{const r=e.closestMatch||e.closest_match,n=h(r?.local_duration||e.local_duration),s=h(r?.duration);t.push(["Closest",`"${(e.filename||"").replace(/"/g,'""')}"`,n||"",s||"",hs(e.file_size||0),"","","",`"${(r?.title||"").replace(/"/g,'""')}"`,r?.id||"",`"${(r?.channel_title||"").replace(/"/g,'""')}"`,r?.similarity?`${r.similarity}%`:"",`"${(e.reason||e.error||"").replace(/"/g,'""')}"`].join(","))}),t.join("\n")})():(()=>{const t=[];return d.matched&&e.forEach(e=>{const r=h(e.duration||e.local_duration||e.video?.duration),n=e.video?.title||"",s=e.video?.id||"";t.push(`${e.filename} - ${r} - Matched - ${n} - ${s} - Matched`)}),d.skipped&&r.forEach(e=>{const r=h(e.duration||e.local_duration),n=e.reason||"Skipped";t.push(`${e.filename} - ${r} - Skipped - - - ${n}`)}),d.failed&&n.forEach(e=>{const r=e.closestMatch||e.closest_match,n=`${h(r?.local_duration||e.local_duration)||"--:--"} / ${h(r?.duration)||"--:--"}`,s=r?.title||"",a=r?.id||"",i=r?.similarity?`${r.similarity}%`:"No match";t.push(`${e.filename} - ${n} - Closest - ${s} - ${a} - ${i}`)}),t.join("\n")})();try{await navigator.clipboard.writeText(t),m(!0),i(!1),setTimeout(()=>m(!1),2e3)}catch(s){console.error("Failed to copy:",s)}},disabled:0===x,className:"w-full px-3 py-2 text-[12px] font-medium text-white bg-[#3b82f6] rounded-md hover:bg-[#2563eb] disabled:opacity-40 disabled:cursor-not-allowed transition-colors",children:["Copy ",x," items as ",o.toUpperCase()]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:358,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:357,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:285,columnNumber:15},this),u&&C.jsxDEV("span",{className:"ml-3 text-[12px] text-[#4ade80] animate-pulse",children:"Copied to clipboard!"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:370,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:272,columnNumber:11},this),C.jsxDEV("button",{onClick:s,className:"px-5 py-2 text-[12px] font-medium text-white bg-[#3b82f6] rounded-md hover:bg-[#2563eb] transition-colors",children:"Done"},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:376,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:271,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:215,columnNumber:7},this),C.jsxDEV("style",{children:"\n        .import-results-list::-webkit-scrollbar {\n          width: 8px;\n        }\n        .import-results-list::-webkit-scrollbar-track {\n          background: #1a1d24;\n          border-radius: 4px;\n        }\n        .import-results-list::-webkit-scrollbar-thumb {\n          background: #2a2f3a;\n          border-radius: 4px;\n        }\n        .import-results-list::-webkit-scrollbar-thumb:hover {\n          background: #3a4555;\n        }\n        .import-results-list {\n          scrollbar-width: thin;\n          scrollbar-color: #2a2f3a #1a1d24;\n        }\n        .line-clamp-2 {\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n          overflow: hidden;\n        }\n        @media (max-width: 768px) {\n          .line-clamp-2 {\n            -webkit-line-clamp: 3;\n          }\n        }\n      "},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:386,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:214,columnNumber:5},this),document.body)}function vs({item:e}){const t=e._type,r={matched:{borderColor:"#4ade80",iconColor:"text-[#4ade80]",icon:"âœ“",label:"Matched:",labelColor:"text-[#4ade80]"},skipped:{borderColor:"#fbbf24",iconColor:"text-[#fbbf24]",icon:"â­",label:"Skipped:",labelColor:"text-[#fbbf24]"},failed:{borderColor:"#f87171",iconColor:"text-[#f87171]",icon:"âœ—",label:"Closest:",labelColor:"text-[#f87171]"}},n=r[t]||r.matched,s=e=>{if(!e)return null;const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?`${t}:${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}`:`${r}:${String(n).padStart(2,"0")}`},a=(()=>{if("matched"===t)return{title:e.video?.title||"",channel:e.video?.channel_title||e.channel||"",videoId:e.video?.id||"",similarity:null,localDuration:null,ytDuration:null};if("skipped"===t)return{title:e.reason||"Skipped by user",channel:"",videoId:"",similarity:null,localDuration:null,ytDuration:null};{const t=e.closestMatch||e.closest_match;return{title:t?.title||e.reason||"No match found",channel:t?.channel_title||"",videoId:t?.id||"",similarity:t?.similarity,localDuration:s(t?.local_duration),ytDuration:s(t?.duration)}}})();return C.jsxDEV("div",{className:"m-1 p-2.5 sm:p-3 rounded-md bg-[#1a1d24] hover:bg-[#22262f] transition-colors",style:{borderLeft:`3px solid ${n.borderColor}`},children:[C.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[C.jsxDEV("span",{className:`text-[12px] flex-shrink-0 ${n.iconColor}`,children:n.icon},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:510,columnNumber:9},this),C.jsxDEV("span",{className:"font-mono text-[11px] text-white truncate min-w-0 flex-1",children:e.filename},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:511,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:509,columnNumber:7},this),C.jsxDEV("div",{className:"flex items-start gap-2 pl-5",children:[C.jsxDEV("div",{className:"flex-1 min-w-0 flex flex-wrap items-center gap-1.5",children:[C.jsxDEV("span",{className:`text-[10px] font-medium uppercase tracking-wide flex-shrink-0 ${n.labelColor}`,children:n.label},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:519,columnNumber:11},this),C.jsxDEV("span",{className:"text-[12px] text-[#64748b] leading-relaxed line-clamp-2",children:a.title},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:522,columnNumber:11},this),a.channel&&C.jsxDEV("span",{className:"text-[11px] text-[#475569] w-full mt-0.5",children:["Â· ",a.channel]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:526,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:518,columnNumber:9},this),(a.videoId||a.similarity||a.localDuration)&&C.jsxDEV("div",{className:"flex gap-1.5 flex-shrink-0 flex-wrap justify-end",children:[a.videoId&&C.jsxDEV("span",{className:"font-mono text-[9px] text-[#64748b] bg-white/5 px-1.5 py-0.5 rounded",children:a.videoId},void 0,!1,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:536,columnNumber:15},this),a.similarity&&C.jsxDEV("span",{className:"text-[9px] font-semibold text-[#f87171] bg-[#f87171]/10 px-1.5 py-0.5 rounded",children:[a.similarity,"%"]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:541,columnNumber:15},this),(a.localDuration||a.ytDuration)&&C.jsxDEV("span",{className:"text-[9px] text-[#64748b] bg-white/5 px-1.5 py-0.5 rounded",children:[a.localDuration||"--:--"," / ",a.ytDuration||"--:--"]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:546,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:534,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:517,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ImportResultsModal.jsx",lineNumber:504,columnNumber:5},this)}function js(e){if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB"][t]}function ys(e){if(!e)return"--:--";return`${Math.floor(e/60)}:${String(e%60).padStart(2,"0")}`}function gs(){const e=m(),{showNotification:a}=I(),[i,o]=t.useState(null),{data:l,isLoading:d,refetch:c}=function(e=!1){return r({queryKey:["import","scan",{includeMkv:e}],queryFn:()=>T.scanImportFolder(e),staleTime:0})}("include"===i),{data:u,refetch:p}=r({queryKey:["import-state"],queryFn:()=>T.getImportState(),refetchInterval:5e3,staleTime:2e3}),{data:b}=Y(),{data:N,refetch:f}=function(e=!0){return r({queryKey:["encode-status"],queryFn:()=>T.getEncodeStatus(),refetchInterval:!!e&&5e3,staleTime:2e3,enabled:e})}(!0),h="true"===b?.import_reencode_mkv,x=h||"include"===i,v=x?[".mkv",".mp4",".m4v",".webm"]:[".mp4",".m4v",".webm"],j=x?/\.(mp4|webm|m4v|mkv)$/i:/\.(mp4|webm|m4v)$/i,y=function(){const e=n();return s({mutationFn:({mode:e})=>T.smartIdentify(e),onSuccess:()=>{e.invalidateQueries({queryKey:["import","state"]})}})}(),g=function(){const e=n();return s({mutationFn:e=>T.executeSmartImport(e),onSuccess:()=>{e.invalidateQueries({queryKey:["import","state"]}),e.invalidateQueries({queryKey:["videos"]}),e.invalidateQueries({queryKey:["channels"]})}})}(),D=function(){const e=n();return s({mutationFn:({force:e}={})=>T.resetImport(e),onSuccess:()=>{e.invalidateQueries({queryKey:["import","scan"]}),e.invalidateQueries({queryKey:["import","state"]})}})}(),E=function(){const e=n();return s({mutationFn:e=>T.skipPendingItem(e),onSuccess:()=>{e.invalidateQueries({queryKey:["import","state"]})}})}(),[V,w]=t.useState("setup"),[k,S]=t.useState([]),[P,_]=t.useState(0),[L,M]=t.useState(null),[A,R]=t.useState(!1),[B,$]=t.useState(null),[F,O]=t.useState([]),[q,z]=t.useState([]),[W,Q]=t.useState([]),[K,U]=t.useState(!1),[H,J]=t.useState(!1),[G,X]=t.useState(!1),[Z,ee]=t.useState([]),[te,re]=t.useState(0),[ne,se]=t.useState(0),[ae,ie]=t.useState(null),oe=t.useRef(null),le=t.useRef(!1),de=N?.encoding||!1,ue=k.length>0&&P<k.length,me="progress"===V&&!de&&!ue&&!A,pe=t.useRef(!1);t.useEffect(()=>{if("progress"===V){const e=setInterval(()=>{p(),f()},1e3);return()=>clearInterval(e)}},[V,p,f]),t.useEffect(()=>{me&&!pe.current&&F.length>0&&(pe.current=!0,F.length,q.length,W.length,W.length>0?a(`Import complete: ${F.length} imported, ${W.length} failed`,"warning"):q.length>0?a(`Import complete: ${F.length} imported, ${q.length} skipped`,"success"):a(`Import complete: ${F.length} video${1!==F.length?"s":""} imported`,"success")),"setup"===V&&(pe.current=!1)},[me,F.length,q.length,W.length,V,a]),t.useEffect(()=>{u?.imported&&O(u.imported)},[u?.imported]),t.useEffect(()=>{if(ae)return oe.current&&clearInterval(oe.current),oe.current=setInterval(()=>{ie(e=>!e||e.countdown<=1?(clearInterval(oe.current),null):{...e,countdown:e.countdown-1})},1e3),()=>{oe.current&&clearInterval(oe.current)}},[ae?.files]),t.useEffect(()=>{if(le.current||!u)return;const e=u.pending?.length>0,t=N?.encoding,r=u.imported?.length>0,n=u.failed?.length>0,s=u.skipped?.length>0;(e||t||r||n||s)&&(le.current=!0,w("progress"),S(u.pending||[]),_(0),O(u.imported||[]),z(u.skipped||[]),Q(u.failed||[]))},[u,N?.encoding]);const be=async e=>{le.current=!0,pe.current=!1,w("progress"),$(e),S([]),_(0),M(null),O([]),z([]),Q([]),R(!0),a(`Starting ${"auto"===e?"auto":"manual"} import...`,"info");try{const t=await y.mutateAsync({mode:e});Q(t.failed||[]),t.identified?.length>0&&(await g.mutateAsync(t.identified),await p()),t.pending?.length>0&&(S(t.pending),_(0))}catch(t){a(ce(t.message,"scan import folder"),"error")}finally{R(!1)}},Ne=async()=>{if(!L)return;const e=k[P],t=e.matches.find(e=>e.id===L);if(t){R(!0);try{await g.mutateAsync([{file:e.file,filename:e.filename,video:t,match_type:"user_selected",channel_info:{channel_id:t.channel_id,channel_title:t.channel_title,channel_url:`https://youtube.com/channel/${t.channel_id}`}}]),await p(),_(e=>e+1),M(null),a("Video matched and imported","success")}catch(r){a(ce(r.message,"import video"),"error")}finally{R(!1)}}},fe=async()=>{const e=k[P];try{await E.mutateAsync(e.file),z(t=>[...t,{filename:e.filename,reason:"Skipped by user"}]),_(e=>e+1),M(null),a("File skipped","info")}catch(t){a(ce(t.message,"skip file"),"error")}},he=e=>{o(e)},xe=e=>{e.preventDefault(),e.stopPropagation(),J(!0)},ve=e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.contains(e.relatedTarget)||J(!1)},je=async e=>{e.preventDefault(),e.stopPropagation(),J(!1);const t=Array.from(e.dataTransfer.files),r=t.filter(e=>j.test(e.name)),n=t.filter(e=>!j.test(e.name));if(0===r.length&&n.length>0)return void ie({files:n.map(e=>e.name),countdown:4});if(n.length>0&&a(`${n.length} file(s) skipped (unsupported)`,"warning"),0===r.length)return;const s=r.filter(e=>e.size<=53687091200);if(0===s.length)return void a("All files exceed 50GB limit","error");const i=s.map(e=>({file:e,name:e.name,size:e.size,status:"pending"}));ee(i),re(0),X(!0);for(let a=0;a<i.length;a++){re(a),se(0),ee(e=>e.map((e,t)=>t===a?{...e,status:"uploading"}:e));try{await ye(i[a].file,e=>se(e)),ee(e=>e.map((e,t)=>t===a?{...e,status:"done"}:e))}catch(d){ee(e=>e.map((e,t)=>t===a?{...e,status:"error"}:e))}}X(!1),c();const o=i.filter((e,t)=>t<=te).length,l=i.filter(e=>"error"===e.status).length;l>0?a(`Uploaded ${o-l} files, ${l} failed`,"warning"):a(`Uploaded ${o} file${1!==o?"s":""}`,"success")},ye=(e,t)=>new Promise((r,n)=>{const s=new XMLHttpRequest,a=new FormData;a.append("file",e),s.upload.addEventListener("progress",e=>{e.lengthComputable&&t(Math.round(e.loaded/e.total*100))}),s.addEventListener("load",()=>{if(s.status>=200&&s.status<300)try{const e=JSON.parse(s.responseText);e.success?r(e):n(new Error(e.error))}catch{n(new Error("Invalid response"))}else n(new Error(`HTTP ${s.status}`))}),s.addEventListener("error",()=>n(new Error("Network error"))),s.open("POST","/api/import/upload"),s.send(a)});if(d)return C.jsxDEV(we,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:364,columnNumber:27},this);if("progress"===V){const t=ue?k[P]:null;return C.jsxDEV("div",{className:"max-w-2xl mx-auto py-8 px-4",children:[K&&C.jsxDEV(xs,{imported:F,skipped:q,failed:W,onClose:()=>U(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:376,columnNumber:11},this),C.jsxDEV("div",{className:"text-center mb-6",children:C.jsxDEV("h1",{className:"text-2xl font-bold text-text-primary",children:me?"Import Complete!":"Importing..."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:386,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:385,columnNumber:9},this),de&&C.jsxDEV("div",{className:"bg-dark-secondary border border-dark-border rounded-lg p-4 mb-4",children:[C.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[C.jsxDEV("h3",{className:"text-sm font-semibold text-text-secondary uppercase tracking-wider",children:"Encoding"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:395,columnNumber:15},this),N.queue_count>0&&C.jsxDEV("span",{className:"text-xs text-text-muted",children:[N.queue_count+1," total"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:397,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:394,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-center gap-3",children:[C.jsxDEV("div",{className:"animate-spin h-5 w-5 border-2 border-accent border-t-transparent rounded-full"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:401,columnNumber:15},this),C.jsxDEV("div",{className:"flex-1",children:[C.jsxDEV("div",{className:"text-sm text-text-primary truncate mb-1",children:N.current?.filename},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:403,columnNumber:17},this),C.jsxDEV("div",{className:"h-2 bg-dark-tertiary rounded-full overflow-hidden",children:C.jsxDEV("div",{className:"h-full bg-accent transition-all",style:{width:`${N.progress}%`}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:405,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:404,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:402,columnNumber:15},this),C.jsxDEV("span",{className:"text-sm text-text-muted",children:[N.progress,"%"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:408,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:400,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:393,columnNumber:11},this),C.jsxDEV("div",{className:"bg-dark-secondary border border-dark-border rounded-lg p-4 mb-4",children:[C.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[C.jsxDEV("h3",{className:"text-sm font-semibold text-text-secondary uppercase tracking-wider",children:"Matching"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:416,columnNumber:13},this),ue&&C.jsxDEV("span",{className:"text-xs text-text-muted",children:[k.length-P," remaining"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:418,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:415,columnNumber:11},this),ue?C.jsxDEV(C.Fragment,{children:[C.jsxDEV("div",{className:"bg-dark-tertiary rounded-lg p-3 mb-3",children:[C.jsxDEV("div",{className:"text-text-primary font-medium truncate",children:t.filename},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:427,columnNumber:17},this),t.local_duration&&C.jsxDEV("div",{className:"text-sm text-text-muted",children:["Duration: ",ys(t.local_duration)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:429,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:426,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[C.jsxDEV("div",{className:"text-sm text-text-secondary",children:"Select the correct match:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:434,columnNumber:17},this),C.jsxDEV("div",{className:"text-xs text-text-muted",children:[t.matches?.length," option",1!==t.matches?.length?"s":""]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:435,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:433,columnNumber:15},this),C.jsxDEV("div",{className:"space-y-2 max-h-64 overflow-y-auto mb-3",children:t.matches?.map((e,t)=>{const r=Math.round(100*(e.title_similarity||0)),n=L===e.id,s=0===t,a=(i=r)>=90?{badge:"bg-green-500/20 text-green-400",bar:"bg-green-500/60",border:"border-green-500/30"}:i>=70?{badge:"bg-amber-500/20 text-amber-400",bar:"bg-amber-500/60",border:"border-amber-500/30"}:{badge:"bg-slate-500/20 text-slate-400",bar:"bg-slate-500/60",border:"border-slate-500/30"};var i;return C.jsxDEV("button",{onClick:()=>M(e.id),className:"relative w-full text-left p-3 rounded-lg border transition-all "+(n?`${a.border} bg-dark-tertiary ring-1 ring-accent/50`:"border-dark-border bg-dark-tertiary hover:border-dark-border-light"),children:[C.jsxDEV("div",{className:"flex items-start gap-3",children:[C.jsxDEV("div",{className:"mt-0.5 w-4 h-4 rounded-full border-2 flex-shrink-0 "+(n?"border-accent bg-accent":"border-text-muted")},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:466,columnNumber:25},this),C.jsxDEV("div",{className:`px-2 py-0.5 rounded font-mono text-sm font-bold flex-shrink-0 ${a.badge}`,children:[r,"%"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:471,columnNumber:25},this),C.jsxDEV("div",{className:"flex-1 min-w-0",children:[C.jsxDEV("div",{className:"text-text-primary text-sm truncate",children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:477,columnNumber:27},this),C.jsxDEV("div",{className:"flex items-center gap-2 text-text-muted text-xs mt-0.5",children:[C.jsxDEV("span",{children:ys(e.duration)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:479,columnNumber:29},this),C.jsxDEV("span",{className:"text-text-muted/50",children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:480,columnNumber:29},this),C.jsxDEV("span",{className:"truncate",children:e.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:481,columnNumber:29},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:478,columnNumber:27},this),C.jsxDEV("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[e.duration_match&&C.jsxDEV("span",{className:"text-xs px-2 py-0.5 rounded-full bg-green-500/15 text-green-400 font-medium",children:"âœ“ duration match"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:487,columnNumber:31},this),s&&C.jsxDEV("span",{className:"text-xs px-2 py-0.5 rounded-full bg-accent/20 text-accent-text font-medium",children:"â˜… BEST MATCH"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:492,columnNumber:31},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:485,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:476,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:464,columnNumber:23},this),C.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-dark-border/50 rounded-b-lg overflow-hidden",children:C.jsxDEV("div",{className:`h-full transition-all ${a.bar}`,style:{width:`${r}%`}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:502,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:501,columnNumber:23},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:455,columnNumber:21},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:439,columnNumber:15},this),C.jsxDEV("div",{className:"flex gap-2",children:[C.jsxDEV("button",{onClick:fe,disabled:A,className:"btn btn-secondary flex-1 py-2",children:"Skip"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:510,columnNumber:17},this),C.jsxDEV("button",{onClick:Ne,disabled:!L||A,className:"btn btn-primary flex-1 py-2",children:A?"Importing...":"Confirm"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:513,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:509,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:425,columnNumber:13},this):C.jsxDEV("div",{className:"flex items-center gap-3 text-green-400",children:[C.jsxDEV($e,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:524,columnNumber:15},this),C.jsxDEV("span",{children:A?"Processing...":"All files matched"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:525,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:523,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:414,columnNumber:9},this),C.jsxDEV("div",{className:"bg-dark-secondary border border-dark-border rounded-lg p-4 mb-4",children:[C.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[C.jsxDEV("h3",{className:"text-sm font-semibold text-text-secondary uppercase tracking-wider",children:"Results"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:533,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>U(!0),className:"text-xs text-accent-text hover:underline",children:"View Details"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:534,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:532,columnNumber:11},this),C.jsxDEV("div",{className:"grid grid-cols-3 gap-3",children:[C.jsxDEV("button",{onClick:()=>U(!0),className:"text-center py-3 bg-dark-tertiary rounded-lg hover:bg-dark-tertiary/80 transition-colors",children:[C.jsxDEV("div",{className:"text-2xl font-bold text-green-400",children:F.length},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:547,columnNumber:15},this),C.jsxDEV("div",{className:"text-xs text-text-secondary",children:"Imported"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:548,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:543,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>U(!0),className:"text-center py-3 bg-dark-tertiary rounded-lg hover:bg-dark-tertiary/80 transition-colors",children:[C.jsxDEV("div",{className:"text-2xl font-bold text-yellow-400",children:q.length},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:554,columnNumber:15},this),C.jsxDEV("div",{className:"text-xs text-text-secondary",children:"Skipped"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:555,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:550,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>U(!0),className:"text-center py-3 bg-dark-tertiary rounded-lg hover:bg-dark-tertiary/80 transition-colors",children:[C.jsxDEV("div",{className:"text-2xl font-bold text-red-400",children:W.length},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:561,columnNumber:15},this),C.jsxDEV("div",{className:"text-xs text-text-secondary",children:"Failed"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:562,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:557,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:542,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:531,columnNumber:9},this),(()=>{const t=k.length-P,r=F.length,n=de||t>0,s=de?"Encoding will be cancelled":t>0?`${t} pending match${1!==t?"es":""} will be lost`:null,a=n?"Cancel & Start New":r>0?"Start New Import":"New Import";return C.jsxDEV("div",{className:"flex flex-col gap-1",children:[C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>(async(e=!1)=>{await D.mutateAsync({force:e}),o(null),await c(),w("setup"),S([]),_(0),O([]),z([]),Q([]),$(null),le.current=!1})(!0),className:"btn flex-1 "+(n?"bg-amber-600/20 text-amber-400 hover:bg-amber-600/30 border border-amber-600/50":"btn-secondary"),children:a},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:588,columnNumber:17},this),C.jsxDEV("button",{onClick:()=>e("/library"),className:"btn flex-1 "+(me?"btn-primary":"btn-secondary"),children:"Go to Library"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:598,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:587,columnNumber:15},this),s&&C.jsxDEV("span",{className:"text-xs text-amber-400/70 text-center",children:s},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:606,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:586,columnNumber:13},this)})()]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:373,columnNumber:7},this)}const ge=l?.count>0,De=l?.skipped_mkv?.length>0,Ee=(l?.count||0)+(l?.skipped_mkv?.length||0);if(!ge&&!De){const e=Z.filter(e=>"done"===e.status).length,t=G?Z[te]:null;return C.jsxDEV("div",{onDragOver:xe,onDragLeave:ve,onDrop:je,className:"relative flex flex-col items-center justify-center min-h-[60vh] text-center px-4 mx-4 my-4 border-2 border-dashed rounded-xl transition-all "+(ae?"border-red-500/50 bg-red-500/5":H?"border-accent bg-accent/10":"border-dark-border"),children:[G&&C.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-dark-primary/95 rounded-xl z-20",children:C.jsxDEV("div",{className:"w-full max-w-sm text-center px-4",children:[C.jsxDEV("div",{className:"text-4xl font-mono font-bold text-text-primary mb-2",children:[e,C.jsxDEV("span",{className:"text-text-muted",children:["/",Z.length]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:644,columnNumber:34},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:643,columnNumber:15},this),C.jsxDEV("div",{className:"text-sm text-text-muted mb-4",children:"Uploading files..."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:646,columnNumber:15},this),"uploading"===t?.status&&C.jsxDEV("div",{className:"bg-dark-secondary border border-dark-border rounded-lg p-4",children:[C.jsxDEV("div",{className:"text-text-primary truncate mb-2",children:t.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:649,columnNumber:19},this),C.jsxDEV("div",{className:"h-2 bg-dark-tertiary rounded-full overflow-hidden",children:C.jsxDEV("div",{className:"h-full bg-accent transition-all",style:{width:`${ne}%`}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:651,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:650,columnNumber:19},this),C.jsxDEV("div",{className:"text-xs text-text-muted mt-1",children:[ne,"%"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:653,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:648,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:642,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:641,columnNumber:11},this),ae&&!G&&C.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-dark-primary/95 rounded-xl z-10",children:C.jsxDEV("div",{className:"text-center",children:[C.jsxDEV("div",{className:"text-xl font-semibold text-red-400 mb-2",children:"Unsupported format"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:664,columnNumber:15},this),C.jsxDEV("div",{className:"text-text-muted text-sm mb-4",children:["Supported: ",v.join(", ")]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:665,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:663,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:662,columnNumber:11},this),H&&!ae&&!G&&C.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-dark-primary/90 rounded-xl z-10",children:C.jsxDEV("div",{className:"text-xl font-semibold text-accent-text",children:"Drop files to upload"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:673,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:672,columnNumber:11},this),C.jsxDEV("svg",{className:"w-16 h-16 text-text-muted mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:678,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:677,columnNumber:9},this),C.jsxDEV("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Drag and drop video files"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:680,columnNumber:9},this),C.jsxDEV("p",{className:"text-text-secondary mb-4",children:"or copy files to:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:681,columnNumber:9},this),C.jsxDEV("code",{className:"bg-dark-tertiary px-4 py-2 rounded-lg text-accent-text font-mono mb-6",children:l?.import_path||"downloads/imports/"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:682,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>c(),className:"btn btn-secondary",children:"Refresh"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:685,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:630,columnNumber:7},this)}return C.jsxDEV("div",{className:"max-w-2xl mx-auto py-8 px-4",children:[C.jsxDEV("div",{className:"mb-6",children:[C.jsxDEV("h1",{className:"text-2xl font-bold text-text-primary mb-2",children:"Import Videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:694,columnNumber:9},this),C.jsxDEV("p",{className:"text-text-secondary",children:["Found ",C.jsxDEV("span",{className:"text-accent-text font-semibold",children:Ee},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:696,columnNumber:17},this)," video file",1!==Ee?"s":""]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:695,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:693,columnNumber:7},this),De&&null===i&&C.jsxDEV(fs,{mkvCount:l.skipped_mkv.length,onInclude:()=>he("include"),onSkip:()=>he("skip")},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:702,columnNumber:9},this),C.jsxDEV("div",{className:"bg-dark-secondary border border-dark-border rounded-lg overflow-hidden mb-6",children:[C.jsxDEV("div",{className:"px-4 py-3 border-b border-dark-border",children:C.jsxDEV("h3",{className:"font-semibold text-text-primary",children:"Files"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:712,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:711,columnNumber:9},this),C.jsxDEV("div",{className:"divide-y divide-dark-border max-h-64 overflow-y-auto",children:[l.files?.map((e,t)=>C.jsxDEV("div",{className:"px-4 py-3",children:[C.jsxDEV("div",{className:"text-text-primary truncate",children:e.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:717,columnNumber:15},this),C.jsxDEV("div",{className:"text-text-muted text-sm",children:js(e.size)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:718,columnNumber:15},this)]},`f-${t}`,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:716,columnNumber:13},this)),l.skipped_mkv?.map((e,t)=>C.jsxDEV("div",{className:"px-4 py-3",children:[C.jsxDEV("div",{className:"text-text-primary truncate",children:e.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:723,columnNumber:15},this),C.jsxDEV("div",{className:"text-text-muted text-sm",children:[js(e.size)," ",C.jsxDEV("span",{className:"text-yellow-400",children:"- needs re-encoding"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:725,columnNumber:42},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:724,columnNumber:15},this)]},`m-${t}`,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:722,columnNumber:13},this))]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:714,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:710,columnNumber:7},this),(()=>{const e=De&&!h&&null===i,t=y.isLoading||e;return C.jsxDEV(C.Fragment,{children:[C.jsxDEV("div",{className:"flex gap-4",children:[C.jsxDEV("button",{onClick:()=>be("auto"),disabled:t,className:"btn btn-primary flex-1 py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed "+(e?"opacity-40":""),children:"Auto Import"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:740,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>be("manual"),disabled:t,className:"btn btn-secondary flex-1 py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed "+(e?"opacity-40":""),children:"Manual Import"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:747,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:739,columnNumber:13},this),e?C.jsxDEV("p",{className:"text-center text-yellow-400/80 text-sm mt-4",children:"Choose what to do with MKV files above before importing"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:757,columnNumber:15},this):C.jsxDEV("p",{className:"text-center text-text-muted text-sm mt-4",children:[C.jsxDEV("strong",{children:"Auto:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:762,columnNumber:17},this)," Imports confident matches automatically."," ",C.jsxDEV("strong",{children:"Manual:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:763,columnNumber:17},this)," Review matches before importing."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:761,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:738,columnNumber:11},this)})()]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Import.jsx",lineNumber:692,columnNumber:5},this)}function Ds({currentVersion:e,latestVersion:r,onDismiss:n}){const[s,a]=t.useState(!0),[i,o]=t.useState(!1);return s?C.jsxDEV("div",{className:"bg-accent/10 border-b border-accent/20 transition-all duration-200 "+(i?"opacity-0 -translate-y-full h-0":"opacity-100 translate-y-0"),children:C.jsxDEV("div",{className:"max-w-screen-2xl mx-auto px-6 lg:px-12 xl:px-16 h-9 flex items-center justify-between",children:[C.jsxDEV("div",{className:"flex items-center gap-3",children:[C.jsxDEV("span",{className:"relative flex h-2 w-2",children:[C.jsxDEV("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-accent opacity-75"},void 0,!1,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:28,columnNumber:13},this),C.jsxDEV("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-accent"},void 0,!1,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:29,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:27,columnNumber:11},this),C.jsxDEV("span",{className:"text-sm text-text-primary",children:["Update available",C.jsxDEV("span",{className:"text-text-secondary mx-1.5",children:"Â·"},void 0,!1,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:34,columnNumber:13},this),C.jsxDEV("span",{className:"font-mono text-text-secondary",children:["v",e]},void 0,!0,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:35,columnNumber:13},this),C.jsxDEV("span",{className:"text-text-secondary mx-1.5",children:"â†’"},void 0,!1,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:36,columnNumber:13},this),C.jsxDEV("span",{className:"font-mono text-accent-text",children:["v",r]},void 0,!0,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:37,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:32,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:25,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>{o(!0),setTimeout(()=>{a(!1),n()},200)},className:"text-text-secondary hover:text-text-primary transition-colors p-1 -mr-1",title:"Dismiss",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:48,columnNumber:13},this),C.jsxDEV("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:49,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:47,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:42,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:24,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/UpdateBanner.jsx",lineNumber:19,columnNumber:5},this):null}function Es(){const{toasts:e,removeToast:t}=I();return e&&0!==e.length?C.jsxDEV("div",{className:"fixed top-6 left-1/2 -translate-x-1/2 z-[9999] flex flex-col gap-3 max-w-sm",role:"status","aria-live":"polite","aria-atomic":"true",children:e.map(e=>C.jsxDEV(Vs,{toast:e,onDismiss:()=>t(e.id)},e.id,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:16,columnNumber:9},this))},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:9,columnNumber:5},this):null}function Vs({toast:e,onDismiss:t}){const{message:r,type:n,progress:s}=e,a={success:"bg-emerald-500 border-emerald-400",error:"bg-rose-500 border-rose-400",warning:"bg-amber-500 border-amber-400",info:"bg-sky-500 border-sky-400",scanning:"bg-accent/90 border-accent",paused:"bg-amber-500 border-amber-400",delay:"bg-amber-500 border-amber-400",progress:"bg-dark-secondary border-dark-border"},i={success:C.jsxDEV("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:40,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:39,columnNumber:7},this),error:C.jsxDEV("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:45,columnNumber:9},this),C.jsxDEV("line",{x1:"15",y1:"9",x2:"9",y2:"15"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:46,columnNumber:9},this),C.jsxDEV("line",{x1:"9",y1:"9",x2:"15",y2:"15"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:47,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:44,columnNumber:7},this),warning:C.jsxDEV("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:52,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:51,columnNumber:7},this),info:C.jsxDEV("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:57,columnNumber:9},this),C.jsxDEV("path",{d:"M12 16v-4"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:58,columnNumber:9},this),C.jsxDEV("path",{d:"M12 8h.01"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:59,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:56,columnNumber:7},this),scanning:C.jsxDEV("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:63,columnNumber:7},this),paused:C.jsxDEV("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("rect",{x:"6",y:"4",width:"4",height:"16"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:67,columnNumber:9},this),C.jsxDEV("rect",{x:"14",y:"4",width:"4",height:"16"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:68,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:66,columnNumber:7},this),delay:C.jsxDEV("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:73,columnNumber:9},this),C.jsxDEV("polyline",{points:"12 6 12 12 16 14"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:74,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:72,columnNumber:7},this),progress:C.jsxDEV("svg",{className:"w-5 h-5 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:79,columnNumber:9},this),C.jsxDEV("polyline",{points:"7 10 12 15 17 10"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:80,columnNumber:9},this),C.jsxDEV("line",{x1:"12",y1:"15",x2:"12",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:81,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:78,columnNumber:7},this)},o={"SponsorBlock Encoding":"Removing sponsor segments",SponsorBlock:"Fetching segments",Merging:"Combining audio/video",Metadata:"Adding metadata",Processing:"Processing video",Finalizing:"Finishing up",ModifyChapters:"Removing segments",FFmpegMerger:"Combining audio/video",FFmpegMetadata:"Adding metadata",FFmpegExtractAudio:"Extracting audio",FFmpegEmbedSubtitle:"Embedding subtitles",FFmpegVideoConvertor:"Converting video",FFmpegFixupM3u8:"Fixing stream",FFmpegFixupM4a:"Fixing audio",FFmpegFixupDuplicateMoov:"Fixing metadata",FFmpegFixupStretchedPP:"Fixing aspect ratio",FFmpegFixupTimestamp:"Fixing timestamps",MoveFiles:"Finalizing"};if("progress"===n&&s){if(s.isPostprocessing){const e=s.postprocessor||"Processing",n=o[e]||"Processing";return C.jsxDEV("div",{onClick:t,className:"animate-slide-up bg-dark-secondary border border-dark-border rounded-lg shadow-lg text-white overflow-hidden cursor-pointer hover:bg-dark-secondary/80 transition-colors",children:[C.jsxDEV("div",{className:"flex items-center gap-3 px-4 py-3",children:[C.jsxDEV("div",{className:"w-5 h-5 border-2 border-accent/30 border-t-accent rounded-full animate-spin"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:125,columnNumber:13},this),C.jsxDEV("div",{className:"flex-1 min-w-0",children:[C.jsxDEV("div",{className:"text-sm font-medium text-text-primary truncate",children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:127,columnNumber:15},this),C.jsxDEV("div",{className:"text-xs text-text-secondary mt-1",children:[C.jsxDEV("span",{className:"text-accent",children:e},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:129,columnNumber:17},this),C.jsxDEV("span",{className:"mx-1.5 text-text-muted",children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:130,columnNumber:17},this),C.jsxDEV("span",{children:n},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:131,columnNumber:17},this),C.jsxDEV("span",{className:"mx-1.5 text-text-muted",children:"â€¢"},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:132,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-muted",children:s.elapsed},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:133,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:128,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:126,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:123,columnNumber:11},this),C.jsxDEV("div",{className:"h-1 bg-dark-border overflow-hidden",children:C.jsxDEV("div",{className:"h-full w-1/3 bg-accent animate-pulse",style:{animation:"indeterminate 1.5s infinite linear"}},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:139,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:138,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:119,columnNumber:9},this)}return C.jsxDEV("div",{onClick:t,className:"animate-slide-up bg-dark-secondary border border-dark-border rounded-lg shadow-lg text-white overflow-hidden cursor-pointer hover:bg-dark-secondary/80 transition-colors",children:[C.jsxDEV("div",{className:"flex items-center gap-3 px-4 py-3",children:[i.progress,C.jsxDEV("div",{className:"flex-1 min-w-0",children:[C.jsxDEV("div",{className:"text-sm font-medium text-text-primary truncate",children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:154,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-center gap-3 text-xs text-text-secondary mt-1 font-mono",children:[s.speed&&C.jsxDEV("span",{children:s.speed},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:156,columnNumber:34},this),s.eta&&C.jsxDEV("span",{children:["ETA ",s.eta]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:157,columnNumber:32},this),C.jsxDEV("span",{className:"text-accent font-semibold",children:[s.percent,"%"]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:158,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:155,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:153,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:151,columnNumber:9},this),C.jsxDEV("div",{className:"h-1 bg-dark-border",children:C.jsxDEV("div",{className:"h-full bg-accent transition-all duration-300",style:{width:`${s.percent||0}%`}},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:164,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:163,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:147,columnNumber:7},this)}return C.jsxDEV("div",{onClick:t,className:`animate-slide-up flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg text-white cursor-pointer hover:opacity-90 transition-opacity ${a[n]||a.info}`,children:[i[n]||i.info,C.jsxDEV("span",{className:"text-sm font-medium flex-1",children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:179,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Toast.jsx",lineNumber:174,columnNumber:5},this)}function ws(){const e=f(),s=m(),{isConnected:a}=function(){const e=n(),r=t.useRef(null),s=t.useRef(null),[a,i]=t.useState(!1),o=t.useRef(0),l=t.useCallback(()=>{r.current&&r.current.close(),s.current&&(clearTimeout(s.current),s.current=null);try{const t=new EventSource("/api/queue/stream");r.current=t,t.onopen=()=>{i(!0),o.current=0},t.addEventListener("queue",t=>{try{const r=JSON.parse(t.data);e.setQueryData(["queue"],r)}catch(r){console.warn("Failed to parse SSE data:",r)}}),t.addEventListener("settings",t=>{e.invalidateQueries({queryKey:["settings"]})}),t.addEventListener("import",t=>{try{const r=JSON.parse(t.data);"state"===r.type?e.invalidateQueries({queryKey:["import-state"]}):"encode"===r.type&&e.setQueryData(["encode-status"],e=>({...e,encoding:r.data?.encoding??!0,progress:r.data?.progress??0,current:r.data?.filename?{filename:r.data.filename}:e?.current}))}catch(r){console.warn("Failed to parse import SSE data:",r)}}),t.addEventListener("videos",t=>{e.invalidateQueries({queryKey:["videos"]}),e.invalidateQueries({queryKey:["channels"]})}),t.onerror=()=>{if(i(!1),t.close(),r.current=null,o.current<5){const e=1e3*Math.pow(2,o.current);o.current+=1,s.current=setTimeout(l,e)}else s.current=setTimeout(()=>{o.current=0,l()},3e4)}}catch(t){console.error("Failed to create EventSource:",t)}},[e]);return t.useEffect(()=>{l();const e=()=>{"visible"!==document.visibilityState||r.current||(o.current=0,l())};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),r.current&&(r.current.close(),r.current=null),s.current&&clearTimeout(s.current)}},[l]),{isConnected:a}}(),{data:i}=J({sseConnected:a}),{data:o}=A(),{data:l}=X(),{showNotification:d,removeToast:c}=I(),[u,b]=t.useState(!1),N=t.useRef(!1),[h,y]=t.useState(null),[g,D]=t.useState(!1),[E,V]=t.useState(!1),w=t.useRef(!1),k=t.useRef(null),S=t.useRef(null),P=t.useRef(null),_=t.useRef(null),L=t.useRef(!1),M=t.useRef(null);t.useEffect(()=>{if(l?.latest_version){const e=l.latest_version;if(y(e),e&&e!==Un&&e>Un){D(!0);const t=localStorage.getItem("updateBannerDismissedVersion");V(t===e);const r=localStorage.getItem("updateToastShownVersion");w.current||r===e||(w.current=!0,localStorage.setItem("updateToastShownVersion",e),d(`Update available: v${e}`,"info",{persistent:!0}))}}},[l?.latest_version,d]);const R=i?.queue_items||i||[],B=i?.current_download||null,$=i?.current_operation||null,F=i?.delay_info||null,O=i?.is_paused||!1,q=i?.last_error_message||null,z=i?.cookie_warning_message||null;t.useEffect(()=>{"scan_complete"===$?.type&&$?.message&&"scan_complete"!==k.current?.type&&(d($.message,"success",{duration:15e3}),T.clearOperation().catch(()=>{})),k.current=$},[$,d]),t.useEffect(()=>{"scanning"===$?.type&&$?.message?d($.message,"scanning",{id:"scanning",persistent:!0}):c("scanning")},[$?.type,$?.message,d,c]),t.useEffect(()=>{q&&q!==S.current&&d(q,"error"),S.current=q},[q,d]),t.useEffect(()=>{z&&z!==P.current?d(z,"warning",{id:"cookie-warning",persistent:!0}):!z&&P.current&&(c("cookie-warning"),d("Cookies loaded successfully","success")),P.current=z},[z,d,c]),t.useEffect(()=>{if(z){(async()=>{if(!N.current){N.current=!0;try{await fetch("/api/cookie-warning/clear",{method:"POST",credentials:"include"})}catch(e){console.error("Failed to clear cookie warning:",e)}setTimeout(()=>{N.current=!1},1e3)}})()}},[e.pathname,z]),t.useEffect(()=>{const e=R?.find(e=>e.log)?.log||null;O&&!L.current&&R.length>0?d(e||"Queue paused","paused",{id:"paused",persistent:!0}):!O&&L.current&&c("paused"),L.current=O},[O,R,d,c]),t.useEffect(()=>{F&&F!==_.current?d(F,"delay",{id:"delay",persistent:!0}):!F&&_.current&&(c("delay"),d("Queue resumed","success")),_.current=F},[F,d,c]),t.useEffect(()=>{if(B&&!O){if("postprocessing"===B.phase){const e=B.postprocess_elapsed||0,t=`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;d(B.video?.title||"Processing...","progress",{id:"download-progress",persistent:!0,progress:{isPostprocessing:!0,elapsed:t,postprocessor:B.postprocessor}})}else{const e=B.speed_bps>0?`${(B.speed_bps/1024/1024).toFixed(1)} MB/s`:null,t=B.eta_seconds>0?`${Math.floor(B.eta_seconds/60)}:${Math.floor(B.eta_seconds%60).toString().padStart(2,"0")}`:null,r=Math.round(B.progress_pct||0);d(B.video?.title||"Downloading...","progress",{id:"download-progress",persistent:!0,progress:{speed:e,eta:t,percent:r}})}}else if(!B&&M.current){c("download-progress");const e=M.current.video?.title||"Video";d(`Downloaded: ${e}`,"success",{duration:15e3})}M.current=B},[B,O,d,c]);const{data:W,isLoading:Q}=r({queryKey:["auth","first-run"],queryFn:()=>T.checkFirstRun(),retry:!1,staleTime:1/0,refetchOnWindowFocus:!0}),{data:K,isLoading:U}=r({queryKey:["auth","check"],queryFn:()=>T.checkAuth(),retry:!1,staleTime:1/0,refetchOnWindowFocus:!0}),H=W?.first_run||!1,Y=K?.authenticated||!1,G=Q||U,Z=R?.filter(e=>"downloading"===e.video?.status).length||0,ee=R?.filter(e=>"queued"===e.video?.status).length||0;t.useEffect(()=>{/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&"/login"!==e.pathname&&"/setup"!==e.pathname&&"/"!==e.pathname&&localStorage.setItem("last-mobile-path",e.pathname+e.search)},[e.pathname,e.search]),t.useEffect(()=>{const t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),r=sessionStorage.getItem("mobile-path-restored");if(t&&Y&&"/"===e.pathname&&!r){const e=localStorage.getItem("last-mobile-path");e&&"/"!==e&&(s(e,{replace:!0}),sessionStorage.setItem("mobile-path-restored","true"))}},[Y,e.pathname,s]);const te=ee+Z,re=o?.filter(e=>"__singles__"!==e.yt_id)?.reduce((e,t)=>e+(t.video_count||0),0)||0;if(G)return C.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-dark-primary",children:C.jsxDEV("div",{className:"text-text-secondary",children:"Loading..."},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:284,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:283,columnNumber:7},this);if(H&&"/setup"!==e.pathname)return C.jsxDEV(x,{to:"/setup",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:291,columnNumber:12},this);const ne="/setup"===e.pathname||"/login"===e.pathname,se=e.pathname.startsWith("/player/")||e.pathname.startsWith("/play/"),ae=({to:t,icon:r,label:n,badge:a,onClick:i,isButton:o=!1})=>{const l=e.pathname===t||"/"===t&&e.pathname.startsWith("/channel/")&&!e.pathname.endsWith("/library")||"/library"===t&&(e.pathname.startsWith("/playlist/")||e.pathname.endsWith("/library")),d="relative flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors "+(l?"bg-accent/20 text-accent-text":"text-text-secondary hover:bg-dark-hover hover:text-text-primary");return o?C.jsxDEV("button",{onClick:i,className:d,title:n,children:[r,!u&&C.jsxDEV("span",{className:"text-sm font-medium",children:n},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:337,columnNumber:33},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:335,columnNumber:9},this):C.jsxDEV(p,{to:t,className:d,title:n,onClick:r=>{l&&e.pathname!==t&&(r.preventDefault(),s(t))},children:[r,!u&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{className:"text-sm font-medium",children:n},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:347,columnNumber:13},this),a>0&&C.jsxDEV("span",{className:"bg-accent text-dark-primary text-[10px] font-bold min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1",children:a>99?"99+":a},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:349,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:346,columnNumber:11},this),u&&a>0&&C.jsxDEV("span",{className:"absolute -top-1 -right-1 bg-accent text-dark-primary text-[10px] font-bold min-w-[18px] h-[18px] flex items-center justify-center rounded-full px-1",children:a>99?"99+":a},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:356,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:343,columnNumber:7},this)};return ne||se?C.jsxDEV("div",{className:"min-h-screen bg-dark-primary",children:[C.jsxDEV(ie,{children:C.jsxDEV(v,{children:[C.jsxDEV(j,{path:"/setup",element:C.jsxDEV(bs,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:370,columnNumber:43},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:370,columnNumber:13},this),C.jsxDEV(j,{path:"/login",element:C.jsxDEV(Ns,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:371,columnNumber:43},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:371,columnNumber:13},this),C.jsxDEV(j,{path:"/player/:videoId",element:Y?C.jsxDEV(ms,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:372,columnNumber:71},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:372,columnNumber:84},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:372,columnNumber:13},this),C.jsxDEV(j,{path:"/play/playlist/:playlistId",element:Y?C.jsxDEV(ps,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:373,columnNumber:81},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:373,columnNumber:102},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:373,columnNumber:13},this),C.jsxDEV(j,{path:"/play/category/:categoryId",element:Y?C.jsxDEV(ps,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:374,columnNumber:81},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:374,columnNumber:102},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:374,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:369,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:368,columnNumber:9},this),C.jsxDEV(Es,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:377,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:367,columnNumber:7},this):C.jsxDEV("div",{className:"flex h-screen overflow-hidden bg-dark-primary",children:[C.jsxDEV("nav",{className:"hidden md:flex flex-col bg-dark-secondary border-r border-dark-border transition-all duration-200 "+(u?"w-16":"w-40"),children:[C.jsxDEV("div",{className:"flex items-center justify-between p-2 border-b border-dark-border",children:[!u&&C.jsxDEV("img",{src:"/logo.png",alt:"YTandChill",className:"h-10 w-28"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:394,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>b(!u),className:"p-2 rounded-lg hover:bg-dark-hover transition-colors text-text-secondary",title:u?"Expand sidebar":"Collapse sidebar",children:u?C.jsxDEV(Ye,{className:"w-6 h-6"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:401,columnNumber:33},this):C.jsxDEV(Ge,{className:"w-6 h-6"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:401,columnNumber:68},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:396,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:392,columnNumber:9},this),C.jsxDEV("div",{className:"flex-1 p-2 space-y-1",children:[C.jsxDEV(ae,{to:"/",icon:C.jsxDEV(Ke,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:407,columnNumber:40},this),label:"Channels",badge:re},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:407,columnNumber:11},this),C.jsxDEV(ae,{to:"/library",icon:C.jsxDEV(Ue,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:408,columnNumber:47},this),label:"Library"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:408,columnNumber:11},this),C.jsxDEV(ae,{to:"/queue",icon:C.jsxDEV(He,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:409,columnNumber:45},this),label:"Queue",badge:te},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:409,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:406,columnNumber:9},this),C.jsxDEV("div",{className:"p-2 border-t border-dark-border space-y-1",children:[C.jsxDEV(ae,{to:"/settings",icon:C.jsxDEV(Re,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:414,columnNumber:48},this),label:"Settings"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:414,columnNumber:11},this),C.jsxDEV(ae,{isButton:!0,onClick:async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),window.location.replace("/login")}catch(e){console.error("Logout failed:",e),window.location.replace("/login")}},icon:C.jsxDEV(Je,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:415,columnNumber:65},this),label:"Logout"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:415,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:413,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:386,columnNumber:7},this),C.jsxDEV("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:[g&&!E&&C.jsxDEV(Ds,{currentVersion:Un,latestVersion:h,onDismiss:()=>{V(!0),h&&localStorage.setItem("updateBannerDismissedVersion",h)}},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:423,columnNumber:11},this),C.jsxDEV("main",{className:"flex-1 overflow-y-auto overflow-x-hidden px-0 pb-4 sm:px-6 sm:pb-6",children:C.jsxDEV(ie,{children:C.jsxDEV(v,{children:[C.jsxDEV(j,{path:"/",element:Y?C.jsxDEV(Te,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:434,columnNumber:58},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:434,columnNumber:73},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:434,columnNumber:15},this),C.jsxDEV(j,{path:"/videos",element:Y?C.jsxDEV(ct,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:435,columnNumber:64},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:435,columnNumber:77},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:435,columnNumber:15},this),C.jsxDEV(j,{path:"/library",element:Y?C.jsxDEV(tt,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:436,columnNumber:65},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:436,columnNumber:79},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:436,columnNumber:15},this),C.jsxDEV(j,{path:"/channel/:channelId",element:Y?C.jsxDEV(lt,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:437,columnNumber:76},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:437,columnNumber:97},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:437,columnNumber:15},this),C.jsxDEV(j,{path:"/channel/:channelId/library",element:Y?C.jsxDEV(lt,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:438,columnNumber:84},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:438,columnNumber:105},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:438,columnNumber:15},this),C.jsxDEV(j,{path:"/playlist/:id",element:Y?C.jsxDEV(dt,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:439,columnNumber:70},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:439,columnNumber:85},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:439,columnNumber:15},this),C.jsxDEV(j,{path:"/import",element:Y?C.jsxDEV(gs,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:440,columnNumber:64},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:440,columnNumber:77},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:440,columnNumber:15},this),C.jsxDEV(j,{path:"/queue",element:Y?C.jsxDEV(Qn,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:441,columnNumber:63},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:441,columnNumber:75},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:441,columnNumber:15},this),C.jsxDEV(j,{path:"/settings",element:Y?C.jsxDEV(rs,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:442,columnNumber:66},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:442,columnNumber:81},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:442,columnNumber:15},this),C.jsxDEV(j,{path:"*",element:C.jsxDEV(Cs,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:443,columnNumber:40},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:443,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:433,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:432,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:431,columnNumber:9},this),C.jsxDEV(ks,{queueCount:te,reviewCount:re},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:449,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:420,columnNumber:7},this),C.jsxDEV(Es,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:453,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:384,columnNumber:5},this)}function ks({queueCount:e,reviewCount:t}){const{isSelectionBarVisible:r}=de();return r?null:C.jsxDEV("div",{className:"md:hidden",children:C.jsxDEV(ns,{queueCount:e,reviewCount:t},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:466,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:465,columnNumber:5},this)}function Cs(){return C.jsxDEV("div",{className:"flex items-center justify-center h-full",children:C.jsxDEV("div",{className:"text-center",children:[C.jsxDEV("h1",{className:"text-4xl mb-4 text-text-primary",children:"404"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:476,columnNumber:9},this),C.jsxDEV("p",{className:"text-text-secondary mb-6",children:"Page not found"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:477,columnNumber:9},this),C.jsxDEV(p,{to:"/",className:"text-accent hover:text-accent-hover hover:underline transition-colors",children:"Go Home"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:478,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:475,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:474,columnNumber:5},this)}function Ss(){return C.jsxDEV(le,{children:C.jsxDEV(ws,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:490,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:489,columnNumber:5},this)}const Ps=new o({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5e3,gcTime:3e5}}});P.createRoot(document.getElementById("root")).render(C.jsxDEV(a.StrictMode,{children:C.jsxDEV(ie,{children:C.jsxDEV(l,{client:Ps,children:C.jsxDEV(M,{children:C.jsxDEV(se,{children:C.jsxDEV(y,{children:C.jsxDEV(te,{children:C.jsxDEV(Ss,{},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:33,columnNumber:17},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:32,columnNumber:15},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:31,columnNumber:13},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:30,columnNumber:11},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:29,columnNumber:9},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:28,columnNumber:7},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:27,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:26,columnNumber:3},void 0));
