import{r as e,a as t,u as r,b as n,c as a,d as s,e as i,Q as o,f as l}from"./query-vendor-Yhx-W-YM.js";import{g as d,v as c}from"./video-vendor-BqdENAHL.js";import{r as u,u as m,L as p,a as f,b,c as h,d as N,N as x,R as v,e as y,B as g}from"./router-vendor-BelzQ7WC.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var j,D,E={exports:{}},V={};function w(){return j||(j=1,function(){var t=e(),r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),b=Symbol.iterator;var h=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function N(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];!function(e,t,r){var n=h.ReactDebugCurrentFrame.getStackAddendum();""!==n&&(t+="%s",r=r.concat([n]));var a=r.map(function(e){return String(e)});a.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,a)}("error",e,r)}var x;function v(e){return e.displayName||"Context"}function y(e){if(null==e)return null;if("number"==typeof e.tag&&N("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case a:return"Fragment";case n:return"Portal";case i:return"Profiler";case s:return"StrictMode";case c:return"Suspense";case u:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case l:return v(e)+".Consumer";case o:return v(e._context)+".Provider";case d:return function(e,t,r){var n=e.displayName;if(n)return n;var a=t.displayName||t.name||"";return""!==a?r+"("+a+")":r}(e,e.render,"ForwardRef");case m:var t=e.displayName||null;return null!==t?t:y(e.type)||"Memo";case p:var r=e,f=r._payload,b=r._init;try{return y(b(f))}catch(h){return null}}return null}x=Symbol.for("react.module.reference");var g,j,D,E,w,k,C,S=Object.assign,P=0;function _(){}_.__reactDisabledLog=!0;var L,A=h.ReactCurrentDispatcher;function M(e,t,r){if(void 0===L)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);L=n&&n[1]||""}return"\n"+L+e}var T,I=!1,R="function"==typeof WeakMap?WeakMap:Map;function F(e,t){if(!e||I)return"";var r,n=T.get(e);if(void 0!==n)return n;I=!0;var a,s=Error.prepareStackTrace;Error.prepareStackTrace=void 0,a=A.current,A.current=null,function(){if(0===P){g=console.log,j=console.info,D=console.warn,E=console.error,w=console.group,k=console.groupCollapsed,C=console.groupEnd;var e={configurable:!0,enumerable:!0,value:_,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}P++}();try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(f){r=f}Reflect.construct(e,[],i)}else{try{i.call()}catch(f){r=f}e.call(i.prototype)}}else{try{throw Error()}catch(f){r=f}e()}}catch(b){if(b&&r&&"string"==typeof b.stack){for(var o=b.stack.split("\n"),l=r.stack.split("\n"),d=o.length-1,c=l.length-1;d>=1&&c>=0&&o[d]!==l[c];)c--;for(;d>=1&&c>=0;d--,c--)if(o[d]!==l[c]){if(1!==d||1!==c)do{if(d--,--c<0||o[d]!==l[c]){var u="\n"+o[d].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),"function"==typeof e&&T.set(e,u),u}}while(d>=1&&c>=0);break}}}finally{I=!1,A.current=a,function(){if(0===--P){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:S({},e,{value:g}),info:S({},e,{value:j}),warn:S({},e,{value:D}),error:S({},e,{value:E}),group:S({},e,{value:w}),groupCollapsed:S({},e,{value:k}),groupEnd:S({},e,{value:C})})}P<0&&N("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=s}var m=e?e.displayName||e.name:"",p=m?M(m):"";return"function"==typeof e&&T.set(e,p),p}function O(e,t,r){if(null==e)return"";if("function"==typeof e)return F(e,!(!(n=e.prototype)||!n.isReactComponent));var n;if("string"==typeof e)return M(e);switch(e){case c:return M("Suspense");case u:return M("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case d:return F(e.render,!1);case m:return O(e.type,t,r);case p:var a=e,s=a._payload,i=a._init;try{return O(i(s),t,r)}catch(o){}}return""}T=new R;var $=Object.prototype.hasOwnProperty,z={},B=h.ReactDebugCurrentFrame;function Q(e){if(e){var t=e._owner,r=O(e.type,e._source,t?t.type:null);B.setExtraStackFrame(r)}else B.setExtraStackFrame(null)}var q=Array.isArray;function W(e){return q(e)}function U(e){return""+e}function H(e){if(function(e){try{return U(e),!1}catch(t){return!0}}(e))return N("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),U(e)}var J,Y,G,K=h.ReactCurrentOwner,X={key:!0,ref:!0,__self:!0,__source:!0};G={};function Z(e,t,n,a,s){var i,o={},l=null,d=null;for(i in void 0!==n&&(H(n),l=""+n),function(e){if($.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}(t)&&(H(t.key),l=""+t.key),function(e){if($.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}(t)&&(d=t.ref,function(e,t){if("string"==typeof e.ref&&K.current&&t&&K.current.stateNode!==t){var r=y(K.current.type);G[r]||(N('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',y(K.current.type),e.ref),G[r]=!0)}}(t,s)),t)$.call(t,i)&&!X.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps){var c=e.defaultProps;for(i in c)void 0===o[i]&&(o[i]=c[i])}if(l||d){var u="function"==typeof e?e.displayName||e.name||"Unknown":e;l&&function(e,t){var r=function(){J||(J=!0,N("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};r.isReactWarning=!0,Object.defineProperty(e,"key",{get:r,configurable:!0})}(o,u),d&&function(e,t){var r=function(){Y||(Y=!0,N("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};r.isReactWarning=!0,Object.defineProperty(e,"ref",{get:r,configurable:!0})}(o,u)}return function(e,t,n,a,s,i,o){var l={$$typeof:r,type:e,key:t,ref:n,props:o,_owner:i,_store:{}};return Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.freeze&&(Object.freeze(l.props),Object.freeze(l)),l}(e,l,d,s,a,K.current,o)}var ee,te=h.ReactCurrentOwner,re=h.ReactDebugCurrentFrame;function ne(e){if(e){var t=e._owner,r=O(e.type,e._source,t?t.type:null);re.setExtraStackFrame(r)}else re.setExtraStackFrame(null)}function ae(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}function se(){if(te.current){var e=y(te.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}ee=!1;var ie={};function oe(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var r=function(e){var t=se();if(!t){var r="string"==typeof e?e:e.displayName||e.name;r&&(t="\n\nCheck the top-level render call using <"+r+">.")}return t}(t);if(!ie[r]){ie[r]=!0;var n="";e&&e._owner&&e._owner!==te.current&&(n=" It was passed a child from "+y(e._owner.type)+"."),ne(e),N('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',r,n),ne(null)}}}function le(e,t){if("object"==typeof e)if(W(e))for(var r=0;r<e.length;r++){var n=e[r];ae(n)&&oe(n,t)}else if(ae(e))e._store&&(e._store.validated=!0);else if(e){var a=function(e){if(null===e||"object"!=typeof e)return null;var t=b&&e[b]||e["@@iterator"];return"function"==typeof t?t:null}(e);if("function"==typeof a&&a!==e.entries)for(var s,i=a.call(e);!(s=i.next()).done;)ae(s.value)&&oe(s.value,t)}}function de(e){var t,r=e.type;if(null!=r&&"string"!=typeof r){if("function"==typeof r)t=r.propTypes;else{if("object"!=typeof r||r.$$typeof!==d&&r.$$typeof!==m)return;t=r.propTypes}if(t){var n=y(r);!function(e,t,r,n,a){var s=Function.call.bind($);for(var i in e)if(s(e,i)){var o=void 0;try{if("function"!=typeof e[i]){var l=Error((n||"React class")+": "+r+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}o=e[i](t,i,n,r,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(d){o=d}!o||o instanceof Error||(Q(a),N("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",n||"React class",r,i,typeof o),Q(null)),o instanceof Error&&!(o.message in z)&&(z[o.message]=!0,Q(a),N("Failed %s type: %s",r,o.message),Q(null))}}(t,e.props,"prop",n,e)}else if(void 0!==r.PropTypes&&!ee){ee=!0,N("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",y(r)||"Unknown")}"function"!=typeof r.getDefaultProps||r.getDefaultProps.isReactClassApproved||N("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var ce={};var ue=function(e,t,n,b,h,v){var g=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===i||e===s||e===c||e===u||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===m||e.$$typeof===o||e.$$typeof===l||e.$$typeof===d||e.$$typeof===x||void 0!==e.getModuleId)}(e);if(!g){var j="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(j+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var D,E=function(e){return void 0!==e?"\n\nCheck your code at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+".":""}(h);j+=E||se(),null===e?D="null":W(e)?D="array":void 0!==e&&e.$$typeof===r?(D="<"+(y(e.type)||"Unknown")+" />",j=" Did you accidentally export a JSX literal instead of a component?"):D=typeof e,N("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",D,j)}var V=Z(e,t,n,h,v);if(null==V)return V;if(g){var w=t.children;if(void 0!==w)if(b)if(W(w)){for(var k=0;k<w.length;k++)le(w[k],e);Object.freeze&&Object.freeze(w)}else N("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else le(w,e)}if($.call(t,"key")){var C=y(e),S=Object.keys(t).filter(function(e){return"key"!==e}),P=S.length>0?"{key: someKey, "+S.join(": ..., ")+": ...}":"{key: someKey}";if(!ce[C+P])N('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',P,C,S.length>0?"{"+S.join(": ..., ")+": ...}":"{}",C),ce[C+P]=!0}return e===a?function(e){for(var t=Object.keys(e.props),r=0;r<t.length;r++){var n=t[r];if("children"!==n&&"key"!==n){ne(e),N("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",n),ne(null);break}}null!==e.ref&&(ne(e),N("Invalid attribute `ref` supplied to `React.Fragment`."),ne(null))}(V):de(V),V};V.Fragment=a,V.jsxDEV=ue}()),V}var k,C=(D||(D=1,E.exports=w()),E.exports),S={};const P=d(function(){if(k)return S;k=1;var e=u(),t=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return S.createRoot=function(r,n){t.usingClientEntryPoint=!0;try{return e.createRoot(r,n)}finally{t.usingClientEntryPoint=!1}},S.hydrateRoot=function(r,n,a){t.usingClientEntryPoint=!0;try{return e.hydrateRoot(r,n,a)}finally{t.usingClientEntryPoint=!1}},S}()),_=t.createContext();function L({children:e}){const[r,n]=t.useState(null),a=t.useRef(null),s=t.useCallback((e,t="success",r={})=>{const{persistent:s=!1,progress:i=null}=r;a.current&&(clearTimeout(a.current),a.current=null),n({message:e,type:t,persistent:s,progress:i}),s||(a.current=setTimeout(()=>{n(null),a.current=null},3e3))},[]),i=t.useCallback(()=>{a.current&&(clearTimeout(a.current),a.current=null),n(null)},[]);return t.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),C.jsxDEV(_.Provider,{value:{notification:r,showNotification:s,clearNotification:i},children:e},void 0,!1,{fileName:"/appdata/frontend/src/contexts/NotificationContext.jsx",lineNumber:47,columnNumber:5},this)}function A(){const e=t.useContext(_);if(!e)throw new Error("useNotification must be used within NotificationProvider");return e}const M=t.createContext(),T={kernel:"Kernel",fatal:"Fatal",subnet:"Subnet",archive:"Archive",buffer:"Buffer",gateway:"Gateway",catppuccin:"Catppuccin",online:"Online",pixel:"Pixel",debug:"Debug"};function I({children:e}){const[r,n]=t.useState(()=>{const e=localStorage.getItem("ytandchill-theme");return e&&T[e]?e:"kernel"});t.useEffect(()=>{const e=document.documentElement;e.classList.remove("theme-kernel","theme-fatal","theme-subnet","theme-archive","theme-buffer","theme-gateway","theme-catppuccin","theme-online","theme-pixel","theme-debug"),e.classList.add(`theme-${r}`),localStorage.setItem("ytandchill-theme",r)},[r]);const a={theme:r,setTheme:n,themes:T};return C.jsxDEV(M.Provider,{value:a,children:e},void 0,!1,{fileName:"/appdata/frontend/src/contexts/ThemeContext.jsx",lineNumber:44,columnNumber:10},this)}function R(){const e=t.useContext(M);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}const F=t.createContext();function O({children:e}){const[r,n]=t.useState(()=>{const e=localStorage.getItem("cardSizes");if(e){const t=JSON.parse(e);return Object.keys(t).forEach(e=>{"xl"===t[e]&&(t[e]="lg")}),t}const t=localStorage.getItem("globalCardSize");if(t){const e="xl"===t?"lg":t;return{channels:e,videos:e,library:e,channelLibrary:e,playlist:e}}return{channels:"md",videos:"md",library:"md",channelLibrary:"md",playlist:"md"}});t.useEffect(()=>{localStorage.setItem("cardSizes",JSON.stringify(r))},[r]);return C.jsxDEV(F.Provider,{value:{cardSizes:r,getCardSize:e=>r[e]||"md",setCardSizeForTab:(e,t)=>{n(r=>({...r,[e]:t}))}},children:e},void 0,!1,{fileName:"/appdata/frontend/src/contexts/CardSizeContext.jsx",lineNumber:59,columnNumber:5},this)}function $(e){const r=t.useContext(F);if(!r)throw new Error("useCardSize must be used within CardSizeProvider");return{cardSize:r.getCardSize(e),setCardSize:t=>r.setCardSizeForTab(e,t)}}class z extends t.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t)}render(){return this.state.hasError?C.jsxDEV("div",{className:"flex items-center justify-center h-screen bg-bg-primary",children:C.jsxDEV("div",{className:"text-center p-8",children:[C.jsxDEV("h1",{className:"text-2xl mb-4 text-text-primary",children:"Something went wrong"},void 0,!1,{fileName:"/appdata/frontend/src/components/ErrorBoundary.jsx",lineNumber:22,columnNumber:13},this),C.jsxDEV("p",{className:"text-text-secondary mb-6",children:this.state.error?.message},void 0,!1,{fileName:"/appdata/frontend/src/components/ErrorBoundary.jsx",lineNumber:23,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-accent text-white rounded hover:bg-accent-hover transition-colors",children:"Reload Page"},void 0,!1,{fileName:"/appdata/frontend/src/components/ErrorBoundary.jsx",lineNumber:24,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ErrorBoundary.jsx",lineNumber:21,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ErrorBoundary.jsx",lineNumber:20,columnNumber:9},this):this.props.children}}const B=new class{async request(e,t={}){const r=`/api${e}`,n={...t,credentials:"include",headers:{"Content-Type":"application/json",...t.headers}},a=await fetch(r,n),s="/auth/check"===e||"/auth/check-first-run"===e;if(401===a.status)throw s||window.location.pathname.includes("/login")||window.location.pathname.includes("/setup")||(console.warn("Session expired, redirecting to login"),window.location.href="/login"),new Error("Session expired");if(204===a.status)return null;const i=await a.json();if(!a.ok)throw new Error(i.error||"API request failed");return i}getChannels(){return this.request("/channels")}createChannel(e){return this.request("/channels",{method:"POST",body:JSON.stringify(e)})}updateChannel(e,t){return this.request(`/channels/${e}`,{method:"PATCH",body:JSON.stringify(t)})}deleteChannel(e){return this.request(`/channels/${e}`,{method:"DELETE"})}scanChannel(e,t=!1,r=!1,n=!1,a=""){return this.request(`/channels/${e}/scan`,{method:"POST",body:JSON.stringify({force_full:t,is_batch_start:r,is_auto_scan:n,batch_label:a})})}getVideos(e={}){const t=Object.entries(e).reduce((e,[t,r])=>(null!=r&&""!==r&&(e[t]=r),e),{}),r=new URLSearchParams(t).toString();return this.request("/videos"+(r?`?${r}`:""))}getVideo(e){return this.request(`/videos/${e}`)}updateVideo(e,t){return this.request(`/videos/${e}`,{method:"PATCH",body:JSON.stringify(t)})}deleteVideo(e){return this.request(`/videos/${e}`,{method:"DELETE"})}bulkUpdateVideos(e,t){return this.request("/videos/bulk",{method:"PATCH",body:JSON.stringify({video_ids:e,updates:t})})}bulkDeleteVideos(e){return this.request("/videos/bulk-delete",{method:"DELETE",body:JSON.stringify({video_ids:e})})}getCategories(){return this.request("/categories")}getCategory(e){return this.request(`/categories/${e}`)}createCategory(e){return this.request("/categories",{method:"POST",body:JSON.stringify(e)})}updateCategory(e,t){return this.request(`/categories/${e}`,{method:"PATCH",body:JSON.stringify(t)})}deleteCategory(e){return this.request(`/categories/${e}`,{method:"DELETE"})}bulkAssignCategory(e,t){return this.request("/playlists/bulk-category",{method:"PATCH",body:JSON.stringify({playlist_ids:e,category_id:t})})}getChannelCategories(){return this.request("/channel-categories")}createChannelCategory(e){return this.request("/channel-categories",{method:"POST",body:JSON.stringify(e)})}updateChannelCategory(e,t){return this.request(`/channel-categories/${e}`,{method:"PATCH",body:JSON.stringify(t)})}deleteChannelCategory(e){return this.request(`/channel-categories/${e}`,{method:"DELETE"})}getPlaylists(e){const t=e?`?channel_id=${e}`:"";return this.request(`/playlists${t}`)}getPlaylist(e){return this.request(`/playlists/${e}`)}createPlaylist(e){return this.request("/playlists",{method:"POST",body:JSON.stringify(e)})}updatePlaylist(e,t){return this.request(`/playlists/${e}`,{method:"PATCH",body:JSON.stringify(t)})}deletePlaylist(e){return this.request(`/playlists/${e}`,{method:"DELETE"})}addVideoToPlaylist(e,t){return this.request(`/playlists/${e}/videos`,{method:"POST",body:JSON.stringify({video_id:t})})}addVideosToPlaylistBulk(e,t){return this.request(`/playlists/${e}/videos/bulk`,{method:"POST",body:JSON.stringify({video_ids:t})})}removeVideoFromPlaylist(e,t){return this.request(`/playlists/${e}/videos/${t}`,{method:"DELETE"})}getQueue(){return this.request("/queue")}addToQueue(e){return this.request("/queue",{method:"POST",body:JSON.stringify({video_id:e})})}addToQueueBulk(e){return this.request("/queue/bulk",{method:"POST",body:JSON.stringify({video_ids:e})})}pauseQueue(){return this.request("/queue/pause",{method:"POST"})}resumeQueue(){return this.request("/queue/resume",{method:"POST"})}cancelCurrent(){return this.request("/queue/cancel-current",{method:"POST"})}removeFromQueue(e){return this.request(`/queue/${e}`,{method:"DELETE"})}setOperation(e,t){return this.request("/operation/set",{method:"POST",body:JSON.stringify({type:e,message:t})})}clearOperation(){return this.request("/operation/clear",{method:"POST"})}reorderQueue(e,t){return this.request("/queue/reorder",{method:"POST",body:JSON.stringify({item_id:e,new_position:t})})}moveToTop(e){return this.request("/queue/move-to-top",{method:"POST",body:JSON.stringify({item_id:e})})}moveToBottom(e){return this.request("/queue/move-to-bottom",{method:"POST",body:JSON.stringify({item_id:e})})}clearQueue(){return this.request("/queue/clear",{method:"POST"})}getSettings(){return this.request("/settings")}updateSettings(e){return this.request("/settings",{method:"PATCH",body:JSON.stringify(e)})}checkOrphanedQueue(){return this.request("/queue/check-orphaned")}cleanupOrphanedQueue(){return this.request("/queue/cleanup-orphaned",{method:"POST"})}checkAuth(){return this.request("/auth/check")}checkFirstRun(){return this.request("/auth/check-first-run")}getHealth(){return this.request("/health")}getLogs(e=500){return this.request(`/logs?lines=${e}`)}scanYouTubePlaylist(e,t="new"){return this.request("/youtube-playlists/scan",{method:"POST",body:JSON.stringify({url:e,filter:t})})}queuePlaylistVideos(e){return this.request("/youtube-playlists/queue",{method:"POST",body:JSON.stringify({videos:e})})}removePlaylistVideos(e){return this.request("/youtube-playlists/remove",{method:"POST",body:JSON.stringify({videos:e})})}};function Q(){return r({queryKey:["channels"],queryFn:()=>B.getChannels()})}function q(){const e=n();return a({mutationFn:({id:e,data:t})=>B.updateChannel(e,t),onSuccess:()=>{e.invalidateQueries(["channels"])}})}function W(){const e=n();return a({mutationFn:e=>B.deleteChannel(e),onSuccess:()=>{e.invalidateQueries(["channels"]),e.invalidateQueries(["videos"])}})}function U(){const e=n();return a({mutationFn:({id:e,forceFull:t=!1,is_batch_start:r=!1,is_auto_scan:n=!1,batch_label:a=""})=>B.scanChannel(e,t,r,n,a),onSuccess:()=>{e.invalidateQueries(["videos"]),e.invalidateQueries(["channels"])}})}function H(e){return r({queryKey:["videos",e],queryFn:()=>B.getVideos(e),refetchInterval:5e3})}function J(){const e=n();return a({mutationFn:({id:e,data:t})=>B.updateVideo(e,t),onSuccess:()=>{e.invalidateQueries(["videos"]),e.invalidateQueries(["video"])}})}function Y(){const e=n();return a({mutationFn:e=>B.deleteVideo(e),onSuccess:()=>{e.invalidateQueries(["videos"]),e.invalidateQueries(["playlists"])}})}function G(){const e=n();return a({mutationFn:({videoIds:e,updates:t})=>B.bulkUpdateVideos(e,t),onSuccess:()=>{e.invalidateQueries(["videos"])}})}function K(e){return r({queryKey:["playlists",e],queryFn:()=>B.getPlaylists(e)})}function X(e){return r({queryKey:["playlist",e],queryFn:()=>B.getPlaylist(e),enabled:!!e})}function Z(){const e=n();return a({mutationFn:({playlistId:e,videoId:t})=>B.removeVideoFromPlaylist(e,t),onSuccess:()=>{e.invalidateQueries(["playlists"]),e.invalidateQueries(["playlist"])}})}function ee(){return r({queryKey:["queue"],queryFn:()=>B.getQueue(),refetchInterval:500,staleTime:0})}function te(){return r({queryKey:["health"],queryFn:()=>B.getHealth(),refetchInterval:1e4})}function re(e){if(!e)return"An unknown error occurred";const t=e.toLowerCase();return t.includes("youtube api key not configured")?"YouTube API key is not configured. Add your API key in Settings → YouTube API Key.":t.includes("youtube api")||t.includes("api key")?"YouTube API issue detected. Check your API key in Settings, or you may have hit the daily quota limit (10,000 requests). Try again tomorrow.":t.includes("quota")||t.includes("rate limit")?"YouTube API quota exceeded. You've hit the 10,000 daily request limit. Please try again tomorrow.":t.includes("cookie")||t.includes("sign in")||t.includes("login required")?"Cookie authentication failed. Re-export cookies.txt from your browser. See Settings → Cookies for instructions.":t.includes("geoblocked")||t.includes("not available in your country")||t.includes("geo restricted")?"This video is geoblocked in your region and cannot be downloaded.":t.includes("private video")||t.includes("video unavailable")||t.includes("video not found")||t.includes("removed")?"This video is private, deleted, or unavailable.":t.includes("members only")||t.includes("join this channel")?"This video is members-only content and cannot be downloaded.":t.includes("age")&&t.includes("verif")?"This video requires age verification and cannot be downloaded without signing in.":t.includes("copyright")?"This video has been taken down due to copyright.":t.includes("network")||t.includes("connection")||t.includes("timeout")?"Network connection issue. Check your internet connection and try again.":t.includes("403")||t.includes("forbidden")?"Access forbidden (403). This usually means YouTube rate limiting. Update your cookies.txt and wait 30-60 minutes before trying again.":t.includes("500")||t.includes("internal server error")?"YouTube server error (500). This is a temporary issue on YouTube's end. Please try again later.":t.includes("502")||t.includes("503")||t.includes("504")?"YouTube is experiencing service issues. Please try again later.":t.includes("ssl")||t.includes("certificate")?"SSL certificate error. Try updating yt-dlp: pip install --upgrade yt-dlp certifi":t.includes("channel")&&(t.includes("not found")||t.includes("does not exist"))?"Channel not found. Check the URL and try again.":t.includes("invalid url")||t.includes("could not resolve")?"Invalid URL. Make sure you're using the correct channel URL format.":e}function ne({children:e,className:t=""}){return C.jsxDEV("div",{className:`sticky top-[60px] z-40 bg-dark-primary/95 backdrop-blur-lg py-4 -mx-6 px-6 lg:-mx-12 lg:px-12 xl:-mx-16 xl:px-16 ${t}`,children:e},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/StickyBar.jsx",lineNumber:3,columnNumber:5},this)}function ae({value:e,onChange:t,placeholder:r="Search...",className:n=""}){return C.jsxDEV("div",{className:`relative flex-1 max-w-md ${n}`,children:[C.jsxDEV("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:r,className:"w-full pl-10 pr-4 py-2 text-sm bg-dark-secondary border border-dark-border rounded-lg text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:9,columnNumber:7},this),C.jsxDEV("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-text-muted",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"11",cy:"11",r:"8"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:17,columnNumber:9},this),C.jsxDEV("path",{d:"m21 21-4.35-4.35"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:18,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:16,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/SearchInput.jsx",lineNumber:8,columnNumber:5},this)}function se({show:e=!0,className:t="",tab:r="library"}){const{cardSize:n,setCardSize:a}=$(r);return e?C.jsxDEV("div",{className:`hidden md:flex items-center gap-2 ${t}`,children:[C.jsxDEV("svg",{className:"w-4 h-4 text-text-secondary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("rect",{x:"3",y:"3",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:11,columnNumber:9},this),C.jsxDEV("rect",{x:"14",y:"3",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:12,columnNumber:9},this),C.jsxDEV("rect",{x:"3",y:"14",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:13,columnNumber:9},this),C.jsxDEV("rect",{x:"14",y:"14",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:14,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:10,columnNumber:7},this),C.jsxDEV("input",{type:"range",min:"0",max:"2",value:["sm","md","lg"].indexOf(n),onChange:e=>{a(["sm","md","lg"][e.target.value])},className:"w-20 sm:w-24 h-2 bg-dark-tertiary rounded-lg appearance-none cursor-pointer\n          [&::-webkit-slider-thumb]:appearance-none\n          [&::-webkit-slider-thumb]:w-4\n          [&::-webkit-slider-thumb]:h-4\n          [&::-webkit-slider-thumb]:rounded-full\n          [&::-webkit-slider-thumb]:bg-accent\n          [&::-webkit-slider-thumb]:cursor-pointer\n          [&::-moz-range-thumb]:w-4\n          [&::-moz-range-thumb]:h-4\n          [&::-moz-range-thumb]:rounded-full\n          [&::-moz-range-thumb]:bg-accent\n          [&::-moz-range-thumb]:border-0\n          [&::-moz-range-thumb]:cursor-pointer",title:"Adjust card density (sm=compact, lg=spacious)","aria-label":"Adjust card density"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:16,columnNumber:7},this),C.jsxDEV("svg",{className:"w-5 h-5 text-text-secondary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("rect",{x:"2",y:"2",width:"9",height:"9"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:42,columnNumber:9},this),C.jsxDEV("rect",{x:"13",y:"2",width:"9",height:"9"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:43,columnNumber:9},this),C.jsxDEV("rect",{x:"2",y:"13",width:"9",height:"9"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:44,columnNumber:9},this),C.jsxDEV("rect",{x:"13",y:"13",width:"9",height:"9"},void 0,!1,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:45,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:41,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/stickybar/CardSizeSlider.jsx",lineNumber:9,columnNumber:5},this):null}const ie=e=>{const t=window.innerWidth,r="ontouchstart"in window||navigator.maxTouchPoints>0,n={touch:{sm:{portrait:1,landscape:4,tablet:6},md:{portrait:1,landscape:3,tablet:5},lg:{portrait:1,landscape:2,tablet:4}},desktop:{sm:{up1440:6,up1920:8,up2560:10,over2560:12},md:{up1440:5,up1920:6,up2560:8,over2560:10},lg:{up1440:4,up1920:5,up2560:6,over2560:8}}},a=n[r?"touch":"desktop"][e]||n.desktop.md;return r?t<640?a.portrait:t<1024?a.landscape:a.tablet:t<1440?a.up1440:t<1920?a.up1920:t<2560?a.up2560:a.over2560},oe=(e,t=1/0)=>{const r=ie("lg"),n={1:"grid-cols-1",2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5",6:"grid-cols-6",7:"grid-cols-7",8:"grid-cols-8",9:"grid-cols-9",10:"grid-cols-10",11:"grid-cols-11",12:"grid-cols-12"};return n[Math.min(e,Math.max(r,t))]||n[5]},le=(e,t=1/0)=>{const r=ie(e),n=Math.min(r,t);if(n===r)return e;ie("sm");const a=ie("md");return n<=ie("lg")?"lg":n<=a?"md":"sm"},de=(e,t=1/0)=>{const r={sm:{title:"text-sm",metadata:"text-xs",badge:"text-xs"},md:{title:"text-base",metadata:"text-sm",badge:"text-xs"},lg:{title:"text-lg",metadata:"text-sm",badge:"text-sm"}};return r[le(e,t)]||r.md};function ce({size:e="md",className:t=""}){return C.jsxDEV("div",{className:"flex justify-center items-center h-64",children:C.jsxDEV("div",{className:`animate-spin ${{sm:"h-6 w-6 border-2",md:"h-8 w-8 border-4",lg:"h-12 w-12 border-4"}[e]} border-accent border-t-transparent rounded-full ${t}`},void 0,!1,{fileName:"/appdata/frontend/src/components/LoadingSpinner.jsx",lineNumber:10,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/LoadingSpinner.jsx",lineNumber:9,columnNumber:5},this)}const ue=e=>{const[r,n]=t.useState(ie(e));return t.useEffect(()=>{const t="ontouchstart"in window||navigator.maxTouchPoints>0,r=()=>{t?setTimeout(()=>{n(ie(e))},100):n(ie(e))};return r(),window.addEventListener("resize",r),window.addEventListener("orientationchange",r),()=>{window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r)}},[e]),r};function me({icon:e,title:t,message:r,iconType:n="svg"}){return C.jsxDEV("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:["emoji"===n?C.jsxDEV("div",{className:"text-6xl mb-4",children:e},void 0,!1,{fileName:"/appdata/frontend/src/components/EmptyState.jsx",lineNumber:14,columnNumber:9},this):C.jsxDEV("svg",{className:"w-16 h-16 mx-auto mb-4 text-text-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e},void 0,!1,{fileName:"/appdata/frontend/src/components/EmptyState.jsx",lineNumber:16,columnNumber:9},this),C.jsxDEV("p",{className:"text-lg font-medium text-text-primary",children:t},void 0,!1,{fileName:"/appdata/frontend/src/components/EmptyState.jsx",lineNumber:22,columnNumber:7},this),r&&C.jsxDEV("p",{className:"text-sm mt-2 text-text-secondary",children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/EmptyState.jsx",lineNumber:26,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/EmptyState.jsx",lineNumber:11,columnNumber:5},this)}function pe(){const{data:e,isLoading:s}=Q(),{data:i}=ee(),{data:o}=r({queryKey:["channel-categories"],queryFn:()=>B.getChannelCategories()}),l=function(){const e=n();return a({mutationFn:e=>B.createChannel(e),onSuccess:()=>{e.invalidateQueries(["channels"])}})}(),d=W(),c=U(),u=q(),f=function(){const e=n();return a({mutationFn:e=>B.createChannelCategory(e),onSuccess:()=>{e.invalidateQueries(["channel-categories"])}})}(),b=function(){const e=n();return a({mutationFn:({id:e,data:t})=>B.updateChannelCategory(e,t),onSuccess:()=>{e.invalidateQueries(["channel-categories"])}})}(),h=function(){const e=n();return a({mutationFn:e=>B.deleteChannelCategory(e),onSuccess:()=>{e.invalidateQueries(["channel-categories"]),e.invalidateQueries(["channels"])}})}(),{showNotification:N}=A(),{cardSize:x}=$("channels");m();const v=n(),y=ue(x),[g,j]=t.useState(!1),[D,E]=t.useState(""),[V,w]=t.useState(0),[k,S]=t.useState(0),[P,_]=t.useState(null),[L,M]=t.useState(null),[T,I]=t.useState(null),[R,F]=t.useState(null),[O,z]=t.useState(""),[H,J]=t.useState(localStorage.getItem("channels_sortBy")||"needs_review_then_scan"),[Y,G]=t.useState(!1),[K,X]=t.useState([]),[Z,te]=t.useState(!1),ie=t.useRef(null),[pe,fe]=t.useState(()=>{const e=localStorage.getItem("channels_categoryFilter");return e?JSON.parse(e):[]}),[be,he]=t.useState(!1),Ne=t.useRef(null),[xe,ve]=t.useState(!1),[ye,ge]=t.useState(""),[je,De]=t.useState(null),[Ee,Ve]=t.useState(null),[we,ke]=t.useState(null),[Ce,Se]=t.useState(null),Pe=i?.current_operation,_e=t.useRef(null),Le="scanning"===Pe?.type;t.useEffect(()=>{"scan_complete"===Pe?.type&&"scan_complete"!==_e.current&&(v.invalidateQueries(["channels"]),X([]),Se(null)),_e.current=Pe?.type},[Pe?.type,v]),t.useEffect(()=>{(async()=>{try{const e=await fetch("/api/settings/discoveries-flag");(await e.json()).new_discoveries&&(J("most_to_review"),localStorage.setItem("channels_sortBy","most_to_review"),await fetch("/api/settings/discoveries-flag",{method:"DELETE"}))}catch(e){console.error("Error checking discoveries flag:",e)}})()},[]);const Ae=async(t=!1)=>{if(!e||0===e.length)return void N("No channels to scan","info");Se(t?"all":"new");const r=K.length>0?e.filter(e=>K.includes(e.id)):e.filter(e=>"__singles__"!==e.yt_id);if(0===r.length)return void N("No channels selected","info");let n;n=0===K.length?t?"Scan All":"Scan New":1===r.length?r[0].title:`Scan ${r.length} channels`,B.setOperation("scanning","Scanning channels for new videos").catch(()=>{}),v.invalidateQueries(["queue"]);let a=0,s=0,i=0;for(const e of r)try{const r=await c.mutateAsync({id:e.id,forceFull:t,is_batch_start:0===a,is_auto_scan:!1,batch_label:n});if("queued"===r.status)a++;else{if("batch_in_progress"===r.status)return void N("A scan is already running. Please wait for it to complete.","warning");"already_queued"===r.status&&s++}}catch(o){console.error(`Failed to queue scan for channel ${e.title}:`,o),i++}if(i>0){N(`Queued ${a} scans (${s} already queued, ${i} errors)`,"warning")}};t.useEffect(()=>{const e=e=>{const t=document.querySelectorAll(".channel-card-container");let r=!0;t.forEach(t=>{t.contains(e.target)&&(r=!1)}),r&&(I(null),F(null),ke(null)),ie.current&&!ie.current.contains(e.target)&&G(!1),Ne.current&&!Ne.current.contains(e.target)&&he(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),t.useEffect(()=>{localStorage.setItem("channels_sortBy",H)},[H]),t.useEffect(()=>{localStorage.setItem("channels_categoryFilter",JSON.stringify(pe))},[pe]);const Me=e=>{if(!e)return null;const t=new Date(e);if((e=>{const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()})(t)){const e=t.getHours(),r=e>=12?"pm":"am";return`${e%12||12}:${t.getMinutes().toString().padStart(2,"0")}${r}`}return t.toLocaleDateString("en-US",{month:"numeric",day:"numeric"})},Te=t.useMemo(()=>{let t=e?.filter(e=>"__singles__"!==e.yt_id&&(e.title||"").toLowerCase().includes(O.toLowerCase()))||[];pe.length>0&&(t=t.filter(e=>!(!pe.includes("uncategorized")||e.category_id)||pe.includes(e.category_id)));return[...t].sort((e,t)=>{switch(H){case"needs_review_then_scan":const r=(e.video_count||0)>0?1:0,n=((t.video_count||0)>0?1:0)-r;if(0!==n)return n;const a=e.last_video_date||"";return(t.last_video_date||"").localeCompare(a);case"a_z":return(e.title||"").localeCompare(t.title||"");case"z_a":return(t.title||"").localeCompare(e.title||"");case"most_downloaded":return(t.downloaded_count||0)-(e.downloaded_count||0);case"least_downloaded":return(e.downloaded_count||0)-(t.downloaded_count||0);case"most_to_review":return(t.video_count||0)-(e.video_count||0);case"least_to_review":return(e.video_count||0)-(t.video_count||0);case"newest_scanned":return new Date(t.last_scan_at||0)-new Date(e.last_scan_at||0);case"oldest_scanned":return new Date(e.last_scan_at||0)-new Date(t.last_scan_at||0);default:return 0}})},[e,O,pe,H]);return s?C.jsxDEV(ce,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:470,columnNumber:12},this):C.jsxDEV("div",{className:"space-y-6 animate-fade-in",children:[C.jsxDEV(ne,{children:C.jsxDEV("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-4",children:[C.jsxDEV("button",{onClick:()=>j(!g),className:"w-8 h-8 p-0 flex items-center justify-center border rounded transition-all "+(0!==Te.length||g?"bg-dark-hover hover:bg-dark-tertiary border-dark-border-light text-text-primary":"bg-green-600 hover:bg-green-700 border-green-500 text-white shadow-lg shadow-green-500/50 animate-pulse"),title:g?"Cancel":0===Te.length?"Add Your First Channel!":"Add Channel",children:g?C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:488,columnNumber:17},this),C.jsxDEV("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:489,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:487,columnNumber:15},this):C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"12",y1:"5",x2:"12",y2:"19"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:493,columnNumber:17},this),C.jsxDEV("line",{x1:"5",y1:"12",x2:"19",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:494,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:492,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:477,columnNumber:11},this),C.jsxDEV("div",{className:"flex items-center gap-2 px-3 py-2 bg-dark-secondary border border-dark-border rounded-lg",children:[C.jsxDEV("svg",{className:"w-4 h-4 flex-shrink-0 transition-colors "+(Le?"animate-spin text-accent":"text-text-secondary"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"23 4 23 10 17 10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:511,columnNumber:15},this),C.jsxDEV("path",{d:"M20.49 15a9 9 0 01-2.12 3.36 9 9 0 01-11.58 1.47A9 9 0 013 12a9 9 0 011.79-5.37A9 9 0 0112 3a9 9 0 018.5 6.5L23 10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:512,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:502,columnNumber:13},this),C.jsxDEV("span",{className:"text-sm text-text-primary",children:"Scan"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:516,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>Ae(!1),disabled:!e||0===e.length||Le,className:`px-3 py-1 text-sm rounded transition-colors disabled:cursor-not-allowed ${Le&&"new"===Ce?"bg-accent text-white":"bg-dark-tertiary text-text-primary hover:bg-dark-hover"} ${e&&0!==e.length?"":"disabled:opacity-50"}`,title:Le?"Scan in progress...":K.length>0?"Scan selected channels for new videos since last scan":"Scan all channels for new videos since last scan",children:"New"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:519,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>Ae(!0),disabled:!e||0===e.length||Le,className:`px-3 py-1 text-sm rounded transition-colors disabled:cursor-not-allowed ${Le&&"all"===Ce?"bg-accent text-white":"bg-dark-tertiary text-text-primary hover:bg-dark-hover"} ${e&&0!==e.length?"":"disabled:opacity-50"}`,title:Le?"Scan in progress...":K.length>0?"Rescan selected channels for all videos":"Rescan all channels for all videos",children:"All"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:537,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:500,columnNumber:11},this),Le&&void 0!==Pe?.progress?C.jsxDEV("div",{className:"flex items-center gap-3 px-4 py-2 bg-dark-secondary border border-dark-border-light rounded-lg w-full sm:w-auto",children:[C.jsxDEV("span",{className:"text-sm font-medium text-text-primary whitespace-nowrap",children:["Scanning: ",Pe.progress,"%"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:558,columnNumber:15},this),C.jsxDEV("div",{className:"flex-1 sm:w-[120px] bg-dark-tertiary rounded-full h-2 overflow-hidden",children:C.jsxDEV("div",{className:"bg-accent h-full transition-all duration-300",style:{width:`${Pe.progress}%`}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:562,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:561,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:557,columnNumber:13},this):C.jsxDEV(ae,{value:O,onChange:z,placeholder:"Search channels...",className:"w-full sm:w-[200px]"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:569,columnNumber:13},this),C.jsxDEV("div",{className:"relative",ref:ie,children:[C.jsxDEV("button",{onClick:()=>G(!Y),className:"filter-btn",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"4",y1:"6",x2:"16",y2:"6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:584,columnNumber:17},this),C.jsxDEV("line",{x1:"4",y1:"12",x2:"13",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:585,columnNumber:17},this),C.jsxDEV("line",{x1:"4",y1:"18",x2:"10",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:586,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:583,columnNumber:15},this),C.jsxDEV("span",{children:"Sort"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:588,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:579,columnNumber:13},this),Y&&C.jsxDEV("div",{className:"absolute left-0 sm:left-auto sm:right-0 mt-2 w-56 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-2 z-[100]",children:[C.jsxDEV("div",{className:"px-3 py-2 text-xs font-semibold text-text-secondary uppercase",children:"Sort By"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:594,columnNumber:17},this),C.jsxDEV("div",{className:"px-4 py-2 hover:bg-dark-hover transition-colors",children:C.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:C.jsxDEV("div",{className:"flex gap-4",children:[C.jsxDEV("button",{onClick:()=>{J("a_z"),G(!1)},className:""+("a_z"===H?"text-accent":"text-text-primary hover:text-accent"),children:"A-Z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:600,columnNumber:23},this),C.jsxDEV("button",{onClick:()=>{J("z_a"),G(!1)},className:""+("z_a"===H?"text-accent":"text-text-primary hover:text-accent"),children:"Z-A"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:606,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:599,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:598,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:597,columnNumber:17},this),C.jsxDEV("div",{className:"px-4 py-2 hover:bg-dark-hover transition-colors",children:C.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:[C.jsxDEV("span",{className:"text-text-primary",children:"Downloaded"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:619,columnNumber:21},this),C.jsxDEV("div",{className:"flex gap-1",children:[C.jsxDEV("button",{onClick:()=>{J("most_downloaded"),G(!1)},className:"p-1 rounded "+("most_downloaded"===H?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Most Downloaded","aria-label":"Sort by most downloaded",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 5v14M5 12l7-7 7 7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:628,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:627,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:621,columnNumber:23},this),C.jsxDEV("button",{onClick:()=>{J("least_downloaded"),G(!1)},className:"p-1 rounded "+("least_downloaded"===H?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Least Downloaded","aria-label":"Sort by least downloaded",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 19V5M5 12l7 7 7-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:638,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:637,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:631,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:620,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:618,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:617,columnNumber:17},this),C.jsxDEV("div",{className:"px-4 py-2 hover:bg-dark-hover transition-colors",children:C.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:[C.jsxDEV("span",{className:"text-text-primary",children:"To Review"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:648,columnNumber:21},this),C.jsxDEV("div",{className:"flex gap-1",children:[C.jsxDEV("button",{onClick:()=>{J("most_to_review"),G(!1)},className:"p-1 rounded "+("most_to_review"===H?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Most To Review","aria-label":"Sort by most to review",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 5v14M5 12l7-7 7 7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:657,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:656,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:650,columnNumber:23},this),C.jsxDEV("button",{onClick:()=>{J("least_to_review"),G(!1)},className:"p-1 rounded "+("least_to_review"===H?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Least To Review","aria-label":"Sort by least to review",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 19V5M5 12l7 7 7-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:667,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:666,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:660,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:649,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:647,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:646,columnNumber:17},this),C.jsxDEV("div",{className:"px-4 py-2 hover:bg-dark-hover transition-colors",children:C.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:[C.jsxDEV("span",{className:"text-text-primary",children:"Last Scanned"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:677,columnNumber:21},this),C.jsxDEV("div",{className:"flex gap-1",children:[C.jsxDEV("button",{onClick:()=>{J("newest_scanned"),G(!1)},className:"p-1 rounded "+("newest_scanned"===H?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Newest Scanned","aria-label":"Sort by newest scanned",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 5v14M5 12l7-7 7 7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:686,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:685,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:679,columnNumber:23},this),C.jsxDEV("button",{onClick:()=>{J("oldest_scanned"),G(!1)},className:"p-1 rounded "+("oldest_scanned"===H?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Oldest Scanned","aria-label":"Sort by oldest scanned",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 19V5M5 12l7 7 7-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:696,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:695,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:689,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:678,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:676,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:675,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:593,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:578,columnNumber:11},this),C.jsxDEV("div",{className:"relative",ref:Ne,children:[C.jsxDEV("button",{onClick:()=>he(!be),className:"filter-btn "+(pe.length>0?"ring-2 ring-accent/40":""),children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:713,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:712,columnNumber:15},this),C.jsxDEV("span",{children:0===pe.length?"Category":1===pe.length?"uncategorized"===pe[0]?"Uncategorized":o?.find(e=>e.id===pe[0])?.name||"Category":`${pe.length} categories`},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:715,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:708,columnNumber:13},this),be&&C.jsxDEV("div",{className:"absolute left-0 sm:left-auto sm:right-0 mt-2 w-64 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-2 z-[100]",children:[C.jsxDEV("div",{className:"px-3 py-2 text-xs font-semibold text-text-secondary uppercase flex justify-between items-center",children:[C.jsxDEV("span",{children:K.length>0?`Assign ${K.length} channel${K.length>1?"s":""} to:`:"Filter by Category"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:728,columnNumber:19},this),0===K.length&&pe.length>0&&C.jsxDEV("button",{onClick:()=>fe([]),className:"text-accent-text hover:text-accent-text/80 text-xs normal-case",children:"Clear"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:734,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:727,columnNumber:17},this),C.jsxDEV("button",{className:"flex items-center gap-2 px-4 py-2 hover:bg-dark-hover cursor-pointer w-full text-left",onClick:async()=>{if(K.length>0){const t=K.length;N(`Assigning ${t} channel${t>1?"s":""} to Uncategorized...`,"info");let r=0,n=0;for(const a of K)try{await u.mutateAsync({id:a,data:{category_id:null}}),r++}catch(e){console.error(`Failed to update channel ${a}:`,e),n++}0===n?N(`${r} channel${r>1?"s":""} set to Uncategorized`,"success"):N(`${r} assigned, ${n} failed`,"warning"),X([]),he(!1)}else pe.includes("uncategorized")?fe(pe.filter(e=>"uncategorized"!==e)):fe([...pe,"uncategorized"])},children:[0===K.length&&C.jsxDEV("input",{type:"checkbox",checked:pe.includes("uncategorized"),readOnly:!0,className:"w-4 h-4 rounded border-dark-border bg-dark-tertiary text-accent-text"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:784,columnNumber:21},this),C.jsxDEV("span",{className:"text-sm text-text-secondary italic",children:"Uncategorized"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:791,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:744,columnNumber:17},this),o?.map(e=>C.jsxDEV("button",{className:"flex items-center gap-2 px-4 py-2 hover:bg-dark-hover cursor-pointer w-full text-left",onClick:async()=>{if(K.length>0){const r=K.length;N(`Assigning ${r} channel${r>1?"s":""} to ${e.name}...`,"info");let n=0,a=0;for(const s of K)try{await u.mutateAsync({id:s,data:{category_id:e.id}}),n++}catch(t){console.error(`Failed to update channel ${s}:`,t),a++}0===a?N(`${n} channel${n>1?"s":""} assigned to ${e.name}`,"success"):N(`${n} assigned, ${a} failed`,"warning"),v.invalidateQueries(["channel-categories"]),X([]),he(!1)}else pe.includes(e.id)?fe(pe.filter(t=>t!==e.id)):fe([...pe,e.id])},children:[0===K.length&&C.jsxDEV("input",{type:"checkbox",checked:pe.includes(e.id),readOnly:!0,className:"w-4 h-4 rounded border-dark-border bg-dark-tertiary text-accent-text"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:839,columnNumber:23},this),C.jsxDEV("span",{className:"text-sm text-text-primary",children:e.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:846,columnNumber:21},this),C.jsxDEV("span",{className:"text-xs text-text-muted ml-auto",children:e.channel_count},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:847,columnNumber:21},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:796,columnNumber:19},this)),C.jsxDEV("div",{className:"border-t border-dark-border mt-2 pt-2",children:C.jsxDEV("button",{onClick:()=>{he(!1),ve(!0)},className:"w-full px-4 py-2 text-left text-sm text-accent-text hover:bg-dark-hover",children:"Manage Categories..."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:853,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:852,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:726,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:707,columnNumber:11},this),C.jsxDEV("button",{onClick:()=>{te(!Z),X([])},className:"filter-btn "+(Z?"bg-dark-tertiary text-text-primary border-dark-border-light":""),children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:876,columnNumber:15},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:877,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:875,columnNumber:13},this),C.jsxDEV("span",{children:Z?"Done":"Edit"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:879,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:868,columnNumber:11},this),Z&&C.jsxDEV(C.Fragment,{children:[K.length>0&&C.jsxDEV("span",{className:"text-xs text-accent-text font-medium",children:[K.length," selected"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:886,columnNumber:17},this),Te.length>0&&C.jsxDEV("button",{onClick:()=>X(Te.map(e=>e.id)),className:"btn btn-primary btn-sm",children:["Select All (",Te.length,")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:891,columnNumber:17},this),K.length>0&&C.jsxDEV("button",{onClick:()=>X([]),className:"btn btn-secondary btn-sm",children:"Clear"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:899,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:884,columnNumber:13},this),C.jsxDEV(se,{tab:"channels"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:910,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:476,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:475,columnNumber:7},this),g&&C.jsxDEV("div",{className:"card p-4 animate-slide-down max-w-2xl mx-auto",children:C.jsxDEV("form",{onSubmit:async e=>{e.preventDefault();let t=D.trim();t.startsWith("@")&&!t.includes("youtube.com")&&(t=`https://www.youtube.com/${t}`);if(["/videos","/playlists","/streams","/shorts","/community","/about","/channels","/featured"].some(e=>t.toLowerCase().includes(e)))N("Invalid URL: Remove /videos, /playlists, or /streams from the channel URL","error");else try{const e=await l.mutateAsync({url:t,min_minutes:V,max_minutes:k});E(""),w(0),S(0),j(!1),e.scan_result&&"queued"===e.scan_result.status?N("Channel added! Initial scan queued","success"):N("Channel added successfully","success")}catch(r){N(re(r.message),"error")}},className:"space-y-3",children:[C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"text-xs font-semibold text-text-secondary mb-1 block",children:"Channel URL or ID"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:918,columnNumber:15},this),C.jsxDEV("input",{type:"text",value:D,onChange:e=>E(e.target.value),placeholder:"https://www.youtube.com/channel/...",className:"input text-sm py-1.5 px-3 w-full",required:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:919,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:917,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-end gap-3",children:[C.jsxDEV("div",{className:"w-32",children:[C.jsxDEV("div",{className:"flex items-center gap-1 mb-1",children:[C.jsxDEV("label",{className:"text-xs font-semibold text-text-secondary",children:"Min (min)"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:931,columnNumber:19},this),C.jsxDEV("button",{type:"button",className:"text-text-secondary hover:text-text-primary transition-colors",title:"Minimum video duration in minutes. Only videos longer than this will be found. Use 0 for no minimum.",children:C.jsxDEV("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:938,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:937,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:932,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:930,columnNumber:17},this),C.jsxDEV("input",{type:"number",value:V,onChange:e=>w(Number(e.target.value)),placeholder:"0",className:"input text-sm py-1.5 px-3 w-full",min:"0"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:942,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:929,columnNumber:15},this),C.jsxDEV("div",{className:"w-32",children:[C.jsxDEV("div",{className:"flex items-center gap-1 mb-1",children:[C.jsxDEV("label",{className:"text-xs font-semibold text-text-secondary",children:"Max (min)"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:953,columnNumber:19},this),C.jsxDEV("button",{type:"button",className:"text-text-secondary hover:text-text-primary transition-colors",title:"Maximum video duration in minutes. Only videos shorter than this will be found. Use 0 for no maximum.",children:C.jsxDEV("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:960,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:959,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:954,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:952,columnNumber:17},this),C.jsxDEV("input",{type:"number",value:k,onChange:e=>S(Number(e.target.value)),placeholder:"0",className:"input text-sm py-1.5 px-3 w-full",min:"0"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:964,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:951,columnNumber:15},this),C.jsxDEV("button",{type:"submit",disabled:l.isPending,className:"btn btn-primary py-1.5 px-4 text-sm",children:l.isPending?"Adding...":"Add Channel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:973,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:928,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:916,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:915,columnNumber:9},this),(()=>{const e=le(x,Te.length),t=de(e);return C.jsxDEV("div",{className:"px-6 lg:px-12 xl:px-16",children:C.jsxDEV("div",{className:`grid ${oe(y,Te.length)} gap-4 w-full [&>*]:min-w-0`,children:Te.map(e=>C.jsxDEV("div",{className:"relative group channel-card-container",children:[T===e.id&&C.jsxDEV("div",{className:"absolute top-10 right-2 bg-dark-secondary border border-dark-border rounded-lg shadow-xl z-[100] w-[200px] animate-scale-in",children:C.jsxDEV("div",{className:"py-1 max-h-[400px] overflow-y-auto",children:[C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation();const r=!e.auto_download;u.mutate({id:e.id,data:{auto_download:r}},{onSuccess:()=>{N(r?`Auto-download enabled for ${e.title}`:`Auto-download disabled for ${e.title}`,"success")}})},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",title:"If checked, will automatically download any new video that is found via scan (manual or automated)",children:[C.jsxDEV("input",{type:"checkbox",checked:e.auto_download||!1,readOnly:!0,className:"w-4 h-4 rounded border-dark-border bg-dark-tertiary text-accent-text"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1021,columnNumber:21},this),C.jsxDEV("span",{className:"font-medium",children:"Auto-Download"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1027,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:999,columnNumber:19},this),C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),F(R===e.id?null:e.id),R!==e.id&&_(e)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center justify-between",children:[C.jsxDEV("span",{className:"font-medium",children:"Duration Settings"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1042,columnNumber:21},this),C.jsxDEV("svg",{className:"w-4 h-4 text-text-muted transition-transform "+(R===e.id?"rotate-90":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"9 18 15 12 9 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1044,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1043,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1031,columnNumber:19},this),R===e.id&&C.jsxDEV("div",{className:"bg-dark-tertiary/50 border-t border-dark-border p-3 space-y-2",children:[C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("div",{className:"flex-1",children:[C.jsxDEV("label",{className:"block text-xs text-text-secondary mb-1",children:"Min"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1053,columnNumber:27},this),C.jsxDEV("input",{type:"number",value:P?.id===e.id?P.min_minutes:e.min_minutes,onChange:t=>_({...e,min_minutes:Number(t.target.value),max_minutes:P?.id===e.id?P.max_minutes:e.max_minutes}),onClick:e=>e.stopPropagation(),className:"input text-sm py-1 w-full",min:"0",title:"Minimum video duration in minutes. Only videos longer than this will be found. Use 0 for no minimum."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1054,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1052,columnNumber:25},this),C.jsxDEV("div",{className:"flex-1",children:[C.jsxDEV("label",{className:"block text-xs text-text-secondary mb-1",children:"Max"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1069,columnNumber:27},this),C.jsxDEV("input",{type:"number",value:P?.id===e.id?P.max_minutes:e.max_minutes,onChange:t=>_({...e,max_minutes:Number(t.target.value),min_minutes:P?.id===e.id?P.min_minutes:e.min_minutes}),onClick:e=>e.stopPropagation(),className:"input text-sm py-1 w-full",min:"0",title:"Maximum video duration in minutes. Only videos shorter than this will be found. Use 0 for no maximum."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1070,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1068,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1051,columnNumber:23},this),C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),(async e=>{try{await u.mutateAsync({id:e.id,data:{min_minutes:e.min_minutes,max_minutes:e.max_minutes}}),_(null),N("Filters updated","success")}catch(t){N(re(t.message),"error")}})(P||e),F(null),I(null)},className:"w-full btn btn-primary btn-sm",children:"Save"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1085,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1050,columnNumber:21},this),C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),ke(we===e.id?null:e.id)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center justify-between",children:[C.jsxDEV("span",{className:"font-medium",children:"Set Category"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1109,columnNumber:21},this),C.jsxDEV("svg",{className:"w-4 h-4 text-text-muted transition-transform "+(we===e.id?"rotate-90":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"9 18 15 12 9 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1111,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1110,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1101,columnNumber:19},this),we===e.id&&C.jsxDEV("div",{className:"bg-dark-tertiary/50 border-t border-dark-border",children:[C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),u.mutate({id:e.id,data:{category_id:null}},{onSuccess:()=>{N(`${e.title} set to Uncategorized`,"success"),ke(null),I(null)}})},className:"w-full px-6 py-2 text-left text-sm hover:bg-dark-hover transition-colors flex items-center gap-2 "+(e.category_id?"text-text-secondary italic":"text-accent-text"),children:[!e.category_id&&C.jsxDEV("svg",{className:"w-3 h-3",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12",stroke:"currentColor",strokeWidth:"3",fill:"none"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1138,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1137,columnNumber:27},this),C.jsxDEV("span",{className:e.category_id?"ml-5":"",children:"Uncategorized"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1141,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1119,columnNumber:23},this),o?.map(t=>C.jsxDEV("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),u.mutate({id:e.id,data:{category_id:t.id}},{onSuccess:()=>{N(`${e.title} moved to ${t.name}`,"success"),ke(null),I(null)}})},className:"w-full px-6 py-2 text-left text-sm hover:bg-dark-hover transition-colors flex items-center gap-2 "+(e.category_id===t.id?"text-accent-text":"text-text-primary"),children:[e.category_id===t.id&&C.jsxDEV("svg",{className:"w-3 h-3",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12",stroke:"currentColor",strokeWidth:"3",fill:"none"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1166,columnNumber:31},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1165,columnNumber:29},this),C.jsxDEV("span",{className:e.category_id===t.id?"":"ml-5",children:t.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1169,columnNumber:27},this)]},t.id,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1146,columnNumber:25},this)),(!o||0===o.length)&&C.jsxDEV("div",{className:"px-6 py-2 text-sm text-text-muted italic",children:"No categories yet"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1175,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1117,columnNumber:21},this),C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),M({id:e.id,title:e.title}),I(null)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-red-900/30 transition-colors border-t border-dark-border",children:C.jsxDEV("span",{className:"font-medium",children:"Delete Channel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1192,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1183,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:997,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:996,columnNumber:15},this),C.jsxDEV("div",{className:"overflow-hidden cursor-pointer transition-all rounded-xl group "+((e.video_count||0)>0?"border-2 border-accent":""),onClick:()=>{Z&&X(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id])},children:[Z&&K.includes(e.id)&&C.jsxDEV("div",{className:"absolute top-2 right-2 bg-black/80 text-white rounded-full p-1.5 shadow-lg z-20",children:C.jsxDEV("svg",{className:"w-4 h-4 text-accent-text",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1216,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1215,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1214,columnNumber:17},this),C.jsxDEV(p,{to:`/channel/${e.id}`,className:"block",onClick:e=>{Z&&e.preventDefault()},children:[C.jsxDEV("div",{className:"relative w-full aspect-video bg-dark-tertiary overflow-hidden transition-all "+(Z&&K.includes(e.id)?"rounded-t-xl":"rounded-t-xl rounded-b-xl group-hover:rounded-b-none"),children:[e.thumbnail?C.jsxDEV("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1237,columnNumber:21},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-10 h-10 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1245,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1244,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1243,columnNumber:21},this),(e.video_count||0)>0&&C.jsxDEV("div",{className:"absolute top-0 left-0 bg-accent text-white font-bold text-sm px-2 py-1 rounded-tl-xl rounded-br-lg leading-none z-10",children:e.video_count},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1252,columnNumber:21},this),e.auto_download&&C.jsxDEV("div",{className:"absolute bottom-0 left-0 bg-green-500 text-white font-bold text-xs px-1.5 py-0.5 rounded-bl-xl rounded-tr-lg z-10",children:"AUTO"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1259,columnNumber:21},this),C.jsxDEV("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded z-10",children:Me(e.last_scan_time)||"Never"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1265,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1231,columnNumber:17},this),C.jsxDEV("div",{className:"p-3 rounded-b-xl transition-colors "+(Z&&K.includes(e.id)?"bg-dark-tertiary":"group-hover:bg-dark-tertiary"),children:C.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[C.jsxDEV("h3",{className:`${t.title} font-semibold text-text-primary line-clamp-2 leading-tight flex-1 min-w-0`,title:e.title,children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1274,columnNumber:21},this),!Z&&C.jsxDEV("div",{className:"relative flex-shrink-0",children:C.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),ke(null),I(T===e.id?null:e.id)},className:"p-1 rounded hover:bg-dark-hover transition-colors",children:C.jsxDEV("svg",{className:"w-5 h-5 text-text-secondary",viewBox:"0 0 24 24",fill:"currentColor",children:[C.jsxDEV("circle",{cx:"12",cy:"5",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1291,columnNumber:29},this),C.jsxDEV("circle",{cx:"12",cy:"12",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1292,columnNumber:29},this),C.jsxDEV("circle",{cx:"12",cy:"19",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1293,columnNumber:29},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1290,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1281,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1280,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1273,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1271,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1221,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1198,columnNumber:13},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:993,columnNumber:11},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:991,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:990,columnNumber:7},this)})(),0===Te.length&&C.jsxDEV(me,{icon:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1312,columnNumber:17},this),title:O?"No matching channels":"No channels yet",message:O?"Try a different search term":"Add a YouTube channel to get started"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1311,columnNumber:9},this),L&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary mb-3",children:"Delete Channel?"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1322,columnNumber:13},this),C.jsxDEV("p",{className:"text-text-secondary mb-4",children:['Are you sure you want to delete "',C.jsxDEV("span",{className:"text-text-primary font-semibold",children:L.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1324,columnNumber:48},this),'"?']},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1323,columnNumber:13},this),C.jsxDEV("p",{className:"text-sm text-text-muted mb-6",children:"This will remove the channel from your subscriptions and clear any pending/discovered videos. Downloaded videos will remain in your library."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1326,columnNumber:13},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>M(null),className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1330,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>(async e=>{try{N("Deleting channel...","info",{persistent:!0}),await d.mutateAsync(e),N("Channel deleted","success"),M(null)}catch(t){N(re(t.message),"error")}})(L.id),disabled:d.isPending,className:"btn btn-danger flex-1",children:d.isPending?"Deleting...":"Delete"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1336,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1329,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1321,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1320,columnNumber:9},this),xe&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary",children:"Manage Categories"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1353,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>{ve(!1),ge(""),De(null)},className:"text-text-muted hover:text-text-primary",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1363,columnNumber:19},this),C.jsxDEV("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1364,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1362,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1354,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1352,columnNumber:13},this),C.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),ye.trim())try{await f.mutateAsync({name:ye.trim()}),ge(""),N("Category created","success")}catch(t){N(re(t.message),"error")}},className:"flex gap-2 mb-4",children:[C.jsxDEV("input",{type:"text",value:ye,onChange:e=>ge(e.target.value),placeholder:"New category name...",className:"input flex-1 text-sm py-1.5 px-3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1384,columnNumber:15},this),C.jsxDEV("button",{type:"submit",disabled:!ye.trim()||f.isPending,className:"btn btn-primary btn-sm",children:"Add"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1391,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1370,columnNumber:13},this),C.jsxDEV("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[0===o?.length&&C.jsxDEV("p",{className:"text-text-muted text-sm text-center py-4",children:"No categories yet"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1403,columnNumber:17},this),o?.map(e=>C.jsxDEV("div",{className:"flex items-center justify-between p-2 bg-dark-tertiary rounded",children:je?.id===e.id?C.jsxDEV("form",{onSubmit:async t=>{if(t.preventDefault(),je.name.trim())try{await b.mutateAsync({id:e.id,data:{name:je.name.trim()}}),De(null),N("Category renamed","success")}catch(r){N(re(r.message),"error")}},className:"flex gap-2 flex-1",children:[C.jsxDEV("input",{type:"text",value:je.name,onChange:e=>De({...je,name:e.target.value}),className:"input flex-1 text-sm py-1 px-2",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1425,columnNumber:23},this),C.jsxDEV("button",{type:"submit",className:"text-green-500 hover:text-green-400",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1434,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1433,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1432,columnNumber:23},this),C.jsxDEV("button",{type:"button",onClick:()=>De(null),className:"text-text-muted hover:text-text-primary",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1443,columnNumber:27},this),C.jsxDEV("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1444,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1442,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1437,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1408,columnNumber:21},this):C.jsxDEV(C.Fragment,{children:[C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("span",{className:"text-text-primary text-sm",children:e.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1451,columnNumber:25},this),C.jsxDEV("span",{className:"text-xs text-text-muted",children:["(",e.channel_count,")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1452,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1450,columnNumber:23},this),C.jsxDEV("div",{className:"flex items-center gap-1",children:[C.jsxDEV("button",{onClick:()=>De({id:e.id,name:e.name}),className:"p-1 text-text-muted hover:text-text-primary",title:"Rename","aria-label":"Rename category",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1462,columnNumber:29},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1463,columnNumber:29},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1461,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1455,columnNumber:25},this),C.jsxDEV("button",{onClick:()=>Ve(e),className:"p-1 text-text-muted hover:text-red-400",title:"Delete","aria-label":"Delete category",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"3 6 5 6 21 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1473,columnNumber:29},this),C.jsxDEV("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1474,columnNumber:29},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1472,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1466,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1454,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1449,columnNumber:21},this)},e.id,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1406,columnNumber:17},this))]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1401,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1351,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1350,columnNumber:9},this),Ee&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[60] p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-sm w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-lg font-bold text-text-primary mb-3",children:"Delete Category?"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1491,columnNumber:13},this),C.jsxDEV("p",{className:"text-text-secondary mb-4 text-sm",children:['Delete "',C.jsxDEV("span",{className:"text-text-primary font-semibold",children:Ee.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1493,columnNumber:23},this),'"?',Ee.channel_count>0&&C.jsxDEV("span",{className:"block mt-2 text-yellow-400",children:[Ee.channel_count," channel",1!==Ee.channel_count?"s":""," will become uncategorized."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1495,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1492,columnNumber:13},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>Ve(null),className:"btn btn-secondary flex-1 btn-sm",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1501,columnNumber:15},this),C.jsxDEV("button",{onClick:async()=>{try{await h.mutateAsync(Ee.id),Ve(null),N("Category deleted","success")}catch(e){N(re(e.message),"error")}},disabled:h.isPending,className:"btn btn-danger flex-1 btn-sm",children:h.isPending?"Deleting...":"Delete"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1507,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1500,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1490,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:1489,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Channels.jsx",lineNumber:474,columnNumber:5},this)}function fe({currentPage:e,totalItems:t,itemsPerPage:r,onPageChange:n,onItemsPerPageChange:a}){const s=Math.ceil(t/r),i=0===t?0:(e-1)*r+1,o=Math.min(e*r,t);return C.jsxDEV("div",{className:"flex items-center gap-3",children:[C.jsxDEV("select",{value:r,onChange:e=>a(Number(e.target.value)),className:"bg-dark-tertiary border border-dark-border rounded px-2 py-1 text-sm text-text-primary focus:outline-none focus:ring-1 focus:ring-accent",children:[25,50,100,250].map(e=>C.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:23,columnNumber:11},this))},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:17,columnNumber:7},this),t>0&&C.jsxDEV("span",{className:"text-sm text-text-secondary whitespace-nowrap",children:[i,"-",o," of ",t]},void 0,!0,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:29,columnNumber:9},this),s>1&&C.jsxDEV("div",{className:"flex items-center gap-1",children:[C.jsxDEV("button",{onClick:()=>n(e-1),disabled:1===e,className:"p-1 rounded hover:bg-dark-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:C.jsxDEV("svg",{className:"w-4 h-4 text-text-secondary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"15 18 9 12 15 6"},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:43,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:42,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:37,columnNumber:11},this),C.jsxDEV("span",{className:"text-sm text-text-secondary px-2",children:[e," / ",s]},void 0,!0,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:47,columnNumber:11},this),C.jsxDEV("button",{onClick:()=>n(e+1),disabled:e===s,className:"p-1 rounded hover:bg-dark-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:C.jsxDEV("svg",{className:"w-4 h-4 text-text-secondary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"9 18 15 12 9 6"},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:57,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:56,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:51,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:36,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/Pagination.jsx",lineNumber:15,columnNumber:5},this)}function be({isOpen:e,title:r,message:n,confirmText:a="Confirm",cancelText:s="Cancel",confirmStyle:i="danger",onConfirm:o,onCancel:l}){const{theme:d}=R(),c=["online","pixel","debug"].includes(d);return t.useEffect(()=>{const t=t=>{"Escape"===t.key&&e&&l()};return e&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[e,l]),e?C.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[C.jsxDEV("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:l},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:44,columnNumber:7},this),C.jsxDEV("div",{className:"relative bg-dark-secondary border border-dark-border-light rounded-lg shadow-xl max-w-md w-full animate-fade-in",children:[C.jsxDEV("div",{className:"px-6 py-4 border-b border-dark-border",children:C.jsxDEV("h3",{className:"text-lg font-semibold "+(c?"text-black":"text-text-primary"),children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:53,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:52,columnNumber:9},this),C.jsxDEV("div",{className:"px-6 py-4",children:C.jsxDEV("p",{className:"text-sm "+(c?"text-gray-800":"text-text-secondary"),children:n},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:60,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:59,columnNumber:9},this),C.jsxDEV("div",{className:"px-6 py-4 border-t border-dark-border flex justify-end gap-3",children:[C.jsxDEV("button",{onClick:l,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(c?"bg-gray-200 hover:bg-gray-300 text-black":"bg-dark-hover hover:bg-dark-tertiary text-text-primary border border-dark-border-light"),children:s},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:67,columnNumber:11},this),C.jsxDEV("button",{onClick:o,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("danger"===i?"bg-red-600 hover:bg-red-700 text-white":"bg-accent hover:bg-accent-hover text-white"),children:a},void 0,!1,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:77,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:66,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:50,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ui/ConfirmModal.jsx",lineNumber:42,columnNumber:5},this):null}const he=({className:e="w-4 h-4"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/SettingsIcon.jsx",lineNumber:3,columnNumber:5},void 0),C.jsxDEV("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/SettingsIcon.jsx",lineNumber:4,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/SettingsIcon.jsx",lineNumber:2,columnNumber:3},void 0),Ne=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",children:[C.jsxDEV("circle",{cx:"12",cy:"5",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ThreeDotsIcon.jsx",lineNumber:3,columnNumber:5},void 0),C.jsxDEV("circle",{cx:"12",cy:"12",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ThreeDotsIcon.jsx",lineNumber:4,columnNumber:5},void 0),C.jsxDEV("circle",{cx:"12",cy:"19",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ThreeDotsIcon.jsx",lineNumber:5,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/ThreeDotsIcon.jsx",lineNumber:2,columnNumber:3},void 0),xe=({className:e="w-4 h-4",strokeWidth:t="2.5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/CheckmarkIcon.jsx",lineNumber:3,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/CheckmarkIcon.jsx",lineNumber:2,columnNumber:3},void 0),ve=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"3 6 5 6 21 6"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/TrashIcon.jsx",lineNumber:3,columnNumber:5},void 0),C.jsxDEV("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/TrashIcon.jsx",lineNumber:4,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/TrashIcon.jsx",lineNumber:2,columnNumber:3},void 0),ye=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polygon",{points:"5 3 19 12 5 21 5 3"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/PlayIcon.jsx",lineNumber:3,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/PlayIcon.jsx",lineNumber:2,columnNumber:3},void 0),ge=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"16 3 21 3 21 8"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:3,columnNumber:5},void 0),C.jsxDEV("line",{x1:"4",y1:"20",x2:"21",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:4,columnNumber:5},void 0),C.jsxDEV("polyline",{points:"21 16 21 21 16 21"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:5,columnNumber:5},void 0),C.jsxDEV("line",{x1:"15",y1:"15",x2:"21",y2:"21"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:6,columnNumber:5},void 0),C.jsxDEV("line",{x1:"4",y1:"4",x2:"9",y2:"9"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:7,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/ShuffleIcon.jsx",lineNumber:2,columnNumber:3},void 0),je=({className:e="w-4 h-4"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/FilterIcon.jsx",lineNumber:3,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/FilterIcon.jsx",lineNumber:2,columnNumber:3},void 0),De=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"15 18 9 12 15 6"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ArrowLeftIcon.jsx",lineNumber:3,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/ArrowLeftIcon.jsx",lineNumber:2,columnNumber:3},void 0),Ee=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M12 5v14m-7-7h14"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/PlusIcon.jsx",lineNumber:3,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/PlusIcon.jsx",lineNumber:2,columnNumber:3},void 0),Ve=({className:e="w-5 h-5"})=>C.jsxDEV("svg",{className:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/EyeIcon.jsx",lineNumber:3,columnNumber:5},void 0),C.jsxDEV("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,{fileName:"/appdata/frontend/src/components/icons/EyeIcon.jsx",lineNumber:4,columnNumber:5},void 0)]},void 0,!0,{fileName:"/appdata/frontend/src/components/icons/EyeIcon.jsx",lineNumber:2,columnNumber:3},void 0),we=e=>{if(!e||0===e)return"";const t=e/1073741824,r=e/1048576;return t>=1?`${t.toFixed(2)} GB`:`${r.toFixed(0)} MB`},ke=e=>{if(!e)return"";const t=e.slice(0,4);return`${e.slice(4,6)}/${e.slice(6,8)}/${t}`},Ce=e=>{if(!e)return"";const t=new Date(e);return`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${t.getFullYear()}`};function Se(){const[e]=f(),s=m(),{cardSize:i}=$("library"),o=ue(i),[l,d]=t.useState(""),[c,u]=t.useState(e.get("tab")||"channels"),[b,h]=t.useState(!1),[N,x]=t.useState([]),[v,y]=t.useState(!1),[g,j]=t.useState(null),[D,E]=t.useState(""),[V,w]=t.useState(null),[k,S]=t.useState(()=>localStorage.getItem("library_playlistSortBy")||"a_z"),[P,_]=t.useState(!1),[L,M]=t.useState(()=>localStorage.getItem("library_channelSortBy")||"a_z"),[T,I]=t.useState(!1),R=function(){const e=n();return a({mutationFn:e=>B.deletePlaylist(e),onSuccess:()=>{e.invalidateQueries(["playlists"])}})}(),F=function(){const e=n();return a({mutationFn:({id:e,data:t})=>B.updatePlaylist(e,t),onSuccess:()=>{e.invalidateQueries(["playlists"]),e.invalidateQueries(["playlist"])}})}(),{showNotification:O}=A(),[z,Q]=t.useState(null),q=t.useRef(null),W=t.useRef(null),U=t.useRef(null),J=t.useRef(null),{data:Y}=r({queryKey:["categories"],queryFn:()=>B.getCategories()}),G=function(){const e=n();return a({mutationFn:e=>B.createCategory(e),onSuccess:()=>{e.invalidateQueries(["categories"])}})}(),X=function(){const e=n();return a({mutationFn:({id:e,data:t})=>B.updateCategory(e,t),onSuccess:()=>{e.invalidateQueries(["categories"]),e.invalidateQueries(["category"])}})}(),Z=function(){const e=n();return a({mutationFn:e=>B.deleteCategory(e),onSuccess:()=>{e.invalidateQueries(["categories"]),e.invalidateQueries(["playlists"])}})}(),ee=function(){const e=n();return a({mutationFn:({playlistIds:e,categoryId:t})=>B.bulkAssignCategory(e,t),onSuccess:()=>{e.invalidateQueries(["playlists"]),e.invalidateQueries(["categories"])}})}(),[te,re]=t.useState(!1),[ie,pe]=t.useState(""),[he,xe]=t.useState(!1),[De,Ve]=t.useState(null),[ke,Ce]=t.useState(null),[Se,Pe]=t.useState(!1),[_e,Le]=t.useState(""),[Ae,Me]=t.useState(()=>{const e=localStorage.getItem("expandedCategories");return e?JSON.parse(e):{}}),[Te,Ie]=t.useState(null),[Re,Fe]=t.useState(null),[Oe,$e]=t.useState(""),[ze,Be]=t.useState(!1),[Qe,qe]=t.useState(1),[We,Ue]=t.useState(()=>{const e=localStorage.getItem("library_itemsPerPage");return e?Number(e):50});t.useEffect(()=>{const t=e.get("tab");"playlists"!==t&&"channels"!==t||u(t)},[e]),t.useEffect(()=>{localStorage.setItem("library_playlistSortBy",k)},[k]),t.useEffect(()=>{localStorage.setItem("library_channelSortBy",L)},[L]),t.useEffect(()=>{localStorage.setItem("expandedCategories",JSON.stringify(Ae))},[Ae]);const He=e=>{if(!e)return null;const t=new Date(e),r=new Date-t,n=Math.floor(r/864e5);if(n<=0)return"Today";if(1===n)return"Yesterday";if(n<7)return`${n} days ago`;return`${String(t.getMonth()+1).padStart(2,"0")}/${String(t.getDate()).padStart(2,"0")}/${String(t.getFullYear()).slice(-2)}`},{data:Je,isLoading:Ye}=H({status:"library"}),{data:Ge,isLoading:Ke}=K(),Xe=t.useMemo(()=>Je?Object.values(Je.reduce((e,t)=>{const r=t.channel_id?`channel_${t.channel_id}`:t.folder_name?`playlist_${t.folder_name}`:null;return r?(e[r]||(e[r]={id:t.channel_id||t.folder_name,title:t.channel_title||t.folder_name,isPlaylistFolder:!t.channel_id,videoCount:0,totalSizeBytes:0,videos:[],watchedCount:0,lastAddedAt:null}),e[r].videoCount++,e[r].totalSizeBytes+=t.file_size_bytes||0,e[r].videos.push(t),t.watched&&e[r].watchedCount++,t.downloaded_at&&(!e[r].lastAddedAt||new Date(t.downloaded_at)>new Date(e[r].lastAddedAt))&&(e[r].lastAddedAt=t.downloaded_at),e):e},{})).map(e=>{const t=e.videos[Math.floor(Math.random()*e.videos.length)];return{...e,thumbnail:t.thumb_url,allWatched:e.watchedCount===e.videoCount}}):[],[Je]),Ze=t.useMemo(()=>[...Xe.filter(e=>!e.isPlaylistFolder&&!!(e.title||"").toLowerCase().includes(l.toLowerCase()))].sort((e,t)=>{switch(L){case"a_z":return(e.title||"").localeCompare(t.title||"");case"z_a":return(t.title||"").localeCompare(e.title||"");case"most_videos":return t.videoCount-e.videoCount;case"least_videos":return e.videoCount-t.videoCount;case"newest_added":return new Date(t.lastAddedAt||0)-new Date(e.lastAddedAt||0);case"oldest_added":return new Date(e.lastAddedAt||0)-new Date(t.lastAddedAt||0);default:return 0}}),[Xe,l,L]);t.useEffect(()=>{qe(1)},[l,L,k,c]);const et=t.useMemo(()=>{const e=(Qe-1)*We;return Ze.slice(e,e+We)},[Ze,Qe,We]),tt=t.useMemo(()=>{if(!Ge)return[];return[...Ge.filter(e=>!!(e.title||e.name||"").toLowerCase().includes(l.toLowerCase()))].sort((e,t)=>{switch(k){case"a_z":return(e.title||e.name||"").localeCompare(t.title||t.name||"");case"z_a":return(t.title||t.name||"").localeCompare(e.title||e.name||"");case"most_videos":return(t.video_count||0)-(e.video_count||0);case"least_videos":return(e.video_count||0)-(t.video_count||0);default:return 0}})},[Ge,l,k]),rt=t.useMemo(()=>{if(!tt||!Y)return{categorized:{},uncategorized:tt||[]};const e={};Y.forEach(t=>{e[t.id]={category:t,playlists:[]}});const t=[];tt.forEach(r=>{r.category_id&&e[r.category_id]?e[r.category_id].playlists.push(r):t.push(r)});return{categorized:Object.entries(e).sort(([,e],[,t])=>{switch(k){case"a_z":default:return e.category.name.localeCompare(t.category.name);case"z_a":return t.category.name.localeCompare(e.category.name);case"most_videos":const r=e.playlists.reduce((e,t)=>e+(t.video_count||0),0);return t.playlists.reduce((e,t)=>e+(t.video_count||0),0)-r;case"least_videos":return e.playlists.reduce((e,t)=>e+(t.video_count||0),0)-t.playlists.reduce((e,t)=>e+(t.video_count||0),0)}}),uncategorized:t}},[tt,Y,k]);t.useEffect(()=>{const e=e=>{q.current&&!q.current.contains(e.target)&&w(null),W.current&&!W.current.contains(e.target)&&_(!1),U.current&&!U.current.contains(e.target)&&I(!1),J.current&&!J.current.contains(e.target)&&Ie(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const nt=async e=>{Q({type:"deletePlaylist",data:e})},at=async()=>{if(D.trim())try{await F.mutateAsync({id:g,data:{name:D}}),O("Playlist renamed","success"),y(!1),j(null),E("")}catch(e){O(e.message||"Failed to rename playlist","error")}else O("Please enter a playlist name","error")},st=e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},it=async()=>{if(Oe.trim())try{await X.mutateAsync({id:Re,data:{name:Oe.trim()}}),O("Category renamed","success"),Be(!1),Fe(null),$e(""),Ie(null)}catch(e){O(e.message||"Failed to rename category","error")}else O("Please enter a category name","error")},ot=async()=>{if(z)try{if("deletePlaylist"===z.type)await R.mutateAsync(z.data),O("Playlist deleted","success"),w(null);else if("deletePlaylists"===z.type){for(const e of N)await R.mutateAsync(e);O(`${N.length} playlists deleted`,"success"),x([]),h(!1)}else"deleteCategory"===z.type&&(await Z.mutateAsync(z.data),O("Category deleted","success"),Ie(null));Q(null)}catch(e){O(e.message||"Failed to complete action","error")}},lt=async(e,t)=>{try{if("single"===De&&ke){const r=t?null:e;await F.mutateAsync({id:ke,data:{category_id:r}}),O(t?"Removed from category":"Added to category","success"),xe(!1),Ce(null),Ve(null),Pe(!1),Le("")}else"bulk"===De&&N.length>0&&(await ee.mutateAsync({playlistIds:N,categoryId:e}),O(`${N.length} playlists assigned to category`,"success"),x([]),h(!1),xe(!1),Ce(null),Ve(null),Pe(!1),Le(""))}catch(r){O(r.message||"Failed to update category","error")}};return Ye?C.jsxDEV(ce,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:509,columnNumber:12},this):C.jsxDEV("div",{className:"space-y-4 animate-fade-in",children:[C.jsxDEV(ne,{className:"mb-4",children:"channels"===c?C.jsxDEV("div",{className:"flex flex-wrap items-center justify-center gap-3 md:gap-4",children:[C.jsxDEV("div",{className:"flex gap-2",children:[C.jsxDEV("button",{onClick:()=>u("channels"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("channels"===c?"bg-dark-tertiary text-text-primary border border-dark-border-light":"bg-dark-primary/95 border border-dark-border text-text-secondary hover:bg-dark-tertiary/50 hover:text-text-primary"),children:"Channels"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:522,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>u("playlists"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("playlists"===c?"bg-dark-tertiary text-text-primary border border-dark-border-light":"bg-dark-primary/95 border border-dark-border text-text-secondary hover:bg-dark-tertiary/50 hover:text-text-primary"),children:"Playlists"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:532,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:521,columnNumber:13},this),C.jsxDEV(ae,{value:l,onChange:d,placeholder:"Search channels...",className:"w-full sm:w-[180px]"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:545,columnNumber:13},this),C.jsxDEV("div",{className:"relative",ref:U,children:[C.jsxDEV("button",{onClick:()=>I(!T),className:"filter-btn",children:[C.jsxDEV(je,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:558,columnNumber:17},this),C.jsxDEV("span",{children:"Sort"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:559,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:554,columnNumber:15},this),T&&C.jsxDEV("div",{className:"absolute left-0 sm:left-auto sm:right-0 mt-2 w-40 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-2 z-[100]",children:[C.jsxDEV("div",{className:"px-3 py-2 text-xs font-semibold text-text-secondary uppercase",children:"Sort By"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:565,columnNumber:19},this),C.jsxDEV("div",{className:"px-4 py-2 hover:bg-dark-hover transition-colors",children:C.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:C.jsxDEV("div",{className:"flex gap-4",children:[C.jsxDEV("button",{onClick:()=>{M("a_z"),I(!1)},className:""+("a_z"===L?"text-accent-text":"text-text-primary hover:text-accent"),children:"A-Z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:571,columnNumber:25},this),C.jsxDEV("button",{onClick:()=>{M("z_a"),I(!1)},className:""+("z_a"===L?"text-accent-text":"text-text-primary hover:text-accent"),children:"Z-A"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:577,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:570,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:569,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:568,columnNumber:19},this),C.jsxDEV("div",{className:"px-4 py-2 hover:bg-dark-hover transition-colors",children:C.jsxDEV("div",{className:"flex items-center gap-3 text-sm",children:[C.jsxDEV("span",{className:"text-text-primary",children:"Videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:590,columnNumber:23},this),C.jsxDEV("div",{className:"flex gap-1",children:[C.jsxDEV("button",{onClick:()=>{M("most_videos"),I(!1)},className:"p-1 rounded "+("most_videos"===L?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Most Videos",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 5v14M5 12l7-7 7 7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:598,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:597,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:592,columnNumber:25},this),C.jsxDEV("button",{onClick:()=>{M("least_videos"),I(!1)},className:"p-1 rounded "+("least_videos"===L?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Least Videos",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 19V5M5 12l7 7 7-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:607,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:606,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:601,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:591,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:589,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:588,columnNumber:19},this),C.jsxDEV("div",{className:"px-4 py-2 hover:bg-dark-hover transition-colors",children:C.jsxDEV("div",{className:"flex items-center gap-3 text-sm",children:[C.jsxDEV("span",{className:"text-text-primary",children:"Added"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:617,columnNumber:23},this),C.jsxDEV("div",{className:"flex gap-1",children:[C.jsxDEV("button",{onClick:()=>{M("newest_added"),I(!1)},className:"p-1 rounded "+("newest_added"===L?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Newest Added",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 5v14M5 12l7-7 7 7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:625,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:624,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:619,columnNumber:25},this),C.jsxDEV("button",{onClick:()=>{M("oldest_added"),I(!1)},className:"p-1 rounded "+("oldest_added"===L?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Oldest Added",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 19V5M5 12l7 7 7-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:634,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:633,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:628,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:618,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:616,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:615,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:564,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:553,columnNumber:13},this),C.jsxDEV(se,{tab:"library"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:645,columnNumber:13},this),C.jsxDEV(fe,{currentPage:Qe,totalItems:Ze.length,itemsPerPage:We,onPageChange:qe,onItemsPerPageChange:e=>{Ue(e),localStorage.setItem("library_itemsPerPage",e),qe(1)}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:648,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:519,columnNumber:11},this):C.jsxDEV("div",{className:"flex flex-wrap items-center justify-center gap-3 md:gap-4",children:[C.jsxDEV("div",{className:"flex gap-2",children:[C.jsxDEV("button",{onClick:()=>u("channels"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("channels"===c?"bg-dark-tertiary text-text-primary border border-dark-border-light":"bg-dark-primary/95 border border-dark-border text-text-secondary hover:bg-dark-tertiary/50 hover:text-text-primary"),children:"Channels"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:665,columnNumber:17},this),C.jsxDEV("button",{onClick:()=>u("playlists"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("playlists"===c?"bg-dark-tertiary text-text-primary border border-dark-border-light":"bg-dark-primary/95 border border-dark-border text-text-secondary hover:bg-dark-tertiary/50 hover:text-text-primary"),children:"Playlists"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:675,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:664,columnNumber:15},this),C.jsxDEV(ae,{value:l,onChange:d,placeholder:"Search playlists...",className:"w-full sm:w-[180px]"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:688,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>re(!0),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors bg-dark-tertiary hover:bg-dark-hover text-text-primary border border-dark-border hover:border-dark-border-light flex items-center gap-2 whitespace-nowrap",title:"Create new category",children:[C.jsxDEV(Ee,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:701,columnNumber:17},this),C.jsxDEV("span",{className:"hidden sm:inline",children:"Category"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:702,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:696,columnNumber:15},this),C.jsxDEV(se,{tab:"library"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:706,columnNumber:15},this),C.jsxDEV("div",{className:"relative",ref:W,children:[C.jsxDEV("button",{onClick:()=>_(!P),className:"filter-btn",children:[C.jsxDEV(je,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:714,columnNumber:19},this),C.jsxDEV("span",{children:"Sort"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:715,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:710,columnNumber:17},this),P&&C.jsxDEV("div",{className:"absolute left-0 sm:left-auto sm:right-0 mt-2 w-40 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-2 z-50",children:[C.jsxDEV("div",{className:"px-3 py-2 text-xs font-semibold text-text-secondary uppercase",children:"Sort By"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:721,columnNumber:21},this),C.jsxDEV("div",{className:"px-4 py-2 hover:bg-dark-hover transition-colors",children:C.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:C.jsxDEV("div",{className:"flex gap-4",children:[C.jsxDEV("button",{onClick:()=>{S("a_z"),_(!1)},className:""+("a_z"===k?"text-accent-text":"text-text-primary hover:text-accent"),children:"A-Z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:727,columnNumber:27},this),C.jsxDEV("button",{onClick:()=>{S("z_a"),_(!1)},className:""+("z_a"===k?"text-accent-text":"text-text-primary hover:text-accent"),children:"Z-A"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:733,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:726,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:725,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:724,columnNumber:21},this),C.jsxDEV("div",{className:"px-4 py-2 hover:bg-dark-hover transition-colors",children:C.jsxDEV("div",{className:"flex items-center gap-3 text-sm",children:[C.jsxDEV("span",{className:"text-text-primary",children:"Videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:746,columnNumber:25},this),C.jsxDEV("div",{className:"flex gap-1",children:[C.jsxDEV("button",{onClick:()=>{S("most_videos"),_(!1)},className:"p-1 rounded "+("most_videos"===k?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Most Videos",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 5v14M5 12l7-7 7 7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:754,columnNumber:31},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:753,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:748,columnNumber:27},this),C.jsxDEV("button",{onClick:()=>{S("least_videos"),_(!1)},className:"p-1 rounded "+("least_videos"===k?"text-accent-text":"text-text-muted hover:text-text-primary"),title:"Least Videos",children:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",children:C.jsxDEV("path",{d:"M12 19V5M5 12l7 7 7-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:763,columnNumber:31},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:762,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:757,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:747,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:745,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:744,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:720,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:709,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>{h(!b),x([])},className:"filter-btn "+(b?"bg-dark-tertiary text-text-primary border-dark-border-light":""),children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:782,columnNumber:19},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:783,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:781,columnNumber:17},this),C.jsxDEV("span",{children:b?"Done":"Edit"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:785,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:774,columnNumber:15},this),b&&C.jsxDEV(C.Fragment,{children:[tt.length>0&&C.jsxDEV("button",{onClick:()=>{x(tt.map(e=>e.id))},className:"btn btn-primary btn-sm",children:["Select All (",tt.length,")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:792,columnNumber:21},this),N.length>0&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{className:"text-sm text-text-secondary",children:[N.length," selected"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:801,columnNumber:23},this),C.jsxDEV("button",{onClick:()=>{Ve("bulk"),xe(!0)},className:"btn btn-primary btn-sm",children:"Category Options"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:802,columnNumber:23},this),C.jsxDEV("button",{onClick:async()=>{0!==N.length&&Q({type:"deletePlaylists",data:N.length})},className:"btn btn-secondary btn-sm",children:"Delete All"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:811,columnNumber:23},this),C.jsxDEV("button",{onClick:()=>{x([])},className:"btn btn-secondary btn-sm",children:"Clear"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:817,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:800,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:790,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:662,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:516,columnNumber:7},this),"channels"===c&&C.jsxDEV(C.Fragment,{children:[0===Ze.length?C.jsxDEV(me,{icon:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:836,columnNumber:21},this),title:Xe.length>0&&l?"No channels match filters":"No downloaded videos",message:Xe.length>0&&l?"Remove filters to see them":"Videos you download will appear here"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:835,columnNumber:13},this):(()=>{const e=le(i,et.length),t=de(e);return C.jsxDEV("div",{className:"px-6 lg:px-12 xl:px-16",children:C.jsxDEV("div",{className:`grid ${oe(o,et.length)} gap-4 w-full [&>*]:min-w-0`,children:et.map(e=>C.jsxDEV(p,{to:`/channel/${e.id}/library`,className:"group transition-colors rounded overflow-hidden",children:[C.jsxDEV("div",{className:"relative aspect-video bg-dark-tertiary rounded-t-xl rounded-b-xl group-hover:rounded-b-none overflow-hidden transition-all",children:[e.thumbnail?C.jsxDEV("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:855,columnNumber:19},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-10 h-10 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:863,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:862,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:861,columnNumber:19},this),e.lastAddedAt&&C.jsxDEV("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded",children:["Last: ",He(e.lastAddedAt)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:869,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:853,columnNumber:15},this),C.jsxDEV("div",{className:"p-3 rounded-b-xl transition-colors group-hover:bg-dark-tertiary",children:[C.jsxDEV("h3",{className:`${t.title} font-semibold text-text-primary line-clamp-2 mb-1`,title:e.title,children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:877,columnNumber:17},this),C.jsxDEV("div",{className:"text-sm text-text-secondary font-medium",children:C.jsxDEV("span",{children:[e.videoCount," video",1!==e.videoCount?"s":""," • ",we(e.totalSizeBytes)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:881,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:880,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:876,columnNumber:15},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:847,columnNumber:13},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:845,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:844,columnNumber:13},this)})(),Ze.length>0&&C.jsxDEV("div",{className:"flex justify-center mt-6",children:C.jsxDEV(fe,{currentPage:Qe,totalItems:Ze.length,itemsPerPage:We,onPageChange:qe,onItemsPerPageChange:e=>{Ue(e),localStorage.setItem("library_itemsPerPage",e),qe(1)}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:894,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:893,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:833,columnNumber:9},this),"playlists"===c&&C.jsxDEV("div",{children:rt.categorized.length>0||rt.uncategorized.length>0?C.jsxDEV("div",{className:"space-y-6",children:[rt.categorized.map(([e,{category:t,playlists:r}])=>{const n=!1!==Ae[e];return C.jsxDEV("div",{className:"space-y-3",children:[C.jsxDEV("div",{className:"flex items-center justify-between gap-3 pb-2 border-b border-dark-border",children:[C.jsxDEV("button",{onClick:()=>(e=>{Me(t=>({...t,[e]:!t[e]}))})(e),className:"flex items-center gap-2 group hover:text-accent transition-colors flex-1 min-w-0",children:[C.jsxDEV("svg",{className:"w-5 h-5 text-text-secondary group-hover:text-accent transition-transform "+(n?"rotate-90":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"9 18 15 12 9 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:937,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:928,columnNumber:25},this),C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary group-hover:text-accent truncate",children:t.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:941,columnNumber:25},this),C.jsxDEV("span",{className:"text-sm text-text-secondary whitespace-nowrap",children:["(",r.length," ",1===r.length?"playlist":"playlists",")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:944,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:923,columnNumber:23},this),C.jsxDEV("div",{className:"relative flex-shrink-0",ref:Te===e?J:null,children:[C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),Ie(Te===e?null:e)},className:"p-2 rounded-lg bg-dark-tertiary hover:bg-dark-hover text-text-secondary hover:text-text-primary transition-colors",children:C.jsxDEV(Ne,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:958,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:951,columnNumber:25},this),Te===e&&C.jsxDEV("div",{className:"absolute right-0 mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-1 min-w-[160px] z-50",children:[C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),s(`/play/category/${e}`),Ie(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(ye,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:972,columnNumber:31},this),"Play All"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:964,columnNumber:29},this),C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),s(`/play/category/${e}?shuffle=true`),Ie(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(ge,{className:"w-4 h-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:983,columnNumber:31},this),"Shuffle"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:975,columnNumber:29},this),C.jsxDEV("button",{onClick:r=>{r.stopPropagation(),Fe(e),$e(t.name),Be(!0),Ie(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:997,columnNumber:33},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:998,columnNumber:33},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:996,columnNumber:31},this),"Rename"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:986,columnNumber:29},this),C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),(async e=>{Q({type:"deleteCategory",data:e})})(e)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(ve,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1009,columnNumber:31},this),"Delete"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1002,columnNumber:29},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:963,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:950,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:922,columnNumber:21},this),n&&(()=>{const e=de(i);return C.jsxDEV("div",{className:"px-6 lg:px-12 xl:px-16",children:C.jsxDEV("div",{className:`grid ${oe(o)} gap-4 w-full [&>*]:min-w-0`,children:r.map(t=>{const r=N.includes(t.id);return C.jsxDEV("div",{className:"card relative cursor-pointer transition-colors group",onClick:e=>{b?st(t.id):e.target.closest("button")||e.target.closest(".menu")||s(`/playlist/${t.id}`,{state:{from:"/library?tab=playlists"}})},children:[C.jsxDEV("div",{className:"relative aspect-video bg-dark-tertiary overflow-hidden transition-all "+(b&&r?"rounded-t-xl":"rounded-t-xl rounded-b-xl group-hover:rounded-b-none"),children:[t.thumbnail?C.jsxDEV("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1046,columnNumber:37},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-10 h-10 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1054,columnNumber:41},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1053,columnNumber:39},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1052,columnNumber:37},this),r&&b&&C.jsxDEV("div",{className:"absolute top-2 right-2 bg-black/80 text-white rounded-full p-1.5 shadow-lg z-10",children:C.jsxDEV("svg",{className:"w-4 h-4 text-accent-text",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1063,columnNumber:41},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1062,columnNumber:39},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1061,columnNumber:37},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1040,columnNumber:33},this),C.jsxDEV("div",{className:"p-3 space-y-2 rounded-b-xl transition-colors "+(b&&r?"bg-dark-tertiary":"group-hover:bg-dark-tertiary"),children:[C.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[C.jsxDEV("h3",{className:`${e.title} font-semibold text-text-primary line-clamp-2 leading-tight flex-1`,title:t.title||t.name,children:t.title||t.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1073,columnNumber:37},this),!b&&C.jsxDEV("div",{className:"relative flex-shrink-0",ref:V===t.id?q:null,children:[C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),w(V===t.id?null:t.id)},className:"p-1 rounded hover:bg-dark-hover transition-colors text-text-secondary hover:text-text-primary","aria-label":"Playlist options",children:C.jsxDEV(Ne,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1088,columnNumber:43},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1080,columnNumber:41},this),V===t.id&&C.jsxDEV("div",{className:"menu absolute right-0 mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-1 min-w-[160px] z-50",children:[C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),s(`/play/playlist/${t.id}`),w(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(ye,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1102,columnNumber:47},this),"Play All"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1094,columnNumber:45},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),s(`/play/playlist/${t.id}?shuffle=true`),w(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(ge,{className:"w-4 h-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1113,columnNumber:47},this),"Shuffle"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1105,columnNumber:45},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),j(t.id),E(t.title||t.name||""),y(!0),w(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1127,columnNumber:49},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1128,columnNumber:49},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1126,columnNumber:47},this),"Rename"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1116,columnNumber:45},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),Ce(t.id),Ve("single"),xe(!0),w(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1143,columnNumber:49},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1142,columnNumber:47},this),"Category Options"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1132,columnNumber:45},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),nt(t.id)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(ve,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1154,columnNumber:47},this),"Delete"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1147,columnNumber:45},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1093,columnNumber:43},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1079,columnNumber:39},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1072,columnNumber:35},this),C.jsxDEV("div",{className:"flex items-center justify-between text-sm text-text-secondary",children:[C.jsxDEV("span",{children:[t.video_count||0," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1165,columnNumber:37},this),C.jsxDEV("span",{title:t.channel_title,children:t.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1166,columnNumber:37},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1164,columnNumber:35},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1070,columnNumber:33},this)]},t.id,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1026,columnNumber:31},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1022,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1021,columnNumber:25},this)})()]},e,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:920,columnNumber:19},this)}),rt.uncategorized.length>0&&C.jsxDEV("div",{className:"space-y-3",children:[Object.keys(rt.categorized).length>0&&C.jsxDEV("div",{className:"flex items-center gap-2 pb-2 border-b border-dark-border",children:[C.jsxDEV("h3",{className:"text-lg font-semibold text-text-secondary",children:"Uncategorized"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1186,columnNumber:23},this),C.jsxDEV("span",{className:"text-sm text-text-muted",children:["(",rt.uncategorized.length," ",1===rt.uncategorized.length?"playlist":"playlists",")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1189,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1185,columnNumber:21},this),(()=>{const e=de(i);return C.jsxDEV("div",{className:"px-6 lg:px-12 xl:px-16",children:C.jsxDEV("div",{className:`grid ${oe(o)} gap-4 w-full [&>*]:min-w-0`,children:rt.uncategorized.map(t=>{const r=N.includes(t.id);return C.jsxDEV("div",{className:`card relative cursor-pointer transition-colors ${r?"ring-2 ring-accent/60":""} ${b?"hover:ring-2 hover:ring-accent/50":"group"}`,onClick:e=>{b?st(t.id):e.target.closest("button")||e.target.closest(".menu")||s(`/playlist/${t.id}`,{state:{from:"/library?tab=playlists"}})},children:[C.jsxDEV("div",{className:"relative aspect-video bg-dark-tertiary rounded-t-xl overflow-hidden",children:[t.thumbnail?C.jsxDEV("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1222,columnNumber:33},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-10 h-10 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1230,columnNumber:37},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1229,columnNumber:35},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1228,columnNumber:33},this),r&&b&&C.jsxDEV("div",{className:"absolute top-2 right-2 bg-black/80 text-white rounded-full p-1.5 shadow-lg z-10",children:C.jsxDEV("svg",{className:"w-4 h-4 text-accent-text",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1239,columnNumber:37},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1238,columnNumber:35},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1237,columnNumber:33},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1220,columnNumber:29},this),!b&&C.jsxDEV("div",{className:"absolute top-2 right-2 z-20",ref:V===t.id?q:null,children:[C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),w(V===t.id?null:t.id)},className:"bg-black/70 hover:bg-black/90 text-white rounded-full p-1.5 transition-colors",children:C.jsxDEV(Ne,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1255,columnNumber:35},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1248,columnNumber:33},this),V===t.id&&C.jsxDEV("div",{className:"menu absolute right-0 mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-1 min-w-[160px] z-50",onMouseLeave:e=>e.stopPropagation(),children:[C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),s(`/play/playlist/${t.id}`),w(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(ye,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1272,columnNumber:39},this),"Play All"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1264,columnNumber:37},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),s(`/play/playlist/${t.id}?shuffle=true`),w(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(ge,{className:"w-4 h-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1283,columnNumber:39},this),"Shuffle"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1275,columnNumber:37},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),j(t.id),E(t.title||t.name||""),y(!0),w(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1297,columnNumber:41},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1298,columnNumber:41},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1296,columnNumber:39},this),"Rename"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1286,columnNumber:37},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),Ce(t.id),Ve("single"),xe(!0),w(null)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 3h9a2 2 0 0 1 2 2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1313,columnNumber:41},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1312,columnNumber:39},this),"Category Options"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1302,columnNumber:37},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),nt(t.id)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(ve,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1324,columnNumber:39},this),"Delete"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1317,columnNumber:37},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1260,columnNumber:35},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1247,columnNumber:31},this),C.jsxDEV("div",{className:"p-3",children:[C.jsxDEV("h3",{className:`${e.title} font-semibold text-text-primary group-hover:text-accent transition-colors line-clamp-2 mb-1`,title:t.title||t.name,children:t.title||t.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1334,columnNumber:31},this),C.jsxDEV("div",{className:"flex items-center justify-between text-sm text-text-secondary",children:[C.jsxDEV("span",{children:[t.video_count||0," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1338,columnNumber:33},this),C.jsxDEV("span",{title:t.channel_title,children:t.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1339,columnNumber:33},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1337,columnNumber:31},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1333,columnNumber:29},this)]},t.id,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1204,columnNumber:27},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1200,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1199,columnNumber:21},this)})()]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1182,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:914,columnNumber:13},this):C.jsxDEV(me,{icon:C.jsxDEV(C.Fragment,{children:[C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 10h16M4 14h10M4 18h10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1354,columnNumber:23},this),C.jsxDEV("circle",{cx:"18",cy:"16",r:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1354,columnNumber:130},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1354,columnNumber:21},this),title:l?"No matching playlists":"No playlists yet",message:l?"Try a different search term":"Create playlists to organize your videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1353,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:912,columnNumber:9},this),v&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary mb-4",children:"Rename Playlist"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1366,columnNumber:13},this),C.jsxDEV("input",{type:"text",value:D,onChange:e=>E(e.target.value),onKeyPress:e=>{"Enter"===e.key&&at()},placeholder:"Enter playlist name",className:"input w-full mb-4",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1367,columnNumber:13},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>{y(!1),j(null),E("")},className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1381,columnNumber:15},this),C.jsxDEV("button",{onClick:at,disabled:!D.trim(),className:"btn btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Rename"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1391,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1380,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1365,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1364,columnNumber:9},this),te&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary mb-4",children:"Create Category"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1407,columnNumber:13},this),C.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),ie.trim())try{await G.mutateAsync({name:ie.trim()}),O("Category created","success"),re(!1),pe("")}catch(t){O(t.message||"Failed to create category","error")}else O("Please enter a category name","error")},children:[C.jsxDEV("input",{type:"text",value:ie,onChange:e=>pe(e.target.value),placeholder:"Enter category name",className:"input w-full mb-4",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1409,columnNumber:15},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{type:"button",onClick:()=>{re(!1),pe("")},className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1418,columnNumber:17},this),C.jsxDEV("button",{type:"submit",disabled:!ie.trim(),className:"btn btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Create"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1428,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1417,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1408,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1406,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1405,columnNumber:9},this),ze&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary mb-4",children:"Rename Category"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1445,columnNumber:13},this),C.jsxDEV("input",{type:"text",value:Oe,onChange:e=>$e(e.target.value),onKeyPress:e=>{"Enter"===e.key&&it()},placeholder:"Enter category name",className:"input w-full mb-4",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1446,columnNumber:13},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>{Be(!1),Fe(null),$e("")},className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1460,columnNumber:15},this),C.jsxDEV("button",{onClick:it,disabled:!Oe.trim(),className:"btn btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:"Rename"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1470,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1459,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1444,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1443,columnNumber:9},this),he&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",onClick:()=>{xe(!1),Ce(null),Ve(null),Pe(!1),Le("")},children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full shadow-2xl border border-dark-border flex flex-col max-h-[600px]",onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-border",children:[C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Category Options"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1500,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>{xe(!1),Ce(null),Ve(null),Pe(!1),Le("")},className:"text-text-secondary hover:text-text-primary transition-colors",children:C.jsxDEV("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1512,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1511,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1501,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1499,columnNumber:13},this),C.jsxDEV("div",{className:"flex-1 overflow-y-auto p-2",children:Y&&Y.length>0?C.jsxDEV("div",{className:"space-y-1",children:[...Y].sort((e,t)=>e.name.localeCompare(t.name)).map(e=>{const t="single"===De&&Ge?Ge.find(e=>e.id===ke):null,r=t&&t.category_id===e.id;return C.jsxDEV("button",{onClick:()=>lt(e.id,r),className:"w-full px-3 py-2 text-left rounded-lg hover:bg-dark-hover transition-colors flex items-center gap-3",children:[C.jsxDEV("div",{className:"w-5 h-5 flex-shrink-0 rounded border-2 flex items-center justify-center transition-colors "+(r?"bg-accent border-accent":"border-text-secondary bg-transparent"),children:r&&C.jsxDEV("svg",{className:"w-3 h-3 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1542,columnNumber:31},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1541,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1535,columnNumber:25},this),C.jsxDEV("div",{className:"flex-1 min-w-0 flex items-center justify-between",children:[C.jsxDEV("div",{className:"text-sm font-medium text-text-primary truncate",children:e.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1549,columnNumber:27},this),C.jsxDEV("div",{className:"text-xs text-text-secondary ml-2",children:[e.playlist_count||0," ",1===e.playlist_count?"playlist":"playlists"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1550,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1548,columnNumber:25},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1529,columnNumber:23},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1520,columnNumber:17},this):C.jsxDEV("div",{className:"text-center py-8 text-text-secondary",children:C.jsxDEV("p",{className:"text-sm",children:"No categories yet"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1560,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1559,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1518,columnNumber:13},this),C.jsxDEV("div",{className:"border-t border-dark-border p-4",children:Se?C.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),_e.trim())try{const e=await G.mutateAsync({name:_e.trim()});O("Category created","success"),await lt(e.id,!1),Pe(!1),Le("")}catch(t){O(t.message,"error")}else O("Please enter a category name","error")},className:"space-y-2",children:[C.jsxDEV("input",{type:"text",value:_e,onChange:e=>Le(e.target.value),placeholder:"Category name",className:"w-full px-3 py-2 bg-dark-tertiary border border-dark-border rounded-lg text-sm text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1598,columnNumber:19},this),C.jsxDEV("div",{className:"flex gap-2",children:[C.jsxDEV("button",{type:"button",onClick:()=>{Pe(!1),Le("")},className:"flex-1 px-3 py-1.5 text-sm rounded-lg bg-dark-tertiary hover:bg-dark-hover text-text-secondary transition-colors",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1607,columnNumber:21},this),C.jsxDEV("button",{type:"submit",className:"flex-1 px-3 py-1.5 text-sm rounded-lg bg-dark-tertiary hover:bg-dark-hover text-text-primary font-medium border border-dark-border-light transition-colors",disabled:G.isLoading,children:"Create"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1617,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1606,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1578,columnNumber:17},this):C.jsxDEV("button",{onClick:()=>Pe(!0),className:"w-full px-4 py-2 text-left rounded-lg hover:bg-dark-hover transition-colors flex items-center gap-2 text-sm font-medium text-accent-text",children:[C.jsxDEV("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1573,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1572,columnNumber:19},this),"Create new category"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1568,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1566,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1494,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1484,columnNumber:9},this),C.jsxDEV(be,{isOpen:"deletePlaylist"===z?.type,title:"Delete Playlist",message:"Delete this playlist? Videos will not be deleted.",confirmText:"Delete",confirmStyle:"danger",onConfirm:ot,onCancel:()=>Q(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1634,columnNumber:7},this),C.jsxDEV(be,{isOpen:"deletePlaylists"===z?.type,title:"Delete Playlists",message:C.jsxDEV(C.Fragment,{children:["Delete ",C.jsxDEV("span",{className:"font-semibold",children:[z?.data," playlists"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1649,columnNumber:20},this),"? Videos will not be deleted."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1648,columnNumber:11},this),confirmText:"Delete",confirmStyle:"danger",onConfirm:ot,onCancel:()=>Q(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1644,columnNumber:7},this),C.jsxDEV(be,{isOpen:"deleteCategory"===z?.type,title:"Delete Category",message:"Delete this category? Playlists will become uncategorized.",confirmText:"Delete",confirmStyle:"danger",onConfirm:ot,onCancel:()=>Q(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:1658,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Library.jsx",lineNumber:513,columnNumber:5},this)}const Pe=e=>{if(!e)return null;const t=e.replace(/\\/g,"/").split("/"),r=t.indexOf("downloads");return`/api/media/${r>=0?t.slice(r+1).join("/"):t.slice(-2).join("/")}`},_e=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?`${t}:${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${r}:${n.toString().padStart(2,"0")}`};function Le({videoId:e,videoIds:r,onClose:s,video:i,triggerRef:o}){const{data:l}=K(),d=function(){const e=n();return a({mutationFn:({playlistId:e,videoId:t})=>B.addVideoToPlaylist(e,t),onSuccess:()=>{e.invalidateQueries(["playlists"]),e.invalidateQueries(["playlist"])}})}(),c=function(){const e=n();return a({mutationFn:({playlistId:e,videoIds:t})=>B.addVideosToPlaylistBulk(e,t),onSuccess:()=>{e.invalidateQueries(["playlists"]),e.invalidateQueries(["playlist"]),e.invalidateQueries(["videos"])}})}(),u=Z(),m=function(){const e=n();return a({mutationFn:e=>B.createPlaylist(e),onSuccess:()=>{e.invalidateQueries(["playlists"])}})}(),{showNotification:p}=A(),[f,h]=t.useState(!1),[N,x]=t.useState(""),[v,y]=t.useState({top:0,left:0}),g=t.useRef(null),j=r&&r.length>0,D=j?r:[e],E=!j&&i&&i.playlist_ids?new Set(i.playlist_ids):new Set;t.useEffect(()=>{const e=()=>{if(o?.current){const e=o.current.getBoundingClientRect(),t=384,r=500,n=window.innerWidth,a=window.innerHeight;let s,i;s=(n-t)/2,s<10?s=10:s+t>n-10&&(s=n-t-10),i=e.top<a/2?e.top:(a-r)/2,i<10?i=10:i+r>a-10&&(i=Math.max(10,a-r-10)),y({top:i,left:s})}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[o]);const V=C.jsxDEV(C.Fragment,{children:[C.jsxDEV("div",{className:"fixed inset-0 z-[99998]",onClick:e=>{e.stopPropagation(),s()}},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:163,columnNumber:7},this),C.jsxDEV("div",{ref:g,className:"fixed bg-dark-secondary rounded-xl border border-dark-border w-full max-w-sm max-h-[500px] flex flex-col animate-scale-in shadow-2xl z-[99999]",style:{top:`${v.top}px`,left:`${v.left}px`},onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"flex items-center justify-between px-4 py-3 border-b border-dark-border",children:[C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Save to playlist"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:183,columnNumber:11},this),C.jsxDEV("button",{onClick:s,className:"text-text-secondary hover:text-text-primary transition-colors",children:C.jsxDEV("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:189,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:188,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:184,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:182,columnNumber:9},this),C.jsxDEV("div",{className:"flex-1 overflow-y-auto p-2",children:l&&l.length>0?C.jsxDEV("div",{className:"space-y-1",children:[...l].sort((e,t)=>e.name.localeCompare(t.name)).map(t=>{const r=E.has(t.id);return C.jsxDEV("button",{onClick:()=>{j?(async e=>{try{if(j){const t=await c.mutateAsync({playlistId:e,videoIds:D});t.skipped_count>0?p(`${t.added_count} videos added to playlist, ${t.skipped_count} already in playlist`,"success"):p(`${t.added_count} videos added to playlist`,"success")}else await d.mutateAsync({playlistId:e,videoId:D[0]}),p("Added to playlist","success");s()}catch(t){p(t.message,"error"),s()}})(t.id):(async(t,r)=>{try{if(j){for(const n of D)r?await u.mutateAsync({playlistId:t,videoId:n}):await d.mutateAsync({playlistId:t,videoId:n});const e=r?"removed from":"added to";p(`${D.length} video${D.length>1?"s":""} ${e} playlist`,"success")}else r?(await u.mutateAsync({playlistId:t,videoId:e}),p("Removed from playlist","success")):(await d.mutateAsync({playlistId:t,videoId:e}),p("Added to playlist","success"))}catch(n){p(n.message,"error")}})(t.id,r)},className:"w-full px-3 py-2 text-left rounded-lg hover:bg-dark-hover transition-colors flex items-center gap-3",children:[C.jsxDEV("div",{className:"w-5 h-5 flex-shrink-0 rounded border-2 flex items-center justify-center transition-colors "+(r?"bg-accent border-accent":"border-text-secondary bg-transparent"),children:r&&C.jsxDEV("svg",{className:"w-3 h-3 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:220,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:219,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:213,columnNumber:21},this),C.jsxDEV("div",{className:"flex-1 min-w-0",children:[C.jsxDEV("div",{className:"text-sm font-medium text-text-primary truncate",title:t.name,children:t.name},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:227,columnNumber:23},this),C.jsxDEV("div",{className:"text-xs text-text-secondary",children:[t.video_count||0," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:228,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:226,columnNumber:21},this)]},t.id,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:201,columnNumber:19},this)})},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:197,columnNumber:13},this):C.jsxDEV("div",{className:"text-center py-8 text-text-secondary",children:C.jsxDEV("p",{className:"text-sm",children:"No playlists yet"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:238,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:237,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:195,columnNumber:9},this),C.jsxDEV("div",{className:"border-t border-dark-border p-3",children:f?C.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),N.trim())try{const e=await m.mutateAsync({name:N});if(j){const t=await c.mutateAsync({playlistId:e.id,videoIds:D});p(`Playlist created and ${t.added_count} videos added`,"success")}else await d.mutateAsync({playlistId:e.id,videoId:D[0]}),p("Playlist created and video added","success");s()}catch(t){p(t.message,"error"),s()}else p("Please enter a playlist name","error")},className:"space-y-2",children:[C.jsxDEV("input",{type:"text",value:N,onChange:e=>x(e.target.value),placeholder:"Playlist name",className:"w-full px-3 py-2 bg-dark-tertiary border border-dark-border rounded-lg text-sm text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent",autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:257,columnNumber:15},this),C.jsxDEV("div",{className:"flex gap-2",children:[C.jsxDEV("button",{type:"button",onClick:()=>{h(!1),x("")},className:"flex-1 px-3 py-1.5 text-sm rounded-lg bg-dark-tertiary hover:bg-dark-hover text-text-secondary transition-colors",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:266,columnNumber:17},this),C.jsxDEV("button",{type:"submit",className:"flex-1 px-3 py-1.5 text-sm rounded-lg bg-dark-tertiary hover:bg-dark-hover text-text-primary font-medium border border-dark-border-light transition-colors",disabled:m.isLoading||d.isLoading,children:"Create"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:276,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:265,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:256,columnNumber:13},this):C.jsxDEV("button",{onClick:()=>h(!0),className:"w-full px-3 py-2 text-left rounded-lg hover:bg-dark-hover transition-colors flex items-center gap-2 text-sm font-medium text-accent-text",children:[C.jsxDEV("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:251,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:250,columnNumber:15},this),"Create new playlist"]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:246,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:244,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:172,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/AddToPlaylistMenu.jsx",lineNumber:161,columnNumber:5},this);return b.createPortal(V,document.body)}function Ae({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:s="Delete",cancelText:i="Cancel",isDanger:o=!0}){if(!e)return null;return b.createPortal(C.jsxDEV("div",{className:"fixed inset-0 bg-black/70 z-[99999] flex items-center justify-center animate-fade-in p-4",onClick:t,children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-xl border border-dark-border w-full max-w-md animate-scale-in",onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"px-6 py-4 border-b border-dark-border",children:C.jsxDEV("h2",{className:"text-lg font-medium text-text-primary",children:n},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:22,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:21,columnNumber:9},this),C.jsxDEV("div",{className:"px-6 py-6",children:C.jsxDEV("p",{className:"text-text-secondary leading-relaxed",children:a},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:27,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:26,columnNumber:9},this),C.jsxDEV("div",{className:"px-6 py-4 border-t border-dark-border flex justify-end gap-3",children:[C.jsxDEV("button",{onClick:t,className:"btn btn-secondary",children:i},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:32,columnNumber:11},this),C.jsxDEV("button",{onClick:()=>{r(),t()},className:o?"btn btn-danger":"btn btn-primary",children:s},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:38,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:31,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:16,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/ConfirmDialog.jsx",lineNumber:12,columnNumber:5},this),document.body)}function Me({video:e,isSelected:r,onToggleSelect:n,isQueued:a,editMode:s=!1,isLibraryView:i=!1,effectiveCardSize:o}){const{cardSize:l}=$(),d=de(o||l),c=m(),u=h(),p=Y(),{showNotification:f}=A(),[b,N]=t.useState(!1),[x,v]=t.useState(!1),[y,g]=t.useState(!1),[j,D]=t.useState(!1),[E,V]=t.useState(!1),w=t.useRef(null),k=t.useRef(null),S=t.useRef(null),P=t.useRef(null);t.useEffect(()=>{V(!1)},[e.id,e.thumb_url]),t.useEffect(()=>{const e=e=>{w.current&&!w.current.contains(e.target)&&N(!1)};if(b)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[b]),t.useEffect(()=>()=>{P.current&&clearTimeout(P.current),S.current&&(S.current.pause(),S.current.src="")},[]);const _="library"===e.status,L="downloading"===e.status?{text:"DOWNLOADING",bg:"bg-accent/95",position:"top"}:a?{text:"QUEUED",bg:"bg-blue-600/95",position:"top"}:"removed"===e.status?{text:"REMOVED",bg:"bg-red-600/95",position:"bottom"}:"ignored"===e.status?{text:"IGNORED",bg:"bg-gray-900/70",position:"bottom"}:null;return C.jsxDEV("div",{className:"group cursor-pointer transition-colors rounded",onClick:t=>{t.target.closest("button")||t.target.closest(".menu")||(n?n(e.id):"library"===e.status&&c(`/player/${e.id}`,{state:{from:u.pathname+u.search}}))},children:[C.jsxDEV("div",{className:"relative aspect-video bg-dark-tertiary overflow-hidden transition-all "+(r?"rounded-t-xl":"rounded-t-xl rounded-b-xl group-hover:rounded-b-none"),onMouseEnter:()=>{if(_&&e.file_path&&S.current){const t=`/api/media/${e.file_path.replace(/\\/g,"/").split("/").slice(-2).join("/")}`,r=S.current;r.src!==window.location.origin+t&&(r.src=t);const n=Math.min(.15*e.duration_sec,e.duration_sec-15),a=()=>{r.currentTime=Math.max(0,n),D(!0),r.play().catch(()=>{D(!1)})};r.readyState>=2?a():r.oncanplay=()=>{a(),r.oncanplay=null}}},onMouseLeave:()=>{P.current&&clearTimeout(P.current),D(!1),S.current&&(S.current.pause(),S.current.oncanplay=null)},children:[_&&e.file_path&&C.jsxDEV("video",{ref:S,className:"absolute inset-0 w-full h-full object-cover "+(j?"block":"hidden"),muted:!0,playsInline:!0,loop:!0},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:191,columnNumber:11},this),!j&&C.jsxDEV(C.Fragment,{children:e.thumb_url&&!E?C.jsxDEV("img",{src:e.thumb_url,alt:e.title,className:"w-full h-full object-cover",onError:()=>V(!0)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:204,columnNumber:15},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-10 h-10 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:213,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:212,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:211,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:202,columnNumber:11},this),r&&n&&C.jsxDEV("div",{className:"absolute top-2 right-2 bg-black/80 text-white rounded-full p-1.5 shadow-lg z-10",children:C.jsxDEV(xe,{className:"w-4 h-4 text-accent-text",strokeWidth:"3"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:223,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:222,columnNumber:11},this),L&&"top"===L.position&&C.jsxDEV("div",{className:`absolute top-2 left-2 ${L.bg} text-white px-3 py-1 rounded ${d.badge} font-bold tracking-wide backdrop-blur-sm z-10`,children:L.text},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:229,columnNumber:11},this),L&&"bottom"===L.position&&C.jsxDEV("div",{className:`absolute bottom-0 left-0 right-0 ${L.bg} text-white px-3 py-1.5 text-center ${d.badge} font-bold tracking-wide backdrop-blur-sm z-10`,children:L.text},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:234,columnNumber:11},this),e.duration_sec&&C.jsxDEV("div",{className:`absolute bottom-1 right-1 bg-black/80 text-white ${d.badge} font-semibold px-1.5 py-0.5 rounded`,children:_e(e.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:241,columnNumber:11},this),_&&e.watched&&C.jsxDEV("div",{className:`absolute top-2 left-2 bg-black/80 text-white px-2 py-0.5 rounded ${d.badge} font-semibold`,children:"WATCHED"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:248,columnNumber:11},this),e.playlist_ids&&e.playlist_ids.length>0&&C.jsxDEV("div",{className:`absolute bottom-1 left-1 bg-green-600/90 text-white px-1.5 py-0.5 rounded ${d.badge} font-semibold`,children:"PLAYLIST"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:255,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:180,columnNumber:7},this),C.jsxDEV("div",{className:"p-3 space-y-2 rounded-b-xl transition-colors "+(r?"bg-dark-tertiary":"group-hover:bg-dark-tertiary"),children:[C.jsxDEV("div",{className:"flex items-start justify-between gap-2",children:[C.jsxDEV("h3",{className:`${d.title} font-medium text-text-primary line-clamp-2 leading-tight flex-1 min-w-0`,title:e.title,children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:265,columnNumber:11},this),_&&!s&&C.jsxDEV("div",{className:"relative flex-shrink-0",ref:w,children:[C.jsxDEV("button",{ref:k,onClick:e=>{e.stopPropagation(),N(!b)},title:"Video options","aria-label":"Video options",className:"p-1 rounded hover:bg-dark-hover transition-colors text-text-secondary hover:text-text-primary",children:C.jsxDEV(Ne,{},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:282,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:272,columnNumber:15},this),b&&C.jsxDEV("div",{className:"menu absolute right-0 mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-1 min-w-[160px] z-50",onMouseLeave:e=>e.stopPropagation(),children:[C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),N(!1),v(!0)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("rect",{x:"3",y:"3",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:300,columnNumber:23},this),C.jsxDEV("rect",{x:"14",y:"3",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:301,columnNumber:23},this),C.jsxDEV("rect",{x:"3",y:"14",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:302,columnNumber:23},this),C.jsxDEV("rect",{x:"14",y:"14",width:"7",height:"7"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:303,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:299,columnNumber:21},this),"Playlist Options"]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:291,columnNumber:19},this),C.jsxDEV("button",{onClick:e=>{e.stopPropagation(),N(!1),g(!0)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(ve,{className:"w-4 h-4"},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:315,columnNumber:21},this),"Delete video"]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:307,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:287,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:271,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:264,columnNumber:9},this),i&&e.file_size_bytes?C.jsxDEV("div",{className:`${d.metadata} text-text-secondary font-medium`,children:C.jsxDEV("span",{children:[Ce(e.downloaded_at)," • ",we(e.file_size_bytes)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:328,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:327,columnNumber:11},this):C.jsxDEV("div",{className:`${d.metadata} text-text-secondary font-medium flex justify-between items-center`,children:[C.jsxDEV("span",{children:ke(e.upload_date)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:333,columnNumber:13},this),e.duration_sec&&C.jsxDEV("span",{children:_e(e.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:335,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:332,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:262,columnNumber:7},this),x&&C.jsxDEV(Le,{videoId:e.id,video:e,triggerRef:k,onClose:()=>v(!1)},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:343,columnNumber:9},this),C.jsxDEV(Ae,{isOpen:y,onClose:()=>g(!1),onConfirm:async()=>{try{await p.mutateAsync(e.id),f("Video deleted","success"),N(!1),g(!1)}catch(t){f(t.message||"Failed to delete video","error")}},title:"Delete Video",message:`Are you sure you want to delete "${e.title}"? This will permanently remove the video file from your system.`,confirmText:"Delete",cancelText:"Cancel",isDanger:!0},void 0,!1,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:352,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/VideoCard.jsx",lineNumber:175,columnNumber:5},this)}function Te({isOpen:e,onClose:t,filters:r,onFilterChange:n,hideVideosFilter:a,isPlaylistMode:s,isLibraryMode:i,isPlaylistView:o}){if(!e)return null;const l={uploadDate:[{label:"All Time",value:""},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"This Year",value:"year"}],videos:[{label:"Active",value:"active",description:"Videos tracked and downloaded"},{label:"Ignored",value:"ignored",description:"Videos that won't be downloaded"}],duration:[{label:"Any Duration",value:""},{label:"Under 5 minutes",value:"under5"},{label:"5-30 minutes",value:"5-30"},{label:"30-60 minutes",value:"30-60"},{label:"Over 60 minutes",value:"over60"}],sort:s?[{label:"Most videos",value:"videos-desc"},{label:"Least videos",value:"videos-asc"},{label:"A-Z",value:"title-asc"},{label:"Z-A",value:"title-desc"}]:[{label:"Newest",value:"date-desc"},{label:"Oldest",value:"date-asc"},{label:"A-Z",value:"title-asc"},{label:"Z-A",value:"title-desc"},{label:"Longest",value:"duration-desc"},{label:"Shortest",value:"duration-asc"}]};return C.jsxDEV("div",{className:"fixed inset-0 bg-black/70 z-[99999] flex items-center justify-center animate-fade-in",onClick:t,children:C.jsxDEV("div",{className:`bg-dark-secondary rounded-xl border border-dark-border w-full ${s?"max-w-[400px]":"max-w-[920px]"} max-h-[90vh] overflow-hidden animate-scale-in`,onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"flex items-center justify-between px-6 py-4 border-b border-dark-border",children:[C.jsxDEV("h2",{className:"text-lg font-medium text-text-primary",children:"Search filters"},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:50,columnNumber:11},this),C.jsxDEV("div",{className:"flex items-center gap-3",children:[C.jsxDEV("button",{onClick:()=>{n("uploadDate",""),n("videos","active"),n("duration",""),n("sort","date-desc")},className:"px-3 py-1.5 text-sm text-text-secondary hover:text-text-primary hover:bg-dark-hover rounded transition-colors",children:"Clear filters"},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:52,columnNumber:13},this),C.jsxDEV("button",{onClick:t,className:"text-text-secondary hover:text-text-primary text-3xl leading-none transition-colors",children:"×"},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:65,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:51,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:49,columnNumber:9},this),C.jsxDEV("div",{className:"overflow-x-auto",children:C.jsxDEV("div",{className:`grid ${s?"grid-cols-1":i&&!o&&a?"grid-cols-4":i&&!o?"grid-cols-5":a?"grid-cols-3":"grid-cols-4"} divide-x divide-dark-border`,children:[!s&&C.jsxDEV("div",{className:"p-2 sm:p-4",children:[C.jsxDEV("h4",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-2 sm:mb-3",children:"ADDED TO LIBRARY"},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:86,columnNumber:13},this),C.jsxDEV("div",{className:"space-y-0.5 sm:space-y-1",children:l.uploadDate.map(e=>C.jsxDEV("button",{onClick:()=>n("uploadDate",e.value),className:"filter-btn w-full justify-start "+(r.uploadDate===e.value?"active":""),children:e.label},e.value,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:91,columnNumber:17},this))},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:89,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:85,columnNumber:11},this),!a&&!s&&C.jsxDEV("div",{className:"p-2 sm:p-4",children:[C.jsxDEV("h4",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-2 sm:mb-3",children:"VIDEOS"},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:108,columnNumber:15},this),C.jsxDEV("div",{className:"space-y-0.5 sm:space-y-1",children:l.videos.map(e=>C.jsxDEV("button",{onClick:()=>n("videos",e.value),className:"filter-btn w-full justify-start "+(r.videos===e.value?"active":""),title:e.description,children:e.label},e.value,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:113,columnNumber:19},this))},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:111,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:107,columnNumber:13},this),!s&&C.jsxDEV("div",{className:"p-2 sm:p-4",children:[C.jsxDEV("h4",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-2 sm:mb-3",children:"DURATION"},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:131,columnNumber:13},this),C.jsxDEV("div",{className:"space-y-0.5 sm:space-y-1",children:l.duration.map(e=>C.jsxDEV("button",{onClick:()=>n("duration",e.value),className:"filter-btn w-full justify-start "+(r.duration===e.value?"active":""),children:e.label},e.value,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:136,columnNumber:17},this))},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:134,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:130,columnNumber:11},this),i&&!o&&C.jsxDEV("div",{className:"p-2 sm:p-4",children:[C.jsxDEV("h4",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-2 sm:mb-3",children:"VISIBILITY"},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:153,columnNumber:13},this),C.jsxDEV("div",{className:"space-y-0.5 sm:space-y-1",children:[C.jsxDEV("button",{onClick:()=>n("hide_watched",r.hideWatched?"":"true"),className:"filter-btn w-full justify-start "+(r.hideWatched?"active":""),children:C.jsxDEV("span",{children:"Hide watched"},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:163,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:157,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>n("hide_playlisted",r.hidePlaylisted?"":"true"),className:"filter-btn w-full justify-start "+(r.hidePlaylisted?"active":""),children:C.jsxDEV("span",{children:"Hide in playlist"},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:171,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:165,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:156,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:152,columnNumber:11},this),C.jsxDEV("div",{className:"p-2 sm:p-4",children:[C.jsxDEV("h4",{className:"text-xs font-semibold text-text-secondary uppercase tracking-wider mb-2 sm:mb-3",children:"SORT BY"},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:179,columnNumber:13},this),C.jsxDEV("div",{className:"space-y-0.5 sm:space-y-1",children:l.sort.map(e=>C.jsxDEV("button",{onClick:()=>n("sort",e.value),className:"filter-btn w-full justify-start "+(r.sort===e.value?"active":""),children:e.label},e.value,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:184,columnNumber:17},this))},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:182,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:178,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:76,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:75,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:42,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/components/FiltersModal.jsx",lineNumber:38,columnNumber:5},this)}function Ie(){const{channelId:e}=N(),r=h(),s=m(),[i,o]=f(),{data:l}=Q(),{data:d}=ee();!function(){const e=n();a({mutationFn:e=>B.addToQueue(e),onSuccess:()=>{e.invalidateQueries(["queue"]),e.invalidateQueries(["videos"])}})}();const c=function(){const e=n();return a({mutationFn:e=>B.addToQueueBulk(e),onSuccess:()=>{e.invalidateQueries(["queue"]),e.invalidateQueries(["videos"])}})}(),u=G(),b=function(){const e=n();return a({mutationFn:e=>B.bulkDeleteVideos(e),onSuccess:()=>{e.invalidateQueries(["videos"]),e.invalidateQueries(["playlists"])}})}();Y();const x=W(),v=U(),y=q(),{showNotification:g}=A(),j=r.pathname.endsWith("/library"),{cardSize:D}=$(j?"library":"channels"),E=ue(D),V=new Set((d?.queue_items||[]).filter(e=>"pending"===e.status||"downloading"===e.status).map(e=>e.video?.id).filter(Boolean)),w=d?.current_operation,k="scanning"===w?.type,[S,P]=t.useState([]),[_,L]=t.useState(!1),[M,T]=t.useState(""),[I,R]=t.useState(!1),[F,O]=t.useState(!1),[z,J]=t.useState(!1),[K,X]=t.useState(!1),[Z,te]=t.useState(!1),[re,ie]=t.useState(null),[de,pe]=t.useState(null),[he,Ne]=t.useState(1),[xe,ve]=t.useState(()=>{const e=localStorage.getItem("channelLibrary_itemsPerPage");return e?Number(e):50}),[ye,ge]=t.useState(null),je=t.useRef(null),De=l?.find(t=>t.id===Number(e)),Ee=`channelLibrary_${e}`,Ve=(()=>{const e=i.get("filter");if(e)return e;return localStorage.getItem(`${Ee}_filter`)||(j?"videos":"to-review")})(),we=i.get("search")||"",ke=(()=>{const e=i.get("sort");if(e)return e;return localStorage.getItem(`${Ee}_sort`)||"date-desc"})(),Ce=(()=>{const e=i.get("min_duration");return e||(localStorage.getItem(`${Ee}_minDuration`)||null)})(),Se=(()=>{const e=i.get("max_duration");return e||(localStorage.getItem(`${Ee}_maxDuration`)||null)})(),Pe=(()=>{const e=i.get("upload_from");return e||(localStorage.getItem(`${Ee}_uploadFrom`)||null)})(),_e=(()=>{const e=i.get("upload_to");return e||(localStorage.getItem(`${Ee}_uploadTo`)||null)})(),Ae=(()=>{const e=i.get("hide_watched");return null!==e?"true"===e:!!j&&"true"===localStorage.getItem("channelLibrary_hideWatched")})(),Ie=(()=>{const e=i.get("hide_playlisted");return null!==e?"true"===e:!!j&&"true"===localStorage.getItem("channelLibrary_hidePlaylisted")})(),Re=(()=>{if(!Pe)return"";const e=new Date,t=new Date(Pe),r=Math.floor((e-t)/864e5);return r>=0&&r<=7?"week":r>=28&&r<=31?"month":r>=360&&r<=370?"year":""})(),Fe=(()=>{const e=Ce?parseInt(Ce):null,t=Se?parseInt(Se):null;return 5!==t||e?5===e&&30===t?"5-30":30===e&&60===t?"30-60":60!==e||t?"":"over60":"under5"})();let Oe,$e;j?(Oe="library",$e="false"):"ignored"===Ve?$e="true":(Oe="discovered",$e="false");const{data:ze,isLoading:Be}=H({channel_id:e,status:Oe,ignored:$e,search:we,min_duration:Ce,max_duration:Se,upload_from:Pe,upload_to:_e});t.useEffect(()=>{const e=new URLSearchParams(i);let t=!1;if(!i.has("sort")){const r=localStorage.getItem(`${Ee}_sort`);r&&(e.set("sort",r),t=!0)}if(!i.has("filter")){const r=localStorage.getItem(`${Ee}_filter`);r&&(e.set("filter",r),t=!0)}if(!i.has("min_duration")){const r=localStorage.getItem(`${Ee}_minDuration`);r&&(e.set("min_duration",r),t=!0)}if(!i.has("max_duration")){const r=localStorage.getItem(`${Ee}_maxDuration`);r&&(e.set("max_duration",r),t=!0)}if(!i.has("upload_from")){const r=localStorage.getItem(`${Ee}_uploadFrom`);r&&(e.set("upload_from",r),t=!0)}if(!i.has("upload_to")){const r=localStorage.getItem(`${Ee}_uploadTo`);r&&(e.set("upload_to",r),t=!0)}if(j){if(!i.has("hide_watched")){"true"===localStorage.getItem("channelLibrary_hideWatched")&&(e.set("hide_watched","true"),t=!0)}if(!i.has("hide_playlisted")){"true"===localStorage.getItem("channelLibrary_hidePlaylisted")&&(e.set("hide_playlisted","true"),t=!0)}}t&&o(e,{replace:!0})},[e]),t.useEffect(()=>{const e=()=>{R(window.scrollY>400)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const Qe=e=>{if(j&&e.downloaded_at)return new Date(e.downloaded_at);if(e.upload_date){const t=e.upload_date.slice(0,4),r=e.upload_date.slice(4,6),n=e.upload_date.slice(6,8),a=new Date(`${t}-${r}-${n}`);return isNaN(a.getTime())&&console.log("Invalid date for video:",e.title,"upload_date:",e.upload_date),a}return new Date(e.discovered_at||0)},qe=t.useMemo(()=>ze?[...ze].filter(e=>!!(e.title||"").toLowerCase().includes(M.toLowerCase())&&((!Ae||!e.watched)&&(!Ie||!e.playlist_name))).sort((e,t)=>{switch(ke){case"date-desc":return Qe(t)-Qe(e);case"date-asc":return Qe(e)-Qe(t);case"duration-desc":return t.duration_sec-e.duration_sec;case"duration-asc":return e.duration_sec-t.duration_sec;case"title-asc":return e.title.localeCompare(t.title);case"title-desc":return t.title.localeCompare(e.title);default:return 0}}):[],[ze,M,Ae,Ie,ke]);t.useEffect(()=>{Ne(1)},[M,Ae,Ie,ke,Ve]),t.useEffect(()=>{const e=Math.ceil(qe.length/xe);he>e&&e>0&&Ne(e)},[qe.length,xe,he]);const We=t.useMemo(()=>{const e=(he-1)*xe;return qe.slice(e,e+xe)},[qe,he,xe]),Ue=async e=>{if(0!==S.length)try{switch(e){case"queue":const e=await c.mutateAsync(S);e.skipped_count>0?g(`${e.added_count} videos added to queue, ${e.skipped_count} already in queue`,"success"):g(`${e.added_count} videos added to queue`,"success");break;case"ignore":await u.mutateAsync({videoIds:S,updates:{status:"ignored"}}),g(`${S.length} videos ignored`,"success");break;case"unignore":const t=await c.mutateAsync(S);t.skipped_count>0?g(`${t.added_count} videos added to queue, ${t.skipped_count} already in queue`,"success"):g(`${t.added_count} videos added to queue`,"success");break;case"delete":return void ge({count:S.length});case"playlist":return void J(!0)}P([])}catch(t){g(t.message,"error")}},He=e=>{P(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Je=()=>{P(qe.map(e=>e.id))},Ye=()=>{P(We.map(e=>e.id))},Ge=()=>{P([])},Ke=async(t=!1)=>{try{const n=l?.find(t=>t.id===Number(e)),a=n?.title||`Channel ${e}`;try{await B.setOperation("scanning","Scanning channels for new videos")}catch(r){}await v.mutateAsync({id:Number(e),forceFull:t,is_batch_start:!0,is_auto_scan:!1,batch_label:a})}catch(r){g(r.message,"error")}};return t.useEffect(()=>{const e=e=>{je.current&&!je.current.contains(e.target)&&X(!1)};if(K)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[K]),Be?C.jsxDEV(ce,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:670,columnNumber:12},this):C.jsxDEV("div",{className:"space-y-4 animate-fade-in",children:[C.jsxDEV(ne,{className:"md:-mx-8 md:px-8 mb-4",children:C.jsxDEV("div",{className:"flex items-center justify-center gap-3 flex-wrap",children:[C.jsxDEV(p,{to:j?"/library":"/",className:"flex items-center justify-center w-9 h-9 rounded-lg bg-dark-tertiary hover:bg-dark-hover border border-dark-border text-text-secondary hover:text-text-primary transition-colors",title:j?"Back to Library":"Back to Channels",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"15 18 9 12 15 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:685,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:684,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:679,columnNumber:11},this),C.jsxDEV("div",{className:"flex gap-2",children:j?C.jsxDEV(C.Fragment,{children:[C.jsxDEV("button",{onClick:()=>{const e=new URLSearchParams(i);e.delete("filter"),o(e)},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("videos"===Ve?"bg-dark-tertiary text-text-primary border border-dark-border-light":"bg-dark-primary/95 border border-dark-border text-text-secondary hover:bg-dark-tertiary/50 hover:text-text-primary"),children:"Videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:694,columnNumber:17},this),C.jsxDEV("button",{onClick:()=>{s("/library?tab=playlists")},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-dark-primary/95 border border-dark-border text-text-secondary hover:bg-dark-tertiary/50 hover:text-text-primary",children:"Playlists"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:708,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:692,columnNumber:15},this):C.jsxDEV(C.Fragment,{children:[C.jsxDEV("button",{onClick:()=>{const e=new URLSearchParams(i);e.delete("filter"),o(e)},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("to-review"===Ve?"bg-dark-tertiary text-text-primary border border-dark-border-light":"bg-dark-primary/95 border border-dark-border text-text-secondary hover:bg-dark-tertiary/50 hover:text-text-primary"),children:"To Review"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:720,columnNumber:17},this),C.jsxDEV("button",{onClick:()=>{const e=new URLSearchParams(i);e.set("filter","ignored"),o(e)},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("ignored"===Ve?"bg-dark-tertiary text-text-primary border border-dark-border-light":"bg-dark-primary/95 border border-dark-border text-text-secondary hover:bg-dark-tertiary/50 hover:text-text-primary"),children:"Ignored"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:734,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:718,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:690,columnNumber:11},this),C.jsxDEV(ae,{value:M,onChange:e=>{T(e)},placeholder:"Search videos...",className:"w-full sm:w-[180px]"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:753,columnNumber:11},this),C.jsxDEV(se,{tab:j?"library":"channels"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:761,columnNumber:11},this),C.jsxDEV(fe,{currentPage:he,totalItems:qe.length,itemsPerPage:xe,onPageChange:Ne,onItemsPerPageChange:e=>{ve(e),localStorage.setItem("channelLibrary_itemsPerPage",e),Ne(1)}},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:764,columnNumber:11},this),C.jsxDEV("button",{onClick:()=>L(!0),title:"Filter and sort videos",className:"filter-btn",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:783,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:782,columnNumber:13},this),C.jsxDEV("span",{children:"Filters"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:785,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:777,columnNumber:11},this),j&&"playlists"!==Ve&&C.jsxDEV("button",{onClick:()=>{O(!F),P([])},title:F?"Exit selection mode":"Select videos for bulk actions",className:"filter-btn "+(F?"bg-dark-tertiary text-text-primary border-dark-border-light":""),children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:799,columnNumber:17},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:800,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:798,columnNumber:15},this),C.jsxDEV("span",{children:F?"Done":"Edit"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:802,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:790,columnNumber:13},this),j&&F&&"playlists"!==Ve&&C.jsxDEV(C.Fragment,{children:[qe.length>0&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("button",{onClick:Je,className:"btn btn-primary btn-sm",children:["Select All (",qe.length,")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:812,columnNumber:19},this),C.jsxDEV("button",{onClick:Ye,className:"btn btn-secondary btn-sm",children:["Select Page (",We.length,")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:818,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:811,columnNumber:17},this),S.length>0&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{className:"text-sm text-text-secondary",children:[S.length," selected"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:830,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>Ue("delete"),className:"btn btn-secondary btn-sm",children:"Delete All"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:831,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>Ue("playlist"),className:"btn btn-primary btn-sm",children:"Playlist Options"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:837,columnNumber:19},this),C.jsxDEV("button",{onClick:Ge,className:"btn btn-secondary btn-sm",children:"Clear"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:843,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:829,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:808,columnNumber:13},this),!j&&"playlists"!==Ve&&C.jsxDEV(C.Fragment,{children:[qe.length>0&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("button",{onClick:Je,className:"btn btn-primary btn-sm",children:["Select All (",qe.length,")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:860,columnNumber:19},this),C.jsxDEV("button",{onClick:Ye,className:"btn btn-secondary btn-sm",children:["Select Page (",We.length,")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:866,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:859,columnNumber:17},this),S.length>0&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{className:"text-sm text-text-secondary",children:[S.length," selected"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:878,columnNumber:19},this),"to-review"===Ve&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("button",{onClick:()=>Ue("queue"),className:"btn btn-primary btn-sm",children:"Add to Queue"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:881,columnNumber:23},this),C.jsxDEV("button",{onClick:()=>Ue("ignore"),className:"btn btn-secondary btn-sm",children:"Ignore"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:887,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:880,columnNumber:21},this),"ignored"===Ve&&C.jsxDEV("button",{onClick:()=>Ue("unignore"),className:"btn btn-primary btn-sm",children:"Add to Queue"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:896,columnNumber:21},this),C.jsxDEV("button",{onClick:Ge,className:"btn btn-secondary btn-sm",children:"Clear"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:903,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:877,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:856,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:677,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:676,columnNumber:7},this),De&&"playlists"!==Ve&&!j&&C.jsxDEV("div",{className:"relative flex items-center gap-6 mb-4",children:[De.thumbnail&&C.jsxDEV("img",{src:De.thumbnail,alt:De.title,className:"w-16 h-16 rounded-full border-4 border-white"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:920,columnNumber:13},this),C.jsxDEV("div",{children:[C.jsxDEV("h2",{className:"text-base md:text-2xl font-bold text-text-primary",children:De.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:927,columnNumber:13},this),C.jsxDEV("p",{className:"text-text-secondary text-sm",children:[qe.length," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:928,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:926,columnNumber:11},this),C.jsxDEV("div",{className:"relative",ref:je,children:[C.jsxDEV("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),X(!K)},className:"p-1.5 rounded-full bg-gray-600 hover:bg-gray-500 transition-colors",children:C.jsxDEV("svg",{className:"w-4 h-4 text-text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"12",cy:"5",r:"1"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:942,columnNumber:17},this),C.jsxDEV("circle",{cx:"12",cy:"12",r:"1"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:943,columnNumber:17},this),C.jsxDEV("circle",{cx:"12",cy:"19",r:"1"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:944,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:941,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:933,columnNumber:13},this),K&&C.jsxDEV("div",{className:"absolute top-full left-0 mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl z-50 w-[200px] animate-scale-in",children:C.jsxDEV("div",{className:"py-1",children:[C.jsxDEV("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),Ke(!1),X(!1)},disabled:k,className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex flex-col disabled:opacity-50 disabled:cursor-not-allowed",title:k?"Scan in progress...":"Scan for new videos since last scan",children:[C.jsxDEV("span",{className:"font-medium",children:"Scan"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:964,columnNumber:21},this),De.last_scan_at&&C.jsxDEV("span",{className:"text-xs text-text-secondary mt-0.5",children:["Since ",new Date(De.last_scan_at).toLocaleDateString()," video"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:966,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:953,columnNumber:19},this),C.jsxDEV("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),Ke(!0),X(!1)},disabled:k,className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:k?"Scan in progress...":"Full scan - rescan all videos",children:C.jsxDEV("span",{className:"font-medium",children:"Scan All"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:984,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:973,columnNumber:19},this),C.jsxDEV("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),te(!Z),ie(De)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors",children:C.jsxDEV("span",{className:"font-medium",children:"Duration Settings"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:997,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:988,columnNumber:19},this),C.jsxDEV("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();const t=!De.auto_download;y.mutate({id:De.id,data:{auto_download:t}},{onSuccess:()=>{g(t?`Auto-download enabled for ${De.title}`:`Auto-download disabled for ${De.title}`,"success")}})},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",title:"If checked, will automatically download any new video that is found via scan (manual or automated)",children:[C.jsxDEV("input",{type:"checkbox",checked:De.auto_download||!1,readOnly:!0,className:"w-4 h-4 rounded border-dark-border bg-dark-tertiary text-accent-text"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1023,columnNumber:21},this),C.jsxDEV("span",{className:"font-medium",children:"Auto-Download"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1029,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1001,columnNumber:19},this),C.jsxDEV("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),pe({id:De.id,title:De.title}),X(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-red-900/30 transition-colors border-t border-dark-border",children:C.jsxDEV("span",{className:"font-medium",children:"Delete Channel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1042,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1033,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:951,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:950,columnNumber:15},this),Z&&re&&C.jsxDEV("div",{className:"absolute top-full left-[210px] mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl z-50 w-[280px] p-4 animate-scale-in",children:[C.jsxDEV("h4",{className:"text-sm font-bold text-text-primary mb-3",children:"Duration Settings"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1051,columnNumber:17},this),C.jsxDEV("div",{className:"space-y-3",children:[C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Min Minutes"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1054,columnNumber:21},this),C.jsxDEV("input",{type:"number",value:re.min_minutes,onChange:e=>ie({...re,min_minutes:Number(e.target.value)}),className:"input text-sm py-1.5 w-full",min:"0",title:"Minimum video duration in minutes. Only videos longer than this will be found. Use 0 for no minimum."},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1057,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1053,columnNumber:19},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Max Minutes"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1070,columnNumber:21},this),C.jsxDEV("input",{type:"number",value:re.max_minutes,onChange:e=>ie({...re,max_minutes:Number(e.target.value)}),className:"input text-sm py-1.5 w-full",min:"0",title:"Maximum video duration in minutes. Only videos shorter than this will be found. Use 0 for no maximum."},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1073,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1069,columnNumber:19},this),C.jsxDEV("div",{className:"flex gap-2 pt-2",children:[C.jsxDEV("button",{onClick:()=>{te(!1),ie(null)},className:"btn btn-secondary btn-sm flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1086,columnNumber:21},this),C.jsxDEV("button",{onClick:async()=>{try{await y.mutateAsync({id:Number(e),data:{min_minutes:re.min_minutes,max_minutes:re.max_minutes}}),ie(null),te(!1),g("Filters updated","success")}catch(t){g(t.message,"error")}},className:"btn btn-primary btn-sm flex-1",children:"Save"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1095,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1085,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1052,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1050,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:932,columnNumber:11},this),!j&&C.jsxDEV("div",{className:"flex flex-col md:flex-row md:items-center gap-1 md:gap-2",children:[De.auto_download&&C.jsxDEV("span",{className:"text-green-500 text-[10px] font-bold tracking-wide mr-1",title:"Auto-download enabled",children:"AUTO"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1112,columnNumber:17},this),C.jsxDEV("div",{className:"flex items-center gap-1 text-sm font-semibold text-accent",title:"Downloaded videos",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1118,columnNumber:19},this),C.jsxDEV("polyline",{points:"7 10 12 15 17 10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1119,columnNumber:19},this),C.jsxDEV("line",{x1:"12",y1:"15",x2:"12",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1120,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1117,columnNumber:17},this),C.jsxDEV("span",{className:"font-mono",children:De.downloaded_count||0},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1122,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1116,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center gap-1 text-sm font-semibold text-gray-400",title:"To Review",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1128,columnNumber:19},this),C.jsxDEV("circle",{cx:"12",cy:"12",r:"1"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1129,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1127,columnNumber:17},this),C.jsxDEV("span",{className:"font-mono",children:De.video_count||0},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1131,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1126,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center gap-1 text-sm font-semibold text-gray-400",title:"Ignored videos",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1137,columnNumber:19},this),C.jsxDEV("line",{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1138,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1136,columnNumber:17},this),C.jsxDEV("span",{className:"font-mono",children:De.ignored_count||0},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1140,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1135,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1109,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:918,columnNumber:9},this),0===qe.length?C.jsxDEV(me,{icon:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1150,columnNumber:17},this),title:ze&&ze.length>0&&(Ae||Ie)?"All videos are "+(Ae&&Ie?"watched or in playlists":Ae?"watched":"in playlists"):"No videos found",message:ze&&ze.length>0&&(Ae||Ie)?"Remove filter to see them":j?"No downloaded videos yet":"Try adjusting your filters or scan for videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1149,columnNumber:9},this):(()=>{const e=le(D,We.length);return C.jsxDEV("div",{className:"px-6 lg:px-12 xl:px-16",children:C.jsxDEV("div",{className:`grid ${oe(E,We.length)} gap-4 w-full [&>*]:min-w-0`,children:We.map(t=>C.jsxDEV(Me,{video:t,isSelected:S.includes(t.id),onToggleSelect:j&&F?He:j?void 0:He,isQueued:V.has(t.id),editMode:j&&F,isLibraryView:j,effectiveCardSize:e},t.id,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1164,columnNumber:13},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1162,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1161,columnNumber:9},this)})(),qe.length>0&&C.jsxDEV("div",{className:"flex justify-center mt-6",children:C.jsxDEV(fe,{currentPage:he,totalItems:qe.length,itemsPerPage:xe,onPageChange:Ne,onItemsPerPageChange:e=>{ve(e),localStorage.setItem("channelLibrary_itemsPerPage",e),Ne(1)}},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1183,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1182,columnNumber:9},this),C.jsxDEV(Te,{isOpen:_,onClose:()=>L(!1),filters:{uploadDate:Re,duration:Fe,sort:ke,hideWatched:Ae,hidePlaylisted:Ie},onFilterChange:(e,t)=>{const r=new URLSearchParams(i);if("view"!==e)if("hide_watched"!==e&&"hide_playlisted"!==e){if("sort"===e)r.set("sort",t),localStorage.setItem(`${Ee}_sort`,t);else if("duration"===e)r.delete("min_duration"),r.delete("max_duration"),localStorage.removeItem(`${Ee}_minDuration`),localStorage.removeItem(`${Ee}_maxDuration`),"under5"===t?(r.set("max_duration","5"),localStorage.setItem(`${Ee}_maxDuration`,"5")):"5-30"===t?(r.set("min_duration","5"),r.set("max_duration","30"),localStorage.setItem(`${Ee}_minDuration`,"5"),localStorage.setItem(`${Ee}_maxDuration`,"30")):"30-60"===t?(r.set("min_duration","30"),r.set("max_duration","60"),localStorage.setItem(`${Ee}_minDuration`,"30"),localStorage.setItem(`${Ee}_maxDuration`,"60")):"over60"===t&&(r.set("min_duration","60"),localStorage.setItem(`${Ee}_minDuration`,"60"));else if("uploadDate"===e){r.delete("upload_from"),r.delete("upload_to"),localStorage.removeItem(`${Ee}_uploadFrom`),localStorage.removeItem(`${Ee}_uploadTo`);const e=new Date;if("week"===t){const t=new Date(e.getTime()-6048e5).toISOString().split("T")[0];r.set("upload_from",t),localStorage.setItem(`${Ee}_uploadFrom`,t)}else if("month"===t){const t=new Date(e.getTime()-2592e6).toISOString().split("T")[0];r.set("upload_from",t),localStorage.setItem(`${Ee}_uploadFrom`,t)}else if("year"===t){const t=new Date(e.getTime()-31536e6).toISOString().split("T")[0];r.set("upload_from",t),localStorage.setItem(`${Ee}_uploadFrom`,t)}}else t?r.set(e,t):r.delete(e);o(r)}else{if(t){if(r.set(e,t),j){const t="hide_watched"===e?"channelLibrary_hideWatched":"channelLibrary_hidePlaylisted";localStorage.setItem(t,"true")}}else if(r.delete(e),j){const t="hide_watched"===e?"channelLibrary_hideWatched":"channelLibrary_hidePlaylisted";localStorage.setItem(t,"false")}o(r)}else setViewMode(t)},hideVideosFilter:!0,isPlaylistMode:"playlists"===Ve,isLibraryMode:j,isPlaylistView:"playlists"===Ve},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1198,columnNumber:7},this),I&&C.jsxDEV("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-20 right-6 p-3 bg-gray-700 hover:bg-gray-600 rounded-full shadow-lg transition-colors z-50 animate-fade-in","aria-label":"Scroll to top",children:C.jsxDEV("svg",{className:"w-5 h-5 text-text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"18 15 12 9 6 15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1223,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1222,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1217,columnNumber:9},this),de&&C.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg max-w-md w-full p-6 shadow-2xl border border-dark-border",children:[C.jsxDEV("h3",{className:"text-xl font-bold text-text-primary mb-3",children:"Delete Channel?"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1232,columnNumber:13},this),C.jsxDEV("p",{className:"text-text-secondary mb-4",children:['Are you sure you want to delete "',C.jsxDEV("span",{className:"text-text-primary font-semibold",children:de.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1234,columnNumber:48},this),'"?']},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1233,columnNumber:13},this),C.jsxDEV("p",{className:"text-sm text-yellow-400 mb-6",children:"⚠️ This will permanently delete all scanned videos from this channel. Downloaded videos in your library will not be affected."},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1236,columnNumber:13},this),C.jsxDEV("div",{className:"flex gap-3",children:[C.jsxDEV("button",{onClick:()=>pe(null),className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1240,columnNumber:15},this),C.jsxDEV("button",{onClick:async()=>{try{g("Deleting channel...","info",{persistent:!0}),await x.mutateAsync(Number(e)),g("Channel deleted","success"),pe(null),s("/")}catch(t){g(t.message,"error")}},disabled:x.isPending,className:"btn btn-danger flex-1",children:x.isPending?"Deleting...":"Delete"},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1246,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1239,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1231,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1230,columnNumber:9},this),z&&C.jsxDEV(Le,{videoIds:S,onClose:()=>{J(!1),P([])}},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1260,columnNumber:9},this),C.jsxDEV(be,{isOpen:!!ye,title:"Delete Videos",message:C.jsxDEV(C.Fragment,{children:["Permanently delete ",C.jsxDEV("span",{className:"font-semibold",children:[ye?.count," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1275,columnNumber:32},this)," from your library? This will also delete the video files from disk."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1274,columnNumber:11},this),confirmText:"Delete",confirmStyle:"danger",onConfirm:async()=>{if(ye)try{await b.mutateAsync(S),g(`${S.length} videos deleted`,"success"),P([]),O(!1),ge(null)}catch(e){g(e.message,"error")}},onCancel:()=>ge(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:1270,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/ChannelLibrary.jsx",lineNumber:674,columnNumber:5},this)}function Re(){const{id:e}=N(),r=m(),n=h(),{data:a,isLoading:s}=X(e),i=Z(),o=Y(),l=G(),{showNotification:d}=A(),{cardSize:c}=$("library"),u=ue(c),[p,f]=t.useState(""),[b,x]=t.useState(!1),[v,y]=t.useState(localStorage.getItem("playlist_sort")||"date-desc"),[g,j]=t.useState("true"===localStorage.getItem("playlist_hideWatched")),[D,E]=t.useState(!1),[V,w]=t.useState([]),[k,S]=t.useState(!1),[P,_]=t.useState(1),[L,M]=t.useState(()=>{const e=localStorage.getItem("playlist_itemsPerPage");return e?Number(e):50}),[T,I]=t.useState(null);t.useEffect(()=>{localStorage.setItem("playlist_sort",v)},[v]),t.useEffect(()=>{localStorage.setItem("playlist_hideWatched",g.toString())},[g]);const R=e=>{w(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},F=async e=>{if(0!==V.length)try{switch(e){case"mark-watched":await l.mutateAsync({videoIds:V,updates:{watched:!0}}),d(`${V.length} videos marked as watched`,"success");break;case"remove":return void I({type:"remove",count:V.length});case"delete":return void I({type:"delete",count:V.length})}w([])}catch(t){d(t.message,"error")}},O=async()=>{if(T)try{if("remove"===T.type){for(const t of V)await i.mutateAsync({playlistId:parseInt(e),videoId:t});d(`${V.length} videos removed from playlist`,"success")}else if("delete"===T.type){for(const e of V)await o.mutateAsync(e);d(`${V.length} videos deleted from library`,"success")}w([]),I(null)}catch(t){d(t.message,"error")}},z=e=>e.downloaded_at?new Date(e.downloaded_at):new Date(e.discovered_at||0),B=t.useMemo(()=>a?.videos?a.videos.filter(e=>!!(e.title||"").toLowerCase().includes(p.toLowerCase())&&(!g||!e.watched)).sort((e,t)=>{switch(v){case"date-desc":return z(t)-z(e);case"date-asc":return z(e)-z(t);case"duration-desc":return t.duration_sec-e.duration_sec;case"duration-asc":return e.duration_sec-t.duration_sec;case"title-asc":return e.title.localeCompare(t.title);case"title-desc":return t.title.localeCompare(e.title);default:return 0}}):[],[a?.videos,p,g,v]);t.useEffect(()=>{_(1)},[p,v,g]);const Q=t.useMemo(()=>{const e=(P-1)*L;return B.slice(e,e+L)},[B,P,L]);return s?C.jsxDEV("div",{className:"text-center py-20 text-text-secondary",children:"Loading playlist..."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:181,columnNumber:12},this):a?C.jsxDEV("div",{className:"space-y-4 animate-fade-in",children:[C.jsxDEV(ne,{className:"-mx-8 px-8 mb-4",children:[C.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:C.jsxDEV("div",{className:"flex items-center gap-3",children:[C.jsxDEV("button",{onClick:()=>{const e=n.state?.from||(a.channel_id?`/channel/${a.channel_id}/library?filter=playlists`:"/library?tab=playlists");r(e)},className:"flex items-center justify-center w-9 h-9 rounded-lg bg-dark-tertiary hover:bg-dark-hover border border-dark-border text-text-secondary hover:text-text-primary transition-colors",title:"Back",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"15 18 9 12 15 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:218,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:217,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:205,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary",children:a.name},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:224,columnNumber:15},this),C.jsxDEV("span",{className:"text-sm text-text-secondary",children:["(",B.length," videos)"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:225,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:223,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:203,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:202,columnNumber:9},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV(ae,{value:p,onChange:f,placeholder:"Search videos...",className:"w-[180px]"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:233,columnNumber:11},this),C.jsxDEV(se,{tab:"library"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:241,columnNumber:11},this),C.jsxDEV(fe,{currentPage:P,totalItems:B.length,itemsPerPage:L,onPageChange:_,onItemsPerPageChange:e=>{M(e),localStorage.setItem("playlist_itemsPerPage",e),_(1)}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:244,columnNumber:11},this),C.jsxDEV("button",{onClick:()=>x(!0),className:"filter-btn",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:262,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:261,columnNumber:13},this),C.jsxDEV("span",{children:"Filters"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:264,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:257,columnNumber:11},this),C.jsxDEV("button",{onClick:()=>{E(!D),w([])},className:"filter-btn "+(D?"bg-dark-tertiary text-text-primary border-dark-border-light":""),children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:276,columnNumber:15},this),C.jsxDEV("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:277,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:275,columnNumber:13},this),C.jsxDEV("span",{children:D?"Done":"Edit"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:279,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:268,columnNumber:11},this),D&&C.jsxDEV(C.Fragment,{children:[B.length>0&&C.jsxDEV("button",{onClick:()=>{w(B.map(e=>e.id))},className:"btn btn-sm bg-dark-tertiary text-text-primary hover:bg-dark-hover",children:["Select All (",B.length,")"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:287,columnNumber:17},this),V.length>0&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{className:"text-sm text-text-secondary",children:[V.length," selected"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:298,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>F("mark-watched"),className:"btn btn-primary btn-sm",children:"Mark Watched"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:299,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>S(!0),className:"btn btn-secondary btn-sm",children:"Playlist Options"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:305,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>F("delete"),className:"btn btn-secondary btn-sm",children:"Delete Video"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:311,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>{w([])},className:"btn btn-sm bg-dark-tertiary text-text-primary hover:bg-dark-hover",children:"Clear"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:317,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:297,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:284,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:231,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:201,columnNumber:7},this),B.length>0?(()=>{const e=le(c,Q.length);return C.jsxDEV("div",{className:"px-6 lg:px-12 xl:px-16",children:C.jsxDEV("div",{className:`grid ${oe(u,Q.length)} gap-4 w-full [&>*]:min-w-0`,children:Q.map(t=>C.jsxDEV(Me,{video:t,isLibraryView:!0,editMode:D,isSelected:V.includes(t.id),onToggleSelect:D?R:void 0,effectiveCardSize:e},t.id,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:337,columnNumber:13},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:335,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:334,columnNumber:9},this)})():C.jsxDEV(me,{icon:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:352,columnNumber:17},this),title:0===(a.videos||[]).length?"This playlist is empty":"No videos match your filters",message:0===(a.videos||[]).length?"Add videos from your library to get started":"Try adjusting your search or filters"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:351,columnNumber:9},this),B.length>0&&C.jsxDEV("div",{className:"flex justify-center mt-6",children:C.jsxDEV(fe,{currentPage:P,totalItems:B.length,itemsPerPage:L,onPageChange:_,onItemsPerPageChange:e=>{M(e),localStorage.setItem("playlist_itemsPerPage",e),_(1)}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:361,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:360,columnNumber:9},this),C.jsxDEV(Te,{isOpen:b,onClose:()=>x(!1),filters:{sort:v,hideWatched:g},onFilterChange:(e,t)=>{"sort"===e?y(t):"hide_watched"===e&&j("true"===t)},hideVideosFilter:!0,isPlaylistMode:!1,isLibraryMode:!0,isPlaylistView:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:376,columnNumber:7},this),C.jsxDEV(be,{isOpen:"remove"===T?.type,title:"Remove from Playlist",message:C.jsxDEV(C.Fragment,{children:["Remove ",C.jsxDEV("span",{className:"font-semibold",children:[T?.count," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:396,columnNumber:20},this)," from this playlist? The videos will remain in your library."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:395,columnNumber:11},this),confirmText:"Remove",confirmStyle:"danger",onConfirm:O,onCancel:()=>I(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:391,columnNumber:7},this),C.jsxDEV(be,{isOpen:"delete"===T?.type,title:"Delete Videos",message:C.jsxDEV(C.Fragment,{children:["Permanently delete ",C.jsxDEV("span",{className:"font-semibold",children:[T?.count," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:411,columnNumber:32},this)," from your library? This will also delete the video files from disk."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:410,columnNumber:11},this),confirmText:"Delete",confirmStyle:"danger",onConfirm:O,onCancel:()=>I(null)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:406,columnNumber:7},this),k&&C.jsxDEV(Le,{videoIds:V,onClose:()=>{S(!1),w([]),E(!1)}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:423,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:199,columnNumber:5},this):C.jsxDEV("div",{className:"text-center py-20 text-text-secondary",children:[C.jsxDEV("p",{className:"text-lg font-medium",children:"Playlist not found"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:187,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>r("/library?tab=playlists"),className:"btn btn-primary mt-4",children:"Back to Library"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:188,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Playlist.jsx",lineNumber:186,columnNumber:7},this)}function Fe(){const{showNotification:e}=A(),{cardSize:r}=$("videos"),s=a({mutationFn:({url:e,filter:t="new"})=>B.scanYouTubePlaylist(e,t)}),i=function(){const e=n();return a({mutationFn:({videos:e})=>B.queuePlaylistVideos(e),onSuccess:()=>{e.invalidateQueries(["queue"]),e.invalidateQueries(["videos"])}})}(),o=a({mutationFn:({videos:e})=>B.removePlaylistVideos(e)}),l=ue(r),[d,c]=t.useState(""),[u,m]=t.useState(null),[p,f]=t.useState(!1),[b,h]=t.useState(()=>{const e=localStorage.getItem("videos_url_history");return e?JSON.parse(e):[]}),N=t.useRef(null),x=t.useRef(null);t.useEffect(()=>{const e=e=>{x.current&&!x.current.contains(e.target)&&N.current&&!N.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),t.useEffect(()=>{const e=()=>{I(window.scrollY>400)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const[v,y]=t.useState(new Set),[g,j]=t.useState(!1),[D,E]=t.useState(!1),[V,w]=t.useState(!1),[k,S]=t.useState("new"),[P,_]=t.useState("available"),[L,M]=t.useState(""),[T,I]=t.useState(!1),R=async(t,r=k)=>{if(t&&t.preventDefault(),d.trim()){j(!0),m(null),y(new Set),S(r),_("available"),M("");try{const t=await s.mutateAsync({url:d,filter:r});if(m(t),(e=>{const t=e.trim();if(!t)return;const r=[t,...b.filter(e=>e!==t)].slice(0,5);h(r),localStorage.setItem("videos_url_history",JSON.stringify(r))})(d),0===t.videos.length)e(t.total_in_playlist>0?`All ${t.total_in_playlist} videos already in your library`:"No videos found in playlist","info");else{const n="all"===r?`Found ${t.total_in_playlist} videos (${t.new_videos_count} new)`:`Found ${t.new_videos_count} new videos (${t.already_in_db} already in DB)`;e(n,"success")}}catch(n){e(re(n.message||"Failed to scan URL"),"error")}finally{j(!1)}}else e("Please enter a playlist URL","error")};return C.jsxDEV("div",{className:"pb-4 space-y-4",children:[C.jsxDEV("form",{onSubmit:R,className:"bg-dark-secondary rounded-lg p-4",children:C.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-3",children:[C.jsxDEV("div",{className:"flex-1 relative",children:[C.jsxDEV("input",{ref:N,type:"text",value:d,onChange:e=>c(e.target.value),onFocus:()=>b.length>0&&f(!0),placeholder:"Paste YouTube video, playlist, or channel URL",className:"w-full bg-dark-tertiary border border-dark-border rounded-lg px-4 py-2 text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-accent",disabled:g},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:224,columnNumber:13},this),p&&b.length>0&&C.jsxDEV("div",{ref:x,className:"absolute top-full left-0 right-0 mt-1 bg-dark-secondary border border-dark-border rounded-lg shadow-xl z-50 overflow-hidden",children:C.jsxDEV("div",{className:"py-1",children:b.map((e,t)=>C.jsxDEV("button",{onClick:()=>{c(e),f(!1)},className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors truncate",title:e,children:e},t,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:242,columnNumber:21},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:240,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:236,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:223,columnNumber:11},this),C.jsxDEV("div",{className:"flex gap-2",children:[C.jsxDEV("button",{type:"button",onClick:e=>R(e,"new"),disabled:g||!d.trim(),className:`px-4 py-2 font-semibold rounded-lg transition-colors ${"new"===k&&u?"bg-accent text-white":"bg-dark-tertiary hover:bg-dark-border text-text-secondary"} disabled:opacity-50 disabled:cursor-not-allowed`,children:g&&"new"===k?C.jsxDEV("span",{className:"flex items-center gap-2",children:[C.jsxDEV("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[C.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:272,columnNumber:21},this),C.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:273,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:271,columnNumber:19},this),"Scanning..."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:270,columnNumber:17},this):"Scan New"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:259,columnNumber:13},this),C.jsxDEV("button",{type:"button",onClick:e=>R(e,"all"),disabled:g||!d.trim(),className:`px-4 py-2 font-semibold rounded-lg transition-colors ${"all"===k&&u?"bg-accent text-white":"bg-dark-tertiary hover:bg-dark-border text-text-secondary"} disabled:opacity-50 disabled:cursor-not-allowed`,children:g&&"all"===k?C.jsxDEV("span",{className:"flex items-center gap-2",children:[C.jsxDEV("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[C.jsxDEV("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:294,columnNumber:21},this),C.jsxDEV("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:295,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:293,columnNumber:19},this),"Scanning..."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:292,columnNumber:17},this):"Scan All"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:281,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:258,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:222,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:221,columnNumber:7},this),u&&C.jsxDEV(ne,{className:"rounded-lg",children:[C.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center justify-center gap-4",children:[C.jsxDEV("div",{className:"flex items-center gap-3 flex-wrap",children:[C.jsxDEV("div",{className:"text-text-secondary",children:0===u.videos.length?C.jsxDEV("span",{children:"No new videos to import"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:314,columnNumber:19},this):C.jsxDEV("span",{children:["Found ",C.jsxDEV("span",{className:"text-text-primary font-semibold",children:u.videos.length},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:317,columnNumber:27},this)," new videos",u.already_in_db>0&&C.jsxDEV("span",{className:"text-text-muted",children:[" (",u.already_in_db," previously seen)"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:319,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:316,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:312,columnNumber:15},this),u.videos.length>0&&C.jsxDEV(ae,{value:L,onChange:M,placeholder:"Search...",className:"w-40 max-w-none"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:325,columnNumber:17},this),C.jsxDEV(se,{show:u.videos.length>0,tab:"videos"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:334,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:311,columnNumber:13},this),u.videos.length>0&&C.jsxDEV("div",{className:"flex items-center gap-4",children:["all"===k&&C.jsxDEV("div",{className:"flex items-center gap-1 bg-dark-tertiary rounded-lg p-1",children:[C.jsxDEV("button",{onClick:()=>_("available"),className:"px-2 py-1 text-xs rounded transition-colors "+("available"===P?"bg-accent text-white":"text-text-secondary hover:text-text-primary"),children:"Available"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:342,columnNumber:21},this),C.jsxDEV("button",{onClick:()=>_("ignored"),className:"px-2 py-1 text-xs rounded transition-colors "+("ignored"===P?"bg-yellow-500 text-black":"text-text-secondary hover:text-text-primary"),children:"Ignored"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:350,columnNumber:21},this),C.jsxDEV("button",{onClick:()=>_("error"),className:"px-2 py-1 text-xs rounded transition-colors "+("error"===P?"bg-red-500 text-white":"text-text-secondary hover:text-text-primary"),children:"Errors"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:358,columnNumber:21},this),C.jsxDEV("button",{onClick:()=>_("all"),className:"px-2 py-1 text-xs rounded transition-colors "+("all"===P?"bg-dark-border text-text-primary":"text-text-secondary hover:text-text-primary"),children:"All"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:366,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:341,columnNumber:19},this),C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("button",{onClick:()=>{if(u?.videos){const e=u.videos.filter(e=>!(L&&!(e.title||"").toLowerCase().includes(L.toLowerCase()))&&("all"!==k||"all"===P||("available"===P?!e.status||"discovered"===e.status:"ignored"===P?"ignored"===e.status:"error"!==P||"removed"===e.status)));y(new Set(e.map(e=>e.yt_id)))}},className:"px-3 py-1.5 text-sm bg-dark-tertiary hover:bg-dark-border text-text-secondary rounded-lg transition-colors",children:"Select All"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:378,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>{y(new Set)},className:"px-3 py-1.5 text-sm bg-dark-tertiary hover:bg-dark-border text-text-secondary rounded-lg transition-colors",children:"Clear"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:384,columnNumber:19},this),C.jsxDEV("span",{className:"text-text-muted text-sm",children:[v.size," selected"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:390,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:377,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:338,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:310,columnNumber:11},this),u.videos.length>0&&v.size>0&&C.jsxDEV("div",{className:"mt-4 pt-4 border-t border-dark-border flex justify-end gap-2",children:[C.jsxDEV("button",{onClick:async()=>{if(u?.videos&&0!==v.size){w(!0);try{const t=u.videos.filter(e=>v.has(e.yt_id));if(await o.mutateAsync({videos:t}),e(`Marked ${t.length} videos as ignored`,"success"),"all"===k){const e=u.videos.map(e=>v.has(e.yt_id)?{...e,status:"ignored"}:e);m({...u,videos:e})}else{const e=u.videos.filter(e=>!v.has(e.yt_id));m({...u,videos:e})}y(new Set)}catch(t){e(re(t.message||"Failed to remove videos"),"error")}finally{w(!1)}}},disabled:V,className:"px-4 py-2 bg-dark-tertiary hover:bg-yellow-500/20 text-text-secondary hover:text-yellow-400 disabled:opacity-50 rounded-lg transition-colors",children:V?"Ignoring...":"Ignore"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:401,columnNumber:15},this),C.jsxDEV("button",{onClick:async()=>{if(0!==v.size){E(!0);try{const t=u.videos.filter(e=>v.has(e.yt_id)),r=await i.mutateAsync({videos:t});if(e(`Queued ${r.queued} videos`,"success"),"all"===k){const e=u.videos.map(e=>v.has(e.yt_id)?{...e,status:"queued"}:e);m({...u,videos:e})}else{const e=u.videos.filter(e=>!v.has(e.yt_id));m({...u,videos:e})}y(new Set)}catch(t){e(re(t.message||"Failed to queue videos"),"error")}finally{E(!1)}}else e("No videos selected","error")},disabled:D,className:"px-4 py-2 bg-accent hover:bg-accent/80 disabled:bg-dark-tertiary disabled:text-text-secondary text-white font-semibold rounded-lg transition-colors",children:D?"Queueing...":`Queue ${v.size} Videos`},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:408,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:400,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:309,columnNumber:9},this),u?.videos&&u.videos.length>0&&(()=>{const e=u.videos.filter(e=>!(L&&!(e.title||"").toLowerCase().includes(L.toLowerCase()))&&("all"!==k||"all"===P||("available"===P?!e.status||"discovered"===e.status:"ignored"===P?"ignored"===e.status:"error"!==P||"removed"===e.status)));return C.jsxDEV("div",{className:"px-6 lg:px-12 xl:px-16",children:C.jsxDEV("div",{className:`grid ${oe(l,e.length)} gap-4 w-full [&>*]:min-w-0`,children:e.map(e=>C.jsxDEV("div",{onClick:()=>(e=>{const t=new Set(v);t.has(e)?t.delete(e):t.add(e),y(t)})(e.yt_id),className:"bg-dark-secondary rounded-lg overflow-hidden cursor-pointer transition-all "+(v.has(e.yt_id)?"ring-2 ring-accent":"hover:bg-dark-tertiary"),children:[C.jsxDEV("div",{className:"relative aspect-video bg-dark-tertiary",children:[e.thumbnail?C.jsxDEV("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover",loading:"lazy"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:451,columnNumber:19},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center text-text-muted",children:C.jsxDEV("svg",{className:"w-12 h-12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[C.jsxDEV("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:460,columnNumber:23},this),C.jsxDEV("path",{d:"M10 8l6 4-6 4V8z",fill:"currentColor"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:461,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:459,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:458,columnNumber:19},this),C.jsxDEV("div",{className:"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-1.5 py-0.5 rounded",children:_e(e.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:467,columnNumber:17},this),e.status&&C.jsxDEV("div",{className:"absolute top-2 right-2 text-xs px-2 py-0.5 rounded font-medium "+("library"===e.status?"bg-green-500/90 text-white":"queued"===e.status?"bg-blue-500/90 text-white":"ignored"===e.status?"bg-yellow-500/90 text-black":"removed"===e.status?"bg-red-500/90 text-white":"bg-gray-500/90 text-white"),children:"library"===e.status?"Downloaded":"queued"===e.status?"Queued":"ignored"===e.status?"Ignored":"removed"===e.status?"Error":e.status},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:473,columnNumber:19},this),v.has(e.yt_id)&&C.jsxDEV("div",{className:"absolute top-2 right-2 bg-black/80 text-white rounded-full p-1.5 shadow-lg z-20",children:C.jsxDEV("svg",{className:"w-4 h-4 text-accent-text",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:492,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:491,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:490,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:449,columnNumber:15},this),C.jsxDEV("div",{className:"p-3",children:[C.jsxDEV("h3",{className:"text-text-primary font-medium text-sm line-clamp-2 mb-1",title:e.title,children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:500,columnNumber:17},this),C.jsxDEV("div",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[C.jsxDEV("span",{children:e.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:504,columnNumber:19},this),e.upload_date&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:507,columnNumber:23},this),C.jsxDEV("span",{children:ke(e.upload_date)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:508,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:506,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:503,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:499,columnNumber:15},this)]},e.yt_id,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:439,columnNumber:13},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:437,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:436,columnNumber:11},this)})(),!u&&!g&&C.jsxDEV("div",{className:"bg-dark-secondary rounded-lg p-8",children:C.jsxDEV(me,{icon:C.jsxDEV("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:524,columnNumber:19},this),title:"Paste a URL to get started",message:"Paste a YouTube video, playlist, or channel URL above. Select which videos to download as singles without subscribing to the full channel."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:523,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:522,columnNumber:9},this),T&&C.jsxDEV("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-20 right-6 p-3 bg-gray-700 hover:bg-gray-600 rounded-full shadow-lg transition-colors z-50 animate-fade-in","aria-label":"Scroll to top",children:C.jsxDEV("svg",{className:"w-5 h-5 text-text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"18 15 12 9 6 15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:539,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:538,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:533,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Videos.jsx",lineNumber:219,columnNumber:5},this)}const Oe="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function $e(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function ze(e){return"nodeType"in e}function Be(e){var t,r;return e?$e(e)?e:ze(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function Qe(e){const{Document:t}=Be(e);return e instanceof t}function qe(e){return!$e(e)&&e instanceof Be(e).HTMLElement}function We(e){return e instanceof Be(e).SVGElement}function Ue(e){return e?$e(e)?e.document:ze(e)?Qe(e)?e:qe(e)||We(e)?e.ownerDocument:document:document:document}const He=Oe?t.useLayoutEffect:t.useEffect;function Je(e){const r=t.useRef(e);return He(()=>{r.current=e}),t.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return null==r.current?void 0:r.current(...t)},[])}function Ye(e,r){void 0===r&&(r=[e]);const n=t.useRef(e);return He(()=>{n.current!==e&&(n.current=e)},r),n}function Ge(e,r){const n=t.useRef();return t.useMemo(()=>{const t=e(n.current);return n.current=t,t},[...r])}function Ke(e){const r=Je(e),n=t.useRef(null),a=t.useCallback(e=>{e!==n.current&&(null==r||r(e,n.current)),n.current=e},[]);return[n,a]}function Xe(e){const r=t.useRef();return t.useEffect(()=>{r.current=e},[e]),r.current}let Ze={};function et(e,r){return t.useMemo(()=>{if(r)return r;const t=null==Ze[e]?0:Ze[e]+1;return Ze[e]=t,e+"-"+t},[e,r])}function tt(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((t,r)=>{const n=Object.entries(r);for(const[a,s]of n){const r=t[a];null!=r&&(t[a]=r+e*s)}return t},{...t})}}const rt=tt(1),nt=tt(-1);function at(e){if(!e)return!1;const{KeyboardEvent:t}=Be(e.target);return t&&e instanceof t}function st(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=Be(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const it=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[it.Translate.toString(e),it.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),ot="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function lt(e){return e.matches(ot)?e:e.querySelector(ot)}const dt={display:"none"};function ct(e){let{id:t,value:r}=e;return s.createElement("div",{id:t,style:dt},r)}function ut(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return s.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}const mt=t.createContext(null);const pt={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ft={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function bt(e){let{announcements:r=ft,container:n,hiddenTextDescribedById:a,screenReaderInstructions:i=pt}=e;const{announce:o,announcement:l}=function(){const[e,r]=t.useState("");return{announce:t.useCallback(e=>{null!=e&&r(e)},[]),announcement:e}}(),d=et("DndLiveRegion"),[c,u]=t.useState(!1);if(t.useEffect(()=>{u(!0)},[]),function(e){const r=t.useContext(mt);t.useEffect(()=>{if(!r)throw new Error("useDndMonitor must be used within a children of <DndContext>");return r(e)},[e,r])}(t.useMemo(()=>({onDragStart(e){let{active:t}=e;o(r.onDragStart({active:t}))},onDragMove(e){let{active:t,over:n}=e;r.onDragMove&&o(r.onDragMove({active:t,over:n}))},onDragOver(e){let{active:t,over:n}=e;o(r.onDragOver({active:t,over:n}))},onDragEnd(e){let{active:t,over:n}=e;o(r.onDragEnd({active:t,over:n}))},onDragCancel(e){let{active:t,over:n}=e;o(r.onDragCancel({active:t,over:n}))}}),[o,r])),!c)return null;const m=s.createElement(s.Fragment,null,s.createElement(ct,{id:a,value:i.draggable}),s.createElement(ut,{id:d,announcement:l}));return n?b.createPortal(m,n):m}var ht,Nt;function xt(){}function vt(e,r){return t.useMemo(()=>({sensor:e,options:null!=r?r:{}}),[e,r])}(Nt=ht||(ht={})).DragStart="dragStart",Nt.DragMove="dragMove",Nt.DragEnd="dragEnd",Nt.DragCancel="dragCancel",Nt.DragOver="dragOver",Nt.RegisterDroppable="registerDroppable",Nt.SetDroppableDisabled="setDroppableDisabled",Nt.UnregisterDroppable="unregisterDroppable";const yt=Object.freeze({x:0,y:0});function gt(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function jt(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function Dt(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function Et(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}const Vt=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=Et(t,t.left,t.top),s=[];for(const i of n){const{id:e}=i,t=r.get(e);if(t){const r=gt(Et(t),a);s.push({id:e,data:{droppableContainer:i,value:r}})}}return s.sort(jt)};function wt(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=a-n,o=s-r;if(n<a&&r<s){const r=t.width*t.height,n=e.width*e.height,a=i*o;return Number((a/(r+n-a)).toFixed(4))}return 0}const kt=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=[];for(const s of n){const{id:e}=s,n=r.get(e);if(n){const r=wt(n,t);r>0&&a.push({id:e,data:{droppableContainer:s,value:r}})}}return a.sort(Dt)};function Ct(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:yt}function St(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x}),{...t})}}const Pt=St(1);const _t={ignoreTransform:!1};function Lt(e,t){void 0===t&&(t=_t);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:n}=Be(e).getComputedStyle(e);t&&(r=function(e,t,r){const n=function(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!n)return e;const{scaleX:a,scaleY:s,x:i,y:o}=n,l=e.left-i-(1-a)*parseFloat(r),d=e.top-o-(1-s)*parseFloat(r.slice(r.indexOf(" ")+1)),c=a?e.width/a:e.width,u=s?e.height/s:e.height;return{width:c,height:u,top:d,right:l+c,bottom:d+u,left:l}}(r,t,n))}const{top:n,left:a,width:s,height:i,bottom:o,right:l}=r;return{top:n,left:a,width:s,height:i,bottom:o,right:l}}function At(e){return Lt(e,{ignoreTransform:!0})}function Mt(e,t){const r=[];return e?function n(a){if(null!=t&&r.length>=t)return r;if(!a)return r;if(Qe(a)&&null!=a.scrollingElement&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!qe(a)||We(a))return r;if(r.includes(a))return r;const s=Be(e).getComputedStyle(a);return a!==e&&function(e,t){void 0===t&&(t=Be(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const n=t[e];return"string"==typeof n&&r.test(n)})}(a,s)&&r.push(a),function(e,t){return void 0===t&&(t=Be(e).getComputedStyle(e)),"fixed"===t.position}(a,s)?r:n(a.parentNode)}(e):r}function Tt(e){const[t]=Mt(e,1);return null!=t?t:null}function It(e){return Oe&&e?$e(e)?e:ze(e)?Qe(e)||e===Ue(e).scrollingElement?window:qe(e)?e:null:null:null}function Rt(e){return $e(e)?e.scrollX:e.scrollLeft}function Ft(e){return $e(e)?e.scrollY:e.scrollTop}function Ot(e){return{x:Rt(e),y:Ft(e)}}var $t,zt;function Bt(e){return!(!Oe||!e)&&e===document.scrollingElement}function Qt(e){const t={x:0,y:0},r=Bt(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}(zt=$t||($t={}))[zt.Forward=1]="Forward",zt[zt.Backward=-1]="Backward";const qt={x:.2,y:.2};function Wt(e,t,r,n,a){let{top:s,left:i,right:o,bottom:l}=r;void 0===n&&(n=10),void 0===a&&(a=qt);const{isTop:d,isBottom:c,isLeft:u,isRight:m}=Qt(e),p={x:0,y:0},f={x:0,y:0},b=t.height*a.y,h=t.width*a.x;return!d&&s<=t.top+b?(p.y=$t.Backward,f.y=n*Math.abs((t.top+b-s)/b)):!c&&l>=t.bottom-b&&(p.y=$t.Forward,f.y=n*Math.abs((t.bottom-b-l)/b)),!m&&o>=t.right-h?(p.x=$t.Forward,f.x=n*Math.abs((t.right-h-o)/h)):!u&&i<=t.left+h&&(p.x=$t.Backward,f.x=n*Math.abs((t.left+h-i)/h)),{direction:p,speed:f}}function Ut(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Ht(e){return e.reduce((e,t)=>rt(e,Ot(t)),yt)}const Jt=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+Rt(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+Ft(t),0)}]];class Yt{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Mt(t),n=Ht(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,s,i]of Jt)for(const e of s)Object.defineProperty(this,e,{get:()=>{const t=i(r),s=n[a]-t;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Gt{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function Kt(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}var Xt,Zt,er,tr;function rr(e){e.preventDefault()}function nr(e){e.stopPropagation()}(Zt=Xt||(Xt={})).Click="click",Zt.DragStart="dragstart",Zt.Keydown="keydown",Zt.ContextMenu="contextmenu",Zt.Resize="resize",Zt.SelectionChange="selectionchange",Zt.VisibilityChange="visibilitychange",(tr=er||(er={})).Space="Space",tr.Down="ArrowDown",tr.Right="ArrowRight",tr.Left="ArrowLeft",tr.Up="ArrowUp",tr.Esc="Escape",tr.Enter="Enter",tr.Tab="Tab";const ar={start:[er.Space,er.Enter],cancel:[er.Esc],end:[er.Space,er.Enter,er.Tab]},sr=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case er.Right:return{...r,x:r.x+25};case er.Left:return{...r,x:r.x-25};case er.Down:return{...r,y:r.y+25};case er.Up:return{...r,y:r.y-25}}};class ir{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Gt(Ue(t)),this.windowListeners=new Gt(Be(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xt.Resize,this.handleCancel),this.windowListeners.add(Xt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&function(e,t){if(void 0===t&&(t=Lt),!e)return;const{top:r,left:n,bottom:a,right:s}=t(e);Tt(e)&&(a<=0||s<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(r),t(yt)}handleKeyDown(e){if(at(e)){const{active:t,context:r,options:n}=this.props,{keyboardCodes:a=ar,coordinateGetter:s=sr,scrollBehavior:i="smooth"}=n,{code:o}=e;if(a.end.includes(o))return void this.handleEnd(e);if(a.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:l}=r.current,d=l?{x:l.left,y:l.top}:yt;this.referenceCoordinates||(this.referenceCoordinates=d);const c=s(e,{active:t,context:r.current,currentCoordinates:d});if(c){const t=nt(c,d),n={x:0,y:0},{scrollableAncestors:a}=r.current;for(const r of a){const a=e.code,{isTop:s,isRight:o,isLeft:l,isBottom:d,maxScroll:u,minScroll:m}=Qt(r),p=Ut(r),f={x:Math.min(a===er.Right?p.right-p.width/2:p.right,Math.max(a===er.Right?p.left:p.left+p.width/2,c.x)),y:Math.min(a===er.Down?p.bottom-p.height/2:p.bottom,Math.max(a===er.Down?p.top:p.top+p.height/2,c.y))},b=a===er.Right&&!o||a===er.Left&&!l,h=a===er.Down&&!d||a===er.Up&&!s;if(b&&f.x!==c.x){const e=r.scrollLeft+t.x,s=a===er.Right&&e<=u.x||a===er.Left&&e>=m.x;if(s&&!t.y)return void r.scrollTo({left:e,behavior:i});n.x=s?r.scrollLeft-e:a===er.Right?r.scrollLeft-u.x:r.scrollLeft-m.x,n.x&&r.scrollBy({left:-n.x,behavior:i});break}if(h&&f.y!==c.y){const e=r.scrollTop+t.y,s=a===er.Down&&e<=u.y||a===er.Up&&e>=m.y;if(s&&!t.x)return void r.scrollTo({top:e,behavior:i});n.y=s?r.scrollTop-e:a===er.Down?r.scrollTop-u.y:r.scrollTop-m.y,n.y&&r.scrollBy({top:-n.y,behavior:i});break}}this.handleMove(e,rt(nt(c,this.referenceCoordinates),n))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function or(e){return Boolean(e&&"distance"in e)}function lr(e){return Boolean(e&&"delay"in e)}ir.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=ar,onActivation:a}=t,{active:s}=r;const{code:i}=e.nativeEvent;if(n.start.includes(i)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class dr{constructor(e,t,r){var n;void 0===r&&(r=function(e){const{EventTarget:t}=Be(e);return e instanceof t?e:Ue(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:s}=a;this.props=e,this.events=t,this.document=Ue(s),this.documentListeners=new Gt(this.document),this.listeners=new Gt(r),this.windowListeners=new Gt(Be(s)),this.initialCoordinates=null!=(n=st(a))?n:yt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Xt.Resize,this.handleCancel),this.windowListeners.add(Xt.DragStart,rr),this.windowListeners.add(Xt.VisibilityChange,this.handleCancel),this.windowListeners.add(Xt.ContextMenu,rr),this.documentListeners.add(Xt.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(lr(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(or(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Xt.Click,nr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xt.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:n,props:a}=this,{onMove:s,options:{activationConstraint:i}}=a;if(!n)return;const o=null!=(t=st(e))?t:yt,l=nt(n,o);if(!r&&i){if(or(i)){if(null!=i.tolerance&&Kt(l,i.tolerance))return this.handleCancel();if(Kt(l,i.distance))return this.handleStart()}return lr(i)&&Kt(l,i.tolerance)?this.handleCancel():void this.handlePending(i,l)}e.cancelable&&e.preventDefault(),s(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===er.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const cr={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ur extends dr{constructor(e){const{event:t}=e,r=Ue(t.target);super(e,cr,r)}}ur.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!(!r.isPrimary||0!==r.button)&&(null==n||n({event:r}),!0)}}];const mr={move:{name:"mousemove"},end:{name:"mouseup"}};var pr,fr;(fr=pr||(pr={}))[fr.RightClick=2]="RightClick";(class extends dr{constructor(e){super(e,mr,Ue(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button!==pr.RightClick&&(null==n||n({event:r}),!0)}}];const br={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class hr extends dr{constructor(e){super(e,br)}static setup(){return window.addEventListener(br.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(br.move.name,e)};function e(){}}}var Nr,xr,vr,yr;function gr(e){let{acceleration:r,activator:n=Nr.Pointer,canScroll:a,draggingRect:s,enabled:i,interval:o=5,order:l=vr.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:u,delta:m,threshold:p}=e;const f=function(e){let{delta:t,disabled:r}=e;const n=Xe(t);return Ge(e=>{if(r||!n||!e)return jr;const a={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[$t.Backward]:e.x[$t.Backward]||-1===a.x,[$t.Forward]:e.x[$t.Forward]||1===a.x},y:{[$t.Backward]:e.y[$t.Backward]||-1===a.y,[$t.Forward]:e.y[$t.Forward]||1===a.y}}},[r,t,n])}({delta:m,disabled:!i}),[b,h]=function(){const e=t.useRef(null);return[t.useCallback((t,r)=>{e.current=setInterval(t,r)},[]),t.useCallback(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),N=t.useRef({x:0,y:0}),x=t.useRef({x:0,y:0}),v=t.useMemo(()=>{switch(n){case Nr.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Nr.DraggableRect:return s}},[n,s,d]),y=t.useRef(null),g=t.useCallback(()=>{const e=y.current;if(!e)return;const t=N.current.x*x.current.x,r=N.current.y*x.current.y;e.scrollBy(t,r)},[]),j=t.useMemo(()=>l===vr.TreeOrder?[...c].reverse():c,[l,c]);t.useEffect(()=>{if(i&&c.length&&v){for(const e of j){if(!1===(null==a?void 0:a(e)))continue;const t=c.indexOf(e),n=u[t];if(!n)continue;const{direction:s,speed:i}=Wt(e,n,v,r,p);for(const e of["x","y"])f[e][s[e]]||(i[e]=0,s[e]=0);if(i.x>0||i.y>0)return h(),y.current=e,b(g,o),N.current=i,void(x.current=s)}N.current={x:0,y:0},x.current={x:0,y:0},h()}else h()},[r,g,a,h,i,o,JSON.stringify(v),JSON.stringify(f),b,c,j,u,JSON.stringify(p)])}hr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:a}=r;return!(a.length>1)&&(null==n||n({event:r}),!0)}}],(xr=Nr||(Nr={}))[xr.Pointer=0]="Pointer",xr[xr.DraggableRect=1]="DraggableRect",(yr=vr||(vr={}))[yr.TreeOrder=0]="TreeOrder",yr[yr.ReversedTreeOrder=1]="ReversedTreeOrder";const jr={x:{[$t.Backward]:!1,[$t.Forward]:!1},y:{[$t.Backward]:!1,[$t.Forward]:!1}};var Dr,Er,Vr;(Er=Dr||(Dr={}))[Er.Always=0]="Always",Er[Er.BeforeDragging=1]="BeforeDragging",Er[Er.WhileDragging=2]="WhileDragging",(Vr||(Vr={})).Optimized="optimized";const wr=new Map;function kr(e,t){return Ge(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function Cr(e){let{callback:r,disabled:n}=e;const a=Je(r),s=t.useMemo(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(a)},[n]);return t.useEffect(()=>()=>null==s?void 0:s.disconnect(),[s]),s}function Sr(e){return new Yt(Lt(e),e)}function Pr(e,r,n){void 0===r&&(r=Sr);const[a,s]=t.useState(null);function i(){s(t=>{if(!e)return null;var a;if(!1===e.isConnected)return null!=(a=null!=t?t:n)?a:null;const s=r(e);return JSON.stringify(t)===JSON.stringify(s)?t:s})}const o=function(e){let{callback:r,disabled:n}=e;const a=Je(r),s=t.useMemo(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(a)},[a,n]);return t.useEffect(()=>()=>null==s?void 0:s.disconnect(),[s]),s}({callback(t){if(e)for(const r of t){const{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){i();break}}}}),l=Cr({callback:i});return He(()=>{i(),e?(null==l||l.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==o||o.disconnect())},[e]),a}const _r=[];function Lr(e,r){void 0===r&&(r=[]);const n=t.useRef(null);return t.useEffect(()=>{n.current=null},r),t.useEffect(()=>{const t=e!==yt;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?nt(e,n.current):yt}function Ar(e){return t.useMemo(()=>e?function(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null,[e])}const Mr=[];function Tr(e){let{measure:r}=e;const[n,a]=t.useState(null),s=Cr({callback:t.useCallback(e=>{for(const{target:t}of e)if(qe(t)){a(e=>{const n=r(t);return e?{...e,width:n.width,height:n.height}:n});break}},[r])}),i=t.useCallback(e=>{const t=function(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return qe(t)?t:e}(e);null==s||s.disconnect(),t&&(null==s||s.observe(t)),a(t?r(t):null)},[r,s]),[o,l]=Ke(i);return t.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const Ir=[{sensor:ur,options:{}},{sensor:ir,options:{}}],Rr={current:{}},Fr={draggable:{measure:At},droppable:{measure:At,strategy:Dr.WhileDragging,frequency:Vr.Optimized},dragOverlay:{measure:Lt}};class Or extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}const $r={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Or,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:xt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Fr,measureDroppableContainers:xt,windowRect:null,measuringScheduled:!1},zr={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:xt,draggableNodes:new Map,over:null,measureDroppableContainers:xt},Br=t.createContext(zr),Qr=t.createContext($r);function qr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Or}}}function Wr(e,t){switch(t.type){case ht.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ht.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ht.DragEnd:case ht.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ht.RegisterDroppable:{const{element:r}=t,{id:n}=r,a=new Or(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case ht.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=t,s=e.droppable.containers.get(r);if(!s||n!==s.key)return e;const i=new Or(e.droppable.containers);return i.set(r,{...s,disabled:a}),{...e,droppable:{...e.droppable,containers:i}}}case ht.UnregisterDroppable:{const{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const s=new Or(e.droppable.containers);return s.delete(r),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Ur(e){let{disabled:r}=e;const{active:n,activatorEvent:a,draggableNodes:s}=t.useContext(Br),i=Xe(a),o=Xe(null==n?void 0:n.id);return t.useEffect(()=>{if(!r&&!a&&i&&null!=o){if(!at(i))return;if(document.activeElement===i.target)return;const e=s.get(o);if(!e)return;const{activatorNode:t,node:r}=e;if(!t.current&&!r.current)return;requestAnimationFrame(()=>{for(const e of[t.current,r.current]){if(!e)continue;const t=lt(e);if(t){t.focus();break}}})}},[a,r,s,o,i]),null}const Hr=t.createContext({...yt,scaleX:1,scaleY:1});var Jr,Yr;(Yr=Jr||(Jr={}))[Yr.Uninitialized=0]="Uninitialized",Yr[Yr.Initializing=1]="Initializing",Yr[Yr.Initialized=2]="Initialized";const Gr=t.memo(function(e){var r,n,a,i;let{id:o,accessibility:l,autoScroll:d=!0,children:c,sensors:u=Ir,collisionDetection:m=kt,measuring:p,modifiers:f,...h}=e;const N=t.useReducer(Wr,void 0,qr),[x,v]=N,[y,g]=function(){const[e]=t.useState(()=>new Set),r=t.useCallback(t=>(e.add(t),()=>e.delete(t)),[e]);return[t.useCallback(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),r]}(),[j,D]=t.useState(Jr.Uninitialized),E=j===Jr.Initialized,{draggable:{active:V,nodes:w,translate:k},droppable:{containers:C}}=x,S=null!=V?w.get(V):null,P=t.useRef({initial:null,translated:null}),_=t.useMemo(()=>{var e;return null!=V?{id:V,data:null!=(e=null==S?void 0:S.data)?e:Rr,rect:P}:null},[V,S]),L=t.useRef(null),[A,M]=t.useState(null),[T,I]=t.useState(null),R=Ye(h,Object.values(h)),F=et("DndDescribedBy",o),O=t.useMemo(()=>C.getEnabled(),[C]),$=(z=p,t.useMemo(()=>({draggable:{...Fr.draggable,...null==z?void 0:z.draggable},droppable:{...Fr.droppable,...null==z?void 0:z.droppable},dragOverlay:{...Fr.dragOverlay,...null==z?void 0:z.dragOverlay}}),[null==z?void 0:z.draggable,null==z?void 0:z.droppable,null==z?void 0:z.dragOverlay]));var z;const{droppableRects:B,measureDroppableContainers:Q,measuringScheduled:q}=function(e,r){let{dragging:n,dependencies:a,config:s}=r;const[i,o]=t.useState(null),{frequency:l,measure:d,strategy:c}=s,u=t.useRef(e),m=function(){switch(c){case Dr.Always:return!1;case Dr.BeforeDragging:return n;default:return!n}}(),p=Ye(m),f=t.useCallback(function(e){void 0===e&&(e=[]),p.current||o(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[p]),b=t.useRef(null),h=Ge(t=>{if(m&&!n)return wr;if(!t||t===wr||u.current!==e||null!=i){const t=new Map;for(let r of e){if(!r)continue;if(i&&i.length>0&&!i.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}const e=r.node.current,n=e?new Yt(d(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,i,n,m,d]);return t.useEffect(()=>{u.current=e},[e]),t.useEffect(()=>{m||f()},[n,m]),t.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),t.useEffect(()=>{m||"number"!=typeof l||null!==b.current||(b.current=setTimeout(()=>{f(),b.current=null},l))},[l,m,f,...a]),{droppableRects:h,measureDroppableContainers:f,measuringScheduled:null!=i}}(O,{dragging:E,dependencies:[k.x,k.y],config:$.droppable}),W=function(e,t){const r=null!=t?e.get(t):void 0,n=r?r.node.current:null;return Ge(e=>{var r;return null==t?null:null!=(r=null!=n?n:e)?r:null},[n,t])}(w,V),U=t.useMemo(()=>T?st(T):null,[T]),H=function(){const e=!1===(null==A?void 0:A.autoScrollEnabled),t="object"==typeof d?!1===d.enabled:!1===d,r=E&&!e&&!t;if("object"==typeof d)return{...d,enabled:r};return{enabled:r}}(),J=function(e,t){return kr(e,t)}(W,$.draggable.measure);!function(e){let{activeNode:r,measure:n,initialRect:a,config:s=!0}=e;const i=t.useRef(!1),{x:o,y:l}="boolean"==typeof s?{x:s,y:s}:s;He(()=>{if(!o&&!l||!r)return void(i.current=!1);if(i.current||!a)return;const e=null==r?void 0:r.node.current;if(!e||!1===e.isConnected)return;const t=Ct(n(e),a);if(o||(t.x=0),l||(t.y=0),i.current=!0,Math.abs(t.x)>0||Math.abs(t.y)>0){const r=Tt(e);r&&r.scrollBy({top:t.y,left:t.x})}},[r,o,l,a,n])}({activeNode:null!=V?w.get(V):null,config:H.layoutShiftCompensation,initialRect:J,measure:$.draggable.measure});const Y=Pr(W,$.draggable.measure,J),G=Pr(W?W.parentElement:null),K=t.useRef({activatorEvent:null,active:null,activeNode:W,collisionRect:null,collisions:null,droppableRects:B,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:C,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),X=C.getNodeFor(null==(r=K.current.over)?void 0:r.id),Z=Tr({measure:$.dragOverlay.measure}),ee=null!=(n=Z.nodeRef.current)?n:W,te=E?null!=(a=Z.rect)?a:Y:null,re=Boolean(Z.nodeRef.current&&Z.rect),ne=Ct(ae=re?null:Y,kr(ae));var ae;const se=Ar(ee?Be(ee):null),ie=function(e){const r=t.useRef(e),n=Ge(t=>e?t&&t!==_r&&e&&r.current&&e.parentNode===r.current.parentNode?t:Mt(e):_r,[e]);return t.useEffect(()=>{r.current=e},[e]),n}(E?null!=X?X:W:null),oe=function(e,r){void 0===r&&(r=Lt);const[n]=e,a=Ar(n?Be(n):null),[s,i]=t.useState(Mr);function o(){i(()=>e.length?e.map(e=>Bt(e)?a:new Yt(r(e),e)):Mr)}const l=Cr({callback:o});return He(()=>{null==l||l.disconnect(),o(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),s}(ie),le=function(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}(f,{transform:{x:k.x-ne.x,y:k.y-ne.y,scaleX:1,scaleY:1},activatorEvent:T,active:_,activeNodeRect:Y,containerNodeRect:G,draggingNodeRect:te,over:K.current.over,overlayNodeRect:Z.rect,scrollableAncestors:ie,scrollableAncestorRects:oe,windowRect:se}),de=U?rt(U,k):null,ce=function(e){const[r,n]=t.useState(null),a=t.useRef(e),s=t.useCallback(e=>{const t=It(e.target);t&&n(e=>e?(e.set(t,Ot(t)),new Map(e)):null)},[]);return t.useEffect(()=>{const t=a.current;if(e!==t){r(t);const i=e.map(e=>{const t=It(e);return t?(t.addEventListener("scroll",s,{passive:!0}),[t,Ot(t)]):null}).filter(e=>null!=e);n(i.length?new Map(i):null),a.current=e}return()=>{r(e),r(t)};function r(e){e.forEach(e=>{const t=It(e);null==t||t.removeEventListener("scroll",s)})}},[s,e]),t.useMemo(()=>e.length?r?Array.from(r.values()).reduce((e,t)=>rt(e,t),yt):Ht(e):yt,[e,r])}(ie),ue=Lr(ce),me=Lr(ce,[Y]),pe=rt(le,ue),fe=te?Pt(te,le):null,be=_&&fe?m({active:_,collisionRect:fe,droppableRects:B,droppableContainers:O,pointerCoordinates:de}):null,he=function(e,t){if(!e||0===e.length)return null;const[r]=e;return r[t]}(be,"id"),[Ne,xe]=t.useState(null),ve=function(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}(re?le:rt(le,me),null!=(i=null==Ne?void 0:Ne.rect)?i:null,Y),ye=t.useRef(null),ge=t.useCallback((e,t)=>{let{sensor:r,options:n}=t;if(null==L.current)return;const a=w.get(L.current);if(!a)return;const s=e.nativeEvent,i=new r({active:L.current,activeNode:a,event:s,options:n,context:K,onAbort(e){if(!w.get(e))return;const{onDragAbort:t}=R.current,r={id:e};null==t||t(r),y({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!w.get(e))return;const{onDragPending:a}=R.current,s={id:e,constraint:t,initialCoordinates:r,offset:n};null==a||a(s),y({type:"onDragPending",event:s})},onStart(e){const t=L.current;if(null==t)return;const r=w.get(t);if(!r)return;const{onDragStart:n}=R.current,a={activatorEvent:s,active:{id:t,data:r.data,rect:P}};b.unstable_batchedUpdates(()=>{null==n||n(a),D(Jr.Initializing),v({type:ht.DragStart,initialCoordinates:e,active:t}),y({type:"onDragStart",event:a}),M(ye.current),I(s)})},onMove(e){v({type:ht.DragMove,coordinates:e})},onEnd:o(ht.DragEnd),onCancel:o(ht.DragCancel)});function o(e){return async function(){const{active:t,collisions:r,over:n,scrollAdjustedTranslate:a}=K.current;let i=null;if(t&&a){const{cancelDrop:o}=R.current;if(i={activatorEvent:s,active:t,collisions:r,delta:a,over:n},e===ht.DragEnd&&"function"==typeof o){await Promise.resolve(o(i))&&(e=ht.DragCancel)}}L.current=null,b.unstable_batchedUpdates(()=>{v({type:e}),D(Jr.Uninitialized),xe(null),M(null),I(null),ye.current=null;const t=e===ht.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=R.current[t];null==e||e(i),y({type:t,event:i})}})}}ye.current=i},[w]),je=function(e,r){return t.useMemo(()=>e.reduce((e,t)=>{const{sensor:n}=t;return[...e,...n.activators.map(e=>({eventName:e.eventName,handler:r(e.handler,t)}))]},[]),[e,r])}(u,t.useCallback((e,t)=>(r,n)=>{const a=r.nativeEvent,s=w.get(n);if(null!==L.current||!s||a.dndKit||a.defaultPrevented)return;const i={active:s};!0===e(r,t.options,i)&&(a.dndKit={capturedBy:t.sensor},L.current=n,ge(r,t))},[w,ge]));!function(e){t.useEffect(()=>{if(!Oe)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(u),He(()=>{Y&&j===Jr.Initializing&&D(Jr.Initialized)},[Y,j]),t.useEffect(()=>{const{onDragMove:e}=R.current,{active:t,activatorEvent:r,collisions:n,over:a}=K.current;if(!t||!r)return;const s={active:t,activatorEvent:r,collisions:n,delta:{x:pe.x,y:pe.y},over:a};b.unstable_batchedUpdates(()=>{null==e||e(s),y({type:"onDragMove",event:s})})},[pe.x,pe.y]),t.useEffect(()=>{const{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:a}=K.current;if(!e||null==L.current||!t||!a)return;const{onDragOver:s}=R.current,i=n.get(he),o=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,l={active:e,activatorEvent:t,collisions:r,delta:{x:a.x,y:a.y},over:o};b.unstable_batchedUpdates(()=>{xe(o),null==s||s(l),y({type:"onDragOver",event:l})})},[he]),He(()=>{K.current={activatorEvent:T,active:_,activeNode:W,collisionRect:fe,collisions:be,droppableRects:B,draggableNodes:w,draggingNode:ee,draggingNodeRect:te,droppableContainers:C,over:Ne,scrollableAncestors:ie,scrollAdjustedTranslate:pe},P.current={initial:te,translated:fe}},[_,W,be,fe,w,ee,te,B,C,Ne,ie,pe]),gr({...H,delta:k,draggingRect:fe,pointerCoordinates:de,scrollableAncestors:ie,scrollableAncestorRects:oe});const De=t.useMemo(()=>({active:_,activeNode:W,activeNodeRect:Y,activatorEvent:T,collisions:be,containerNodeRect:G,dragOverlay:Z,draggableNodes:w,droppableContainers:C,droppableRects:B,over:Ne,measureDroppableContainers:Q,scrollableAncestors:ie,scrollableAncestorRects:oe,measuringConfiguration:$,measuringScheduled:q,windowRect:se}),[_,W,Y,T,be,G,Z,w,C,B,Ne,Q,ie,oe,$,q,se]),Ee=t.useMemo(()=>({activatorEvent:T,activators:je,active:_,activeNodeRect:Y,ariaDescribedById:{draggable:F},dispatch:v,draggableNodes:w,over:Ne,measureDroppableContainers:Q}),[T,je,_,Y,v,F,w,Ne,Q]);return s.createElement(mt.Provider,{value:g},s.createElement(Br.Provider,{value:Ee},s.createElement(Qr.Provider,{value:De},s.createElement(Hr.Provider,{value:ve},c)),s.createElement(Ur,{disabled:!1===(null==l?void 0:l.restoreFocus)})),s.createElement(bt,{...l,hiddenTextDescribedById:F}))}),Kr=t.createContext(null),Xr="button";function Zr(e){let{id:r,data:n,disabled:a=!1,attributes:s}=e;const i=et("Draggable"),{activators:o,activatorEvent:l,active:d,activeNodeRect:c,ariaDescribedById:u,draggableNodes:m,over:p}=t.useContext(Br),{role:f=Xr,roleDescription:b="draggable",tabIndex:h=0}=null!=s?s:{},N=(null==d?void 0:d.id)===r,x=t.useContext(N?Hr:Kr),[v,y]=Ke(),[g,j]=Ke(),D=function(e,r){return t.useMemo(()=>e.reduce((e,t)=>{let{eventName:n,handler:a}=t;return e[n]=e=>{a(e,r)},e},{}),[e,r])}(o,r),E=Ye(n);He(()=>(m.set(r,{id:r,key:i,node:v,activatorNode:g,data:E}),()=>{const e=m.get(r);e&&e.key===i&&m.delete(r)}),[m,r]);return{active:d,activatorEvent:l,activeNodeRect:c,attributes:t.useMemo(()=>({role:f,tabIndex:h,"aria-disabled":a,"aria-pressed":!(!N||f!==Xr)||void 0,"aria-roledescription":b,"aria-describedby":u.draggable}),[a,f,h,N,b,u.draggable]),isDragging:N,listeners:a?void 0:D,node:v,over:p,setNodeRef:y,setActivatorNodeRef:j,transform:x}}const en={timeout:25};function tn(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function rn(e,t){return e.reduce((e,r,n)=>{const a=t.get(r);return a&&(e[n]=a),e},Array(e.length))}function nn(e){return null!==e&&e>=0}const an=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e;const s=tn(t,n,r),i=t[a],o=s[a];return o&&i?{x:o.left-i.left,y:o.top-i.top,scaleX:o.width/i.width,scaleY:o.height/i.height}:null},sn={scaleX:1,scaleY:1},on=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:a,rects:s,overIndex:i}=e;const o=null!=(t=s[r])?t:n;if(!o)return null;if(a===r){const e=s[i];return e?{x:0,y:r<i?e.top+e.height-(o.top+o.height):e.top-o.top,...sn}:null}const l=function(e,t,r){const n=e[t],a=e[t-1],s=e[t+1];if(!n)return 0;if(r<t)return a?n.top-(a.top+a.height):s?s.top-(n.top+n.height):0;return s?s.top-(n.top+n.height):a?n.top-(a.top+a.height):0}(s,a,r);return a>r&&a<=i?{x:0,y:-o.height-l,...sn}:a<r&&a>=i?{x:0,y:o.height+l,...sn}:{x:0,y:0,...sn}};const ln="Sortable",dn=s.createContext({activeIndex:-1,containerId:ln,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:an,disabled:{draggable:!1,droppable:!1}});function cn(e){let{children:r,id:n,items:a,strategy:i=an,disabled:o=!1}=e;const{active:l,dragOverlay:d,droppableRects:c,over:u,measureDroppableContainers:m}=t.useContext(Qr),p=et(ln,n),f=Boolean(null!==d.rect),b=t.useMemo(()=>a.map(e=>"object"==typeof e&&"id"in e?e.id:e),[a]),h=null!=l,N=l?b.indexOf(l.id):-1,x=u?b.indexOf(u.id):-1,v=t.useRef(b),y=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(b,v.current),g=-1!==x&&-1===N||y,j=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(o);He(()=>{y&&h&&m(b)},[y,b,h,m]),t.useEffect(()=>{v.current=b},[b]);const D=t.useMemo(()=>({activeIndex:N,containerId:p,disabled:j,disableTransforms:g,items:b,overIndex:x,useDragOverlay:f,sortedRects:rn(b,c),strategy:i}),[N,p,j.draggable,j.droppable,g,b,x,c,f,i]);return s.createElement(dn.Provider,{value:D},r)}const un=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return tn(r,n,a).indexOf(t)},mn=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:s,newIndex:i,previousItems:o,previousContainerId:l,transition:d}=e;return!(!d||!n)&&((o===s||a!==i)&&(!!r||i!==a&&t===l))},pn={duration:200,easing:"ease"},fn="transform",bn=it.Transition.toString({property:fn,duration:0,easing:"linear"}),hn={roleDescription:"sortable"};function Nn(e){let{animateLayoutChanges:r=mn,attributes:n,disabled:a,data:s,getNewIndex:i=un,id:o,strategy:l,resizeObserverConfig:d,transition:c=pn}=e;const{items:u,containerId:m,activeIndex:p,disabled:f,disableTransforms:b,sortedRects:h,overIndex:N,useDragOverlay:x,strategy:v}=t.useContext(dn),y=function(e,t){var r,n;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(r=null==e?void 0:e.draggable)?r:t.draggable,droppable:null!=(n=null==e?void 0:e.droppable)?n:t.droppable}}(a,f),g=u.indexOf(o),j=t.useMemo(()=>({sortable:{containerId:m,index:g,items:u},...s}),[m,s,g,u]),D=t.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:E,node:V,isOver:w,setNodeRef:k}=function(e){let{data:r,disabled:n=!1,id:a,resizeObserverConfig:s}=e;const i=et("Droppable"),{active:o,dispatch:l,over:d,measureDroppableContainers:c}=t.useContext(Br),u=t.useRef({disabled:n}),m=t.useRef(!1),p=t.useRef(null),f=t.useRef(null),{disabled:b,updateMeasurementsFor:h,timeout:N}={...en,...s},x=Ye(null!=h?h:a),v=Cr({callback:t.useCallback(()=>{m.current?(null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),f.current=null},N)):m.current=!0},[N]),disabled:b||!o}),y=t.useCallback((e,t)=>{v&&(t&&(v.unobserve(t),m.current=!1),e&&v.observe(e))},[v]),[g,j]=Ke(y),D=Ye(r);return t.useEffect(()=>{v&&g.current&&(v.disconnect(),m.current=!1,v.observe(g.current))},[g,v]),t.useEffect(()=>(l({type:ht.RegisterDroppable,element:{id:a,key:i,disabled:n,node:g,rect:p,data:D}}),()=>l({type:ht.UnregisterDroppable,key:i,id:a})),[a]),t.useEffect(()=>{n!==u.current.disabled&&(l({type:ht.SetDroppableDisabled,id:a,key:i,disabled:n}),u.current.disabled=n)},[a,i,n,l]),{active:o,rect:p,isOver:(null==d?void 0:d.id)===a,node:g,over:d,setNodeRef:j}}({id:o,data:j,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...d}}),{active:C,activatorEvent:S,activeNodeRect:P,attributes:_,setNodeRef:L,listeners:A,isDragging:M,over:T,setActivatorNodeRef:I,transform:R}=Zr({id:o,data:j,attributes:{...hn,...n},disabled:y.draggable}),F=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.useMemo(()=>e=>{r.forEach(t=>t(e))},r)}(k,L),O=Boolean(C),$=O&&!b&&nn(p)&&nn(N),z=!x&&M,B=z&&$?R:null,Q=$?null!=B?B:(null!=l?l:v)({rects:h,activeNodeRect:P,activeIndex:p,overIndex:N,index:g}):null,q=nn(p)&&nn(N)?i({id:o,items:u,activeIndex:p,overIndex:N}):g,W=null==C?void 0:C.id,U=t.useRef({activeId:W,items:u,newIndex:q,containerId:m}),H=u!==U.current.items,J=r({active:C,containerId:m,isDragging:M,isSorting:O,id:o,index:g,items:u,newIndex:U.current.newIndex,previousItems:U.current.items,previousContainerId:U.current.containerId,transition:c,wasDragging:null!=U.current.activeId}),Y=function(e){let{disabled:r,index:n,node:a,rect:s}=e;const[i,o]=t.useState(null),l=t.useRef(n);return He(()=>{if(!r&&n!==l.current&&a.current){const e=s.current;if(e){const t=Lt(a.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&o(r)}}n!==l.current&&(l.current=n)},[r,n,a,s]),t.useEffect(()=>{i&&o(null)},[i]),i}({disabled:!J,index:g,node:V,rect:E});return t.useEffect(()=>{O&&U.current.newIndex!==q&&(U.current.newIndex=q),m!==U.current.containerId&&(U.current.containerId=m),u!==U.current.items&&(U.current.items=u)},[O,q,m,u]),t.useEffect(()=>{if(W===U.current.activeId)return;if(null!=W&&null==U.current.activeId)return void(U.current.activeId=W);const e=setTimeout(()=>{U.current.activeId=W},50);return()=>clearTimeout(e)},[W]),{active:C,activeIndex:p,attributes:_,data:j,rect:E,index:g,newIndex:q,items:u,isOver:w,isSorting:O,isDragging:M,listeners:A,node:V,overIndex:N,over:T,setNodeRef:F,setActivatorNodeRef:I,setDroppableNodeRef:k,setDraggableNodeRef:L,transform:null!=Y?Y:Q,transition:function(){if(Y||H&&U.current.newIndex===g)return bn;if(z&&!at(S)||!c)return;if(O||J)return it.Transition.toString({...c,property:fn});return}()}}function xn({item:e,index:t,onRemove:r,onMoveToTop:n,onMoveToBottom:a}){const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:d,isDragging:c}=Nn({id:e.id}),u={transform:it.Transform.toString(l),transition:d,opacity:c?.5:1};return C.jsxDEV("div",{ref:o,style:u,onClick:()=>r(e.id),className:"card p-3 cursor-pointer hover:bg-dark-hover transition-colors group "+(t%2==0?"bg-dark-secondary":"bg-dark-tertiary"),children:C.jsxDEV("div",{className:"flex items-stretch gap-3",children:[C.jsxDEV("div",{...s,...i,onClick:e=>e.stopPropagation(),className:"flex items-center flex-shrink-0 cursor-grab active:cursor-grabbing text-text-secondary hover:text-text-primary transition-colors px-2 md:px-1 touch-none",style:{touchAction:"none"},children:C.jsxDEV("svg",{className:"w-8 h-8 md:w-7 md:h-7",viewBox:"0 0 24 24",fill:"currentColor",children:[C.jsxDEV("circle",{cx:"9",cy:"5",r:"1.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:49,columnNumber:13},this),C.jsxDEV("circle",{cx:"9",cy:"12",r:"1.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:50,columnNumber:13},this),C.jsxDEV("circle",{cx:"9",cy:"19",r:"1.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:51,columnNumber:13},this),C.jsxDEV("circle",{cx:"15",cy:"5",r:"1.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:52,columnNumber:13},this),C.jsxDEV("circle",{cx:"15",cy:"12",r:"1.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:53,columnNumber:13},this),C.jsxDEV("circle",{cx:"15",cy:"19",r:"1.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:54,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:48,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:41,columnNumber:9},this),C.jsxDEV("div",{className:"flex items-center flex-shrink-0 w-8 text-center text-sm font-semibold text-text-secondary",children:t+1},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:59,columnNumber:9},this),C.jsxDEV("div",{className:"hidden md:block flex-shrink-0 w-[100px] h-[56px] bg-dark-tertiary rounded overflow-hidden",children:e.video?.thumb_url?C.jsxDEV("img",{src:e.video.thumb_url,alt:e.video.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:66,columnNumber:13},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-8 h-8 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:74,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:73,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:72,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:64,columnNumber:9},this),C.jsxDEV("div",{className:"flex-1 min-w-0 flex items-center justify-between gap-3",children:[C.jsxDEV("p",{className:"text-sm text-text-primary font-medium line-clamp-2 md:truncate",title:e.video?.title,children:[e.video?.title," ",C.jsxDEV("span",{className:"text-text-secondary",children:["• ",e.video?.channel_title]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:83,columnNumber:33},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:82,columnNumber:11},this),C.jsxDEV("div",{className:"flex flex-shrink-0 gap-1 -my-3",children:[C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),t.currentTarget.blur(),n(e.id)},className:"flex items-center justify-center px-2 text-text-secondary hover:text-text-primary hover:bg-dark-tertiary transition-colors",title:"Move to top",children:C.jsxDEV("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"17 11 12 6 7 11"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:99,columnNumber:17},this),C.jsxDEV("polyline",{points:"17 18 12 13 7 18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:100,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:98,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:89,columnNumber:13},this),C.jsxDEV("button",{onClick:t=>{t.stopPropagation(),t.currentTarget.blur(),a(e.id)},className:"flex items-center justify-center px-2 text-text-secondary hover:text-text-primary hover:bg-dark-tertiary transition-colors",title:"Move to bottom",children:C.jsxDEV("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"17 13 12 18 7 13"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:115,columnNumber:17},this),C.jsxDEV("polyline",{points:"17 6 12 11 7 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:116,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:114,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:105,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:87,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:81,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:39,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:33,columnNumber:5},this)}function vn(){const{data:e,isLoading:r}=ee(),s=a({mutationFn:()=>B.resumeQueue()}),i=function(){const e=n();return a({mutationFn:()=>B.cancelCurrent(),onSuccess:()=>{e.invalidateQueries(["queue"])}})}(),o=function(){const e=n();return a({mutationFn:e=>B.removeFromQueue(e),onSuccess:()=>{e.invalidateQueries(["queue"])}})}(),l=function(){const e=n();return a({mutationFn:({itemId:e,newPosition:t})=>B.reorderQueue(e,t),onSuccess:()=>{e.invalidateQueries(["queue"])}})}(),d=function(){const e=n();return a({mutationFn:e=>B.moveToTop(e),onSuccess:()=>{e.invalidateQueries(["queue"])}})}(),c=function(){const e=n();return a({mutationFn:e=>B.moveToBottom(e),onSuccess:()=>{e.invalidateQueries(["queue"])}})}(),u=function(){const e=n();return a({mutationFn:()=>B.clearQueue(),onSuccess:()=>{e.invalidateQueries(["queue"]),e.invalidateQueries(["videos"])}})}(),{showNotification:m}=A(),{theme:p}=R(),[f,b]=t.useState(!1),[h,N]=t.useState(!1),x="online"===p||"pixel"===p||"debug"===p,v=t.useRef(null),y=t.useRef(!1);t.useLayoutEffect(()=>{y.current&&null!==v.current&&(window.scrollTo(0,v.current),y.current=!1,v.current=null)},[e]),t.useEffect(()=>{const e=()=>{N(window.scrollY>400)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const g=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.useMemo(()=>[...r].filter(e=>null!=e),[...r])}(vt(ur,{activationConstraint:{distance:8}}),vt(hr,{activationConstraint:{delay:150,tolerance:8}})),j=e=>{if(!e||e<=0)return"N/A";const t=Math.floor(e/60),r=Math.floor(e%60);return t>0?`${t}m ${r}s`:`${r}s`},D=async e=>{try{await o.mutateAsync(e),m("Removed from queue","success")}catch(t){m(t.message,"error")}},E=async e=>{try{v.current=window.scrollY,y.current=!0,await d.mutateAsync(e),m("Moved to top of queue","success")}catch(t){y.current=!1,v.current=null,m(t.message,"error")}},V=async e=>{try{v.current=window.scrollY,y.current=!0,await c.mutateAsync(e),m("Moved to bottom of queue","success")}catch(t){y.current=!1,v.current=null,m(t.message,"error")}};if(r)return C.jsxDEV(ce,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:296,columnNumber:12},this);const w=e?.queue_items||[],k=e?.current_download||w.find(e=>"downloading"===e.video?.status),S=w.filter(e=>"queued"===e.video?.status)||[],P=e?.is_paused,_=S.length>0||k;return C.jsxDEV("div",{className:"space-y-4 animate-fade-in",children:[C.jsxDEV(ne,{children:C.jsxDEV("div",{className:"flex items-center justify-center gap-4",children:C.jsxDEV("div",{className:"flex space-x-2 items-center",children:[P&&_&&C.jsxDEV("button",{onClick:async()=>{try{await s.mutateAsync(),m("Queue resumed","success")}catch(e){m(e.message,"error")}},disabled:s.isPending,className:"px-2 md:px-4 py-1 md:py-1.5 text-xs md:text-sm bg-accent hover:bg-accent-hover text-white rounded transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:s.isPending?"Resuming...":"Resume"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:319,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>b(!0),disabled:u.isPending,className:"px-2 md:px-4 py-1 md:py-1.5 text-xs md:text-sm bg-dark-hover hover:bg-dark-tertiary border border-dark-border-light rounded text-text-primary transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:u.isPending?"Clearing...":"Clear Queue"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:327,columnNumber:11},this),k&&C.jsxDEV("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-dark-secondary border border-dark-border-light rounded",children:[C.jsxDEV("div",{className:"flex gap-0.5",children:[...Array(10)].map((e,t)=>{const r=10*(t+1),n=(k.progress_pct||0)>=r;return C.jsxDEV("div",{className:"w-2 h-4 rounded-sm transition-colors "+(n?"bg-green-500":"bg-dark-tertiary")},t,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:343,columnNumber:21},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:338,columnNumber:15},this),C.jsxDEV("span",{className:"text-xs font-medium text-text-primary",children:[(k.progress_pct||0).toFixed(0),"%"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:352,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:337,columnNumber:13},this),e?.delay_info?.remaining_seconds>0&&C.jsxDEV("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-dark-secondary border border-dark-border-light rounded",children:C.jsxDEV("span",{className:"text-xs font-medium text-yellow-500",children:["Delay ",j(e.delay_info.remaining_seconds)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:361,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:360,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:316,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:315,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:314,columnNumber:7},this),P&&_&&C.jsxDEV("div",{className:"card p-4 "+(x?"bg-yellow-900/30 border-2 border-yellow-700":"bg-yellow-600/10 border-2 border-yellow-600/40"),children:C.jsxDEV("div",{className:"flex items-start gap-3",children:[C.jsxDEV("svg",{className:`w-6 h-6 ${x?"text-yellow-700":"text-yellow-500"} flex-shrink-0 mt-0.5`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:375,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:374,columnNumber:13},this),C.jsxDEV("div",{className:"flex-1",children:[C.jsxDEV("h3",{className:`text-lg font-semibold ${x?"text-yellow-800":"text-yellow-500"} mb-1`,children:"Downloads Paused"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:378,columnNumber:15},this),C.jsxDEV("p",{className:"text-sm "+(x?"text-gray-800":"text-text-secondary"),children:["The program was closed with items in the queue. Press ",C.jsxDEV("span",{className:"font-semibold "+(x?"text-black":"text-text-primary"),children:"Resume"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:380,columnNumber:71},this)," to start downloading."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:379,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:377,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:373,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:372,columnNumber:9},this),0===w.length?C.jsxDEV(me,{icon:C.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:390,columnNumber:17},this),title:"Queue is empty",message:"Add videos from channels to start downloading"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:389,columnNumber:9},this):C.jsxDEV("div",{className:"space-y-2",children:[k&&C.jsxDEV("div",{onClick:async()=>{try{m("Cancelling current download...","info",{persistent:!0}),await i.mutateAsync(),m("Download cancelled","success")}catch(e){m(e.message,"error")}},className:"card p-3 border-2 border-accent/40 bg-accent/5 relative cursor-pointer hover:bg-accent/10 transition-colors group",children:C.jsxDEV("div",{className:"flex items-start gap-3",children:[C.jsxDEV("div",{className:"hidden md:block flex-shrink-0 w-[100px] h-[56px] bg-dark-tertiary rounded overflow-hidden",children:k.video?.thumb_url?C.jsxDEV("img",{src:k.video.thumb_url,alt:k.video.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:406,columnNumber:21},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-8 h-8 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:414,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:413,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:412,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:404,columnNumber:17},this),C.jsxDEV("div",{className:"flex-1 min-w-0 space-y-1.5",children:[C.jsxDEV("div",{className:"flex items-center justify-between gap-3",children:[C.jsxDEV("p",{className:"text-sm text-text-primary font-medium line-clamp-2 md:truncate group-hover:text-red-400 transition-colors",title:k.video?.title,children:[k.video?.title," ",C.jsxDEV("span",{className:"text-text-secondary",children:["• ",k.video?.channel_title]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:425,columnNumber:54},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:424,columnNumber:21},this),C.jsxDEV("span",{className:"text-xs text-red-400 font-medium opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:"Click to cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:427,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:423,columnNumber:19},this),C.jsxDEV("div",{className:"w-full bg-dark-tertiary rounded-full h-1.5 overflow-hidden",children:C.jsxDEV("div",{className:"bg-accent h-full transition-all duration-300",style:{width:`${k.progress_pct||0}%`}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:434,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:433,columnNumber:19},this),C.jsxDEV("div",{className:"flex items-center gap-4 text-xs text-text-secondary",children:[C.jsxDEV("span",{children:[(k.progress_pct||0).toFixed(1),"%"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:442,columnNumber:21},this),C.jsxDEV("span",{children:(e=>{if(!e)return"N/A";return`${(e/1048576).toFixed(1)} MB/s`})(k.speed_bps)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:443,columnNumber:21},this),C.jsxDEV("span",{children:["Size: ",we(k.total_bytes)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:444,columnNumber:21},this),C.jsxDEV("span",{children:["ETA: ",j(k.eta_seconds)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:445,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:441,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:421,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:402,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:398,columnNumber:13},this),S.length>0&&C.jsxDEV(Gr,{sensors:g,collisionDetection:Vt,onDragEnd:async e=>{const{active:t,over:r}=e;if(!r||t.id===r.id)return;const n=S.findIndex(e=>e.id===t.id),a=S.findIndex(e=>e.id===r.id);if(n===a)return;const s=a+1;try{await l.mutateAsync({itemId:t.id,newPosition:s})}catch(i){m(i.message||"Failed to reorder queue","error")}},children:C.jsxDEV(cn,{items:S.map(e=>e.id),strategy:on,children:S.map((e,t)=>C.jsxDEV(xn,{item:e,index:t,onRemove:D,onMoveToTop:E,onMoveToBottom:V},e.id,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:464,columnNumber:19},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:459,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:454,columnNumber:13},this),[].slice(0,5).map(e=>C.jsxDEV("div",{onClick:()=>D(e.id),className:"card p-3 bg-accent/5 border-accent/20 cursor-pointer hover:bg-accent/10 transition-colors group",children:C.jsxDEV("div",{className:"flex items-center gap-3",children:[C.jsxDEV("div",{className:"hidden md:block flex-shrink-0 w-[100px] h-[56px] bg-dark-tertiary rounded overflow-hidden relative",children:[e.video?.thumb_url?C.jsxDEV("img",{src:e.video.thumb_url,alt:e.video.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:488,columnNumber:21},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-8 h-8 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:496,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:495,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:494,columnNumber:21},this),C.jsxDEV("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-6 h-6 text-accent",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:503,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:502,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:501,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:486,columnNumber:17},this),C.jsxDEV("div",{className:"flex-1 min-w-0 flex items-center justify-between gap-3",children:[C.jsxDEV("p",{className:"text-sm text-text-primary font-medium line-clamp-2 md:truncate group-hover:text-accent transition-colors",title:e.video?.title,children:[e.video?.title," ",C.jsxDEV("span",{className:"text-text-secondary",children:["• ",e.video?.channel_title]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:511,columnNumber:41},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:510,columnNumber:19},this),C.jsxDEV("span",{className:"text-xs text-accent-text font-medium opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:"Click to remove"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:513,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:509,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:484,columnNumber:15},this)},e.id,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:479,columnNumber:13},this)),[].map(e=>C.jsxDEV("div",{onClick:()=>D(e.id),className:"card p-3 bg-red-600/5 border-red-600/20 cursor-pointer hover:bg-red-600/10 transition-colors group",children:C.jsxDEV("div",{className:"flex items-start gap-3",children:[C.jsxDEV("div",{className:"hidden md:block flex-shrink-0 w-[100px] h-[56px] bg-dark-tertiary rounded overflow-hidden relative",children:[e.video?.thumb_url?C.jsxDEV("img",{src:e.video.thumb_url,alt:e.video.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:532,columnNumber:21},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-8 h-8 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:540,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:539,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:538,columnNumber:21},this),C.jsxDEV("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:C.jsxDEV("svg",{className:"w-6 h-6 text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[C.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:547,columnNumber:23},this),C.jsxDEV("line",{x1:"15",y1:"9",x2:"9",y2:"15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:548,columnNumber:23},this),C.jsxDEV("line",{x1:"9",y1:"9",x2:"15",y2:"15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:549,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:546,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:545,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:530,columnNumber:17},this),C.jsxDEV("div",{className:"flex-1 min-w-0 space-y-1",children:[C.jsxDEV("div",{className:"flex items-center justify-between gap-3",children:[C.jsxDEV("p",{className:"text-sm text-text-primary font-medium line-clamp-2 md:truncate group-hover:text-red-400 transition-colors",title:e.video?.title,children:[e.video?.title," ",C.jsxDEV("span",{className:"text-text-secondary",children:["• ",e.video?.channel_title]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:558,columnNumber:43},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:557,columnNumber:21},this),C.jsxDEV("span",{className:"text-xs text-red-400 font-medium opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:"Click to remove"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:560,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:556,columnNumber:19},this),e.log&&(()=>{const t=function(e){if(!e)return null;const t=e.toLowerCase();return t.includes("rate limit detected")?{message:e,icon:"⏸️",type:"warning"}:t.includes("geoblocked")||t.includes("geo restricted")?{message:"❌ Video is geoblocked in your region",icon:"🌍",type:"error"}:t.includes("private")||t.includes("unavailable")?{message:"❌ Video is private or unavailable",icon:"🔒",type:"error"}:t.includes("members only")?{message:"❌ Members-only content",icon:"⭐",type:"error"}:t.includes("age verification")?{message:"❌ Age verification required",icon:"🔞",type:"error"}:t.includes("copyright")?{message:"❌ Copyright takedown",icon:"⚖️",type:"error"}:t.includes("timeout")?{message:"⏱️ Download timed out",icon:"⏱️",type:"warning"}:{message:e,icon:"⚠️",type:"error"}}(e.log);return C.jsxDEV("div",{className:"flex items-start gap-2 mt-1",children:[t.icon&&C.jsxDEV("span",{className:"text-sm flex-shrink-0",children:t.icon},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:569,columnNumber:27},this),C.jsxDEV("p",{className:"text-xs flex-1 "+("warning"===t.type?"text-yellow-400":"text-red-400"),children:t.message},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:571,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:567,columnNumber:23},this)})()]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:555,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:528,columnNumber:15},this)},e.id,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:523,columnNumber:13},this))]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:395,columnNumber:9},this),h&&C.jsxDEV("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-20 right-6 p-3 bg-gray-700 hover:bg-gray-600 rounded-full shadow-lg transition-colors z-50 animate-fade-in","aria-label":"Scroll to top",children:C.jsxDEV("svg",{className:"w-5 h-5 text-text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"18 15 12 9 6 15"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:594,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:593,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:588,columnNumber:9},this),C.jsxDEV(be,{isOpen:f,title:"Clear Queue",message:C.jsxDEV(C.Fragment,{children:["Are you sure you want to clear all ",C.jsxDEV("span",{className:"font-semibold",children:[S.length," pending items"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:605,columnNumber:48},this),"? The currently downloading video will not be affected."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:604,columnNumber:11},this),confirmText:"Clear Queue",confirmStyle:"danger",onConfirm:async()=>{try{const e=await u.mutateAsync();m(e.message||"Queue cleared","success"),b(!1)}catch(e){m(e.message,"error")}},onCancel:()=>b(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:600,columnNumber:7},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Queue.jsx",lineNumber:312,columnNumber:5},this)}function yn(){const{data:e,isLoading:s}=r({queryKey:["settings"],queryFn:()=>B.getSettings()}),{data:i}=te(),{data:o}=function(e=500){return r({queryKey:["logs",e],queryFn:()=>B.getLogs(e),refetchInterval:5e3})}(500),{data:l}=Q(),{data:d,refetch:c}=H({status:"discovered"}),{data:u,refetch:m}=H({status:"ignored"}),{data:p,refetch:f}=H({status:"library"}),b=function(){const e=n();return a({mutationFn:e=>B.updateSettings(e),onSuccess:()=>{e.invalidateQueries(["settings"])}})}(),{showNotification:h}=A(),{theme:N,setTheme:x}=R(),[v,y]=t.useState({discovered:0,ignored:0,library:0});t.useEffect(()=>{fetch("/api/stats").then(e=>e.json()).then(e=>y(e)).catch(e=>console.error("Failed to fetch stats:",e))},[]);const[g,j]=t.useState(!1),[D,E]=t.useState(3),[V,w]=t.useState(0),[k,S]=t.useState("times"),[P,_]=t.useState([{hour:3,minute:0}]),[L,M]=t.useState(6),[T,I]=t.useState([{hour:3,minute:0}]),[F,O]=t.useState({hour:3,minute:0}),[$,z]=t.useState(6),[q,W]=t.useState(""),[U,J]=t.useState("INFO"),[Y,G]=t.useState(!1),[K,X]=t.useState(""),[Z,ee]=t.useState(""),[re,ne]=t.useState(""),[ae,se]=t.useState(""),[ie,oe]=t.useState(""),[le,de]=t.useState(!1),[ue,me]=t.useState("file"),[pe,fe]=t.useState(!1),[be,he]=t.useState(!1),[Ne,xe]=t.useState(!1),[ve,ye]=t.useState(!1),[ge,je]=t.useState(!1),[De,Ee]=t.useState(()=>{const e=localStorage.getItem("logsVisible");return null===e||"true"===e}),[Ve,we]=t.useState(()=>{const e=localStorage.getItem("statusBarVisible");return null===e||"true"===e}),[ke,Ce]=t.useState(!1),[Se,Pe]=t.useState(!1),[_e,Le]=t.useState(!1),[Ae,Me]=t.useState(null),[Te,Ie]=t.useState([]),[Re,Fe]=t.useState([]),[Oe,$e]=t.useState(!1),[ze,Be]=t.useState(!1);t.useEffect(()=>{window.scrollTo({top:0,behavior:"instant"})},[]),t.useEffect(()=>{if(e){if(j("true"===e.auto_refresh_enabled),W(e.youtube_api_key||""),J(e.log_level||"INFO"),e.auto_refresh_config)try{const t=JSON.parse(e.auto_refresh_config);if(S(t.mode),"times"===t.mode){const e=t.times.map(e=>{const[t,r]=e.split(":");return{hour:parseInt(t),minute:parseInt(r)}});_(e),I(e)}else if("interval"===t.mode&&(M(t.interval_hours),z(t.interval_hours),t.interval_start)){const[e,r]=t.interval_start.split(":"),n={hour:parseInt(e),minute:parseInt(r)};_([n]),O(n)}}catch(t){console.error("Failed to parse auto_refresh_config:",t)}else if(e.auto_refresh_time){const[t,r]=e.auto_refresh_time.split(":");E(parseInt(t)||3),w(parseInt(r)||0);const n={hour:parseInt(t)||3,minute:parseInt(r)||0};_([n]),I([n]),O(n)}he("true"===e.sponsorblock_remove_sponsor),xe("true"===e.sponsorblock_remove_selfpromo),ye("true"===e.sponsorblock_remove_interaction),me(e.cookie_source||"file")}},[e]);const Qe=async(e,t,r)=>{const n=!t;r(n);try{await b.mutateAsync({[e]:n?"true":"false"})}catch(a){console.error(`Failed to save ${e}:`,a),r(t)}},qe=e=>{"times"===k?I(P):"interval"===k&&(O(P[0]||{hour:3,minute:0}),z(L)),S(e),"interval"===e?(_([F]),M($)):_(T)},We=(e,t,r)=>{const n=[...P];n[e]={...n[e],[t]:parseInt(r)},_(n),"times"===k?I(n):"interval"===k&&0===e&&O(n[0])},Ue=async()=>{try{const e={mode:k,times:"times"===k?P.map(e=>`${String(e.hour).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}`):[],interval_hours:"interval"===k?L:null,interval_start:"interval"===k&&P.length>0?`${String(P[0].hour).padStart(2,"0")}:${String(P[0].minute).padStart(2,"0")}`:null};await b.mutateAsync({auto_refresh_enabled:g?"true":"false",auto_refresh_config:JSON.stringify(e)}),h("Auto-scan schedule updated","success")}catch(e){h(e.message||"Failed to save auto-scan settings","error")}},He=async e=>{me(e);try{await b.mutateAsync({cookie_source:e,cookie_browser:"firefox"}),h("Cookie source updated successfully!","success")}catch(t){h("Failed to update cookie source","error")}};return s?C.jsxDEV(ce,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:430,columnNumber:12},this):C.jsxDEV(C.Fragment,{children:C.jsxDEV("div",{className:"animate-fade-in",children:[C.jsxDEV("div",{className:"flex flex-col gap-4 w-full",children:[C.jsxDEV("div",{className:"card p-4 w-full",children:[C.jsxDEV("h3",{className:"text-sm font-semibold text-text-primary mb-3 text-center",children:"System Status and Stats"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:441,columnNumber:13},this),C.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-8 gap-y-2 text-sm mb-4",children:[C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary w-16",children:"FFmpeg"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:447,columnNumber:17},this),C.jsxDEV("span",{className:"font-medium text-xs "+(i?.ffmpeg_available?"text-text-primary":"text-red-400"),children:i?.ffmpeg_available?"Active":"Inactive"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:448,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:446,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary w-20",children:"Database"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:454,columnNumber:17},this),C.jsxDEV("span",{className:"font-mono text-xs "+("online"===N||"pixel"===N||"debug"===N?"text-black":"text-text-primary"),children:i?.database_size||"N/A"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:455,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:453,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary w-16",children:"Cookies"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:461,columnNumber:17},this),C.jsxDEV("span",{className:"font-medium text-xs "+("browser"===ue?i?.firefox_has_cookies?"text-text-primary":i?.firefox_profile_mounted?"text-yellow-400":"text-red-400":i?.cookies_available?"text-text-primary":"text-yellow-400"),children:"browser"===ue?i?.firefox_has_cookies?"Firefox Profile":i?.firefox_profile_mounted?"No YouTube Login":"Not Mounted":i?.cookies_available?"cookies.txt":"Inactive"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:462,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:460,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary w-24",children:"YT and Chill"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:475,columnNumber:17},this),C.jsxDEV("span",{className:"font-mono text-xs "+("online"===N||"pixel"===N||"debug"===N?"text-black":"text-text-primary"),children:"v6.10.8"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:476,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:474,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary w-16",children:"yt-dlp"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:480,columnNumber:17},this),C.jsxDEV("span",{className:"font-mono text-xs "+("online"===N||"pixel"===N||"debug"===N?"text-black":"text-text-primary"),children:i?.ytdlp_version||"Unknown"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:481,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:479,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary w-24",children:"Google API"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:485,columnNumber:17},this),C.jsxDEV("span",{className:"font-mono text-xs "+("online"===N||"pixel"===N||"debug"===N?"text-black":"text-text-primary"),children:i?.google_api_version||"Unknown"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:486,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:484,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:444,columnNumber:13},this),C.jsxDEV("div",{className:"border-t border-dark-border my-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:491,columnNumber:13},this),C.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-8 gap-y-2 text-sm",children:[C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary",children:"Videos in Library"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:497,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary font-mono font-semibold",children:v.library},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:498,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:496,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary",children:"Videos to Review"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:501,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary font-mono font-semibold",children:v.discovered},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:502,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:500,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary",children:"Videos Ignored"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:505,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary font-mono font-semibold",children:v.ignored},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:506,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:504,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary",children:"Total Channels"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:510,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary font-mono font-semibold",children:l?.length||0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:511,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:509,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary",children:"Total Playlists"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:514,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary font-mono font-semibold",children:l?.length||0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:515,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:513,columnNumber:15},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-3",children:[C.jsxDEV("span",{className:"text-text-secondary",children:"Total Storage"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:518,columnNumber:17},this),C.jsxDEV("span",{className:"text-text-primary font-mono font-semibold",children:i?.total_storage||"0B"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:519,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:517,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:494,columnNumber:13},this),C.jsxDEV("div",{className:"border-t border-dark-border my-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:524,columnNumber:13},this),C.jsxDEV("div",{className:"flex flex-col items-center gap-3",children:[C.jsxDEV("div",{className:"flex items-center gap-3 flex-wrap justify-center",children:[C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("h3",{className:"text-sm font-semibold text-text-primary",children:"Cookie Source"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:531,columnNumber:19},this),C.jsxDEV("button",{type:"button",onClick:()=>fe(!0),className:"w-4 h-4 rounded-full border border-text-muted text-text-muted hover:text-text-primary hover:border-text-primary transition-colors flex items-center justify-center text-xs font-bold",children:"?"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:532,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:530,columnNumber:17},this),C.jsxDEV("label",{className:"flex items-center gap-2 cursor-pointer",children:[C.jsxDEV("input",{type:"radio",name:"cookieSource",value:"file",checked:"file"===ue,onChange:e=>He(e.target.value),className:"w-4 h-4 rounded-full border-dark-border bg-dark-tertiary text-accent-text focus:ring-2 focus:ring-accent cursor-pointer"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:541,columnNumber:19},this),C.jsxDEV("span",{className:"text-sm text-text-primary font-medium",children:"cookies.txt"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:549,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:540,columnNumber:17},this),C.jsxDEV("label",{className:"flex items-center gap-2 cursor-pointer",children:[C.jsxDEV("input",{type:"radio",name:"cookieSource",value:"browser",checked:"browser"===ue,onChange:e=>He(e.target.value),className:"w-4 h-4 rounded-full border-dark-border bg-dark-tertiary text-accent-text focus:ring-2 focus:ring-accent cursor-pointer"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:552,columnNumber:19},this),C.jsxDEV("span",{className:"text-sm text-text-primary font-medium",children:"Firefox"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:560,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:551,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:529,columnNumber:15},this),C.jsxDEV("div",{className:"flex gap-2 justify-center",children:[C.jsxDEV("button",{onClick:()=>G(!Y),className:"btn bg-dark-tertiary text-text-primary hover:bg-dark-hover whitespace-nowrap py-1.5 text-sm font-bold px-4",children:"Reset User"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:566,columnNumber:17},this),C.jsxDEV("button",{onClick:()=>{const e=!Ve;we(e),localStorage.setItem("statusBarVisible",e.toString()),window.dispatchEvent(new CustomEvent("statusBarVisibilityChanged",{detail:{visible:e}}))},className:"btn bg-dark-tertiary text-text-primary hover:bg-dark-hover whitespace-nowrap py-1.5 text-sm font-bold px-4 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-dark-primary",children:Ve?"Hide Status Bar":"Show Status Bar"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:572,columnNumber:17},this),C.jsxDEV("button",{onClick:async()=>{$e(!0);try{const e=await fetch("/api/queue/check-orphaned"),t=await e.json();if(t.error)return void h(t.error,"error");fetch("/api/stats").then(e=>e.json()).then(e=>y(e)).catch(e=>console.error("Failed to fetch stats:",e)),Me(t),Ce(!0)}catch(e){h(`Failed to check database: ${e.message}`,"error")}finally{$e(!1)}},disabled:Oe,title:"Cleans up database count issues, orphaned queue items, ghost videos from deleted channels, and other inconsistencies",className:"btn bg-dark-tertiary text-text-primary hover:bg-dark-hover whitespace-nowrap py-1.5 text-sm font-bold px-4 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-dark-primary disabled:opacity-50 disabled:cursor-not-allowed",children:Oe?"Checking...":"Queue/DB Repair"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:578,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:565,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:527,columnNumber:13},this),Y&&C.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),oe(""),K&&Z&&re&&ae)if(Z.length<3)oe("Username must be at least 3 characters");else if(re.length<3)oe("Password must be at least 3 characters");else if(re===ae){de(!0);try{const e=await fetch("/api/auth/change",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:K,new_username:Z,new_password:re})}),t=await e.json();if(!e.ok)return oe(t.error||"Failed to change credentials"),void de(!1);h("Credentials changed successfully!","success"),X(""),ee(""),ne(""),se(""),G(!1)}catch(t){oe("Failed to connect to server"),de(!1)}}else oe("New passwords do not match");else oe("All fields are required")},className:"space-y-3 mt-3",children:[C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-sm text-text-secondary mb-1",children:"Current Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:593,columnNumber:19},this),C.jsxDEV("input",{type:"password",value:K,onChange:e=>X(e.target.value),placeholder:"Enter current password",className:"input text-sm py-1.5 px-3 w-full",disabled:le,autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:594,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:592,columnNumber:17},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-sm text-text-secondary mb-1",children:"New Username"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:606,columnNumber:19},this),C.jsxDEV("input",{type:"text",value:Z,onChange:e=>ee(e.target.value),placeholder:"Enter new username",className:"input text-sm py-1.5 px-3 w-full",disabled:le},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:607,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:605,columnNumber:17},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-sm text-text-secondary mb-1",children:"New Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:618,columnNumber:19},this),C.jsxDEV("input",{type:"password",value:re,onChange:e=>ne(e.target.value),placeholder:"Enter new password",className:"input text-sm py-1.5 px-3 w-full",disabled:le},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:619,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:617,columnNumber:17},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-sm text-text-secondary mb-1",children:"Confirm New Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:630,columnNumber:19},this),C.jsxDEV("input",{type:"password",value:ae,onChange:e=>se(e.target.value),placeholder:"Confirm new password",className:"input text-sm py-1.5 px-3 w-full",disabled:le},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:631,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:629,columnNumber:17},this),ie&&C.jsxDEV("div",{className:"bg-red-900/20 border border-red-500 text-red-400 px-3 py-2 rounded text-sm",children:ie},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:642,columnNumber:19},this),C.jsxDEV("button",{type:"submit",disabled:le,className:"btn bg-dark-tertiary text-text-primary hover:bg-dark-hover font-bold py-1.5 text-sm px-4 disabled:opacity-50 disabled:cursor-not-allowed",children:le?"Saving...":"Save New Credentials"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:647,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:591,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:439,columnNumber:11},this),C.jsxDEV("div",{className:"card p-4 w-full",children:[C.jsxDEV("h3",{className:"text-sm font-semibold text-text-primary mb-3 text-center",children:"Theme"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:660,columnNumber:13},this),C.jsxDEV("div",{className:"flex flex-col items-center gap-3",children:[C.jsxDEV("div",{className:"flex flex-wrap justify-center gap-3",children:[C.jsxDEV("button",{onClick:()=>{x("kernel"),h("Theme changed to Kernel","success")},className:"relative flex items-center justify-center gap-2 py-1.5 font-semibold text-sm transition-all cursor-pointer "+("kernel"===N?'after:content-[""] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-gradient-to-r after:from-gray-500 after:to-gray-300':""),style:{color:"online"===N||"pixel"===N||"debug"===N?"#000000":"#ffffff"},title:"Dark theme",children:[C.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"hsl(220, 10%, 70%)"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:674,columnNumber:15},this),"Kernel"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:664,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>{x("fatal"),h("Theme changed to Fatal","success")},className:"relative flex items-center justify-center gap-2 py-1.5 font-semibold text-sm transition-all cursor-pointer "+("fatal"===N?'after:content-[""] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-gradient-to-r after:from-red-500 after:to-red-300':""),style:{color:"online"===N||"pixel"===N||"debug"===N?"#000000":"#ffffff"},title:"Dark theme",children:[C.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"hsl(0, 100%, 50%)"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:687,columnNumber:15},this),"Fatal"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:677,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>{x("subnet"),h("Theme changed to Subnet","success")},className:"relative flex items-center justify-center gap-2 py-1.5 font-semibold text-sm transition-all cursor-pointer "+("subnet"===N?'after:content-[""] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-gradient-to-r after:from-blue-700 after:to-blue-500':""),style:{color:"online"===N||"pixel"===N||"debug"===N?"#000000":"#ffffff"},title:"Dark theme",children:[C.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"hsl(220, 50%, 40%)"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:700,columnNumber:15},this),"Subnet"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:690,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>{x("archive"),h("Theme changed to Archive","success")},className:"relative flex items-center justify-center gap-2 py-1.5 font-semibold text-sm transition-all cursor-pointer "+("archive"===N?'after:content-[""] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-gradient-to-r after:from-green-700 after:to-green-500':""),style:{color:"online"===N||"pixel"===N||"debug"===N?"#000000":"#ffffff"},title:"Dark theme",children:[C.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"hsl(95, 20%, 45%)"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:713,columnNumber:15},this),"Archive"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:703,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>{x("buffer"),h("Theme changed to Buffer","success")},className:"relative flex items-center justify-center gap-2 py-1.5 font-semibold text-sm transition-all cursor-pointer "+("buffer"===N?'after:content-[""] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-gradient-to-r after:from-amber-300 after:to-amber-200':""),style:{color:"online"===N||"pixel"===N||"debug"===N?"#000000":"#ffffff"},title:"Dark theme",children:[C.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"hsl(35, 45%, 58%)"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:726,columnNumber:15},this),"Buffer"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:716,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>{x("catppuccin"),h("Theme changed to Catppuccin","success")},className:"relative flex items-center justify-center gap-2 py-1.5 font-semibold text-sm transition-all cursor-pointer "+("catppuccin"===N?'after:content-[""] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-gradient-to-r after:from-blue-400 after:to-purple-300':""),style:{color:"online"===N||"pixel"===N||"debug"===N?"#000000":"#ffffff"},title:"Dark theme",children:[C.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#89b4fa"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:739,columnNumber:15},this),"Catppuccin"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:729,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:663,columnNumber:11},this),C.jsxDEV("div",{className:"border-t border-dark-border"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:745,columnNumber:11},this),C.jsxDEV("div",{className:"flex flex-wrap justify-center gap-3",children:[C.jsxDEV("button",{onClick:()=>{x("online"),h("Theme changed to Online","success")},className:"relative flex items-center justify-center gap-2 py-1.5 font-semibold text-sm transition-all cursor-pointer "+("online"===N?'after:content-[""] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-gradient-to-r after:from-green-500 after:to-green-300':""),style:{color:"online"===N||"pixel"===N||"debug"===N?"#000000":"#ffffff"},title:"Light theme",children:[C.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"hsl(115, 25%, 50%)"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:759,columnNumber:15},this),"Online"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:749,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>{x("pixel"),h("Theme changed to Pixel","success")},className:"relative flex items-center justify-center gap-2 py-1.5 font-semibold text-sm transition-all cursor-pointer "+("pixel"===N?'after:content-[""] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-gradient-to-r after:from-pink-400 after:to-pink-200':""),style:{color:"online"===N||"pixel"===N||"debug"===N?"#000000":"#ffffff"},title:"Light theme",children:[C.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"hsl(315, 80%, 75%)"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:772,columnNumber:15},this),"Pixel"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:762,columnNumber:13},this),C.jsxDEV("button",{onClick:()=>{x("debug"),h("Theme changed to Debug","success")},className:"relative flex items-center justify-center gap-2 py-1.5 font-semibold text-sm transition-all cursor-pointer "+("debug"===N?'after:content-[""] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-gradient-to-r after:from-blue-400 after:to-blue-200':""),style:{color:"online"===N||"pixel"===N||"debug"===N?"#000000":"#ffffff"},title:"Light theme",children:[C.jsxDEV("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"hsl(210, 30%, 55%)"}},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:785,columnNumber:15},this),"Debug"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:775,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:748,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:661,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:659,columnNumber:11},this),C.jsxDEV("div",{className:"card p-4 w-full",children:C.jsxDEV("div",{className:"flex flex-col md:flex-row gap-6",children:[C.jsxDEV("div",{className:"flex-1 flex flex-col items-center",children:[C.jsxDEV("h3",{className:"text-sm font-semibold text-text-primary mb-3 text-center",children:"YouTube Data API Key"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:797,columnNumber:17},this),C.jsxDEV("div",{className:"flex gap-2 mb-2 w-full md:w-auto",children:[C.jsxDEV("input",{type:"text",value:q,onChange:e=>W(e.target.value),placeholder:"Enter your YouTube Data API v3 key...",className:"input text-sm py-1.5 px-3 font-mono w-full md:w-[320px]"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:799,columnNumber:19},this),C.jsxDEV("button",{onClick:async()=>{try{await b.mutateAsync({auto_refresh_enabled:g?"true":"false",auto_refresh_time:`${D.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`,youtube_api_key:q,log_level:U}),h("Settings saved","success")}catch(e){h(e.message,"error")}},className:"btn bg-dark-tertiary text-text-primary hover:bg-dark-hover whitespace-nowrap py-1.5 text-sm font-bold px-4",children:"Save"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:806,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:798,columnNumber:17},this),C.jsxDEV("p",{className:"text-sm text-text-secondary font-medium",children:["Get your key at"," ",C.jsxDEV("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",className:"text-accent-text hover:underline font-semibold",children:"Google Cloud Console"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:815,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:813,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:796,columnNumber:15},this),C.jsxDEV("div",{className:"flex-1",children:[C.jsxDEV("h3",{className:"text-sm font-semibold text-text-primary mb-3 flex items-center justify-center gap-2",children:["SponsorBlock",C.jsxDEV("button",{onClick:()=>je(!0),className:"ml-1 w-4 h-4 rounded-full border border-text-muted text-text-muted hover:text-text-primary hover:border-text-primary transition-colors flex items-center justify-center text-xs font-bold",title:"What is SponsorBlock?",children:"?"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:830,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:828,columnNumber:17},this),C.jsxDEV("div",{className:"flex flex-col gap-2 items-center",children:[C.jsxDEV("label",{className:"flex items-center gap-2 cursor-pointer",children:[C.jsxDEV("input",{type:"checkbox",checked:be,onChange:()=>Qe("sponsorblock_remove_sponsor",be,he),className:"w-4 h-4 rounded border-dark-border bg-dark-tertiary text-accent-text focus:ring-2 focus:ring-accent cursor-pointer"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:840,columnNumber:21},this),C.jsxDEV("span",{className:"text-sm text-text-primary font-medium",children:"Remove Sponsors"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:846,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:839,columnNumber:19},this),C.jsxDEV("label",{className:"flex items-center gap-2 cursor-pointer",children:[C.jsxDEV("input",{type:"checkbox",checked:Ne,onChange:()=>Qe("sponsorblock_remove_selfpromo",Ne,xe),className:"w-4 h-4 rounded border-dark-border bg-dark-tertiary text-accent-text focus:ring-2 focus:ring-accent cursor-pointer"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:849,columnNumber:21},this),C.jsxDEV("span",{className:"text-sm text-text-primary font-medium",children:"Remove Self-Promo"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:855,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:848,columnNumber:19},this),C.jsxDEV("label",{className:"flex items-center gap-2 cursor-pointer",children:[C.jsxDEV("input",{type:"checkbox",checked:ve,onChange:()=>Qe("sponsorblock_remove_interaction",ve,ye),className:"w-4 h-4 rounded border-dark-border bg-dark-tertiary text-accent-text focus:ring-2 focus:ring-accent cursor-pointer"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:858,columnNumber:21},this),C.jsxDEV("span",{className:"text-sm text-text-primary font-medium",children:"Remove Like/Sub Requests"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:864,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:857,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:838,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:827,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:794,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:793,columnNumber:11},this),C.jsxDEV("div",{className:"card p-4 w-full",children:[C.jsxDEV("div",{className:"flex items-center justify-center gap-4 "+(g?"mb-3":""),children:[C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("h3",{className:"text-sm font-semibold text-text-primary",children:"Auto-Scan Daily"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:876,columnNumber:17},this),C.jsxDEV("button",{className:"text-text-secondary hover:text-text-primary transition-colors",title:"Automatically scan your channels daily to discover new videos. Choose specific times or interval-based scanning.",children:C.jsxDEV("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:882,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:881,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:877,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:875,columnNumber:15},this),C.jsxDEV("div",{className:"flex border border-dark-border rounded-md overflow-hidden",children:[C.jsxDEV("button",{onClick:async()=>{j(!1);try{await b.mutateAsync({auto_refresh_enabled:"false",auto_refresh_config:JSON.stringify({mode:k,times:"times"===k?P.slice(0,4).map(e=>`${String(e.hour).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}`):[],interval_hours:"interval"===k?L:null,interval_start:"interval"===k&&P.length>0?`${String(P[0].hour).padStart(2,"0")}:${String(P[0].minute).padStart(2,"0")}`:null})}),h("Auto-scan disabled","success")}catch(e){h(e.message||"Failed to disable auto-scan","error")}},className:"px-3 py-1.5 text-xs font-bold transition-all "+(g?"bg-dark-tertiary text-text-muted hover:bg-dark-hover":"bg-accent text-white"),children:"OFF"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:887,columnNumber:17},this),C.jsxDEV("button",{onClick:async()=>{j(!0);try{await b.mutateAsync({auto_refresh_enabled:"true",auto_refresh_config:JSON.stringify({mode:k,times:"times"===k?P.slice(0,4).map(e=>`${String(e.hour).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}`):[],interval_hours:"interval"===k?L:null,interval_start:"interval"===k&&P.length>0?`${String(P[0].hour).padStart(2,"0")}:${String(P[0].minute).padStart(2,"0")}`:null})}),h("Auto-scan enabled","success")}catch(e){h(e.message||"Failed to enable auto-scan","error")}},className:"px-3 py-1.5 text-xs font-bold transition-all "+(g?"bg-accent text-white":"bg-dark-tertiary text-text-muted hover:bg-dark-hover"),children:"ON"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:913,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:886,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:874,columnNumber:13},this),g&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("div",{className:"flex flex-col md:flex-row md:items-center md:justify-center gap-2 md:gap-3 mb-3",children:[C.jsxDEV("div",{className:"flex gap-2 justify-center",children:[C.jsxDEV("button",{onClick:()=>qe("times"),className:"px-3 py-1.5 text-sm font-bold rounded transition-all "+("times"===k?"bg-accent text-white":"bg-dark-tertiary text-text-muted hover:bg-dark-hover"),children:"Manual"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:949,columnNumber:21},this),C.jsxDEV("button",{onClick:()=>qe("interval"),className:"px-3 py-1.5 text-sm font-bold rounded transition-all "+("interval"===k?"bg-accent text-white":"bg-dark-tertiary text-text-muted hover:bg-dark-hover"),children:"Repeat"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:959,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:948,columnNumber:19},this),"interval"===k&&C.jsxDEV("select",{value:L,onChange:e=>{const t=parseInt(e.target.value);M(t),z(t)},className:"input text-sm font-mono py-1.5 px-2 w-full md:w-auto",style:{maxWidth:"158px"},children:[C.jsxDEV("option",{value:6,children:"Every 6 hours (4x daily)"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:983,columnNumber:23},this),C.jsxDEV("option",{value:8,children:"Every 8 hours (3x daily)"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:984,columnNumber:23},this),C.jsxDEV("option",{value:12,children:"Every 12 hours (2x daily)"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:985,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:973,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:946,columnNumber:17},this),C.jsxDEV("div",{className:"flex justify-center",children:C.jsxDEV("div",{children:(()=>{const e=(()=>{if("interval"!==k||0===P.length)return P;const e=P[0],t=6===L?4:8===L?3:2,r=[e];for(let n=1;n<t;n++){const t=60*e.hour+e.minute+L*n*60,a=Math.floor(t/60)%24,s=t%60;r.push({hour:a,minute:s})}return r})();for(;e.length<4;)e.push({hour:0,minute:0});const t=(e,t,r=!1)=>{const n="interval"===k&&t>0;return C.jsxDEV("div",{className:"flex items-center gap-1.5",children:[C.jsxDEV("span",{className:"text-text-primary text-sm font-bold w-4",children:[t+1,"."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1003,columnNumber:25},this),C.jsxDEV("select",{value:e.hour,onChange:e=>We(t,"hour",e.target.value),disabled:n,className:`input text-sm font-mono py-1.5 ${r?"px-1 w-12":"px-1.5 w-14"} ${n?"opacity-50 cursor-not-allowed":""}`,children:Array.from({length:24},(e,t)=>C.jsxDEV("option",{value:t,children:t.toString().padStart(2,"0")},t,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1013,columnNumber:29},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1004,columnNumber:25},this),C.jsxDEV("span",{className:"text-text-primary text-sm font-bold",children:":"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1018,columnNumber:25},this),C.jsxDEV("select",{value:e.minute,onChange:e=>We(t,"minute",e.target.value),disabled:n,className:`input text-sm font-mono py-1.5 ${r?"px-1 w-12":"px-1.5 w-14"} ${n?"opacity-50 cursor-not-allowed":""}`,children:Array.from({length:60},(e,t)=>C.jsxDEV("option",{value:t,children:t.toString().padStart(2,"0")},t,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1028,columnNumber:29},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1019,columnNumber:25},this)]},t,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1002,columnNumber:23},this)};return C.jsxDEV(C.Fragment,{children:[C.jsxDEV("div",{className:"hidden lg:flex lg:items-center lg:justify-center gap-6",children:[C.jsxDEV("div",{className:"flex items-center gap-6",children:[t(e[0],0),t(e[1],1)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1042,columnNumber:25},this),C.jsxDEV("div",{className:"w-12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1048,columnNumber:25},this),C.jsxDEV("div",{className:"flex items-center gap-6",children:[t(e[2],2),t(e[3],3)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1051,columnNumber:25},this),C.jsxDEV("button",{onClick:Ue,className:"btn bg-dark-tertiary text-text-primary hover:bg-dark-hover whitespace-nowrap py-1.5 text-sm font-bold px-4 ml-6",children:"Save"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1057,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1040,columnNumber:23},this),C.jsxDEV("div",{className:"hidden sm:flex lg:hidden items-center justify-center gap-6",children:[C.jsxDEV("div",{className:"flex flex-col gap-4",children:[C.jsxDEV("div",{className:"flex items-center justify-center gap-6",children:[t(e[0],0),t(e[1],1)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1068,columnNumber:27},this),C.jsxDEV("div",{className:"flex items-center justify-center gap-6",children:[t(e[2],2),t(e[3],3)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1072,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1067,columnNumber:25},this),C.jsxDEV("button",{onClick:Ue,className:"btn bg-dark-tertiary text-text-primary hover:bg-dark-hover whitespace-nowrap py-1.5 text-sm font-bold px-4",children:"Save"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1078,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1066,columnNumber:23},this),C.jsxDEV("div",{className:"flex sm:hidden flex-col gap-2",children:[C.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxDEV("div",{className:"flex flex-col gap-2",children:[t(e[0],0,!0),t(e[1],1,!0)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1090,columnNumber:27},this),C.jsxDEV("div",{className:"flex flex-col gap-2",children:[t(e[2],2,!0),t(e[3],3,!0)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1095,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1088,columnNumber:25},this),C.jsxDEV("div",{className:"flex justify-center",children:C.jsxDEV("button",{onClick:Ue,className:"btn bg-dark-tertiary text-text-primary hover:bg-dark-hover py-1.5 text-sm font-bold px-3",style:{width:"fit-content"},children:"Save"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1103,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1102,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1087,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1038,columnNumber:21},this)})()},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:992,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:991,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:944,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:872,columnNumber:11},this),C.jsxDEV("div",{className:"card p-4 w-full",children:[C.jsxDEV("div",{className:"flex items-center justify-center gap-2 mb-3",children:[C.jsxDEV("h3",{className:"text-sm font-semibold text-text-primary",children:"Logging"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1124,columnNumber:15},this),C.jsxDEV("button",{className:"text-text-secondary hover:text-text-primary transition-colors",title:"DEBUG: Most verbose - all operations and API calls\nINFO: General information - major operations and status\nAPI: YouTube API calls and external requests only\nWARN: Potential issues that don't stop operations\nERROR: Critical failures only",children:C.jsxDEV("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1130,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1129,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1125,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1123,columnNumber:13},this),C.jsxDEV("div",{children:[C.jsxDEV("input",{type:"range",min:"0",max:"4",value:["DEBUG","INFO","API","WARNING","ERROR"].indexOf(U),onChange:async e=>{const t=["DEBUG","INFO","API","WARNING","ERROR"][parseInt(e.target.value)];J(t);try{await b.mutateAsync({auto_refresh_enabled:g?"true":"false",auto_refresh_time:`${D.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`,youtube_api_key:q,log_level:t}),h(`Log level changed to ${t}`,"success")}catch(r){h(r.message||"Failed to save log level","error")}},className:"w-full h-2 bg-dark-tertiary rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-accent [&::-webkit-slider-thumb]:cursor-pointer [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-accent [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:cursor-pointer"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1135,columnNumber:15},this),C.jsxDEV("div",{className:"flex justify-between text-sm font-mono mt-1",children:[C.jsxDEV("span",{className:"DEBUG"===U?"text-accent-text font-bold":"text-text-primary",children:"DEBUG"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1158,columnNumber:17},this),C.jsxDEV("span",{className:"INFO"===U?"text-accent-text font-bold":"text-text-primary",children:"INFO"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1159,columnNumber:17},this),C.jsxDEV("span",{className:"API"===U?"text-accent-text font-bold":"text-text-primary",children:"API"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1160,columnNumber:17},this),C.jsxDEV("span",{className:"WARNING"===U?"text-accent-text font-bold":"text-text-primary",children:"WARN"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1161,columnNumber:17},this),C.jsxDEV("span",{className:"ERROR"===U?"text-accent-text font-bold":"text-text-primary",children:"ERROR"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1162,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1157,columnNumber:15},this),C.jsxDEV("div",{className:"flex justify-between items-end mt-2",children:[C.jsxDEV("span",{className:"text-sm text-text-secondary",children:"Logging level"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1165,columnNumber:17},this),C.jsxDEV("button",{onClick:()=>{const e=!De;Ee(e),localStorage.setItem("logsVisible",e.toString())},className:"btn bg-dark-tertiary text-text-primary hover:bg-dark-hover whitespace-nowrap py-1.5 text-sm font-bold px-4",children:De?"Hide Logs":"View Logs"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1166,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1164,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1134,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1122,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:437,columnNumber:7},this),C.jsxDEV("div",{className:"overflow-hidden transition-all duration-300 ease-in-out mt-4 "+(De?"max-h-[600px] opacity-100":"max-h-0 opacity-0"),children:C.jsxDEV("div",{className:"card p-4",children:[C.jsxDEV("h3",{className:"text-sm font-semibold text-text-primary mb-3 flex items-center justify-center",children:["Application Logs",o?.total_lines&&C.jsxDEV("span",{className:"text-xs text-text-muted ml-auto",children:["Showing last 500 of ",o.total_lines," lines"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1188,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1184,columnNumber:11},this),C.jsxDEV("div",{className:"bg-dark-primary rounded-lg p-3 overflow-auto max-h-96 font-mono text-xs",children:o?.logs&&o.logs.length>0?C.jsxDEV("div",{className:"space-y-0.5",children:o.logs.map((e,t)=>{const r="online"===N||"pixel"===N||"debug"===N?"text-black":"text-white",n=e.match(/^(.* - )(\[(?:ERROR|WARNING|INFO|API|DEBUG)\])( - .*)$/);if(n){const[,e,a,s]=n,i=a.includes("ERROR")?"text-red-400":a.includes("WARNING")?"text-yellow-400":a.includes("INFO")?"text-blue-400":a.includes("API")?"text-purple-400":a.includes("DEBUG")?"text-gray-400":r;return C.jsxDEV("div",{className:r,children:[e,C.jsxDEV("span",{className:i,children:a},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1216,columnNumber:33},this),s]},t,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1215,columnNumber:23},this)}return C.jsxDEV("div",{className:r,children:e},t,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1223,columnNumber:21},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1195,columnNumber:15},this):C.jsxDEV("div",{className:"text-text-muted text-center py-8",children:"No logs available"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1230,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1193,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1183,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1178,columnNumber:7},this),pe&&C.jsxDEV("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>fe(!1),children:C.jsxDEV("div",{className:"card p-6 max-w-xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[C.jsxDEV("h2",{className:"text-xl font-bold text-text-primary",children:"Cookie Source Options"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1243,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>fe(!1),className:"text-text-muted hover:text-text-primary transition-colors",children:C.jsxDEV("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1249,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1248,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1244,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1242,columnNumber:13},this),C.jsxDEV("div",{className:"space-y-4 text-sm text-text-secondary",children:[C.jsxDEV("div",{className:"space-y-3",children:[C.jsxDEV("div",{className:"bg-dark-tertiary p-3 rounded-lg",children:[C.jsxDEV("h3",{className:"font-semibold text-text-primary mb-2",children:"cookies.txt (Default)"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1256,columnNumber:19},this),C.jsxDEV("p",{className:"mb-2",children:"Uses a manually exported cookies.txt file from your browser."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1257,columnNumber:19},this),C.jsxDEV("p",{className:"text-xs text-text-muted",children:[C.jsxDEV("strong",{children:"How to use:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1258,columnNumber:58},this),' Export cookies from your browser using an extension like "Get cookies.txt" while logged into YouTube, then save the file as ',C.jsxDEV("code",{className:"bg-dark-primary px-1 rounded",children:"cookies.txt"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1258,columnNumber:211},this)," in the backend directory."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1258,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1255,columnNumber:17},this),C.jsxDEV("div",{className:"bg-dark-tertiary p-3 rounded-lg",children:[C.jsxDEV("h3",{className:"font-semibold text-text-primary mb-2",children:"Firefox Browser"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1262,columnNumber:19},this),C.jsxDEV("p",{className:"mb-2",children:"Automatically extracts cookies directly from your Firefox browser profile."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1263,columnNumber:19},this),C.jsxDEV("p",{className:"text-xs text-text-muted mb-2",children:C.jsxDEV("strong",{children:"Requirements:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1264,columnNumber:63},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1264,columnNumber:19},this),C.jsxDEV("ul",{className:"text-xs text-text-muted list-disc list-inside space-y-1 ml-2",children:[C.jsxDEV("li",{children:["Firefox profile mounted to ",C.jsxDEV("code",{className:"bg-dark-primary px-1 rounded",children:"/firefox_profile"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1266,columnNumber:52},this)," in container"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1266,columnNumber:21},this),C.jsxDEV("li",{children:"YouTube must be logged in via Firefox"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1267,columnNumber:21},this),C.jsxDEV("li",{children:["Configure volume mount: ",C.jsxDEV("code",{className:"bg-dark-primary px-1 rounded",children:"/path/to/firefox/.mozilla/firefox:/firefox_profile:ro"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1268,columnNumber:49},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1268,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1265,columnNumber:19},this),C.jsxDEV("p",{className:"text-xs text-yellow-400 mt-2",children:"⚠️ If browser extraction fails, automatically falls back to cookies.txt"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1270,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1261,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1254,columnNumber:15},this),C.jsxDEV("p",{className:"text-xs text-text-muted mt-4",children:"Cookies allow yt-dlp to download age-restricted videos and avoid rate limiting. Choose the method that works best for your setup."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1274,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1253,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1241,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1240,columnNumber:9},this),ge&&C.jsxDEV("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>je(!1),children:C.jsxDEV("div",{className:"card p-6 max-w-xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[C.jsxDEV("h2",{className:"text-xl font-bold text-text-primary",children:"What is SponsorBlock?"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1287,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>je(!1),className:"text-text-muted hover:text-text-primary transition-colors",children:C.jsxDEV("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1293,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1292,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1288,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1286,columnNumber:13},this),C.jsxDEV("div",{className:"space-y-4 text-sm text-text-secondary",children:[C.jsxDEV("div",{className:"space-y-3",children:[C.jsxDEV("div",{className:"bg-dark-tertiary p-3 rounded-lg",children:[C.jsxDEV("h3",{className:"font-semibold text-text-primary mb-1",children:"Remove Sponsors"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1300,columnNumber:19},this),C.jsxDEV("p",{children:'Removes paid promotions and sponsorship segments from videos (e.g., "This video is sponsored by...").'},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1301,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1299,columnNumber:17},this),C.jsxDEV("div",{className:"bg-dark-tertiary p-3 rounded-lg",children:[C.jsxDEV("h3",{className:"font-semibold text-text-primary mb-1",children:"Remove Self-Promo"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1305,columnNumber:19},this),C.jsxDEV("p",{children:"Removes unpaid self-promotion segments like merchandise, Patreon links, or references to other channels owned by the creator."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1306,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1304,columnNumber:17},this),C.jsxDEV("div",{className:"bg-dark-tertiary p-3 rounded-lg",children:[C.jsxDEV("h3",{className:"font-semibold text-text-primary mb-1",children:"Remove Like/Sub Requests"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1310,columnNumber:19},this),C.jsxDEV("p",{children:"Removes interaction reminders where creators ask you to like, subscribe, or click the notification bell."},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1311,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1309,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1298,columnNumber:15},this),C.jsxDEV("p",{className:"text-xs text-text-muted mt-4",children:["Data provided by ",C.jsxDEV("a",{href:"https://sponsor.ajay.app",target:"_blank",rel:"noopener noreferrer",className:"text-accent-text hover:underline",children:"SponsorBlock API"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1316,columnNumber:34},this)," - a community-driven project."]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1315,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1297,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1285,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1284,columnNumber:9},this),ke&&Ae&&C.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[C.jsxDEV("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>Ce(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1326,columnNumber:11},this),C.jsxDEV("div",{className:"relative bg-dark-secondary border border-dark-border-light rounded-lg shadow-xl max-w-md w-full",children:[C.jsxDEV("div",{className:"px-6 py-4 border-b border-dark-border",children:C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Database Maintenance"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1329,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1328,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4 space-y-4",children:[Ae.orphaned_cleaned>0&&C.jsxDEV("div",{className:"bg-dark-tertiary border border-dark-border rounded-lg p-3",children:C.jsxDEV("div",{className:"text-sm text-text-primary",children:["✓ Auto-cleaned ",Ae.orphaned_cleaned," orphaned item",1!==Ae.orphaned_cleaned?"s":""]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1335,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1334,columnNumber:17},this),C.jsxDEV("p",{className:"text-sm text-text-secondary",children:"Choose a maintenance option:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1341,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>{Ce(!1),Pe(!0)},className:"w-full p-4 bg-dark-tertiary hover:bg-dark-hover border border-dark-border-light rounded-lg text-left transition-colors",children:C.jsxDEV("div",{className:"flex items-center justify-between",children:[C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"font-medium text-text-primary",children:"Review Videos Not Found"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1350,columnNumber:21},this),C.jsxDEV("div",{className:"text-xs text-text-secondary mt-1",children:[Ae.not_found_videos?.length||0," video",1!==Ae.not_found_videos?.length?"s":""," removed from YouTube"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1351,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1349,columnNumber:19},this),C.jsxDEV("div",{className:"text-2xl text-text-muted",children:"→"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1355,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1348,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1344,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>{Ce(!1),Le(!0)},className:"w-full p-4 bg-dark-tertiary hover:bg-dark-hover border border-dark-border-light rounded-lg text-left transition-colors",children:C.jsxDEV("div",{className:"flex items-center justify-between",children:[C.jsxDEV("div",{children:[C.jsxDEV("div",{className:"font-medium text-text-primary",children:"Shrink Database"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1366,columnNumber:21},this),C.jsxDEV("div",{className:"text-xs text-text-secondary mt-1",children:[Ae.deletable_channels?.length||0," deleted channel",1!==Ae.deletable_channels?.length?"s":""," can be purged"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1367,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1365,columnNumber:19},this),C.jsxDEV("div",{className:"text-2xl text-text-muted",children:"→"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1371,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1364,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1360,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1331,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4 border-t border-dark-border",children:C.jsxDEV("button",{onClick:()=>Ce(!1),className:"btn btn-secondary w-full",children:"Close"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1376,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1375,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1327,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1325,columnNumber:9},this),Se&&Ae&&C.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[C.jsxDEV("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>Pe(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1387,columnNumber:11},this),C.jsxDEV("div",{className:"relative bg-dark-secondary border border-dark-border-light rounded-lg shadow-xl max-w-2xl w-full",children:[C.jsxDEV("div",{className:"px-6 py-4 border-b border-dark-border",children:C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Videos Not Found on YouTube"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1390,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1389,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4",children:0===Ae.not_found_videos?.length?C.jsxDEV("p",{className:"text-sm text-text-secondary",children:"✓ No videos to remove"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1394,columnNumber:17},this):C.jsxDEV(C.Fragment,{children:[C.jsxDEV("p",{className:"text-sm text-text-secondary mb-3",children:"Select videos to remove from database:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1397,columnNumber:19},this),C.jsxDEV("div",{className:"max-h-96 overflow-y-auto space-y-2",children:Ae.not_found_videos.map(e=>C.jsxDEV("label",{className:"flex items-start gap-3 p-3 bg-dark-tertiary hover:bg-dark-hover border border-dark-border rounded-lg cursor-pointer",children:[C.jsxDEV("input",{type:"checkbox",checked:Te.includes(e.id),onChange:t=>{t.target.checked?Ie([...Te,e.id]):Ie(Te.filter(t=>t!==e.id))},className:"mt-1"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1401,columnNumber:25},this),C.jsxDEV("div",{className:"flex-1 min-w-0",children:[C.jsxDEV("div",{className:"font-medium text-text-primary truncate",children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1414,columnNumber:27},this),C.jsxDEV("div",{className:"text-xs text-text-secondary",children:["Channel: ",e.channel_name]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1415,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1413,columnNumber:25},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1400,columnNumber:23},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1398,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1396,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1392,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4 border-t border-dark-border flex gap-3",children:[C.jsxDEV("button",{onClick:()=>Pe(!1),className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1424,columnNumber:15},this),Ae.not_found_videos?.length>0&&C.jsxDEV("button",{onClick:async()=>{if(0!==Te.length){Be(!0);try{const e=await fetch("/api/queue/remove-not-found",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({video_ids:Te})}),t=await e.json();if(t.error)return void h(t.error,"error");h(`Removed ${t.removed} video${1!==t.removed?"s":""}`,"success"),Pe(!1),Ce(!1),Ie([]),Me(null)}catch(e){h("Failed to remove videos","error")}finally{Be(!1)}}else h("No videos selected","warning")},disabled:0===Te.length||ze,className:"btn bg-red-600 hover:bg-red-700 text-white flex-1 disabled:opacity-50",children:ze?"Removing...":`Remove Selected (${Te.length})`},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1428,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1423,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1388,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1386,columnNumber:9},this),_e&&Ae&&C.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[C.jsxDEV("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>Le(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1444,columnNumber:11},this),C.jsxDEV("div",{className:"relative bg-dark-secondary border border-dark-border-light rounded-lg shadow-xl max-w-2xl w-full",children:[C.jsxDEV("div",{className:"px-6 py-4 border-b border-dark-border",children:C.jsxDEV("h3",{className:"text-lg font-semibold text-text-primary",children:"Shrink Database"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1447,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1446,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4",children:0===Ae.deletable_channels?.length?C.jsxDEV("p",{className:"text-sm text-text-secondary",children:"✓ No channels to purge"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1451,columnNumber:17},this):C.jsxDEV(C.Fragment,{children:[C.jsxDEV("p",{className:"text-sm text-text-secondary mb-3",children:"Select deleted channels to permanently remove:"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1454,columnNumber:19},this),C.jsxDEV("div",{className:"max-h-96 overflow-y-auto space-y-2",children:Ae.deletable_channels.map(e=>C.jsxDEV("label",{className:"flex items-start gap-3 p-3 bg-dark-tertiary hover:bg-dark-hover border border-dark-border rounded-lg cursor-pointer",children:[C.jsxDEV("input",{type:"checkbox",checked:Re.includes(e.id),onChange:t=>{t.target.checked?Fe([...Re,e.id]):Fe(Re.filter(t=>t!==e.id))},className:"mt-1"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1458,columnNumber:25},this),C.jsxDEV("div",{className:"flex-1 min-w-0",children:[C.jsxDEV("div",{className:"font-medium text-text-primary truncate",children:e.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1471,columnNumber:27},this),C.jsxDEV("div",{className:"text-xs text-text-secondary",children:[e.video_count," video",1!==e.video_count?"s":""," • No library videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1472,columnNumber:27},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1470,columnNumber:25},this)]},e.id,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1457,columnNumber:23},this))},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1455,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1453,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1449,columnNumber:13},this),C.jsxDEV("div",{className:"px-6 py-4 border-t border-dark-border flex gap-3",children:[C.jsxDEV("button",{onClick:()=>Le(!1),className:"btn btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1481,columnNumber:15},this),Ae.deletable_channels?.length>0&&C.jsxDEV("button",{onClick:async()=>{if(0!==Re.length){Be(!0);try{const e=await fetch("/api/queue/purge-channels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_ids:Re})}),t=await e.json();if(t.error)return void h(t.error,"error");h(`Purged ${t.purged_channels} channel${1!==t.purged_channels?"s":""}, freed ${t.videos_removed} video records`,"success"),Le(!1),Ce(!1),Fe([]),Me(null)}catch(e){h("Failed to purge channels","error")}finally{Be(!1)}}else h("No channels selected","warning")},disabled:0===Re.length||ze,className:"btn bg-red-600 hover:bg-red-700 text-white flex-1 disabled:opacity-50",children:ze?"Purging...":`Purge Selected (${Re.length})`},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1485,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1480,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1445,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:1443,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:435,columnNumber:5},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Settings.jsx",lineNumber:434,columnNumber:5},this)}er.Down,er.Right,er.Up,er.Left;const gn=c.getComponent("Button");let jn=!1;function Dn(e){jn||(c.registerComponent("TheaterButton",class extends gn{constructor(e,t){super(e,t),this.controlText("Theater mode"),this.addClass("vjs-theater-button"),this.onToggleCallback=t?.onToggle,"true"===localStorage.getItem("theaterMode")&&this.addClass("vjs-theater-mode-active")}buildCSSClass(){return`vjs-theater-button ${super.buildCSSClass()}`}handleClick(){const e=!("true"===localStorage.getItem("theaterMode"));localStorage.setItem("theaterMode",String(e)),e?this.addClass("vjs-theater-mode-active"):this.removeClass("vjs-theater-mode-active"),this.onToggleCallback&&this.onToggleCallback(e)}createEl(){const e=super.createEl("button",{className:this.buildCSSClass()}),t=c.dom.createEl("span",{className:"vjs-icon-placeholder",innerHTML:'\n          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n            <rect x="3" y="6" width="18" height="12" rx="1"></rect>\n            <polyline points="9,9 7,12 9,15" class="bracket-left"></polyline>\n            <polyline points="15,9 17,12 15,15" class="bracket-right"></polyline>\n          </svg>\n        '});return e.appendChild(t),e}}),jn=!0)}let En=!1;function Vn({video:e,videoRef:r,saveProgress:n=!0,onEnded:a=null,onWatched:s=null,updateVideoMutation:i=null,isTheaterMode:o=!1,setIsTheaterMode:l=null,persistPlayer:d=!1}){const u=t.useRef(null),m=t.useRef(null),p=t.useRef(!1),f=t.useRef(e),b=t.useRef(i),h=t.useRef(0);return t.useEffect(()=>{f.current=e,b.current=i},[e,i]),t.useEffect(()=>{if(!r.current||!e)return;const t=r.current;if(!t.tagName||"VIDEO"!==t.tagName&&"AUDIO"!==t.tagName)return void console.warn("[useVideoJsPlayer] Invalid element type:",t.tagName);if(d&&u.current)return void console.log("[useVideoJsPlayer] Persistent player exists, skipping reinitialization");console.log("[useVideoJsPlayer] Initializing new video.js player");const{isMobile:i,isIOS:o}=(()=>{const e=/iPhone|iPad|iPod/i.test(navigator.userAgent);return{isMobile:(()=>{const e=window.matchMedia("(pointer: coarse)").matches,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return e&&t})(),isIOS:e}})();En||(Dn(),En=!0);const N=c(r.current,{controls:!0,fluid:!0,responsive:!0,playbackRates:[.25,.5,.75,1,1.25,1.5,1.75,2],preload:"metadata",poster:i&&e.thumb_url||""});u.current=N,console.log("[useVideoJsPlayer] Player initialized successfully. Player ID:",N.id());try{const e=N.controlBar.addChild("TheaterButton",{onToggle:e=>{l&&l(e)}}),t=N.controlBar.getChild("fullscreenToggle");if(t){const r=N.controlBar.el();Array.from(r.children).indexOf(t.el());r.insertBefore(e.el(),t.el()),console.log("[useVideoJsPlayer] Theater button positioned before fullscreen")}}catch(V){console.error("[useVideoJsPlayer] Error adding theater button:",V)}if(e.file_path){const t=Pe(e.file_path);t?(console.log("[useVideoJsPlayer] Setting initial video source:",t),N.src({src:t,type:"video/mp4"}),N.one("loadedmetadata",()=>{try{const t=N.duration(),r=e.progress_sec&&e.progress_sec>0&&e.progress_sec<.95*t?e.progress_sec:0;r>0&&console.log(`[useVideoJsPlayer] Restoring progress to ${r}s`),N.currentTime(r),i||(N.load(),setTimeout(()=>{try{N.hasStarted(!0)}catch(e){console.warn("[useVideoJsPlayer] Failed to mark as started:",e)}},100))}catch(t){console.warn("[useVideoJsPlayer] Failed to restore progress:",t)}})):console.warn("[useVideoJsPlayer] No video source found for:",e.file_path)}o&&(N.tech(!0).el().setAttribute("playsinline","true"),N.tech(!0).el().setAttribute("webkit-playsinline","true"));const x=()=>{if(n&&b.current&&f.current&&N)try{const e=Math.floor(N.currentTime());console.log(`[useVideoJsPlayer] Saving progress immediately: ${e}s`),b.current.mutate({id:f.current.id,data:{playback_seconds:e}})}catch(V){console.warn("[useVideoJsPlayer] Failed to save progress:",V)}},v=e=>{try{if(!N)return;const t=Date.now();if(t-h.current<750)return void console.log("[useVideoJsPlayer] Seek ignored - cooldown active");if(N.readyState()<1)return void console.warn("[useVideoJsPlayer] Cannot seek - metadata not loaded");const r=N.currentTime(),n=N.duration();if(!n||isNaN(n)||isNaN(r)||0===n)return;if(N.seeking&&N.seeking())return void console.log("[useVideoJsPlayer] Seek ignored - already seeking");h.current=t;const a=Math.max(0,Math.min(n,e));console.log(`[useVideoJsPlayer] Seeking: ${r.toFixed(1)}s → ${a.toFixed(1)}s`),N.currentTime(a)}catch(V){console.error("[useVideoJsPlayer] Seek error:",V)}},y=e=>{if(!N)return;const t=N.currentTime(),r=N.duration();if(!r||isNaN(r)||isNaN(t))return;const n=e>0?Math.min(r,t+e):Math.max(0,t+e);v(n)},g=e=>{if("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)return;const t=e.key.toLowerCase();switch(t){case" ":case"k":e.preventDefault(),N.paused()?N.play():N.pause();break;case"arrowleft":case"j":e.preventDefault(),y(-10);break;case"arrowright":case"l":e.preventDefault(),y(10);break;case"f":e.preventDefault(),N.isFullscreen()?N.exitFullscreen():N.requestFullscreen();break;case"m":e.preventDefault(),N.muted(!N.muted());break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.preventDefault();const r=N.duration();if(r&&!isNaN(r)){const e=parseInt(t)/10;v(r*e)}}};document.addEventListener("keydown",g);let j=null;i&&(j=(e=>{console.log("Initializing YouTube-style touch controls");let t=0;const r=r=>{const n=Date.now(),a=n-t<250;e.isFullscreen()?a&&(r.preventDefault(),r.stopPropagation()):a&&(r.preventDefault(),e.requestFullscreen()),t=n},n=e.el().querySelector("video");n.addEventListener("touchend",r);const a=document.createElement("div");a.className="vjs-touch-overlay",a.style.cssText="\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 60px;\n    display: none;\n    z-index: 150;\n    -webkit-tap-highlight-color: transparent;\n    pointer-events: auto !important;\n  ";const s=(e=100)=>`\n    position: absolute;\n    background: rgba(255, 255, 255, 0.15);\n    backdrop-filter: blur(12px);\n    -webkit-backdrop-filter: blur(12px);\n    border: 2px solid rgba(255, 255, 255, 0.25);\n    border-radius: 50%;\n    width: ${e}px;\n    height: ${e}px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    opacity: 0;\n    transform: scale(0.9);\n    transition: opacity 0.2s ease, transform 0.2s ease;\n    pointer-events: auto !important;\n    cursor: pointer;\n    z-index: 200;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n  `,i=document.createElement("button");i.className="vjs-mobile-btn",i.innerHTML='\n    <svg viewBox="0 0 24 24" fill="white" style="width: 40px; height: 40px;">\n      <path d="M11.5 12L20 18V6M11 18V6l-8.5 6"/>\n    </svg>\n  ',i.style.cssText=s(110)+"left: 20%; top: 50%; transform: translate(-50%, -50%) scale(0.9);";const o=document.createElement("button");o.className="vjs-mobile-btn",o.innerHTML='\n    <svg class="play-icon" viewBox="0 0 24 24" fill="white" style="width: 50px; height: 50px;">\n      <polygon points="8 5 19 12 8 19 8 5"/>\n    </svg>\n    <svg class="pause-icon" viewBox="0 0 24 24" fill="white" style="width: 50px; height: 50px; display: none;">\n      <rect x="6" y="4" width="4" height="16" rx="2"/>\n      <rect x="14" y="4" width="4" height="16" rx="2"/>\n    </svg>\n  ',o.style.cssText=s(130)+"left: 50%; top: 50%; transform: translate(-50%, -50%) scale(0.9);";const l=document.createElement("button");l.className="vjs-mobile-btn",l.innerHTML='\n    <svg viewBox="0 0 24 24" fill="white" style="width: 40px; height: 40px;">\n      <path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"/>\n    </svg>\n  ',l.style.cssText=s(110)+"right: 20%; top: 50%; transform: translate(50%, -50%) scale(0.9);";const d=document.createElement("button");d.className="vjs-mobile-btn",d.innerHTML='\n    <svg viewBox="0 0 24 24" fill="white" style="width: 32px; height: 32px;">\n      <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n    </svg>\n  ',d.style.cssText=s(100)+"left: 50%; top: 50px; transform: translate(-50%, 0) scale(0.9);",a.appendChild(i),a.appendChild(o),a.appendChild(l),a.appendChild(d);let c=null,u=0,m=null,p=null,f=0;const b=e=>{[i,o,l,d].forEach(e=>{e.style.opacity="0",e.style.transform=e===i?"translate(-50%, -50%) scale(0.9)":e===l?"translate(50%, -50%) scale(0.9)":e===d?"translate(-50%, 0) scale(0.9)":"translate(-50%, -50%) scale(0.9)"}),e.style.opacity="1",e.style.transform=e===i?"translate(-50%, -50%) scale(1)":e===l?"translate(50%, -50%) scale(1)":e===d?"translate(-50%, 0) scale(1)":"translate(-50%, -50%) scale(1)",c=e,p&&clearTimeout(p),p=setTimeout(()=>{e.style.opacity="0",e.style.transform=e===i?"translate(-50%, -50%) scale(0.9)":e===l?"translate(50%, -50%) scale(0.9)":e===d?"translate(-50%, 0) scale(0.9)":"translate(-50%, -50%) scale(0.9)",c=null},1500)},h=()=>{const t=o.querySelector(".play-icon"),r=o.querySelector(".pause-icon");e.paused()?(t.style.display="block",r.style.display="none"):(t.style.display="none",r.style.display="block")},N=t=>{t.preventDefault();const r=t.changedTouches[0],n=a.getBoundingClientRect(),s=r.clientX-n.left,p=r.clientY-n.top,N=n.width,x=n.height,v=Date.now(),y=v-u<250;let g=null,j=null,D=null;p<.2*x?(g="exit",j=d,D=()=>e.exitFullscreen()):s<.3*N?(g="rewind",j=i,D=()=>{try{if(!e)return;const t=Date.now();if(t-f<750)return void console.log("[MobileControls] Rewind ignored - cooldown active");if(e.readyState()<1)return void console.warn("[MobileControls] Cannot seek - metadata not loaded");const r=e.currentTime(),n=e.duration();if(isNaN(r)||isNaN(n)||0===n)return;if(e.seeking&&e.seeking())return;f=t;const a=Math.max(0,r-10);e.currentTime(a)}catch(V){console.error("[MobileControls] Rewind error:",V)}}):s>.7*N?(g="forward",j=l,D=()=>{try{if(!e)return;const t=Date.now();if(t-f<750)return void console.log("[MobileControls] Forward ignored - cooldown active");if(e.readyState()<1)return void console.warn("[MobileControls] Cannot seek - metadata not loaded");const r=e.currentTime(),n=e.duration();if(isNaN(r)||isNaN(n)||0===n)return;if(e.seeking&&e.seeking())return;f=t;const a=Math.min(n,r+10);e.currentTime(a)}catch(V){console.error("[MobileControls] Forward error:",V)}}):(g="center",j=o,D=()=>{e.paused()?e.play():e.pause()}),"center"===g?(D(),h(),b(j)):y&&m===g||c===j?(D(),b(j)):b(j),u=v,m=g};return a.addEventListener("touchend",N),e.on("play",h),e.on("pause",h),e.on("playing",h),e.el().appendChild(a),e.on("fullscreenchange",()=>{e.isFullscreen()?(a.style.display="block",h()):a.style.display="none"}),()=>{p&&clearTimeout(p),n.removeEventListener("touchend",r),a.removeEventListener("touchend",N),a.parentNode&&a.parentNode.removeChild(a)}})(N));let D=0,E=-1;return N.on("error",()=>{const e=N.error();if(!e)return;if(console.error("Video.js error:",{code:e.code,message:e.message,type:e.type}),3===e.code){const e=Date.now(),t=N.currentTime(),r=e-D<5e3,n=Math.abs(t-E)<2;if(!r&&!n){D=e,E=t;const r=!N.paused(),n=Math.min(t+2,N.duration()||t+2);return console.log(`[useVideoJsPlayer] Attempting auto-recovery: ${t.toFixed(1)}s → ${n.toFixed(1)}s (was playing: ${r})`),N.error(null),N.load(),void N.one("loadedmetadata",()=>{console.log(`[useVideoJsPlayer] Auto-recovery: seeking to ${n.toFixed(1)}s`),N.currentTime(n),r&&N.play().catch(e=>{console.warn("[useVideoJsPlayer] Auto-resume failed:",e)})})}console.log(`[useVideoJsPlayer] Recovery skipped (tooSoon: ${r}, samePosition: ${n})`)}let t="Video playback error";switch(e.code){case 1:t="Video loading was aborted";break;case 2:t="Network error occurred while loading video";break;case 3:t="Video decoding failed. The file may be corrupted";break;case 4:t="Video format not supported by your browser",o&&(t+=". On iOS, try opening in Safari");break;default:t=e.message||"Unknown video error"}console.error("User-facing error:",t)}),n&&b.current?(N.on("seeked",()=>{x()}),N.on("timeupdate",()=>{if(!N||N.seeking())return;const e=N.currentTime(),t=Math.floor(e);m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{b.current&&f.current&&b.current.mutate({id:f.current.id,data:{playback_seconds:t}})},3e3)}),N.on("pause",()=>{x()}),N.on("loadedmetadata",()=>{const t=N.duration(),r=e.playback_seconds||0;r>0&&r<t-5&&(console.log(`Restoring playback position: ${r}s`),N.currentTime(r))})):N.on("loadedmetadata",()=>{console.log("Starting video from beginning (playlist mode)"),N.currentTime(0)}),N.on("timeupdate",()=>{if(p.current)return;const e=N.currentTime(),t=N.duration();t>0&&e/t>=.9&&(p.current=!0,s&&s())}),a&&N.on("ended",()=>{a()}),()=>{d?m.current&&clearTimeout(m.current):(m.current&&clearTimeout(m.current),j&&j(),document.removeEventListener("keydown",g),u.current&&(console.log("[useVideoJsPlayer] Disposing player"),u.current.dispose(),u.current=null))}},[e?.id]),t.useEffect(()=>{const e=()=>{if(u.current&&!u.current.isDisposed()&&n&&b.current&&f.current)try{const e=Math.floor(u.current.currentTime());console.log(`[useVideoJsPlayer] Saving progress on page unload: ${e}s`),b.current.mutate({id:f.current.id,data:{playback_seconds:e}})}catch(e){console.warn("[useVideoJsPlayer] Failed to save progress on unload:",e)}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[n]),t.useEffect(()=>()=>{console.log("[useVideoJsPlayer] Component unmounting, cleaning up player"),u.current&&!u.current.isDisposed()&&(console.log("[useVideoJsPlayer] Pausing and disposing player on unmount"),u.current.pause(),u.current.dispose(),u.current=null)},[]),t.useEffect(()=>{u.current&&function(e,t){const r=e.controlBar.getChild("TheaterButton");r&&(t?r.addClass("vjs-theater-mode-active"):r.removeClass("vjs-theater-mode-active"))}(u.current,o)},[o]),u}function wn(){const{videoId:e}=N(),n=m(),a=h(),{data:s,isLoading:i}=r({queryKey:["video",o=e],queryFn:()=>B.getVideo(o),enabled:!!o});var o;const l=J(),d=Y(),{showNotification:c}=A(),u=t.useRef(null),f=t.useRef(null),b=t.useRef(c),x=t.useRef(s),[v,y]=t.useState(!1),[g,j]=t.useState(!1),[D,E]=t.useState(()=>"true"===localStorage.getItem("theaterMode"));t.useEffect(()=>{b.current=c,x.current=s});const V=t.useCallback(()=>{s?.watched||l.mutateAsync({id:s.id,data:{watched:!0}}).then(()=>{b.current("Video marked as watched","success")}).catch(e=>{console.error("Error marking video as watched:",e),b.current("Failed to mark as watched","error")})},[s?.id,s?.watched,l]),w=Vn({video:s,videoRef:u,saveProgress:!0,onEnded:null,onWatched:V,updateVideoMutation:l,isTheaterMode:D,setIsTheaterMode:E});if(t.useEffect(()=>{if(w.current&&s?.file_path)try{const e=w.current;if(e.isDisposed&&e.isDisposed())return void console.error("[Player] ERROR: Attempted to update source on disposed player!");const t=Pe(s.file_path);if(!t)return void console.error("[Player] ERROR: No video source for:",s.file_path);console.log("[Player] ===== SETTING VIDEO SOURCE ====="),console.log("[Player] Video:",s.title),console.log("[Player] Video ID:",s.id),console.log("[Player] Source path:",t),console.log("[Player] Player state before update:",{paused:e.paused(),currentTime:e.currentTime(),duration:e.duration()}),e.src({src:t,type:"video/mp4"}),console.log("[Player] Source set successfully to:",t);const r=()=>{const t=e.error();t&&(console.error("[Player] Video playback error:",{code:t.code,message:t.message,type:t.type}),b.current("Failed to load video","error"))};return e.on("error",r),e.one("loadedmetadata",()=>{console.log("[Player] Video metadata loaded:",{title:s.title,duration:e.duration(),videoWidth:e.videoWidth(),videoHeight:e.videoHeight()})}),()=>{e.off("error",r)}}catch(e){console.error("[Player] FATAL ERROR setting video source:",e),console.error("[Player] Error stack:",e.stack),console.error("[Player] Video data:",s)}else console.log("[Player] Skipping source update - no player or no video file path")},[w,s?.file_path,s?.id]),i)return C.jsxDEV(ce,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:150,columnNumber:12},this);if(!s)return C.jsxDEV("div",{className:"text-center py-12",children:[C.jsxDEV("p",{className:"text-gray-400 text-lg",children:"Video not found"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:156,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>n(-1),className:"btn btn-primary mt-4",children:"Go Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:157,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:155,columnNumber:7},this);if(!s.file_path||"library"!==s.status)return C.jsxDEV("div",{className:"text-center py-12",children:[C.jsxDEV("p",{className:"text-gray-400 text-lg",children:"Video not downloaded yet"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:167,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>n(-1),className:"btn btn-primary mt-4",children:"Go Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:168,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:166,columnNumber:7},this);const k=()=>{const e=a.state?.from||`/channel/${s.channel_id}/library`;n(e)},S=async()=>{try{await l.mutateAsync({id:s.id,data:{watched:!s.watched}}),c(s.watched?"Marked as unwatched":"Marked as watched","success")}catch(e){c(e.message,"error")}};return C.jsxDEV("div",{className:"space-y-4 animate-fade-in pt-6 md:pt-8",children:[C.jsxDEV("div",{className:"flex flex-col md:flex-row md:gap-4 md:items-start",children:[C.jsxDEV("div",{className:"hidden md:flex md:flex-col md:gap-3",children:[C.jsxDEV("button",{onClick:k,className:"icon-btn hover:bg-accent hover:border-accent",title:"Back","aria-label":"Go back to previous page",children:C.jsxDEV(De,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:220,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:214,columnNumber:11},this),C.jsxDEV("button",{ref:f,onClick:()=>j(!0),className:"icon-btn hover:bg-accent hover:border-accent",title:"Add to playlist","aria-label":"Add video to playlist",children:C.jsxDEV(Ee,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:230,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:223,columnNumber:11},this),C.jsxDEV("button",{onClick:S,className:"icon-btn hover:bg-accent hover:border-accent "+(s.watched?"bg-accent":""),title:s.watched?"Mark as unwatched":"Mark as watched","aria-label":s.watched?"Mark video as unwatched":"Mark video as watched",children:C.jsxDEV(Ve,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:239,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:233,columnNumber:11},this),C.jsxDEV("button",{onClick:()=>y(!0),className:"icon-btn hover:bg-red-600 hover:border-red-700",title:"Delete video","aria-label":"Delete video permanently",children:C.jsxDEV(ve,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:248,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:242,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:213,columnNumber:9},this),C.jsxDEV("div",{className:"md:max-w-[83.333%] transition-all duration-300 ease-in-out "+(D?"md:w-[83.333%]":"md:w-[60%]"),style:{willChange:"width"},children:[C.jsxDEV("div",{className:"bg-black rounded-xl shadow-card-hover relative flex items-center justify-center "+(D?"":"max-h-[600px]"),children:C.jsxDEV("video",{ref:u,className:"video-js vjs-big-play-centered max-w-full h-auto block mx-auto",playsInline:!0,preload:"auto"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:259,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:256,columnNumber:11},this),C.jsxDEV("div",{className:"mt-4 space-y-3",children:[C.jsxDEV("h1",{className:"text-2xl font-bold text-text-primary leading-tight",children:s.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:269,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-center gap-3 text-sm text-text-secondary",children:[C.jsxDEV(p,{to:`/channel/${s.channel_id}/library`,className:"hover:text-text-primary transition-colors font-medium",children:s.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:274,columnNumber:15},this),C.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:280,columnNumber:15},this),C.jsxDEV("span",{children:_e(s.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:281,columnNumber:15},this),C.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:282,columnNumber:15},this),C.jsxDEV("span",{children:s.upload_date?new Date(s.upload_date.slice(0,4),s.upload_date.slice(4,6)-1,s.upload_date.slice(6,8)).toLocaleDateString():"Unknown date"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:283,columnNumber:15},this),s.watched&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:294,columnNumber:19},this),C.jsxDEV("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-accent/20 border border-accent/40 text-accent-text font-semibold",children:[C.jsxDEV(xe,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:296,columnNumber:21},this),"Watched"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:295,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:293,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:273,columnNumber:13},this),C.jsxDEV("div",{className:"flex md:hidden gap-3 mt-4",children:[C.jsxDEV("button",{onClick:k,className:"icon-btn hover:bg-accent hover:border-accent",title:"Back","aria-label":"Go back to previous page",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"15 18 9 12 15 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:312,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:311,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:305,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>j(!0),className:"icon-btn hover:bg-accent hover:border-accent",title:"Add to playlist","aria-label":"Add video to playlist",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M12 5v14m-7-7h14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:323,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:322,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:316,columnNumber:15},this),C.jsxDEV("button",{onClick:S,className:"icon-btn hover:bg-accent hover:border-accent "+(s.watched?"bg-accent":""),title:s.watched?"Mark as unwatched":"Mark as watched","aria-label":s.watched?"Mark video as unwatched":"Mark video as watched",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:334,columnNumber:19},this),C.jsxDEV("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:335,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:333,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:327,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>y(!0),className:"icon-btn hover:bg-red-600 hover:border-red-700",title:"Delete video","aria-label":"Delete video permanently",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"3 6 5 6 21 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:346,columnNumber:19},this),C.jsxDEV("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:347,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:345,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:339,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:304,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:268,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:253,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:211,columnNumber:7},this),C.jsxDEV(Ae,{isOpen:v,onClose:()=>y(!1),onConfirm:async()=>{try{c("Deleting video...","info",{persistent:!0}),await d.mutateAsync(s.id),c("Video deleted","success"),y(!1),n(-1)}catch(e){c(e.message||"Failed to delete video","error")}},title:"Delete Video",message:`Are you sure you want to delete "${s.title}"? This will permanently remove the video file from your system.`,confirmText:"Delete",cancelText:"Cancel",isDanger:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:356,columnNumber:9},this),g&&C.jsxDEV(Le,{videoId:s.id,video:s,triggerRef:f,onClose:()=>j(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:369,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Player.jsx",lineNumber:209,columnNumber:5},this)}function kn(){const{playlistId:e,categoryId:r}=N(),[n,a]=f(),s=m(),{showNotification:o}=A(),l=n.get("v"),d=t.useRef(!1),{data:c,isLoading:u}=X(e),{data:b,isLoading:h}=K({enabled:!!r}),x=t.useMemo(()=>{if(!r||!b)return[];const e=parseInt(r,10);return isNaN(e)?[]:b.filter(t=>t.category_id===e)},[r,b]),v=i({queries:x.map(e=>({queryKey:["playlist",e.id],queryFn:async()=>{const t=await fetch(`/api/playlists/${e.id}`);if(!t.ok)throw new Error("Failed to fetch playlist");return t.json()},enabled:!!r&&x.length>0}))}),y=J(),g=Y(),[j,D]=t.useState(0),[E,V]=t.useState(()=>"true"===localStorage.getItem("playlistLoop")),[w,k]=t.useState([]),[S,P]=t.useState(!1),[_,L]=t.useState(()=>"true"===localStorage.getItem("theaterMode")),[M,T]=t.useState(()=>"true"===localStorage.getItem("queueCollapsed")),[I,R]=t.useState(!1),[F,O]=t.useState(!1),$=t.useRef(null),z=t.useRef(null),B=t.useRef(null),Q=t.useRef(null),q=t.useRef(null),W=t.useRef(null),U=t.useMemo(()=>{if(e&&c?.videos)return c.videos.filter(e=>"library"===e.status&&e.file_path);if(r&&v.length>0){if(!v.every(e=>e.isSuccess))return[];const e=[];return v.forEach(t=>{if(t.data?.videos){const r=t.data.videos.filter(e=>"library"===e.status&&e.file_path);e.push(...r)}}),e}return[]},[e,r,c,v]),H=t.useMemo(()=>e&&c?.name?c.name:r&&x.length>0?x[0]?.category_name||"Category":"Playlist",[e,c,r,x]),G=t.useMemo(()=>e?u:!!r&&(h||v.some(e=>e.isLoading)),[e,r,u,h,v]),Z=t.useMemo(()=>w.length===U.length&&U.length>0?w:U.map((e,t)=>t),[w,U.length]),ee=t.useMemo(()=>{if(0===U.length)return console.log("[PlaylistPlayer] No videos available"),null;const e=Math.min(j,Z.length-1),t=Z[e];if(void 0===t||t>=U.length)return console.warn("[PlaylistPlayer] Invalid video index:",t,"falling back to first video"),U[0];return U[t]},[U,Z,j]),te=t.useMemo(()=>{if(0===U.length)return null;const e=j+1;return e>=Z.length?E?U[Z[0]]:null:U[Z[e]]},[U,Z,j,E]);t.useEffect(()=>{if(!d.current&&0!==U.length){if(l){const e=parseInt(l,10);if(!isNaN(e)){const t=U.findIndex(t=>t.id===e);if(-1!==t){const r=Z.findIndex(e=>e===t);-1!==r?(console.log(`Setting initial video: ID=${e}, actualIdx=${t}, displayIdx=${r}`),D(r)):D(t)}}}d.current=!0}},[U.length]);const re=t.useCallback(e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const e=Math.floor(Math.random()*(r+1));[t[r],t[e]]=[t[e],t[r]]}return t},[]),ne=t.useCallback(()=>{if(U.length>0){const e=U.map((e,t)=>t),t=Z[j]??0,r=e.filter(e=>e!==t),n=[t,...re(r)];k(n),D(0)}},[U,Z,j,re]),ae=t.useCallback(()=>{V(e=>{const t=!e;return localStorage.setItem("playlistLoop",t.toString()),t})},[]),se=t.useCallback(()=>{if(console.log("[PlaylistPlayer] goToNext called. currentIndex:",j,"displayOrder.length:",Z.length),0!==U.length)if(j<Z.length-1){const e=j+1;console.log("[PlaylistPlayer] Moving to next video. New index:",e),D(e)}else E?(console.log("[PlaylistPlayer] Looping back to first video"),D(0),o("Playlist restarted","info")):console.log("[PlaylistPlayer] At end of playlist, not looping")},[j,Z.length,E,U.length,o]),ie=t.useCallback(()=>{if(console.log("[PlaylistPlayer] goToPrevious called. currentIndex:",j),0!==U.length)if(j>0){const e=j-1;console.log("[PlaylistPlayer] Moving to previous video. New index:",e),D(e)}else if(E){const e=Z.length-1;console.log("[PlaylistPlayer] Looping to last video. New index:",e),D(e)}else console.log("[PlaylistPlayer] At beginning of playlist, not looping")},[j,Z.length,E,U.length]),oe=t.useCallback(e=>{try{if(console.log("[PlaylistPlayer] goToVideo called. Requested index:",e,"displayOrder.length:",Z.length),e>=0&&e<Z.length){const t=Z[e],r=U[t];console.log("[PlaylistPlayer] Switching to video at index:",e),console.log("[PlaylistPlayer] Target video:",r?.title),console.log("[PlaylistPlayer] Video ID:",r?.id),D(e)}else console.warn("[PlaylistPlayer] Invalid index requested:",e)}catch(t){console.error("[PlaylistPlayer] ERROR in goToVideo:",t),console.error("[PlaylistPlayer] Error stack:",t.stack)}},[Z.length,Z,U]),le=t.useCallback(()=>{ee&&s(e?`/playlist/${e}`:-1)},[ee,e,s]),de=t.useCallback(async()=>{if(ee)try{o("Deleting video...","info",{persistent:!0}),await g.mutateAsync(ee.id),o("Video deleted","success"),O(!1),se&&U.length>1?se():s(-1)}catch(e){o(e.message||"Failed to delete video","error")}},[ee,g,o,se,U.length,s]),ue=t.useCallback(async()=>{if(ee)try{await y.mutateAsync({id:ee.id,data:{watched:!ee.watched}}),o(ee.watched?"Marked as unwatched":"Marked as watched","success")}catch(e){o(e.message,"error")}},[ee,y,o]),me=t.useCallback(()=>{T(e=>{const t=!e;return localStorage.setItem("queueCollapsed",t.toString()),L(t),localStorage.setItem("theaterMode",t.toString()),t})},[]),pe=t.useCallback(()=>{ee?.id&&!ee?.watched&&y.mutateAsync({id:ee.id,data:{watched:!0}}).then(()=>{o("Video marked as watched","success")}).catch(e=>{console.error("Error marking video as watched:",e),o("Failed to mark as watched","error")})},[ee?.id,ee?.watched,y,o]),fe=t.useCallback(e=>{L(e),localStorage.setItem("theaterMode",e.toString()),T(e),localStorage.setItem("queueCollapsed",e.toString())},[]);t.useEffect(()=>{W.current=se},[se]);const be=Vn({video:ee,videoRef:$,saveProgress:!1,onEnded:W.current,onWatched:pe,updateVideoMutation:y,isTheaterMode:_,setIsTheaterMode:fe,persistPlayer:!0});return t.useEffect(()=>{ee&&a({v:ee.id},{replace:!0})},[ee?.id,a]),t.useEffect(()=>{const e=e=>{if("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)return;const t=be.current?.isFullscreen?.();if(!t)switch(e.key.toLowerCase()){case"n":e.preventDefault(),se(),o("Next video","info");break;case"p":e.preventDefault(),ie(),o("Previous video","info");break;case"l":e.preventDefault(),ae(),o(E?"Loop disabled":"Loop enabled","info");break;case"s":e.preventDefault(),ne(),o("Playlist shuffled","info");break;case"escape":e.preventDefault(),t?be.current?.exitFullscreen?.():le()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[se,ie,ae,ne,E,o,le,be]),t.useEffect(()=>{if(te&&Q.current){const e=Pe(te.file_path);e&&(console.log("Preloading next video:",te.title),Q.current.src=e,Q.current.load())}},[te?.id]),t.useEffect(()=>{if(ee&&be.current)if(be.current.isDisposed&&be.current.isDisposed())console.error("[PlaylistPlayer] ERROR: Attempted to update source on disposed player!");else{try{const e=Pe(ee.file_path);if(!e)return void console.error("[PlaylistPlayer] ERROR: No video source for:",ee.file_path);console.log("[PlaylistPlayer] ===== UPDATING VIDEO SOURCE ====="),console.log("[PlaylistPlayer] New video:",ee.title),console.log("[PlaylistPlayer] Video ID:",ee.id),console.log("[PlaylistPlayer] Source path:",e),console.log("[PlaylistPlayer] Player state before update:",{paused:be.current.paused(),currentTime:be.current.currentTime(),duration:be.current.duration()}),be.current.pause(),console.log("[PlaylistPlayer] Player paused"),be.current.src({src:e,type:"video/mp4"}),console.log("[PlaylistPlayer] Source set to:",e),be.current.load(),console.log("[PlaylistPlayer] Load() called")}catch(e){console.error("[PlaylistPlayer] FATAL ERROR updating video source:",e),console.error("[PlaylistPlayer] Error stack:",e.stack),console.error("[PlaylistPlayer] Current video:",ee)}be.current.one("loadedmetadata",()=>{console.log("[PlaylistPlayer] loadedmetadata event fired");const e=be.current.duration();console.log("[PlaylistPlayer] Video metadata loaded:",{title:ee.title,duration:e,videoWidth:be.current.videoWidth(),videoHeight:be.current.videoHeight()}),console.log("[PlaylistPlayer] Starting from beginning (playlist mode - ignore saved position)"),be.current.currentTime(0);/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?console.log("[PlaylistPlayer] Skipping autoplay (mobile device)"):(console.log("[PlaylistPlayer] Attempting autoplay (desktop/tablet)"),be.current.play().catch(e=>{console.warn("[PlaylistPlayer] Autoplay prevented:",e)}))}),be.current.one("error",e=>{console.error("[PlaylistPlayer] ERROR: Video error event:",e),console.error("[PlaylistPlayer] Error details:",{error:be.current.error(),src:videoSrc,readyState:be.current.readyState()})})}},[ee?.id,be]),G?C.jsxDEV(ce,{},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:536,columnNumber:12},this):ee?ee.file_path&&"library"===ee.status?C.jsxDEV("div",{className:"space-y-4 animate-fade-in pt-6 md:pt-8",children:[C.jsxDEV("div",{className:"md:max-w-[83.333%]",children:C.jsxDEV("div",{className:"flex flex-col md:flex-row gap-2 items-start transition-all duration-300 ease-in-out",children:[C.jsxDEV("div",{className:"w-full transition-all duration-300 ease-in-out "+(_?"md:w-[calc(100%-3rem)]":"md:w-[60%]"),style:{willChange:"width"},children:[C.jsxDEV("div",{className:"bg-black rounded-xl shadow-card-hover relative w-full",style:{aspectRatio:"16/9"},children:C.jsxDEV("video",{ref:$,className:"video-js vjs-big-play-centered w-full h-full",style:{objectFit:"contain"},playsInline:!0,preload:"auto"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:572,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:571,columnNumber:13},this),C.jsxDEV("div",{className:"mt-4 space-y-3",children:[C.jsxDEV("div",{className:"flex items-center gap-3",children:[C.jsxDEV("button",{onClick:le,className:"hidden md:flex icon-btn hover:bg-accent hover:border-accent flex-shrink-0",title:"Back","aria-label":"Go back to previous page",children:C.jsxDEV(De,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:591,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:585,columnNumber:15},this),C.jsxDEV("h1",{className:"text-2xl font-bold text-text-primary leading-tight",children:ee.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:594,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:583,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-center gap-3 text-sm text-text-secondary",children:[C.jsxDEV(p,{to:`/channel/${ee.channel_id}/library`,className:"hover:text-text-primary transition-colors font-medium",children:ee.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:600,columnNumber:15},this),C.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:606,columnNumber:15},this),C.jsxDEV("span",{children:_e(ee.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:607,columnNumber:15},this),C.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:608,columnNumber:15},this),C.jsxDEV("span",{children:ee.upload_date?new Date(ee.upload_date.slice(0,4),ee.upload_date.slice(4,6)-1,ee.upload_date.slice(6,8)).toLocaleDateString():"Unknown date"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:609,columnNumber:15},this),ee.watched&&C.jsxDEV(C.Fragment,{children:[C.jsxDEV("span",{children:"•"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:620,columnNumber:19},this),C.jsxDEV("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-accent/20 border border-accent/40 text-accent-text font-semibold",children:[C.jsxDEV(xe,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:622,columnNumber:21},this),"Watched"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:621,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:619,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:599,columnNumber:13},this),C.jsxDEV("div",{className:"flex md:hidden gap-3 mt-4",children:[C.jsxDEV("button",{onClick:le,className:"icon-btn hover:bg-accent hover:border-accent",title:"Back","aria-label":"Go back to previous page",children:C.jsxDEV(De,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:637,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:631,columnNumber:15},this),C.jsxDEV("button",{ref:q,onClick:()=>R(!0),className:"icon-btn hover:bg-accent hover:border-accent",title:"Add to playlist","aria-label":"Add video to playlist",children:C.jsxDEV(Ee,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:647,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:640,columnNumber:15},this),C.jsxDEV("button",{onClick:ue,className:"icon-btn hover:bg-accent hover:border-accent "+(ee.watched?"bg-accent":""),title:ee.watched?"Mark as unwatched":"Mark as watched","aria-label":ee.watched?"Mark video as unwatched":"Mark video as watched",children:C.jsxDEV(Ve,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:656,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:650,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>O(!0),className:"icon-btn hover:bg-red-600 hover:border-red-700",title:"Delete video","aria-label":"Delete video permanently",children:C.jsxDEV(ve,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:665,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:659,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>P(!0),className:"icon-btn hover:bg-accent hover:border-accent md:hidden",title:"Show queue","aria-label":"Show video queue",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("line",{x1:"8",y1:"6",x2:"21",y2:"6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:676,columnNumber:19},this),C.jsxDEV("line",{x1:"8",y1:"12",x2:"21",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:677,columnNumber:19},this),C.jsxDEV("line",{x1:"8",y1:"18",x2:"21",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:678,columnNumber:19},this),C.jsxDEV("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:679,columnNumber:19},this),C.jsxDEV("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:680,columnNumber:19},this),C.jsxDEV("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:681,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:675,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:669,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:630,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:582,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:567,columnNumber:11},this),C.jsxDEV("div",{ref:z,className:"hidden md:block transition-all duration-300 ease-in-out "+(M?"w-12":"md:w-[40%]"),style:{willChange:"width"},children:M?C.jsxDEV("div",{className:"sticky top-4 flex-shrink-0 flex flex-col gap-3",children:[C.jsxDEV("button",{onClick:me,className:"icon-btn",title:"Show queue","aria-label":"Show video queue",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"9 18 15 12 9 6"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:706,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:705,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:699,columnNumber:17},this),C.jsxDEV("button",{onClick:()=>R(!0),className:"icon-btn hover:bg-accent hover:border-accent",title:"Add to playlist","aria-label":"Add video to playlist",children:C.jsxDEV(Ee,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:717,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:711,columnNumber:17},this),C.jsxDEV("button",{onClick:ue,className:"icon-btn hover:bg-accent hover:border-accent "+(ee.watched?"bg-accent":""),title:ee.watched?"Mark as unwatched":"Mark as watched","aria-label":ee.watched?"Mark video as unwatched":"Mark video as watched",children:C.jsxDEV(Ve,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:727,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:721,columnNumber:17},this),C.jsxDEV("button",{onClick:()=>O(!0),className:"icon-btn hover:bg-red-600 hover:border-red-700",title:"Delete video","aria-label":"Delete video permanently",children:C.jsxDEV(ve,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:737,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:731,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:698,columnNumber:15},this):C.jsxDEV("div",{className:"bg-surface rounded-xl shadow-card overflow-hidden flex flex-col self-start max-h-[600px]",children:[C.jsxDEV("div",{className:"p-4 border-b border-accent/30",children:[C.jsxDEV("div",{className:"flex items-start justify-between mb-3",children:[C.jsxDEV("div",{className:"flex-1",children:[C.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary",children:H},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:746,columnNumber:21},this),C.jsxDEV("p",{className:"text-sm text-text-secondary mt-1",children:[j+1," / ",U.length," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:749,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:745,columnNumber:19},this),C.jsxDEV("button",{onClick:me,className:"icon-btn",title:"Hide queue","aria-label":"Hide video queue",children:C.jsxDEV(De,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:759,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:753,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:744,columnNumber:17},this),C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("button",{onClick:ie,disabled:0===j&&!E,className:"icon-btn hover:bg-accent hover:border-accent disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous video (P)","aria-label":"Go to previous video",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("path",{d:"M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:773,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:772,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:765,columnNumber:19},this),C.jsxDEV("button",{onClick:ne,className:"icon-btn hover:bg-accent hover:border-accent",title:"Shuffle playlist (S)","aria-label":"Shuffle playlist",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("polyline",{points:"16 3 21 3 21 8"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:784,columnNumber:23},this),C.jsxDEV("line",{x1:"4",y1:"20",x2:"21",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:785,columnNumber:23},this),C.jsxDEV("polyline",{points:"21 16 21 21 16 21"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:786,columnNumber:23},this),C.jsxDEV("line",{x1:"15",y1:"15",x2:"21",y2:"21"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:787,columnNumber:23},this),C.jsxDEV("line",{x1:"4",y1:"4",x2:"9",y2:"9"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:788,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:783,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:777,columnNumber:19},this),C.jsxDEV("button",{onClick:ae,className:"icon-btn hover:bg-accent hover:border-accent "+(E?"bg-accent border-accent":""),title:E?"Disable loop (L)":"Enable loop (L)","aria-label":E?"Disable loop":"Enable loop",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M17 1l4 4-4 4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:799,columnNumber:23},this),C.jsxDEV("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:800,columnNumber:23},this),C.jsxDEV("path",{d:"M7 23l-4-4 4-4"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:801,columnNumber:23},this),C.jsxDEV("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:802,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:798,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:792,columnNumber:19},this),C.jsxDEV("button",{onClick:se,disabled:j===Z.length-1&&!E,className:"icon-btn hover:bg-accent hover:border-accent disabled:opacity-30 disabled:cursor-not-allowed",title:"Next video (N)","aria-label":"Go to next video",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:C.jsxDEV("path",{d:"M6 6l8.5 6L6 18V6zm10.5 0v12h2V6h-2z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:814,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:813,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:806,columnNumber:19},this),C.jsxDEV("button",{ref:q,onClick:()=>R(!0),className:"icon-btn hover:bg-accent hover:border-accent",title:"Add to playlist","aria-label":"Add video to playlist",children:C.jsxDEV(Ee,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:826,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:819,columnNumber:19},this),C.jsxDEV("button",{onClick:ue,className:"icon-btn hover:bg-accent hover:border-accent "+(ee.watched?"bg-accent":""),title:ee.watched?"Mark as unwatched":"Mark as watched","aria-label":ee.watched?"Mark video as unwatched":"Mark video as watched",children:C.jsxDEV(Ve,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:836,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:830,columnNumber:19},this),C.jsxDEV("button",{onClick:()=>O(!0),className:"icon-btn hover:bg-red-600 hover:border-red-700",title:"Delete video","aria-label":"Delete video permanently",children:C.jsxDEV(ve,{className:"w-5 h-5"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:846,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:840,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:764,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:743,columnNumber:15},this),C.jsxDEV("div",{className:"overflow-y-auto flex-1",children:Z.map((e,t)=>{const r=U[e];if(!r)return null;const n=t===j;return C.jsxDEV("button",{onClick:()=>oe(t),className:"w-full p-2 flex gap-2 hover:bg-surface-hover transition-colors "+(n?"bg-accent/20":""),children:[C.jsxDEV("div",{className:"relative flex-shrink-0 w-20 h-12 bg-black rounded overflow-hidden",children:[r.thumb_url?C.jsxDEV("img",{src:r.thumb_url,alt:r.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:868,columnNumber:25},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center bg-surface-hover",children:C.jsxDEV("svg",{className:"w-8 h-8 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:876,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:875,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:874,columnNumber:25},this),C.jsxDEV("div",{className:"absolute bottom-1 right-1 bg-black/80 text-white text-xs px-1.5 py-0.5 rounded",children:_e(r.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:880,columnNumber:23},this),r.watched&&C.jsxDEV("div",{className:"absolute top-1 left-1 bg-accent/90 text-accent-text text-xs px-1.5 py-0.5 rounded flex items-center gap-1",children:C.jsxDEV(xe,{className:"w-3 h-3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:885,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:884,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:866,columnNumber:21},this),C.jsxDEV("div",{className:"flex-1 text-left min-w-0",children:[C.jsxDEV("h3",{className:"text-xs font-medium line-clamp-2 leading-tight "+(n?"text-accent-text":"text-text-primary"),children:r.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:891,columnNumber:23},this),C.jsxDEV("p",{className:"text-xs text-text-secondary mt-0.5",children:r.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:896,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:890,columnNumber:21},this),n&&C.jsxDEV("div",{className:"flex-shrink-0 flex items-center",children:C.jsxDEV(ye,{className:"w-5 h-5 text-accent"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:903,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:902,columnNumber:23},this)]},r.id,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:859,columnNumber:19},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:851,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:742,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:689,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:565,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:564,columnNumber:7},this),S&&C.jsxDEV("div",{className:"md:hidden fixed inset-0 bg-black/50 z-[200] animate-fade-in",onClick:()=>P(!1),children:C.jsxDEV("div",{ref:B,className:"absolute bottom-0 left-0 right-0 bg-dark-secondary rounded-t-2xl max-h-[80vh] flex flex-col animate-slide-up",onClick:e=>e.stopPropagation(),children:[C.jsxDEV("div",{className:"p-4 border-b border-accent/30 flex items-center justify-between",children:[C.jsxDEV("div",{children:[C.jsxDEV("h2",{className:"text-lg font-semibold text-text-primary",children:H},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:929,columnNumber:17},this),C.jsxDEV("p",{className:"text-sm text-text-secondary mt-1",children:[j+1," / ",U.length," videos"]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:932,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:928,columnNumber:15},this),C.jsxDEV("button",{onClick:()=>P(!1),className:"icon-btn","aria-label":"Close queue",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M18 6L6 18M6 6l12 12"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:942,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:941,columnNumber:17},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:936,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:927,columnNumber:13},this),C.jsxDEV("div",{className:"overflow-y-auto flex-1",children:Z.map((e,t)=>{const r=U[e];if(!r)return null;const n=t===j;return C.jsxDEV("button",{onClick:()=>{oe(t),P(!1)},className:"w-full p-3 flex gap-3 hover:bg-dark-hover transition-colors "+(n?"bg-accent/20":"bg-dark-secondary"),children:[C.jsxDEV("div",{className:"relative flex-shrink-0 w-32 h-18 bg-black rounded overflow-hidden",children:[r.thumb_url?C.jsxDEV("img",{src:r.thumb_url,alt:r.title,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:967,columnNumber:25},this):C.jsxDEV("div",{className:"w-full h-full flex items-center justify-center bg-surface-hover",children:C.jsxDEV("svg",{className:"w-8 h-8 text-text-muted",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsxDEV("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:975,columnNumber:29},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:974,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:973,columnNumber:25},this),C.jsxDEV("div",{className:"absolute bottom-1 right-1 bg-black/80 text-white text-xs px-1.5 py-0.5 rounded",children:_e(r.duration_sec)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:979,columnNumber:23},this),r.watched&&C.jsxDEV("div",{className:"absolute top-1 left-1 bg-accent/90 text-accent-text text-xs px-1.5 py-0.5 rounded flex items-center gap-1",children:C.jsxDEV(xe,{className:"w-3 h-3"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:984,columnNumber:27},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:983,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:965,columnNumber:21},this),C.jsxDEV("div",{className:"flex-1 text-left min-w-0",children:[C.jsxDEV("h3",{className:"text-xs font-medium line-clamp-2 leading-tight "+(n?"text-accent-text":"text-text-primary"),children:r.title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:990,columnNumber:23},this),C.jsxDEV("p",{className:"text-xs text-text-secondary mt-0.5",children:r.channel_title},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:995,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:989,columnNumber:21},this),n&&C.jsxDEV("div",{className:"flex-shrink-0 flex items-center",children:C.jsxDEV(ye,{className:"w-5 h-5 text-accent"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1002,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1001,columnNumber:23},this)]},r.id,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:955,columnNumber:19},this)})},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:947,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:922,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:918,columnNumber:9},this),C.jsxDEV("video",{ref:Q,style:{display:"none"},preload:"auto"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1014,columnNumber:7},this),C.jsxDEV(Ae,{isOpen:F,onClose:()=>O(!1),onConfirm:de,title:"Delete Video",message:`Are you sure you want to delete "${ee.title}"? This will permanently remove the video file from your system.`,confirmText:"Delete",cancelText:"Cancel",isDanger:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1021,columnNumber:9},this),I&&C.jsxDEV(Le,{videoId:ee.id,video:ee,triggerRef:q,onClose:()=>R(!1)},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:1034,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:562,columnNumber:5},this):C.jsxDEV("div",{className:"text-center py-12",children:[C.jsxDEV("p",{className:"text-gray-400 text-lg",children:"Video not downloaded yet"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:553,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>s(-1),className:"btn btn-primary mt-4",children:"Go Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:554,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:552,columnNumber:7},this):C.jsxDEV("div",{className:"text-center py-12",children:[C.jsxDEV("p",{className:"text-gray-400 text-lg",children:"No video selected"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:542,columnNumber:9},this),C.jsxDEV("button",{onClick:()=>s(-1),className:"btn btn-primary mt-4",children:"Go Back"},void 0,!1,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:543,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/PlaylistPlayer.jsx",lineNumber:541,columnNumber:7},this)}function Cn(){const e=m(),{showNotification:r}=A(),[n,a]=t.useState(""),[s,i]=t.useState(""),[o,l]=t.useState(""),[d,c]=t.useState(!1),[u,p]=t.useState("");return C.jsxDEV("div",{className:"h-screen flex items-center justify-center p-4 bg-dark-primary overflow-hidden",children:C.jsxDEV("div",{className:"card p-6 sm:p-8 max-w-md w-full",children:[C.jsxDEV("div",{className:"mb-4 sm:mb-6",children:[C.jsxDEV("h1",{className:"text-xl sm:text-2xl font-bold text-text-primary mb-1 sm:mb-2",children:"Setup Login Credentials"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:74,columnNumber:11},this),C.jsxDEV("p",{className:"text-text-secondary text-xs sm:text-sm",children:"Create your username and password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:77,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:73,columnNumber:9},this),C.jsxDEV("form",{onSubmit:async t=>{if(t.preventDefault(),p(""),n&&s&&o)if(n.length<3)p("Username must be at least 3 characters");else if(s.length<3)p("Password must be at least 3 characters");else if(s===o){c(!0);try{const t=await fetch("/api/auth/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:s})}),a=await t.json();if(!t.ok)return p(a.error||"Failed to save credentials"),void c(!1);r("Credentials saved! Please log in.","success"),setTimeout(()=>{e("/login")},1500)}catch(a){p("Failed to connect to server"),c(!1)}}else p("Passwords do not match");else p("All fields are required")},className:"space-y-3 sm:space-y-4",children:[C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs sm:text-sm font-medium text-text-secondary mb-1.5 sm:mb-2",children:"Username"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:84,columnNumber:13},this),C.jsxDEV("input",{type:"text",value:n,onChange:e=>a(e.target.value),placeholder:"Choose a username",className:"input w-full py-2 px-3 text-sm",disabled:d,autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:87,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:83,columnNumber:11},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs sm:text-sm font-medium text-text-secondary mb-1.5 sm:mb-2",children:"Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:99,columnNumber:13},this),C.jsxDEV("input",{type:"password",value:s,onChange:e=>i(e.target.value),placeholder:"Choose a password",className:"input w-full py-2 px-3 text-sm",disabled:d},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:102,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:98,columnNumber:11},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs sm:text-sm font-medium text-text-secondary mb-1.5 sm:mb-2",children:"Confirm Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:113,columnNumber:13},this),C.jsxDEV("input",{type:"password",value:o,onChange:e=>l(e.target.value),placeholder:"Confirm your password",className:"input w-full py-2 px-3 text-sm",disabled:d},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:116,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:112,columnNumber:11},this),u&&C.jsxDEV("div",{className:"bg-red-900/20 border border-red-500 text-red-400 px-3 py-2 sm:px-4 sm:py-3 rounded-lg text-xs sm:text-sm",children:u},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:127,columnNumber:13},this),C.jsxDEV("button",{type:"submit",disabled:d,className:"btn bg-red-700 hover:bg-red-800 text-text-primary font-bold w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:d?"Saving...":"Complete Setup"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:132,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:82,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:72,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Setup.jsx",lineNumber:71,columnNumber:5},this)}function Sn(){m();const{showNotification:e}=A(),[r,n]=t.useState(""),[a,s]=t.useState(""),[i,o]=t.useState(!1),[l,d]=t.useState(!1),[c,u]=t.useState("");return C.jsxDEV("div",{className:"h-screen flex items-center justify-center p-4 bg-dark-primary overflow-hidden",children:C.jsxDEV("div",{className:"card p-6 sm:p-8 max-w-md w-full",children:[C.jsxDEV("div",{className:"mb-4 sm:mb-6",children:[C.jsxDEV("h1",{className:"text-xl sm:text-2xl font-bold text-text-primary mb-1 sm:mb-2",children:"Login"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:55,columnNumber:11},this),C.jsxDEV("p",{className:"text-text-secondary text-xs sm:text-sm",children:"Enter your credentials to continue"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:58,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:54,columnNumber:9},this),C.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),u(""),r&&a){d(!0);try{const e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:r,password:a,remember_me:i})}),t=await e.json();if(!e.ok)return u(t.error||"Login failed"),void d(!1);window.location.replace("/")}catch(t){u("Failed to connect to server"),d(!1)}}else u("Username and password are required")},className:"space-y-3 sm:space-y-4",children:[C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs sm:text-sm font-medium text-text-secondary mb-1.5 sm:mb-2",children:"Username"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:65,columnNumber:13},this),C.jsxDEV("input",{type:"text",value:r,onChange:e=>n(e.target.value),placeholder:"Enter your username",className:"input w-full py-2 px-3 text-sm",disabled:l,autoFocus:!0},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:68,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:64,columnNumber:11},this),C.jsxDEV("div",{children:[C.jsxDEV("label",{className:"block text-xs sm:text-sm font-medium text-text-secondary mb-1.5 sm:mb-2",children:"Password"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:80,columnNumber:13},this),C.jsxDEV("input",{type:"password",value:a,onChange:e=>s(e.target.value),placeholder:"Enter your password",className:"input w-full py-2 px-3 text-sm",disabled:l},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:83,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:79,columnNumber:11},this),c&&C.jsxDEV("div",{className:"bg-red-900/20 border border-red-500 text-red-400 px-3 py-2 sm:px-4 sm:py-3 rounded-lg text-xs sm:text-sm",children:c},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:94,columnNumber:13},this),C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("input",{type:"checkbox",id:"rememberMe",checked:i,onChange:e=>o(e.target.checked),className:"w-3.5 h-3.5 sm:w-4 sm:h-4 rounded border-dark-border bg-dark-tertiary text-accent-text focus:ring-accent focus:ring-offset-0 flex-shrink-0"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:100,columnNumber:13},this),C.jsxDEV("label",{htmlFor:"rememberMe",className:"text-xs sm:text-sm text-text-secondary cursor-pointer",children:"Remember me for 1 year (otherwise 90 days)"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:107,columnNumber:13},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:99,columnNumber:11},this),C.jsxDEV("button",{type:"submit",disabled:l,className:"btn bg-gray-700 hover:bg-gray-600 text-text-primary font-bold w-full disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:l?"Logging in...":"Login"},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:112,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:63,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:53,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/routes/Login.jsx",lineNumber:52,columnNumber:5},this)}function Pn({to:e,icon:t,label:r,badge:n,onClick:a,isButton:s=!1,className:i=""}){const o=h(),l=`nav-tab ${e&&o.pathname===e?"active":""} ${i}`;return s?C.jsxDEV("button",{onClick:a,className:l,children:[t,C.jsxDEV("span",{children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/NavItem.jsx",lineNumber:18,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/NavItem.jsx",lineNumber:16,columnNumber:7},this):C.jsxDEV(p,{to:e,onClick:a,className:l,children:[t,C.jsxDEV("span",{children:r},void 0,!1,{fileName:"/appdata/frontend/src/components/NavItem.jsx",lineNumber:27,columnNumber:7},this),n>0&&C.jsxDEV("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:n},void 0,!1,{fileName:"/appdata/frontend/src/components/NavItem.jsx",lineNumber:29,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/components/NavItem.jsx",lineNumber:25,columnNumber:5},this)}function _n(){const e=h(),n=m(),{data:a}=ee(),{data:s}=te(),{notification:i}=A(),{theme:o}=R(),[l,d]=t.useState(!1),[c,u]=t.useState(null),[f,b]=t.useState(null),N=t.useRef(null),[g,j]=t.useState(!1),D=t.useRef(null),E=t.useRef(!1),[V,w]=t.useState(()=>{const e=localStorage.getItem("statusBarVisible");return null===e||"true"===e});t.useEffect(()=>{const e=()=>{const e=localStorage.getItem("statusBarVisible");w(null===e||"true"===e)},t=e=>{w(e.detail.visible)};return window.addEventListener("storage",e),window.addEventListener("statusBarVisibilityChanged",t),()=>{window.removeEventListener("storage",e),window.removeEventListener("statusBarVisibilityChanged",t)}},[]);const k=t.useMemo(()=>"online"===o||"pixel"===o||"debug"===o,[o]),S=a?.queue_items||a||[],P=a?.current_download||null,_=a?.current_operation||null,L=a?.delay_info||null,M=a?.is_paused||!1,T=a?.is_auto_refreshing||!1,I=a?.last_auto_refresh||null,F=a?.last_error_message||null,O=a?.cookie_warning_message||null;t.useEffect(()=>{if(!l)return;const e=async()=>{try{const e=await B.getLogs(500);u(e)}catch(e){}};e();const t=setInterval(e,1e3);return()=>clearInterval(t)},[l]),t.useEffect(()=>{if("scan_complete"!==_?.type)return;const e=async()=>{try{await B.clearOperation()}catch(e){console.error("Failed to clear operation:",e)}};return document.addEventListener("click",e,{once:!0}),()=>{document.removeEventListener("click",e)}},[_?.type]),t.useEffect(()=>{if("scan_complete"===_?.type){(async()=>{try{await B.clearOperation()}catch(e){console.error("Failed to clear operation:",e)}})()}},[e.pathname,_?.type]),t.useEffect(()=>{if(!O)return;const e=async()=>{if(!E.current){E.current=!0;try{await fetch("/api/cookie-warning/clear",{method:"POST",credentials:"include"})}catch(e){console.error("Failed to clear cookie warning:",e)}setTimeout(()=>{E.current=!1},1e3)}};return document.addEventListener("click",e,{once:!0}),()=>{document.removeEventListener("click",e)}},[O]),t.useEffect(()=>{if(O){(async()=>{if(!E.current){E.current=!0;try{await fetch("/api/cookie-warning/clear",{method:"POST",credentials:"include"})}catch(e){console.error("Failed to clear cookie warning:",e)}setTimeout(()=>{E.current=!1},1e3)}})()}},[e.pathname,O]),t.useEffect(()=>{if(F&&F!==N.current){N.current=F,b(F);const e=setTimeout(()=>{b(null)},1e4);return()=>clearTimeout(e)}!F&&N.current&&(N.current=null,b(null))},[F]),t.useEffect(()=>{const e=e=>{D.current&&!D.current.contains(e.target)&&j(!1)};if(g)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[g]);const{data:$,isLoading:z,error:Q}=r({queryKey:["auth","first-run"],queryFn:()=>B.checkFirstRun(),retry:!1,staleTime:1/0,refetchOnWindowFocus:!0}),{data:q,isLoading:W,error:U}=r({queryKey:["auth","check"],queryFn:()=>B.checkAuth(),retry:!1,staleTime:1/0,refetchOnWindowFocus:!0}),H=$?.first_run||!1,J=q?.authenticated||!1,Y=z||W,G=S?.filter(e=>"downloading"===e.video?.status).length||0,K=S?.filter(e=>"queued"===e.video?.status).length||0,X=S?.find(e=>e.log)?.log||null;t.useEffect(()=>{/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&"/login"!==e.pathname&&"/setup"!==e.pathname&&"/"!==e.pathname&&localStorage.setItem("last-mobile-path",e.pathname+e.search)},[e.pathname,e.search]),t.useEffect(()=>{const t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),r=sessionStorage.getItem("mobile-path-restored");if(t&&J&&"/"===e.pathname&&!r){const e=localStorage.getItem("last-mobile-path");e&&"/"!==e&&(n(e,{replace:!0}),sessionStorage.setItem("mobile-path-restored","true"))}},[J,e.pathname,n]),t.useEffect(()=>{!sessionStorage.getItem("queue-auto-nav")&&"/"===e.pathname&&(K>0||G>0)&&(n("/queue"),sessionStorage.setItem("queue-auto-nav","true"))},[e.pathname,K,G,n]);const Z=t.useMemo(()=>[{path:"/",label:"Channels",icon:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("path",{d:"M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:289,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:288,columnNumber:9},this)},{path:"/library",label:"Library",icon:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:298,columnNumber:11},this),C.jsxDEV("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:299,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:297,columnNumber:9},this)},{path:"/videos",label:"Videos",icon:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:308,columnNumber:11},this),C.jsxDEV("polyline",{points:"14 2 14 8 20 8"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:309,columnNumber:11},this),C.jsxDEV("line",{x1:"16",y1:"13",x2:"8",y2:"13"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:310,columnNumber:11},this),C.jsxDEV("line",{x1:"16",y1:"17",x2:"8",y2:"17"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:311,columnNumber:11},this),C.jsxDEV("polyline",{points:"10 9 9 9 8 9"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:312,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:307,columnNumber:9},this)},{path:"/queue",label:"Queue",badge:K+G,icon:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:322,columnNumber:11},this),C.jsxDEV("polyline",{points:"7 10 12 15 17 10"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:323,columnNumber:11},this),C.jsxDEV("line",{x1:"12",y1:"15",x2:"12",y2:"3"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:324,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:321,columnNumber:9},this)}],[K,G]);if(Y)return C.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-dark-primary",children:C.jsxDEV("div",{className:"text-text-secondary",children:"Loading..."},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:334,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:333,columnNumber:7},this);if(H&&"/setup"!==e.pathname)return C.jsxDEV(x,{to:"/setup",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:341,columnNumber:12},this);const re="/setup"===e.pathname||"/login"===e.pathname,ne=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),window.location.replace("/login")}catch(e){console.error("Logout failed:",e),window.location.replace("/login")}};return C.jsxDEV("div",{className:"min-h-screen flex flex-col bg-dark-primary",children:[!re&&C.jsxDEV("header",{className:"bg-dark-primary/95 backdrop-blur-lg sticky top-0 z-50 border-b border-dark-border",children:C.jsxDEV("div",{className:"max-w-screen-2xl mx-auto px-6 lg:px-12 xl:px-16",children:C.jsxDEV("div",{className:"flex items-center justify-center gap-1 md:gap-2 h-[60px]",children:[C.jsxDEV("nav",{role:"navigation","aria-label":"Main navigation",className:"flex gap-1 md:gap-2",children:Z.map(e=>C.jsxDEV(Pn,{to:e.path,icon:C.jsxDEV("span",{className:"hidden md:inline-flex",children:e.icon},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:377,columnNumber:23},this),label:e.label,badge:e.badge,className:"snap-start flex-shrink-0 px-3 md:px-4"},e.path,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:374,columnNumber:15},this))},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:372,columnNumber:11},this),C.jsxDEV(Pn,{to:"/settings",icon:C.jsxDEV(he,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:388,columnNumber:19},this),label:"Settings",className:"hidden md:flex"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:386,columnNumber:11},this),C.jsxDEV(Pn,{isButton:!0,onClick:ne,icon:C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:399,columnNumber:17},this),C.jsxDEV("polyline",{points:"16 17 21 12 16 7"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:400,columnNumber:17},this),C.jsxDEV("line",{x1:"21",y1:"12",x2:"9",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:401,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:398,columnNumber:15},this),label:"Logout",className:"hidden md:flex"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:394,columnNumber:11},this),C.jsxDEV("div",{className:"relative flex-shrink-0 md:hidden",ref:D,children:[C.jsxDEV("button",{onClick:()=>j(!g),className:"flex items-center justify-center p-2 rounded-lg transition-colors "+(g?"bg-dark-tertiary text-text-primary":"bg-dark-secondary text-text-secondary hover:bg-dark-tertiary"),title:"More options",children:C.jsxDEV("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:[C.jsxDEV("circle",{cx:"12",cy:"5",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:420,columnNumber:17},this),C.jsxDEV("circle",{cx:"12",cy:"12",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:421,columnNumber:17},this),C.jsxDEV("circle",{cx:"12",cy:"19",r:"2"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:422,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:419,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:410,columnNumber:13},this),g&&C.jsxDEV("div",{className:"absolute right-0 mt-2 w-48 bg-dark-secondary border border-dark-border rounded-lg shadow-xl py-1 z-50",children:[C.jsxDEV(p,{to:"/settings",onClick:()=>j(!1),className:"w-full px-4 py-2 text-left text-sm text-text-primary hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV(he,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:434,columnNumber:19},this),"Settings"]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:429,columnNumber:17},this),C.jsxDEV("button",{onClick:ne,className:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-dark-hover transition-colors flex items-center gap-2",children:[C.jsxDEV("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:442,columnNumber:21},this),C.jsxDEV("polyline",{points:"16 17 21 12 16 7"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:443,columnNumber:21},this),C.jsxDEV("line",{x1:"21",y1:"12",x2:"9",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:444,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:441,columnNumber:19},this),"Logout"]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:437,columnNumber:17},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:428,columnNumber:15},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:409,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:370,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:368,columnNumber:11},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:367,columnNumber:9},this),C.jsxDEV("main",{className:"flex-1 w-full "+(re?"":"px-6 lg:px-12 xl:px-16 pb-2"),children:C.jsxDEV(v,{children:[C.jsxDEV(y,{path:"/setup",element:C.jsxDEV(Cn,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:461,columnNumber:41},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:461,columnNumber:11},this),C.jsxDEV(y,{path:"/login",element:C.jsxDEV(Sn,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:462,columnNumber:41},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:462,columnNumber:11},this),C.jsxDEV(y,{path:"/",element:J?C.jsxDEV(pe,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:463,columnNumber:54},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:463,columnNumber:69},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:463,columnNumber:11},this),C.jsxDEV(y,{path:"/videos",element:J?C.jsxDEV(Fe,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:464,columnNumber:60},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:464,columnNumber:73},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:464,columnNumber:11},this),C.jsxDEV(y,{path:"/library",element:J?C.jsxDEV(Se,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:465,columnNumber:61},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:465,columnNumber:75},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:465,columnNumber:11},this),C.jsxDEV(y,{path:"/channel/:channelId",element:J?C.jsxDEV(Ie,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:466,columnNumber:72},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:466,columnNumber:93},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:466,columnNumber:11},this),C.jsxDEV(y,{path:"/channel/:channelId/library",element:J?C.jsxDEV(Ie,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:467,columnNumber:80},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:467,columnNumber:101},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:467,columnNumber:11},this),C.jsxDEV(y,{path:"/playlist/:id",element:J?C.jsxDEV(Re,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:468,columnNumber:66},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:468,columnNumber:81},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:468,columnNumber:11},this),C.jsxDEV(y,{path:"/queue",element:J?C.jsxDEV(vn,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:469,columnNumber:59},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:469,columnNumber:71},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:469,columnNumber:11},this),C.jsxDEV(y,{path:"/settings",element:J?C.jsxDEV(yn,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:470,columnNumber:62},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:470,columnNumber:77},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:470,columnNumber:11},this),C.jsxDEV(y,{path:"/player/:videoId",element:J?C.jsxDEV(wn,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:471,columnNumber:69},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:471,columnNumber:82},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:471,columnNumber:11},this),C.jsxDEV(y,{path:"/play/playlist/:playlistId",element:J?C.jsxDEV(kn,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:472,columnNumber:79},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:472,columnNumber:100},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:472,columnNumber:11},this),C.jsxDEV(y,{path:"/play/category/:categoryId",element:J?C.jsxDEV(kn,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:473,columnNumber:79},this):C.jsxDEV(x,{to:"/login",replace:!0},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:473,columnNumber:100},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:473,columnNumber:11},this),C.jsxDEV(y,{path:"*",element:C.jsxDEV(Ln,{},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:474,columnNumber:36},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:474,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:460,columnNumber:9},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:459,columnNumber:7},this),!re&&V&&(G>0||K>0||"scan_complete"===_?.type||"scanning"===_?.type||i||T||L||f||O||s)&&C.jsxDEV("footer",{className:"hidden md:block bg-dark-primary sticky bottom-0 z-50 pb-safe",children:[C.jsxDEV("div",{className:"overflow-hidden transition-all duration-300 ease-in-out hidden md:block "+(l?"max-h-64 opacity-100":"max-h-0 opacity-0"),children:C.jsxDEV("div",{className:(k?"bg-gray-800":"bg-dark-primary")+" shadow-lg",children:C.jsxDEV("div",{className:"px-4 py-3 max-h-48 md:max-h-64 overflow-auto font-mono text-xs",children:c?.logs&&c.logs.length>0?C.jsxDEV("div",{className:"space-y-0.5",children:c.logs.slice(-10).map((e,t)=>{const r="text-white",n=e.match(/^(.* - )(\[(?:ERROR|WARNING|INFO|API|DEBUG)\])( - .*)$/);if(n){const[,e,a,s]=n,i=a.includes("ERROR")?"text-red-400":a.includes("WARNING")?"text-yellow-400":a.includes("INFO")?"text-blue-400":a.includes("API")?"text-purple-400":a.includes("DEBUG")?"text-gray-400":r;return C.jsxDEV("div",{className:r,children:[e,C.jsxDEV("span",{className:i,children:a},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:508,columnNumber:37},this),s]},t,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:507,columnNumber:27},this)}return C.jsxDEV("div",{className:r,children:e},t,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:514,columnNumber:25},this)})},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:490,columnNumber:19},this):C.jsxDEV("div",{className:"text-text-muted text-center py-4",children:"No logs available"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:521,columnNumber:19},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:488,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:487,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:482,columnNumber:11},this),C.jsxDEV("div",{className:"px-4 py-2 bg-dark-secondary/50 backdrop-blur-sm relative",children:C.jsxDEV("div",{className:"flex items-center justify-between text-sm font-mono",children:C.jsxDEV("div",{className:"flex items-center gap-2 text-text-secondary overflow-x-auto scrollbar-hide scroll-smooth whitespace-nowrap flex-1",children:[C.jsxDEV("button",{onClick:()=>d(!l),className:"font-semibold text-text-primary hover:text-accent-text transition-colors cursor-pointer hidden md:flex items-center gap-1",title:"Click to view recent logs",children:["Status:",C.jsxDEV("svg",{className:"w-3 h-3 transition-transform "+(l?"rotate-180":""),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"6 9 12 15 18 9"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:541,columnNumber:21},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:540,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:534,columnNumber:17},this),(K>0||G>0)&&!P&&C.jsxDEV("span",{className:"text-text-secondary flex-shrink-0",children:["[",C.jsxDEV("span",{className:"text-text-muted font-bold",children:K+G},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:548,columnNumber:22},this)," queued]"]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:547,columnNumber:19},this),i&&C.jsxDEV("div",{className:"flex items-center gap-2 animate-fade-in flex-shrink-0",children:["success"===i.type&&C.jsxDEV("svg",{className:"w-4 h-4 text-accent-text",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:557,columnNumber:25},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:556,columnNumber:23},this),"error"===i.type&&C.jsxDEV("svg",{className:"w-4 h-4 text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:562,columnNumber:25},this),C.jsxDEV("line",{x1:"15",y1:"9",x2:"9",y2:"15"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:563,columnNumber:25},this),C.jsxDEV("line",{x1:"9",y1:"9",x2:"15",y2:"15"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:564,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:561,columnNumber:23},this),"info"===i.type&&C.jsxDEV("svg",{className:"w-4 h-4 text-blue-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:569,columnNumber:25},this),C.jsxDEV("path",{d:"M12 16v-4"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:570,columnNumber:25},this),C.jsxDEV("path",{d:"M12 8h.01"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:571,columnNumber:25},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:568,columnNumber:23},this),C.jsxDEV("span",{className:"font-medium "+("success"===i.type?"text-accent-text":"error"===i.type?"text-red-400":"text-blue-400"),children:i.message},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:574,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:554,columnNumber:19},this),!i&&"scan_complete"===_?.type&&_?.message&&C.jsxDEV("div",{className:"flex items-center gap-2 flex-shrink-0",children:[C.jsxDEV("svg",{className:"w-4 h-4 text-accent-text",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:C.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:588,columnNumber:23},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:587,columnNumber:21},this),C.jsxDEV("span",{className:"text-accent-text font-medium",children:_.message},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:590,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:586,columnNumber:19},this),!i&&"scanning"===_?.type&&_?.message&&C.jsxDEV("div",{className:"flex items-center gap-2 flex-shrink-0",children:[C.jsxDEV("div",{className:"flex gap-1",children:[C.jsxDEV("span",{className:"w-2 h-2 bg-accent rounded-full animate-pulse"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:600,columnNumber:23},this),C.jsxDEV("span",{className:"w-2 h-2 bg-accent rounded-full animate-pulse [animation-delay:0.2s]"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:601,columnNumber:23},this),C.jsxDEV("span",{className:"w-2 h-2 bg-accent rounded-full animate-pulse [animation-delay:0.4s]"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:602,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:599,columnNumber:21},this),C.jsxDEV("span",{className:"text-accent-text",children:_.message},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:604,columnNumber:21},this),C.jsxDEV("div",{className:"animate-spin h-4 w-4 border-2 border-accent-text border-t-transparent rounded-full"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:608,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:598,columnNumber:19},this),!i&&"scan_complete"!==_?.type&&"scanning"!==_?.type&&M&&K>0&&C.jsxDEV("div",{className:"flex items-center gap-2 flex-shrink-0",children:[C.jsxDEV("svg",{className:"w-4 h-4 text-yellow-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("rect",{x:"6",y:"4",width:"4",height:"16"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:616,columnNumber:23},this),C.jsxDEV("rect",{x:"14",y:"4",width:"4",height:"16"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:617,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:615,columnNumber:21},this),C.jsxDEV("span",{className:"text-yellow-400",children:X||"Queue paused. Press Resume to continue."},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:619,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:614,columnNumber:19},this),f&&!i&&"scan_complete"!==_?.type&&"scanning"!==_?.type&&!O&&C.jsxDEV("div",{className:"flex items-center gap-2 flex-shrink-0",children:[C.jsxDEV("svg",{className:"w-4 h-4 text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("circle",{cx:"12",cy:"12",r:"10"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:629,columnNumber:23},this),C.jsxDEV("line",{x1:"12",y1:"8",x2:"12",y2:"12"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:630,columnNumber:23},this),C.jsxDEV("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:631,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:628,columnNumber:21},this),C.jsxDEV("span",{className:"text-red-400",children:f},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:633,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:627,columnNumber:19},this),O&&!i&&"scan_complete"!==_?.type&&"scanning"!==_?.type&&C.jsxDEV("div",{className:"flex items-center gap-2 flex-shrink-0",children:[C.jsxDEV("svg",{className:"w-4 h-4 text-yellow-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[C.jsxDEV("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:641,columnNumber:23},this),C.jsxDEV("line",{x1:"12",y1:"9",x2:"12",y2:"13"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:642,columnNumber:23},this),C.jsxDEV("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:643,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:640,columnNumber:21},this),C.jsxDEV("span",{className:"text-yellow-400",children:O},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:645,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:639,columnNumber:19},this),!i&&"scan_complete"!==_?.type&&"scanning"!==_?.type&&!M&&P&&C.jsxDEV("div",{className:"flex items-center gap-2 flex-shrink-0",children:[C.jsxDEV("span",{className:"text-text-secondary",children:["[",C.jsxDEV("span",{className:"text-text-muted font-bold",children:K+G},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:654,columnNumber:24},this)," queued",P.speed_bps>0&&C.jsxDEV("span",{children:[" / ",C.jsxDEV("span",{className:"text-text-primary",children:[(P.speed_bps/1024/1024).toFixed(1)," MB/s"]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:656,columnNumber:34},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:656,columnNumber:25},this),P.eta_seconds>0&&C.jsxDEV("span",{children:[" ETA: ",C.jsxDEV("span",{className:"text-text-primary",children:[Math.floor(P.eta_seconds/60),":",Math.floor(P.eta_seconds%60).toString().padStart(2,"0")]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:659,columnNumber:37},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:659,columnNumber:25},this),"]"]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:653,columnNumber:21},this),C.jsxDEV("span",{className:"text-text-secondary",children:["[",C.jsxDEV("span",{className:"text-accent-text font-bold",children:[Math.round(P.progress_pct),"%"]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:664,columnNumber:24},this),"/100%]"]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:663,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:651,columnNumber:19},this),!i&&"scan_complete"!==_?.type&&"scanning"!==_?.type&&!P&&G>0&&C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("div",{className:"flex gap-1",children:[C.jsxDEV("span",{className:"w-2 h-2 bg-accent rounded-full animate-pulse"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:673,columnNumber:23},this),C.jsxDEV("span",{className:"w-2 h-2 bg-accent rounded-full animate-pulse [animation-delay:0.2s]"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:674,columnNumber:23},this),C.jsxDEV("span",{className:"w-2 h-2 bg-accent rounded-full animate-pulse [animation-delay:0.4s]"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:675,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:672,columnNumber:21},this),C.jsxDEV("span",{className:"text-text-primary",children:["Downloading ",C.jsxDEV("span",{className:"text-accent-text font-bold",children:G},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:678,columnNumber:35},this)," video",G>1?"s":""]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:677,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:671,columnNumber:19},this),!i&&"scan_complete"!==_?.type&&"scanning"!==_?.type&&!P&&0===G&&L&&C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("div",{className:"flex gap-1",children:[C.jsxDEV("span",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:687,columnNumber:23},this),C.jsxDEV("span",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse [animation-delay:0.2s]"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:688,columnNumber:23},this),C.jsxDEV("span",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse [animation-delay:0.4s]"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:689,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:686,columnNumber:21},this),C.jsxDEV("span",{className:"text-orange-400",children:L},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:691,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:685,columnNumber:19},this),!i&&"scan_complete"!==_?.type&&"scanning"!==_?.type&&!P&&!L&&T&&C.jsxDEV("div",{className:"flex items-center gap-2",children:[C.jsxDEV("div",{className:"flex gap-1",children:[C.jsxDEV("span",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:699,columnNumber:23},this),C.jsxDEV("span",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse [animation-delay:0.2s]"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:700,columnNumber:23},this),C.jsxDEV("span",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse [animation-delay:0.4s]"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:701,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:698,columnNumber:21},this),C.jsxDEV("span",{className:"text-yellow-400",children:"Auto-refreshing channels..."},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:703,columnNumber:21},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:697,columnNumber:19},this),!i&&"scan_complete"!==_?.type&&"scanning"!==_?.type&&!P&&!L&&!T&&!M&&0===G&&s?.auto_refresh_enabled&&C.jsxDEV("span",{className:"text-text-secondary",children:["Auto-refresh ",C.jsxDEV("span",{className:"text-accent-text",children:"enabled"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:709,columnNumber:34},this)," for ",s.auto_refresh_time||"03:00",I&&C.jsxDEV("span",{className:"text-text-muted ml-2",children:["(last: ",new Date(I).toLocaleTimeString(),")"]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:711,columnNumber:23},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:708,columnNumber:19},this),!i&&"scan_complete"!==_?.type&&"scanning"!==_?.type&&!P&&0===G&&!L&&!T&&!s?.auto_refresh_enabled&&C.jsxDEV("span",{className:"text-accent-text",children:"Idle"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:720,columnNumber:19},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:532,columnNumber:15},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:531,columnNumber:13},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:530,columnNumber:11},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:480,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:364,columnNumber:5},this)}function Ln(){return C.jsxDEV("div",{className:"flex items-center justify-center h-full",children:C.jsxDEV("div",{className:"text-center",children:[C.jsxDEV("h1",{className:"text-4xl mb-4 text-text-primary",children:"404"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:736,columnNumber:9},this),C.jsxDEV("p",{className:"text-text-secondary mb-6",children:"Page not found"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:737,columnNumber:9},this),C.jsxDEV(p,{to:"/",className:"text-accent hover:text-accent-hover hover:underline transition-colors",children:"Go Home"},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:738,columnNumber:9},this)]},void 0,!0,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:735,columnNumber:7},this)},void 0,!1,{fileName:"/appdata/frontend/src/App.jsx",lineNumber:734,columnNumber:5},this)}const An=new o({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5e3,gcTime:3e5}}});P.createRoot(document.getElementById("root")).render(C.jsxDEV(s.StrictMode,{children:C.jsxDEV(z,{children:C.jsxDEV(l,{client:An,children:C.jsxDEV(I,{children:C.jsxDEV(L,{children:C.jsxDEV(O,{children:C.jsxDEV(g,{children:C.jsxDEV(_n,{},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:33,columnNumber:17},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:32,columnNumber:15},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:31,columnNumber:13},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:30,columnNumber:11},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:29,columnNumber:9},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:28,columnNumber:7},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:27,columnNumber:5},void 0)},void 0,!1,{fileName:"/appdata/frontend/src/main.jsx",lineNumber:26,columnNumber:3},void 0));
